/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={1581:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const i=n(7159),r=n(3924),o=n(1240),a=n(98),s=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends i.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((t=>this.addVocabulary(t))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const t=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(t,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.exports=e=u,Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var h=n(4815);Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return h.KeywordCxt}});var c=n(3487);Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}})},7023:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class n{}e._CodeOrName=n,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=i;class r extends n{constructor(t){super(),this._items="string"==typeof t?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const t=this._items[0];return""===t||'""'===t}get str(){var t;return null!==(t=this._str)&&void 0!==t?t:this._str=this._items.reduce(((t,e)=>`${t}${e}`),"")}get names(){var t;return null!==(t=this._names)&&void 0!==t?t:this._names=this._items.reduce(((t,e)=>(e instanceof i&&(t[e.str]=(t[e.str]||0)+1),t)),{})}}function o(t,...e){const n=[t[0]];let i=0;for(;i<e.length;)l(n,e[i]),n.push(t[++i]);return new r(n)}e._Code=r,e.nil=new r(""),e._=o;const a=new r("+");function s(t,...e){const n=[h(t[0])];let i=0;for(;i<e.length;)n.push(a),l(n,e[i]),n.push(a,h(t[++i]));return function(t){let e=1;for(;e<t.length-1;){if(t[e]===a){const n=u(t[e-1],t[e+1]);if(void 0!==n){t.splice(e-1,3,n);continue}t[e++]="+"}e++}}(n),new r(n)}function l(t,e){var n;e instanceof r?t.push(...e._items):e instanceof i?t.push(e):t.push("number"==typeof(n=e)||"boolean"==typeof n||null===n?n:h(Array.isArray(n)?n.join(","):n))}function u(t,e){if('""'===e)return t;if('""'===t)return e;if("string"==typeof t){if(e instanceof i||'"'!==t[t.length-1])return;return"string"!=typeof e?`${t.slice(0,-1)}${e}"`:'"'===e[0]?t.slice(0,-1)+e.slice(1):void 0}return"string"!=typeof e||'"'!==e[0]||t instanceof i?void 0:`"${t}${e.slice(1)}`}function h(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=s,e.addCodeArg=l,e.strConcat=function(t,e){return e.emptyStr()?t:t.emptyStr()?e:s`${t}${e}`},e.stringify=function(t){return new r(h(t))},e.safeStringify=h,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(`.${t}`):o`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(t){return new r(t.toString())}},3487:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const i=n(7023),r=n(8490);var o=n(7023);Object.defineProperty(e,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return o.Name}});var a=n(8490);Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class s{optimizeNodes(){return this}optimizeNames(t,e){return this}}class l extends s{constructor(t,e,n){super(),this.varKind=t,this.name=e,this.rhs=n}render({es5:t,_n:e}){const n=t?r.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+e}optimizeNames(t,e){if(t[this.name.str])return this.rhs&&(this.rhs=E(this.rhs,t,e)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class u extends s{constructor(t,e,n){super(),this.lhs=t,this.rhs=e,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,e){if(!(this.lhs instanceof i.Name)||t[this.lhs.str]||this.sideEffects)return this.rhs=E(this.rhs,t,e),this}get names(){return k(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class h extends u{constructor(t,e,n,i){super(t,n,i),this.op=e}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}}class c extends s{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}}class d extends s{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}}class f extends s{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}}class p extends s{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,e){return this.code=E(this.code,t,e),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class g extends s{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce(((e,n)=>e+n.render(t)),"")}optimizeNodes(){const{nodes:t}=this;let e=t.length;for(;e--;){const n=t[e].optimizeNodes();Array.isArray(n)?t.splice(e,1,...n):n?t[e]=n:t.splice(e,1)}return t.length>0?this:void 0}optimizeNames(t,e){const{nodes:n}=this;let i=n.length;for(;i--;){const r=n[i];r.optimizeNames(t,e)||(O(t,r.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((t,e)=>L(t,e.names)),{})}}class m extends g{render(t){return"{"+t._n+super.render(t)+"}"+t._n}}class v extends g{}class y extends m{}y.kind="else";class _ extends m{constructor(t,e){super(e),this.condition=t}render(t){let e=`if(${this.condition})`+super.render(t);return this.else&&(e+="else "+this.else.render(t)),e}optimizeNodes(){super.optimizeNodes();const t=this.condition;if(!0===t)return this.nodes;let e=this.else;if(e){const t=e.optimizeNodes();e=this.else=Array.isArray(t)?new y(t):t}return e?!1===t?e instanceof _?e:e.nodes:this.nodes.length?this:new _(N(t),e instanceof _?[e]:e.nodes):!1!==t&&this.nodes.length?this:void 0}optimizeNames(t,e){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(t,e),super.optimizeNames(t,e)||this.else)return this.condition=E(this.condition,t,e),this}get names(){const t=super.names;return k(t,this.condition),this.else&&L(t,this.else.names),t}}_.kind="if";class x extends m{}x.kind="for";class w extends x{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iteration=E(this.iteration,t,e),this}get names(){return L(super.names,this.iteration.names)}}class b extends x{constructor(t,e,n,i){super(),this.varKind=t,this.name=e,this.from=n,this.to=i}render(t){const e=t.es5?r.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${e} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(t)}get names(){const t=k(super.names,this.from);return k(t,this.to)}}class S extends x{constructor(t,e,n,i){super(),this.loop=t,this.varKind=e,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iterable=E(this.iterable,t,e),this}get names(){return L(super.names,this.iterable.names)}}class M extends m{constructor(t,e,n){super(),this.name=t,this.args=e,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}}M.kind="func";class P extends g{render(t){return"return "+super.render(t)}}P.kind="return";class T extends m{render(t){let e="try"+super.render(t);return this.catch&&(e+=this.catch.render(t)),this.finally&&(e+=this.finally.render(t)),e}optimizeNodes(){var t,e;return super.optimizeNodes(),null===(t=this.catch)||void 0===t||t.optimizeNodes(),null===(e=this.finally)||void 0===e||e.optimizeNodes(),this}optimizeNames(t,e){var n,i;return super.optimizeNames(t,e),null===(n=this.catch)||void 0===n||n.optimizeNames(t,e),null===(i=this.finally)||void 0===i||i.optimizeNames(t,e),this}get names(){const t=super.names;return this.catch&&L(t,this.catch.names),this.finally&&L(t,this.finally.names),t}}class C extends m{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}}C.kind="catch";class A extends m{render(t){return"finally"+super.render(t)}}function L(t,e){for(const n in e)t[n]=(t[n]||0)+(e[n]||0);return t}function k(t,e){return e instanceof i._CodeOrName?L(t,e.names):t}function E(t,e,n){return t instanceof i.Name?o(t):(r=t)instanceof i._Code&&r._items.some((t=>t instanceof i.Name&&1===e[t.str]&&void 0!==n[t.str]))?new i._Code(t._items.reduce(((t,e)=>(e instanceof i.Name&&(e=o(e)),e instanceof i._Code?t.push(...e._items):t.push(e),t)),[])):t;var r;function o(t){const i=n[t.str];return void 0===i||1!==e[t.str]?t:(delete e[t.str],i)}}function O(t,e){for(const n in e)t[n]=(t[n]||0)-(e[n]||0)}function N(t){return"boolean"==typeof t||"number"==typeof t||null===t?!t:i._`!${j(t)}`}A.kind="finally",e.CodeGen=class{constructor(t,e={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...e,_n:e.lines?"\n":""},this._extScope=t,this._scope=new r.Scope({parent:t}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,e){const n=this._extScope.value(t,e);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,e){return this._extScope.getValue(t,e)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,e,n,i){const r=this._scope.toName(e);return void 0!==n&&i&&(this._constants[r.str]=n),this._leafNode(new l(t,r,n)),r}const(t,e,n){return this._def(r.varKinds.const,t,e,n)}let(t,e,n){return this._def(r.varKinds.let,t,e,n)}var(t,e,n){return this._def(r.varKinds.var,t,e,n)}assign(t,e,n){return this._leafNode(new u(t,e,n))}add(t,n){return this._leafNode(new h(t,e.operators.ADD,n))}code(t){return"function"==typeof t?t():t!==i.nil&&this._leafNode(new p(t)),this}object(...t){const e=["{"];for(const[n,r]of t)e.length>1&&e.push(","),e.push(n),(n!==r||this.opts.es5)&&(e.push(":"),(0,i.addCodeArg)(e,r));return e.push("}"),new i._Code(e)}if(t,e,n){if(this._blockNode(new _(t)),e&&n)this.code(e).else().code(n).endIf();else if(e)this.code(e).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new _(t))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(_,y)}_for(t,e){return this._blockNode(t),e&&this.code(e).endFor(),this}for(t,e){return this._for(new w(t),e)}forRange(t,e,n,i,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const a=this._scope.toName(t);return this._for(new b(o,a,e,n),(()=>i(a)))}forOf(t,e,n,o=r.varKinds.const){const a=this._scope.toName(t);if(this.opts.es5){const t=e instanceof i.Name?e:this.var("_arr",e);return this.forRange("_i",0,i._`${t}.length`,(e=>{this.var(a,i._`${t}[${e}]`),n(a)}))}return this._for(new S("of",o,a,e),(()=>n(a)))}forIn(t,e,n,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(t,i._`Object.keys(${e})`,n);const a=this._scope.toName(t);return this._for(new S("in",o,a,e),(()=>n(a)))}endFor(){return this._endBlockNode(x)}label(t){return this._leafNode(new c(t))}break(t){return this._leafNode(new d(t))}return(t){const e=new P;if(this._blockNode(e),this.code(t),1!==e.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(P)}try(t,e,n){if(!e&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new T;if(this._blockNode(i),this.code(t),e){const t=this.name("e");this._currNode=i.catch=new C(t),e(t)}return n&&(this._currNode=i.finally=new A,this.code(n)),this._endBlockNode(C,A)}throw(t){return this._leafNode(new f(t))}block(t,e){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(e),this}endBlock(t){const e=this._blockStarts.pop();if(void 0===e)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-e;if(n<0||void 0!==t&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=e,this}func(t,e=i.nil,n,r){return this._blockNode(new M(t,e,n)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(M)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,e){const n=this._currNode;if(n instanceof t||e&&n instanceof e)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${e?`${t.kind}/${e.kind}`:t.kind}"`)}_elseNode(t){const e=this._currNode;if(!(e instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=e.else=t,this}get _root(){return this._nodes[0]}get _currNode(){const t=this._nodes;return t[t.length-1]}set _currNode(t){const e=this._nodes;e[e.length-1]=t}},e.not=N;const I=D(e.operators.AND);e.and=function(...t){return t.reduce(I)};const R=D(e.operators.OR);function D(t){return(e,n)=>e===i.nil?n:n===i.nil?e:i._`${j(e)} ${t} ${j(n)}`}function j(t){return t instanceof i.Name?t:i._`(${t})`}e.or=function(...t){return t.reduce(R)}},8490:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const i=n(7023);class r extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var o;!function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"}(o=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class a{constructor({prefixes:t,parent:e}={}){this._names={},this._prefixes=t,this._parent=e}toName(t){return t instanceof i.Name?t:this.name(t)}name(t){return new i.Name(this._newName(t))}_newName(t){return`${t}${(this._names[t]||this._nameGroup(t)).index++}`}_nameGroup(t){var e,n;if((null===(n=null===(e=this._parent)||void 0===e?void 0:e._prefixes)||void 0===n?void 0:n.has(t))||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}e.Scope=a;class s extends i.Name{constructor(t,e){super(e),this.prefix=t}setValue(t,{property:e,itemIndex:n}){this.value=t,this.scopePath=i._`.${new i.Name(e)}[${n}]`}}e.ValueScopeName=s;const l=i._`\n`;e.ValueScope=class extends a{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?l:i.nil}}get(){return this._scope}name(t){return new s(t,this._newName(t))}value(t,e){var n;if(void 0===e.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(t),{prefix:r}=i,o=null!==(n=e.key)&&void 0!==n?n:e.ref;let a=this._values[r];if(a){const t=a.get(o);if(t)return t}else a=this._values[r]=new Map;a.set(o,i);const s=this._scope[r]||(this._scope[r]=[]),l=s.length;return s[l]=e.ref,i.setValue(e,{property:r,itemIndex:l}),i}getValue(t,e){const n=this._values[t];if(n)return n.get(e)}scopeRefs(t,e=this._values){return this._reduceValues(e,(e=>{if(void 0===e.scopePath)throw new Error(`CodeGen: name "${e}" has no value`);return i._`${t}${e.scopePath}`}))}scopeCode(t=this._values,e,n){return this._reduceValues(t,(t=>{if(void 0===t.value)throw new Error(`CodeGen: name "${t}" has no value`);return t.value.code}),e,n)}_reduceValues(t,n,a={},s){let l=i.nil;for(const u in t){const h=t[u];if(!h)continue;const c=a[u]=a[u]||new Map;h.forEach((t=>{if(c.has(t))return;c.set(t,o.Started);let a=n(t);if(a){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;l=i._`${l}${n} ${t} = ${a};${this.opts._n}`}else{if(!(a=null==s?void 0:s(t)))throw new r(t);l=i._`${l}${a}${this.opts._n}`}c.set(t,o.Completed)}))}return l}}},4181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const i=n(3487),r=n(6776),o=n(2141);function a(t,e){const n=t.const("err",e);t.if(i._`${o.default.vErrors} === null`,(()=>t.assign(o.default.vErrors,i._`[${n}]`)),i._`${o.default.vErrors}.push(${n})`),t.code(i._`${o.default.errors}++`)}function s(t,e){const{gen:n,validateName:r,schemaEnv:o}=t;o.$async?n.throw(i._`new ${t.ValidationError}(${e})`):(n.assign(i._`${r}.errors`,e),n.return(!1))}e.keywordError={message:({keyword:t})=>i.str`must pass "${t}" keyword validation`},e.keyword$DataError={message:({keyword:t,schemaType:e})=>e?i.str`"${t}" keyword must be ${e} ($data)`:i.str`"${t}" keyword is invalid ($data)`},e.reportError=function(t,n=e.keywordError,r,o){const{it:l}=t,{gen:h,compositeRule:c,allErrors:d}=l,f=u(t,n,r);(null!=o?o:c||d)?a(h,f):s(l,i._`[${f}]`)},e.reportExtraError=function(t,n=e.keywordError,i){const{it:r}=t,{gen:l,compositeRule:h,allErrors:c}=r;a(l,u(t,n,i)),h||c||s(r,o.default.vErrors)},e.resetErrorsCount=function(t,e){t.assign(o.default.errors,e),t.if(i._`${o.default.vErrors} !== null`,(()=>t.if(e,(()=>t.assign(i._`${o.default.vErrors}.length`,e)),(()=>t.assign(o.default.vErrors,null)))))},e.extendErrors=function({gen:t,keyword:e,schemaValue:n,data:r,errsCount:a,it:s}){if(void 0===a)throw new Error("ajv implementation error");const l=t.name("err");t.forRange("i",a,o.default.errors,(a=>{t.const(l,i._`${o.default.vErrors}[${a}]`),t.if(i._`${l}.instancePath === undefined`,(()=>t.assign(i._`${l}.instancePath`,(0,i.strConcat)(o.default.instancePath,s.errorPath)))),t.assign(i._`${l}.schemaPath`,i.str`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign(i._`${l}.schema`,n),t.assign(i._`${l}.data`,r))}))};const l={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema")};function u(t,e,n){const{createErrors:r}=t.it;return!1===r?i._`{}`:function(t,e,n={}){const{gen:r,it:a}=t,s=[h(a,n),c(t,n)];return function(t,{params:e,message:n},r){const{keyword:a,data:s,schemaValue:u,it:h}=t,{opts:c,propertyName:d,topSchemaRef:f,schemaPath:p}=h;r.push([l.keyword,a],[l.params,"function"==typeof e?e(t):e||i._`{}`]),c.messages&&r.push([l.message,"function"==typeof n?n(t):n]),c.verbose&&r.push([l.schema,u],[l.parentSchema,i._`${f}${p}`],[o.default.data,s]),d&&r.push([l.propertyName,d])}(t,e,s),r.object(...s)}(t,e,n)}function h({errorPath:t},{instancePath:e}){const n=e?i.str`${t}${(0,r.getErrorPath)(e,r.Type.Str)}`:t;return[o.default.instancePath,(0,i.strConcat)(o.default.instancePath,n)]}function c({keyword:t,it:{errSchemaPath:e}},{schemaPath:n,parentSchema:o}){let a=o?e:i.str`${e}/${t}`;return n&&(a=i.str`${a}${(0,r.getErrorPath)(n,r.Type.Str)}`),[l.schemaPath,a]}},5173:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.getCompilingSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;const i=n(3487),r=n(7426),o=n(2141),a=n(2531),s=n(6776),l=n(4815),u=n(540);class h{constructor(t){var e;let n;this.refs={},this.dynamicAnchors={},"object"==typeof t.schema&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(e=t.baseId)&&void 0!==e?e:(0,a.normalizeId)(null==n?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function c(t){const e=f.call(this,t);if(e)return e;const n=(0,a.getFullPath)(t.root.baseId),{es5:s,lines:u}=this.opts.code,{ownProperties:h}=this.opts,c=new i.CodeGen(this.scope,{es5:s,lines:u,ownProperties:h});let d;t.$async&&(d=c.scopeValue("Error",{ref:r.default,code:i._`require("ajv/dist/runtime/validation_error").default`}));const p=c.scopeName("validate");t.validateName=p;const g={gen:c,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",!0===this.opts.code.source?{ref:t.schema,code:(0,i.stringify)(t.schema)}:{ref:t.schema}),validateName:p,ValidationError:d,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:i.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:i._`""`,opts:this.opts,self:this};let m;try{this._compilations.add(t),(0,l.validateFunctionCode)(g),c.optimize(this.opts.code.optimize);const e=c.toString();m=`${c.scopeRefs(o.default.scope)}return ${e}`,this.opts.code.process&&(m=this.opts.code.process(m,t));const n=new Function(`${o.default.self}`,`${o.default.scope}`,m)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=t.schema,n.schemaEnv=t,t.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:e,scopeValues:c._values}),this.opts.unevaluated){const{props:t,items:e}=g;n.evaluated={props:t instanceof i.Name?void 0:t,items:e instanceof i.Name?void 0:e,dynamicProps:t instanceof i.Name,dynamicItems:e instanceof i.Name},n.source&&(n.source.evaluated=(0,i.stringify)(n.evaluated))}return t.validate=n,t}catch(e){throw delete t.validate,delete t.validateName,m&&this.logger.error("Error compiling schema, function code:",m),e}finally{this._compilations.delete(t)}}function d(t){return(0,a.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:c.call(this,t)}function f(t){for(const i of this._compilations)if(n=t,(e=i).schema===n.schema&&e.root===n.root&&e.baseId===n.baseId)return i;var e,n}function p(t,e){let n;for(;"string"==typeof(n=this.refs[e]);)e=n;return n||this.schemas[e]||g.call(this,t,e)}function g(t,e){const n=u.parse(e),i=(0,a._getFullPath)(n);let r=(0,a.getFullPath)(t.baseId);if(Object.keys(t.schema).length>0&&i===r)return v.call(this,n,t);const o=(0,a.normalizeId)(i),s=this.refs[o]||this.schemas[o];if("string"==typeof s){const e=g.call(this,t,s);if("object"!=typeof(null==e?void 0:e.schema))return;return v.call(this,n,e)}if("object"==typeof(null==s?void 0:s.schema)){if(s.validate||c.call(this,s),o===(0,a.normalizeId)(e)){const{schema:e}=s,{schemaId:n}=this.opts,i=e[n];return i&&(r=(0,a.resolveUrl)(r,i)),new h({schema:e,schemaId:n,root:t,baseId:r})}return v.call(this,n,s)}}e.SchemaEnv=h,e.compileSchema=c,e.resolveRef=function(t,e,n){var i;n=(0,a.resolveUrl)(e,n);const r=t.refs[n];if(r)return r;let o=p.call(this,t,n);if(void 0===o){const r=null===(i=t.localRefs)||void 0===i?void 0:i[n],{schemaId:a}=this.opts;r&&(o=new h({schema:r,schemaId:a,root:t,baseId:e}))}return void 0!==o?t.refs[n]=d.call(this,o):void 0},e.getCompilingSchema=f,e.resolveSchema=g;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(t,{baseId:e,schema:n,root:i}){var r;if("/"!==(null===(r=t.fragment)||void 0===r?void 0:r[0]))return;for(const i of t.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const t=n[(0,s.unescapeFragment)(i)];if(void 0===t)return;const r="object"==typeof(n=t)&&n[this.opts.schemaId];!m.has(i)&&r&&(e=(0,a.resolveUrl)(e,r))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,s.schemaHasRulesButRef)(n,this.RULES)){const t=(0,a.resolveUrl)(e,n.$ref);o=g.call(this,i,t)}const{schemaId:l}=this.opts;return o=o||new h({schema:n,schemaId:l,root:i,baseId:e}),o.schema!==o.root.schema?o:void 0}},2141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r={data:new i.Name("data"),valCxt:new i.Name("valCxt"),instancePath:new i.Name("instancePath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};e.default=r},6646:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(2531);class r extends Error{constructor(t,e,n){super(n||`can't resolve reference ${e} from id ${t}`),this.missingRef=(0,i.resolveUrl)(t,e),this.missingSchema=(0,i.normalizeId)((0,i.getFullPath)(this.missingRef))}}e.default=r},2531:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;const i=n(6776),r=n(4063),o=n(9461),a=n(540),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);e.inlineRef=function(t,e=!0){return"boolean"==typeof t||(!0===e?!u(t):!!e&&h(t)<=e)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(t){for(const e in t){if(l.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(u))return!0;if("object"==typeof n&&u(n))return!0}return!1}function h(t){let e=0;for(const n in t){if("$ref"===n)return 1/0;if(e++,!s.has(n)&&("object"==typeof t[n]&&(0,i.eachItem)(t[n],(t=>e+=h(t))),e===1/0))return 1/0}return e}function c(t="",e){return!1!==e&&(t=p(t)),d(a.parse(t))}function d(t){return a.serialize(t).split("#")[0]+"#"}e.getFullPath=c,e._getFullPath=d;const f=/#\/?$/;function p(t){return t?t.replace(f,""):""}e.normalizeId=p,e.resolveUrl=function(t,e){return e=p(e),a.resolve(t,e)};const g=/^[a-z_][-a-z0-9._]*$/i;e.getSchemaRefs=function(t,e){if("boolean"==typeof t)return{};const{schemaId:n}=this.opts,i=p(t[n]||e),s={"":i},l=c(i,!1),u={},h=new Set;return o(t,{allKeys:!0},((t,e,i,r)=>{if(void 0===r)return;const o=l+e;let c=s[r];function m(e){if(e=p(c?a.resolve(c,e):e),h.has(e))throw f(e);h.add(e);let n=this.refs[e];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?d(t,n.schema,e):e!==p(o)&&("#"===e[0]?(d(t,u[e],e),u[e]=t):this.refs[e]=o),e}function v(t){if("string"==typeof t){if(!g.test(t))throw new Error(`invalid anchor "${t}"`);m.call(this,`#${t}`)}}"string"==typeof t[n]&&(c=m.call(this,t[n])),v.call(this,t.$anchor),v.call(this,t.$dynamicAnchor),s[e]=c})),u;function d(t,e,n){if(void 0!==e&&!r(t,e))throw f(n)}function f(t){return new Error(`reference "${t}" resolves to more than one schema`)}}},3141:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);e.isJSONType=function(t){return"string"==typeof t&&n.has(t)},e.getRules=function(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}},6776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const i=n(3487),r=n(7023);function o(t,e=t.schema){const{opts:n,self:i}=t;if(!n.strictSchema)return;if("boolean"==typeof e)return;const r=i.RULES.keywords;for(const n in e)r[n]||p(t,`unknown keyword: "${n}"`)}function a(t,e){if("boolean"==typeof t)return!t;for(const n in t)if(e[n])return!0;return!1}function s(t){return"number"==typeof t?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}function l(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function u({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(o,a,s,l)=>{const u=void 0===s?a:s instanceof i.Name?(a instanceof i.Name?t(o,a,s):e(o,a,s),s):a instanceof i.Name?(e(o,s,a),a):n(a,s);return l!==i.Name||u instanceof i.Name?u:r(o,u)}}function h(t,e){if(!0===e)return t.var("props",!0);const n=t.var("props",i._`{}`);return void 0!==e&&c(t,n,e),n}function c(t,e,n){Object.keys(n).forEach((n=>t.assign(i._`${e}${(0,i.getProperty)(n)}`,!0)))}e.toHash=function(t){const e={};for(const n of t)e[n]=!0;return e},e.alwaysValidSchema=function(t,e){return"boolean"==typeof e?e:0===Object.keys(e).length||(o(t,e),!a(e,t.self.RULES.all))},e.checkUnknownRules=o,e.schemaHasRules=a,e.schemaHasRulesButRef=function(t,e){if("boolean"==typeof t)return!t;for(const n in t)if("$ref"!==n&&e.all[n])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:t,schemaPath:e},n,r,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${t}${e}${(0,i.getProperty)(r)}`},e.unescapeFragment=function(t){return l(decodeURIComponent(t))},e.escapeFragment=function(t){return encodeURIComponent(s(t))},e.escapeJsonPointer=s,e.unescapeJsonPointer=l,e.eachItem=function(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)},e.mergeEvaluated={props:u({mergeNames:(t,e,n)=>t.if(i._`${n} !== true && ${e} !== undefined`,(()=>{t.if(i._`${e} === true`,(()=>t.assign(n,!0)),(()=>t.assign(n,i._`${n} || {}`).code(i._`Object.assign(${n}, ${e})`)))})),mergeToName:(t,e,n)=>t.if(i._`${n} !== true`,(()=>{!0===e?t.assign(n,!0):(t.assign(n,i._`${n} || {}`),c(t,n,e))})),mergeValues:(t,e)=>!0===t||{...t,...e},resultToName:h}),items:u({mergeNames:(t,e,n)=>t.if(i._`${n} !== true && ${e} !== undefined`,(()=>t.assign(n,i._`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`))),mergeToName:(t,e,n)=>t.if(i._`${n} !== true`,(()=>t.assign(n,!0===e||i._`${n} > ${e} ? ${n} : ${e}`))),mergeValues:(t,e)=>!0===t||Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})},e.evaluatedPropsToName=h,e.setEvaluated=c;const d={};var f;function p(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,!0===n)throw new Error(e);t.self.logger.warn(e)}}e.useFunc=function(t,e){return t.scopeValue("func",{ref:e,code:d[e.code]||(d[e.code]=new r._Code(e.code))})},function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"}(f=e.Type||(e.Type={})),e.getErrorPath=function(t,e,n){if(t instanceof i.Name){const r=e===f.Num;return n?r?i._`"[" + ${t} + "]"`:i._`"['" + ${t} + "']"`:r?i._`"/" + ${t}`:i._`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,i.getProperty)(t).toString():"/"+s(t)},e.checkStrictMode=p},8876:(t,e)=>{"use strict";function n(t,e){return e.rules.some((e=>i(t,e)))}function i(t,e){var n;return void 0!==t[e.keyword]||(null===(n=e.definition.implements)||void 0===n?void 0:n.some((e=>void 0!==t[e])))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0,e.schemaHasRulesForType=function({schema:t,self:e},i){const r=e.RULES.types[i];return r&&!0!==r&&n(t,r)},e.shouldUseGroup=n,e.shouldUseRule=i},5667:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;const i=n(4181),r=n(3487),o=n(2141),a={message:"boolean schema is false"};function s(t,e){const{gen:n,data:r}=t,o={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,i.reportError)(o,a,void 0,e)}e.topBoolOrEmptySchema=function(t){const{gen:e,schema:n,validateName:i}=t;!1===n?s(t,!1):"object"==typeof n&&!0===n.$async?e.return(o.default.data):(e.assign(r._`${i}.errors`,null),e.return(!0))},e.boolOrEmptySchema=function(t,e){const{gen:n,schema:i}=t;!1===i?(n.var(e,!1),s(t)):n.var(e,!0)}},453:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const i=n(3141),r=n(8876),o=n(4181),a=n(3487),s=n(6776);var l;function u(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(i.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}!function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"}(l=e.DataType||(e.DataType={})),e.getSchemaTypes=function(t){const e=u(t.type);if(e.includes("null")){if(!1===t.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&void 0!==t.nullable)throw new Error('"nullable" cannot be used without "type"');!0===t.nullable&&e.push("null")}return e},e.getJSONTypes=u,e.coerceAndCheckDataType=function(t,e){const{gen:n,data:i,opts:o}=t,s=function(t,e){return e?t.filter((t=>h.has(t)||"array"===e&&"array"===t)):[]}(e,o.coerceTypes),u=e.length>0&&!(0===s.length&&1===e.length&&(0,r.schemaHasRulesForType)(t,e[0]));if(u){const r=d(e,i,o.strictNumbers,l.Wrong);n.if(r,(()=>{s.length?function(t,e,n){const{gen:i,data:r,opts:o}=t,s=i.let("dataType",a._`typeof ${r}`),l=i.let("coerced",a._`undefined`);"array"===o.coerceTypes&&i.if(a._`${s} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,(()=>i.assign(r,a._`${r}[0]`).assign(s,a._`typeof ${r}`).if(d(e,r,o.strictNumbers),(()=>i.assign(l,r))))),i.if(a._`${l} !== undefined`);for(const t of n)(h.has(t)||"array"===t&&"array"===o.coerceTypes)&&u(t);function u(t){switch(t){case"string":return void i.elseIf(a._`${s} == "number" || ${s} == "boolean"`).assign(l,a._`"" + ${r}`).elseIf(a._`${r} === null`).assign(l,a._`""`);case"number":return void i.elseIf(a._`${s} == "boolean" || ${r} === null
              || (${s} == "string" && ${r} && ${r} == +${r})`).assign(l,a._`+${r}`);case"integer":return void i.elseIf(a._`${s} === "boolean" || ${r} === null
              || (${s} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(l,a._`+${r}`);case"boolean":return void i.elseIf(a._`${r} === "false" || ${r} === 0 || ${r} === null`).assign(l,!1).elseIf(a._`${r} === "true" || ${r} === 1`).assign(l,!0);case"null":return i.elseIf(a._`${r} === "" || ${r} === 0 || ${r} === false`),void i.assign(l,null);case"array":i.elseIf(a._`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${r} === null`).assign(l,a._`[${r}]`)}}i.else(),p(t),i.endIf(),i.if(a._`${l} !== undefined`,(()=>{i.assign(r,l),function({gen:t,parentData:e,parentDataProperty:n},i){t.if(a._`${e} !== undefined`,(()=>t.assign(a._`${e}[${n}]`,i)))}(t,l)}))}(t,e,s):p(t)}))}return u};const h=new Set(["string","number","integer","boolean","null"]);function c(t,e,n,i=l.Correct){const r=i===l.Correct?a.operators.EQ:a.operators.NEQ;let o;switch(t){case"null":return a._`${e} ${r} null`;case"array":o=a._`Array.isArray(${e})`;break;case"object":o=a._`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=s(a._`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=s();break;default:return a._`typeof ${e} ${r} ${t}`}return i===l.Correct?o:(0,a.not)(o);function s(t=a.nil){return(0,a.and)(a._`typeof ${e} == "number"`,t,n?a._`isFinite(${e})`:a.nil)}}function d(t,e,n,i){if(1===t.length)return c(t[0],e,n,i);let r;const o=(0,s.toHash)(t);if(o.array&&o.object){const t=a._`typeof ${e} != "object"`;r=o.null?t:a._`!${e} || ${t}`,delete o.null,delete o.array,delete o.object}else r=a.nil;o.number&&delete o.integer;for(const t in o)r=(0,a.and)(r,c(t,e,n,i));return r}e.checkDataType=c,e.checkDataTypes=d;const f={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>"string"==typeof t?a._`{type: ${t}}`:a._`{type: ${e}}`};function p(t){const e=function(t){const{gen:e,data:n,schema:i}=t,r=(0,s.schemaRefOrVal)(t,i,"type");return{gen:e,keyword:"type",data:n,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:t}}(t);(0,o.reportError)(e,f)}e.reportTypeError=p},313:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;const i=n(3487),r=n(6776);function o(t,e,n){const{gen:o,compositeRule:a,data:s,opts:l}=t;if(void 0===n)return;const u=i._`${s}${(0,i.getProperty)(e)}`;if(a)return void(0,r.checkStrictMode)(t,`default is ignored for: ${u}`);let h=i._`${u} === undefined`;"empty"===l.useDefaults&&(h=i._`${h} || ${u} === null || ${u} === ""`),o.if(h,i._`${u} = ${(0,i.stringify)(n)}`)}e.assignDefaults=function(t,e){const{properties:n,items:i}=t.schema;if("object"===e&&n)for(const e in n)o(t,e,n[e].default);else"array"===e&&Array.isArray(i)&&i.forEach(((e,n)=>o(t,n,e.default)))}},4815:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.KeywordCxt=e.validateFunctionCode=void 0;const i=n(5667),r=n(453),o=n(8876),a=n(453),s=n(313),l=n(5005),u=n(3099),h=n(3487),c=n(2141),d=n(2531),f=n(6776),p=n(4181);function g({gen:t,validateName:e,schema:n,schemaEnv:i,opts:r},o){r.code.es5?t.func(e,h._`${c.default.data}, ${c.default.valCxt}`,i.$async,(()=>{t.code(h._`"use strict"; ${m(n,r)}`),function(t,e){t.if(c.default.valCxt,(()=>{t.var(c.default.instancePath,h._`${c.default.valCxt}.${c.default.instancePath}`),t.var(c.default.parentData,h._`${c.default.valCxt}.${c.default.parentData}`),t.var(c.default.parentDataProperty,h._`${c.default.valCxt}.${c.default.parentDataProperty}`),t.var(c.default.rootData,h._`${c.default.valCxt}.${c.default.rootData}`),e.dynamicRef&&t.var(c.default.dynamicAnchors,h._`${c.default.valCxt}.${c.default.dynamicAnchors}`)}),(()=>{t.var(c.default.instancePath,h._`""`),t.var(c.default.parentData,h._`undefined`),t.var(c.default.parentDataProperty,h._`undefined`),t.var(c.default.rootData,c.default.data),e.dynamicRef&&t.var(c.default.dynamicAnchors,h._`{}`)}))}(t,r),t.code(o)})):t.func(e,h._`${c.default.data}, ${function(t){return h._`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${t.dynamicRef?h._`, ${c.default.dynamicAnchors}={}`:h.nil}}={}`}(r)}`,i.$async,(()=>t.code(m(n,r)).code(o)))}function m(t,e){const n="object"==typeof t&&t[e.schemaId];return n&&(e.code.source||e.code.process)?h._`/*# sourceURL=${n} */`:h.nil}function v({schema:t,self:e}){if("boolean"==typeof t)return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function y(t){return"boolean"!=typeof t.schema}function _(t){(0,f.checkUnknownRules)(t),function(t){const{schema:e,errSchemaPath:n,opts:i,self:r}=t;e.$ref&&i.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(e,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(t)}function x(t,e){if(t.opts.jtd)return b(t,[],!1,e);const n=(0,r.getSchemaTypes)(t.schema);b(t,n,!(0,r.coerceAndCheckDataType)(t,n),e)}function w({gen:t,schemaEnv:e,schema:n,errSchemaPath:i,opts:r}){const o=n.$comment;if(!0===r.$comment)t.code(h._`${c.default.self}.logger.log(${o})`);else if("function"==typeof r.$comment){const n=h.str`${i}/$comment`,r=t.scopeValue("root",{ref:e.root});t.code(h._`${c.default.self}.opts.$comment(${o}, ${n}, ${r}.schema)`)}}function b(t,e,n,i){const{gen:r,schema:s,data:l,allErrors:u,opts:d,self:p}=t,{RULES:g}=p;function m(f){(0,o.shouldUseGroup)(s,f)&&(f.type?(r.if((0,a.checkDataType)(f.type,l,d.strictNumbers)),S(t,f),1===e.length&&e[0]===f.type&&n&&(r.else(),(0,a.reportTypeError)(t)),r.endIf()):S(t,f),u||r.if(h._`${c.default.errors} === ${i||0}`))}!s.$ref||!d.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(s,g)?(d.jtd||function(t,e){!t.schemaEnv.meta&&t.opts.strictTypes&&(function(t,e){e.length&&(t.dataTypes.length?(e.forEach((e=>{M(t.dataTypes,e)||P(t,`type "${e}" not allowed by context "${t.dataTypes.join(",")}"`)})),t.dataTypes=t.dataTypes.filter((t=>M(e,t)))):t.dataTypes=e)}(t,e),t.opts.allowUnionTypes||function(t,e){e.length>1&&(2!==e.length||!e.includes("null"))&&P(t,"use allowUnionTypes to allow union type keyword")}(t,e),function(t,e){const n=t.self.RULES.all;for(const i in n){const r=n[i];if("object"==typeof r&&(0,o.shouldUseRule)(t.schema,r)){const{type:n}=r.definition;n.length&&!n.some((t=>{return i=t,(n=e).includes(i)||"number"===i&&n.includes("integer");var n,i}))&&P(t,`missing type "${n.join(",")}" for keyword "${i}"`)}}}(t,t.dataTypes))}(t,e),r.block((()=>{for(const t of g.rules)m(t);m(g.post)}))):r.block((()=>C(t,"$ref",g.all.$ref.definition)))}function S(t,e){const{gen:n,schema:i,opts:{useDefaults:r}}=t;r&&(0,s.assignDefaults)(t,e.type),n.block((()=>{for(const n of e.rules)(0,o.shouldUseRule)(i,n)&&C(t,n.keyword,n.definition,e.type)}))}function M(t,e){return t.includes(e)||"integer"===e&&t.includes("number")}function P(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,(0,f.checkStrictMode)(t,e,t.opts.strictTypes)}e.validateFunctionCode=function(t){y(t)&&(_(t),v(t))?function(t){const{schema:e,opts:n,gen:i}=t;g(t,(()=>{n.$comment&&e.$comment&&w(t),function(t){const{schema:e,opts:n}=t;void 0!==e.default&&n.useDefaults&&n.strictSchema&&(0,f.checkStrictMode)(t,"default is ignored in the schema root")}(t),i.let(c.default.vErrors,null),i.let(c.default.errors,0),n.unevaluated&&function(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",h._`${n}.evaluated`),e.if(h._`${t.evaluated}.dynamicProps`,(()=>e.assign(h._`${t.evaluated}.props`,h._`undefined`))),e.if(h._`${t.evaluated}.dynamicItems`,(()=>e.assign(h._`${t.evaluated}.items`,h._`undefined`)))}(t),x(t),function(t){const{gen:e,schemaEnv:n,validateName:i,ValidationError:r,opts:o}=t;n.$async?e.if(h._`${c.default.errors} === 0`,(()=>e.return(c.default.data)),(()=>e.throw(h._`new ${r}(${c.default.vErrors})`))):(e.assign(h._`${i}.errors`,c.default.vErrors),o.unevaluated&&function({gen:t,evaluated:e,props:n,items:i}){n instanceof h.Name&&t.assign(h._`${e}.props`,n),i instanceof h.Name&&t.assign(h._`${e}.items`,i)}(t),e.return(h._`${c.default.errors} === 0`))}(t)}))}(t):g(t,(()=>(0,i.topBoolOrEmptySchema)(t)))};class T{constructor(t,e,n){if((0,l.validateKeywordUsage)(t,e,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=e.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=e.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=e,this.$data)this.schemaCode=t.gen.const("vSchema",k(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,e.schemaType,e.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(e.schemaType)}`);("code"in e?e.trackErrors:!1!==e.errors)&&(this.errsCount=t.gen.const("_errs",c.default.errors))}result(t,e,n){this.failResult((0,h.not)(t),e,n)}failResult(t,e,n){this.gen.if(t),n?n():this.error(),e?(this.gen.else(),e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,e){this.failResult((0,h.not)(t),void 0,e)}fail(t){if(void 0===t)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:e}=this;this.fail(h._`${e} !== undefined && (${(0,h.or)(this.invalid$data(),t)})`)}error(t,e,n){if(e)return this.setParams(e),this._error(t,n),void this.setParams({});this._error(t,n)}_error(t,e){(t?p.reportExtraError:p.reportError)(this,this.def.error,e)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,e){e?Object.assign(this.params,t):this.params=t}block$data(t,e,n=h.nil){this.gen.block((()=>{this.check$data(t,n),e()}))}check$data(t=h.nil,e=h.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:r,def:o}=this;n.if((0,h.or)(h._`${i} === undefined`,e)),t!==h.nil&&n.assign(t,!0),(r.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==h.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:e,schemaType:n,def:i,it:r}=this;return(0,h.or)(function(){if(n.length){if(!(e instanceof h.Name))throw new Error("ajv implementation error");const t=Array.isArray(n)?n:[n];return h._`${(0,a.checkDataTypes)(t,e,r.opts.strictNumbers,a.DataType.Wrong)}`}return h.nil}(),function(){if(i.validateSchema){const n=t.scopeValue("validate$data",{ref:i.validateSchema});return h._`!${n}(${e})`}return h.nil}())}subschema(t,e){const n=(0,u.getSubschema)(this.it,t);(0,u.extendSubschemaData)(n,this.it,t),(0,u.extendSubschemaMode)(n,t);const r={...this.it,...n,items:void 0,props:void 0};return function(t,e){y(t)&&(_(t),v(t))?function(t,e){const{schema:n,gen:i,opts:r}=t;r.$comment&&n.$comment&&w(t),function(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,d.resolveUrl)(t.baseId,e))}(t),function(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}(t);const o=i.const("_errs",c.default.errors);x(t,o),i.var(e,h._`${o} === ${c.default.errors}`)}(t,e):(0,i.boolOrEmptySchema)(t,e)}(r,e),r}mergeEvaluated(t,e){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==t.props&&(n.props=f.mergeEvaluated.props(i,t.props,n.props,e)),!0!==n.items&&void 0!==t.items&&(n.items=f.mergeEvaluated.items(i,t.items,n.items,e)))}mergeValidEvaluated(t,e){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(e,(()=>this.mergeEvaluated(t,h.Name))),!0}}function C(t,e,n,i){const r=new T(t,n,e);"code"in n?n.code(r,i):r.$data&&n.validate?(0,l.funcKeywordCode)(r,n):"macro"in n?(0,l.macroKeywordCode)(r,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(r,n)}e.KeywordCxt=T;const A=/^\/(?:[^~]|~0|~1)*$/,L=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(t,{dataLevel:e,dataNames:n,dataPathArr:i}){let r,o;if(""===t)return c.default.rootData;if("/"===t[0]){if(!A.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);r=t,o=c.default.rootData}else{const a=L.exec(t);if(!a)throw new Error(`Invalid JSON-pointer: ${t}`);const s=+a[1];if(r=a[2],"#"===r){if(s>=e)throw new Error(l("property/index",s));return i[e-s]}if(s>e)throw new Error(l("data",s));if(o=n[e-s],!r)return o}let a=o;const s=r.split("/");for(const t of s)t&&(o=h._`${o}${(0,h.getProperty)((0,f.unescapeJsonPointer)(t))}`,a=h._`${a} && ${o}`);return a;function l(t,n){return`Cannot access ${t} ${n} levels up, current level is ${e}`}}e.getData=k},5005:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateKeywordUsage=e.validSchemaType=e.funcKeywordCode=e.macroKeywordCode=void 0;const i=n(3487),r=n(2141),o=n(412),a=n(4181);function s(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,(()=>e.assign(n,i._`${r.parentData}[${r.parentDataProperty}]`)))}function l(t,e,n){if(void 0===n)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,i.stringify)(n)})}e.macroKeywordCode=function(t,e){const{gen:n,keyword:r,schema:o,parentSchema:a,it:s}=t,u=e.macro.call(s.self,o,a,s),h=l(n,r,u);!1!==s.opts.validateSchema&&s.self.validateSchema(u,!0);const c=n.name("valid");t.subschema({schema:u,schemaPath:i.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:h,compositeRule:!0},c),t.pass(c,(()=>t.error(!0)))},e.funcKeywordCode=function(t,e){var n;const{gen:u,keyword:h,schema:c,parentSchema:d,$data:f,it:p}=t;!function({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}(p,e);const g=!f&&e.compile?e.compile.call(p.self,c,d,p):e.validate,m=l(u,h,g),v=u.let("valid");function y(n=(e.async?i._`await `:i.nil)){const a=p.opts.passContext?r.default.this:r.default.self,s=!("compile"in e&&!f||!1===e.schema);u.assign(v,i._`${n}${(0,o.callValidateCode)(t,m,a,s)}`,e.modifying)}function _(t){var n;u.if((0,i.not)(null!==(n=e.valid)&&void 0!==n?n:v),t)}t.block$data(v,(function(){if(!1===e.errors)y(),e.modifying&&s(t),_((()=>t.error()));else{const n=e.async?function(){const t=u.let("ruleErrs",null);return u.try((()=>y(i._`await `)),(e=>u.assign(v,!1).if(i._`${e} instanceof ${p.ValidationError}`,(()=>u.assign(t,i._`${e}.errors`)),(()=>u.throw(e))))),t}():function(){const t=i._`${m}.errors`;return u.assign(t,null),y(i.nil),t}();e.modifying&&s(t),_((()=>function(t,e){const{gen:n}=t;n.if(i._`Array.isArray(${e})`,(()=>{n.assign(r.default.vErrors,i._`${r.default.vErrors} === null ? ${e} : ${r.default.vErrors}.concat(${e})`).assign(r.default.errors,i._`${r.default.vErrors}.length`),(0,a.extendErrors)(t)}),(()=>t.error()))}(t,n)))}})),t.ok(null!==(n=e.valid)&&void 0!==n?n:v)},e.validSchemaType=function(t,e,n=!1){return!e.length||e.some((e=>"array"===e?Array.isArray(t):"object"===e?t&&"object"==typeof t&&!Array.isArray(t):typeof t==e||n&&void 0===t))},e.validateKeywordUsage=function({schema:t,opts:e,self:n,errSchemaPath:i},r,o){if(Array.isArray(r.keyword)?!r.keyword.includes(o):r.keyword!==o)throw new Error("ajv implementation error");const a=r.dependencies;if(null==a?void 0:a.some((e=>!Object.prototype.hasOwnProperty.call(t,e))))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(r.validateSchema&&!r.validateSchema(t[o])){const t=`keyword "${o}" value is invalid at path "${i}": `+n.errorsText(r.validateSchema.errors);if("log"!==e.validateSchema)throw new Error(t);n.logger.error(t)}}},3099:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendSubschemaMode=e.extendSubschemaData=e.getSubschema=void 0;const i=n(3487),r=n(6776);e.getSubschema=function(t,{keyword:e,schemaProp:n,schema:o,schemaPath:a,errSchemaPath:s,topSchemaRef:l}){if(void 0!==e&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==e){const o=t.schema[e];return void 0===n?{schema:o,schemaPath:i._`${t.schemaPath}${(0,i.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[n],schemaPath:i._`${t.schemaPath}${(0,i.getProperty)(e)}${(0,i.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,r.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===a||void 0===s||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:a,topSchemaRef:l,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')},e.extendSubschemaData=function(t,e,{dataProp:n,dataPropType:o,data:a,dataTypes:s,propertyName:l}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=e;if(void 0!==n){const{errorPath:a,dataPathArr:s,opts:l}=e;h(u.let("data",i._`${e.data}${(0,i.getProperty)(n)}`,!0)),t.errorPath=i.str`${a}${(0,r.getErrorPath)(n,o,l.jsPropertySyntax)}`,t.parentDataProperty=i._`${n}`,t.dataPathArr=[...s,t.parentDataProperty]}function h(n){t.data=n,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,n]}void 0!==a&&(h(a instanceof i.Name?a:u.let("data",a,!0)),void 0!==l&&(t.propertyName=l)),s&&(t.dataTypes=s)},e.extendSubschemaMode=function(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:i,createErrors:r,allErrors:o}){void 0!==i&&(t.compositeRule=i),void 0!==r&&(t.createErrors=r),void 0!==o&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=n}},7159:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var i=n(4815);Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return i.KeywordCxt}});var r=n(3487);Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const o=n(7426),a=n(6646),s=n(3141),l=n(5173),u=n(3487),h=n(2531),c=n(453),d=n(6776),f=n(4775),p=(t,e)=>new RegExp(t,e);p.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function _(t){var e,n,i,r,o,a,s,l,u,h,c,d,f,g,m,v,y,_,x,w,b,S,M,P;const T=t.strict,C=null===(e=t.code)||void 0===e?void 0:e.optimize,A=!0===C||void 0===C?1:C||0,L=null!==(i=null===(n=t.code)||void 0===n?void 0:n.regExp)&&void 0!==i?i:p;return{strictSchema:null===(o=null!==(r=t.strictSchema)&&void 0!==r?r:T)||void 0===o||o,strictNumbers:null===(s=null!==(a=t.strictNumbers)&&void 0!==a?a:T)||void 0===s||s,strictTypes:null!==(u=null!==(l=t.strictTypes)&&void 0!==l?l:T)&&void 0!==u?u:"log",strictTuples:null!==(c=null!==(h=t.strictTuples)&&void 0!==h?h:T)&&void 0!==c?c:"log",strictRequired:null!==(f=null!==(d=t.strictRequired)&&void 0!==d?d:T)&&void 0!==f&&f,code:t.code?{...t.code,optimize:A,regExp:L}:{optimize:A,regExp:L},loopRequired:null!==(g=t.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(m=t.loopEnum)&&void 0!==m?m:200,meta:null===(v=t.meta)||void 0===v||v,messages:null===(y=t.messages)||void 0===y||y,inlineRefs:null===(_=t.inlineRefs)||void 0===_||_,schemaId:null!==(x=t.schemaId)&&void 0!==x?x:"$id",addUsedSchema:null===(w=t.addUsedSchema)||void 0===w||w,validateSchema:null===(b=t.validateSchema)||void 0===b||b,validateFormats:null===(S=t.validateFormats)||void 0===S||S,unicodeRegExp:null===(M=t.unicodeRegExp)||void 0===M||M,int32range:null===(P=t.int32range)||void 0===P||P}}class x{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,..._(t)};const{es5:e,lines:n}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:m,es5:e,lines:n}),this.logger=function(t){if(!1===t)return C;if(void 0===t)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}(t.logger);const i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,s.getRules)(),w.call(this,v,t,"NOT SUPPORTED"),w.call(this,y,t,"DEPRECATED","warn"),this._metaOpts=T.call(this),t.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&P.call(this,t.keywords),"object"==typeof t.meta&&this.addMetaSchema(t.meta),S.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:t,meta:e,schemaId:n}=this.opts;let i=f;"id"===n&&(i={...f},i.id=i.$id,delete i.$id),e&&t&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){const{meta:t,schemaId:e}=this.opts;return this.opts.defaultMeta="object"==typeof t?t[e]||t:void 0}validate(t,e){let n;if("string"==typeof t){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);const i=n(e);return"$async"in n||(this.errors=n.errors),i}compile(t,e){const n=this._addSchema(t,e);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,e){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,t,e);async function i(t,e){await r.call(this,t.$schema);const n=this._addSchema(t,e);return n.validate||o.call(this,n)}async function r(t){t&&!this.getSchema(t)&&await i.call(this,{$ref:t},!0)}async function o(t){try{return this._compileSchemaEnv(t)}catch(e){if(!(e instanceof a.default))throw e;return s.call(this,e),await l.call(this,e.missingSchema),o.call(this,t)}}function s({missingSchema:t,missingRef:e}){if(this.refs[t])throw new Error(`AnySchema ${t} is loaded but ${e} cannot be resolved`)}async function l(t){const n=await u.call(this,t);this.refs[t]||await r.call(this,n.$schema),this.refs[t]||this.addSchema(n,t,e)}async function u(t){const e=this._loading[t];if(e)return e;try{return await(this._loading[t]=n(t))}finally{delete this._loading[t]}}}addSchema(t,e,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(const e of t)this.addSchema(e,void 0,n,i);return this}let r;if("object"==typeof t){const{schemaId:e}=this.opts;if(r=t[e],void 0!==r&&"string"!=typeof r)throw new Error(`schema ${e} must be string`)}return e=(0,h.normalizeId)(e||r),this._checkUnique(e),this.schemas[e]=this._addSchema(t,n,e,i,!0),this}addMetaSchema(t,e,n=this.opts.validateSchema){return this.addSchema(t,e,!0,n),this}validateSchema(t,e){if("boolean"==typeof t)return!0;let n;if(n=t.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,t);if(!i&&e){const t="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(t);this.logger.error(t)}return i}getSchema(t){let e;for(;"string"==typeof(e=b.call(this,t));)t=e;if(void 0===e){const{schemaId:n}=this.opts,i=new l.SchemaEnv({schema:{},schemaId:n});if(e=l.resolveSchema.call(this,i,t),!e)return;this.refs[t]=e}return e.validate||this._compileSchemaEnv(e)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const e=b.call(this,t);return"object"==typeof e&&this._cache.delete(e.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{const e=t;this._cache.delete(e);let n=t[this.opts.schemaId];return n&&(n=(0,h.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(const e of t)this.addKeyword(e);return this}addKeyword(t,e){let n;if("string"==typeof t)n=t,"object"==typeof e&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),e.keyword=n);else{if("object"!=typeof t||void 0!==e)throw new Error("invalid addKeywords parameters");if(n=(e=t).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(L.call(this,n,e),!e)return(0,d.eachItem)(n,(t=>k.call(this,t))),this;O.call(this,e);const i={...e,type:(0,c.getJSONTypes)(e.type),schemaType:(0,c.getJSONTypes)(e.schemaType)};return(0,d.eachItem)(n,0===i.type.length?t=>k.call(this,t,i):t=>i.type.forEach((e=>k.call(this,t,i,e)))),this}getKeyword(t){const e=this.RULES.all[t];return"object"==typeof e?e.definition:!!e}removeKeyword(t){const{RULES:e}=this;delete e.keywords[t],delete e.all[t];for(const n of e.rules){const e=n.rules.findIndex((e=>e.keyword===t));e>=0&&n.rules.splice(e,1)}return this}addFormat(t,e){return"string"==typeof e&&(e=new RegExp(e)),this.formats[t]=e,this}errorsText(t=this.errors,{separator:e=", ",dataVar:n="data"}={}){return t&&0!==t.length?t.map((t=>`${n}${t.instancePath} ${t.message}`)).reduce(((t,n)=>t+e+n)):"No errors"}$dataMetaSchema(t,e){const n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(const i of e){const e=i.split("/").slice(1);let r=t;for(const t of e)r=r[t];for(const t in n){const e=n[t];if("object"!=typeof e)continue;const{$data:i}=e.definition,o=r[t];i&&o&&(r[t]=I(o))}}return t}_removeAllSchemas(t,e){for(const n in t){const i=t[n];e&&!e.test(n)||("string"==typeof i?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,e,n,i=this.opts.validateSchema,r=this.opts.addUsedSchema){let o;const{schemaId:a}=this.opts;if("object"==typeof t)o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof t)throw new Error("schema must be object or boolean")}let s=this._cache.get(t);if(void 0!==s)return s;n=(0,h.normalizeId)(o||n);const u=h.getSchemaRefs.call(this,t,n);return s=new l.SchemaEnv({schema:t,schemaId:a,meta:e,baseId:n,localRefs:u}),this._cache.set(s.schema,s),r&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=s),i&&this.validateSchema(t,!0),s}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):l.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){const e=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,t)}finally{this.opts=e}}}function w(t,e,n,i="error"){for(const r in t){const o=r;o in e&&this.logger[i](`${n}: option ${r}. ${t[o]}`)}}function b(t){return t=(0,h.normalizeId)(t),this.schemas[t]||this.refs[t]}function S(){const t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(const e in t)this.addSchema(t[e],e)}function M(){for(const t in this.opts.formats){const e=this.opts.formats[t];e&&this.addFormat(t,e)}}function P(t){if(Array.isArray(t))this.addVocabulary(t);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const e in t){const n=t[e];n.keyword||(n.keyword=e),this.addKeyword(n)}}}function T(){const t={...this.opts};for(const e of g)delete t[e];return t}e.default=x,x.ValidationError=o.default,x.MissingRefError=a.default;const C={log(){},warn(){},error(){}},A=/^[a-z_$][a-z0-9_$:-]*$/i;function L(t,e){const{RULES:n}=this;if((0,d.eachItem)(t,(t=>{if(n.keywords[t])throw new Error(`Keyword ${t} is already defined`);if(!A.test(t))throw new Error(`Keyword ${t} has invalid name`)})),e&&e.$data&&!("code"in e)&&!("validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function k(t,e,n){var i;const r=null==e?void 0:e.post;if(n&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let a=r?o.post:o.rules.find((({type:t})=>t===n));if(a||(a={type:n,rules:[]},o.rules.push(a)),o.keywords[t]=!0,!e)return;const s={keyword:t,definition:{...e,type:(0,c.getJSONTypes)(e.type),schemaType:(0,c.getJSONTypes)(e.schemaType)}};e.before?E.call(this,a,s,e.before):a.rules.push(s),o.all[t]=s,null===(i=e.implements)||void 0===i||i.forEach((t=>this.addKeyword(t)))}function E(t,e,n){const i=t.rules.findIndex((t=>t.keyword===n));i>=0?t.rules.splice(i,0,e):(t.rules.push(e),this.logger.warn(`rule ${n} is not defined`))}function O(t){let{metaSchema:e}=t;void 0!==e&&(t.$data&&this.opts.$data&&(e=I(e)),t.validateSchema=this.compile(e,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(t){return{anyOf:[t,N]}}},3510:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4063);i.code='require("ajv/dist/runtime/equal").default',e.default=i},4499:(t,e)=>{"use strict";function n(t){const e=t.length;let n,i=0,r=0;for(;r<e;)i++,n=t.charCodeAt(r++),n>=55296&&n<=56319&&r<e&&(n=t.charCodeAt(r),56320==(64512&n)&&r++);return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7426:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}e.default=n},4783:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAdditionalItems=void 0;const i=n(3487),r=n(6776),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:t}})=>i.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>i._`{limit: ${t}}`},code(t){const{parentSchema:e,it:n}=t,{items:i}=e;Array.isArray(i)?a(t,i):(0,r.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function a(t,e){const{gen:n,schema:o,data:a,keyword:s,it:l}=t;l.items=!0;const u=n.const("len",i._`${a}.length`);if(!1===o)t.setParams({len:e.length}),t.pass(i._`${u} <= ${e.length}`);else if("object"==typeof o&&!(0,r.alwaysValidSchema)(l,o)){const o=n.var("valid",i._`${u} <= ${e.length}`);n.if((0,i.not)(o),(()=>function(o){n.forRange("i",e.length,u,(e=>{t.subschema({keyword:s,dataProp:e,dataPropType:r.Type.Num},o),l.allErrors||n.if((0,i.not)(o),(()=>n.break()))}))}(o))),t.ok(o)}}e.validateAdditionalItems=a,e.default=o},9351:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(2141),a=n(6776),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:t})=>r._`{additionalProperty: ${t.additionalProperty}}`},code(t){const{gen:e,schema:n,parentSchema:s,data:l,errsCount:u,it:h}=t;if(!u)throw new Error("ajv implementation error");const{allErrors:c,opts:d}=h;if(h.props=!0,"all"!==d.removeAdditional&&(0,a.alwaysValidSchema)(h,n))return;const f=(0,i.allSchemaProperties)(s.properties),p=(0,i.allSchemaProperties)(s.patternProperties);function g(t){e.code(r._`delete ${l}[${t}]`)}function m(i){if("all"===d.removeAdditional||d.removeAdditional&&!1===n)g(i);else{if(!1===n)return t.setParams({additionalProperty:i}),t.error(),void(c||e.break());if("object"==typeof n&&!(0,a.alwaysValidSchema)(h,n)){const n=e.name("valid");"failing"===d.removeAdditional?(v(i,n,!1),e.if((0,r.not)(n),(()=>{t.reset(),g(i)}))):(v(i,n),c||e.if((0,r.not)(n),(()=>e.break())))}}}function v(e,n,i){const r={keyword:"additionalProperties",dataProp:e,dataPropType:a.Type.Str};!1===i&&Object.assign(r,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(r,n)}e.forIn("key",l,(n=>{f.length||p.length?e.if(function(n){let o;if(f.length>8){const t=(0,a.schemaRefOrVal)(h,s.properties,"properties");o=(0,i.isOwnProperty)(e,t,n)}else o=f.length?(0,r.or)(...f.map((t=>r._`${n} === ${t}`))):r.nil;return p.length&&(o=(0,r.or)(o,...p.map((e=>r._`${(0,i.usePattern)(t,e)}.test(${n})`)))),(0,r.not)(o)}(n),(()=>m(n))):m(n)})),t.ok(r._`${u} === ${o.default.errors}`)}};e.default=s},1125:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6776),r={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=e.name("valid");n.forEach(((e,n)=>{if((0,i.alwaysValidSchema)(r,e))return;const a=t.subschema({keyword:"allOf",schemaProp:n},o);t.ok(o),t.mergeEvaluated(a)}))}};e.default=r},19:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(412).validateUnion,error:{message:"must match a schema in anyOf"}};e.default=i},9864:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:t,max:e}})=>void 0===e?i.str`must contain at least ${t} valid item(s)`:i.str`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>void 0===e?i._`{minContains: ${t}}`:i._`{minContains: ${t}, maxContains: ${e}}`},code(t){const{gen:e,schema:n,parentSchema:o,data:a,it:s}=t;let l,u;const{minContains:h,maxContains:c}=o;s.opts.next?(l=void 0===h?1:h,u=c):l=1;const d=e.const("len",i._`${a}.length`);if(t.setParams({min:l,max:u}),void 0===u&&0===l)return void(0,r.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==u&&l>u)return(0,r.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),void t.fail();if((0,r.alwaysValidSchema)(s,n)){let e=i._`${d} >= ${l}`;return void 0!==u&&(e=i._`${e} && ${d} <= ${u}`),void t.pass(e)}s.items=!0;const f=e.name("valid");function p(){const t=e.name("_valid"),n=e.let("count",0);g(t,(()=>e.if(t,(()=>function(t){e.code(i._`${t}++`),void 0===u?e.if(i._`${t} >= ${l}`,(()=>e.assign(f,!0).break())):(e.if(i._`${t} > ${u}`,(()=>e.assign(f,!1).break())),1===l?e.assign(f,!0):e.if(i._`${t} >= ${l}`,(()=>e.assign(f,!0))))}(n)))))}function g(n,i){e.forRange("i",0,d,(e=>{t.subschema({keyword:"contains",dataProp:e,dataPropType:r.Type.Num,compositeRule:!0},n),i()}))}void 0===u&&1===l?g(f,(()=>e.if(f,(()=>e.break())))):0===l?(e.let(f,!0),void 0!==u&&e.if(i._`${a}.length > 0`,p)):(e.let(f,!1),p()),t.result(f,(()=>t.reset()))}};e.default=o},7772:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const i=n(3487),r=n(6776),o=n(412);e.error={message:({params:{property:t,depsCount:e,deps:n}})=>{const r=1===e?"property":"properties";return i.str`must have ${r} ${n} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:n,missingProperty:r}})=>i._`{property: ${t},
    missingProperty: ${r},
    depsCount: ${e},
    deps: ${n}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(t){const[e,n]=function({schema:t}){const e={},n={};for(const i in t)"__proto__"!==i&&((Array.isArray(t[i])?e:n)[i]=t[i]);return[e,n]}(t);s(t,e),l(t,n)}};function s(t,e=t.schema){const{gen:n,data:r,it:a}=t;if(0===Object.keys(e).length)return;const s=n.let("missing");for(const l in e){const u=e[l];if(0===u.length)continue;const h=(0,o.propertyInData)(n,r,l,a.opts.ownProperties);t.setParams({property:l,depsCount:u.length,deps:u.join(", ")}),a.allErrors?n.if(h,(()=>{for(const e of u)(0,o.checkReportMissingProp)(t,e)})):(n.if(i._`${h} && (${(0,o.checkMissingProp)(t,u,s)})`),(0,o.reportMissingProp)(t,s),n.else())}}function l(t,e=t.schema){const{gen:n,data:i,keyword:a,it:s}=t,l=n.name("valid");for(const u in e)(0,r.alwaysValidSchema)(s,e[u])||(n.if((0,o.propertyInData)(n,i,u,s.opts.ownProperties),(()=>{const e=t.subschema({keyword:a,schemaProp:u},l);t.mergeValidEvaluated(e,l)}),(()=>n.var(l,!0))),t.ok(l))}e.validatePropertyDeps=s,e.validateSchemaDeps=l,e.default=a},9434:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:t})=>i.str`must match "${t.ifClause}" schema`,params:({params:t})=>i._`{failingKeyword: ${t.ifClause}}`},code(t){const{gen:e,parentSchema:n,it:o}=t;void 0===n.then&&void 0===n.else&&(0,r.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const s=a(o,"then"),l=a(o,"else");if(!s&&!l)return;const u=e.let("valid",!0),h=e.name("_valid");if(function(){const e=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);t.mergeEvaluated(e)}(),t.reset(),s&&l){const n=e.let("ifClause");t.setParams({ifClause:n}),e.if(h,c("then",n),c("else",n))}else s?e.if(h,c("then")):e.if((0,i.not)(h),c("else"));function c(n,r){return()=>{const o=t.subschema({keyword:n},h);e.assign(u,h),t.mergeValidEvaluated(o,u),r?e.assign(r,i._`${n}`):t.setParams({ifClause:n})}}t.pass(u,(()=>t.error(!0)))}};function a(t,e){const n=t.schema[e];return void 0!==n&&!(0,r.alwaysValidSchema)(t,n)}e.default=o},8200:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4783),r=n(2924),o=n(4665),a=n(1119),s=n(9864),l=n(7772),u=n(3708),h=n(9351),c=n(6239),d=n(2296),f=n(5697),p=n(19),g=n(4200),m=n(1125),v=n(9434),y=n(6552);e.default=function(t=!1){const e=[f.default,p.default,g.default,m.default,v.default,y.default,u.default,h.default,l.default,c.default,d.default];return t?e.push(r.default,a.default):e.push(i.default,o.default),e.push(s.default),e}},4665:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateTuple=void 0;const i=n(3487),r=n(6776),o=n(412),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return s(t,"additionalItems",e);n.items=!0,(0,r.alwaysValidSchema)(n,e)||t.ok((0,o.validateArray)(t))}};function s(t,e,n=t.schema){const{gen:o,parentSchema:a,data:s,keyword:l,it:u}=t;!function(t){const{opts:i,errSchemaPath:o}=u,a=n.length,s=a===t.minItems&&(a===t.maxItems||!1===t[e]);if(i.strictTuples&&!s){const t=`"${l}" is ${a}-tuple, but minItems or maxItems/${e} are not specified or different at path "${o}"`;(0,r.checkStrictMode)(u,t,i.strictTuples)}}(a),u.opts.unevaluated&&n.length&&!0!==u.items&&(u.items=r.mergeEvaluated.items(o,n.length,u.items));const h=o.name("valid"),c=o.const("len",i._`${s}.length`);n.forEach(((e,n)=>{(0,r.alwaysValidSchema)(u,e)||(o.if(i._`${c} > ${n}`,(()=>t.subschema({keyword:l,schemaProp:n,dataProp:n},h))),t.ok(h))}))}e.validateTuple=s,e.default=a},1119:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(412),a=n(4783),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:t}})=>i.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>i._`{limit: ${t}}`},code(t){const{schema:e,parentSchema:n,it:i}=t,{prefixItems:s}=n;i.items=!0,(0,r.alwaysValidSchema)(i,e)||(s?(0,a.validateAdditionalItems)(t,s):t.ok((0,o.validateArray)(t)))}};e.default=s},5697:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6776),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,i.alwaysValidSchema)(r,n))return void t.fail();const o=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.failResult(o,(()=>t.reset()),(()=>t.error()))},error:{message:"must NOT be valid"}};e.default=r},4200:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:t})=>i._`{passingSchemas: ${t.passing}}`},code(t){const{gen:e,schema:n,parentSchema:o,it:a}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&o.discriminator)return;const s=n,l=e.let("valid",!1),u=e.let("passing",null),h=e.name("_valid");t.setParams({passing:u}),e.block((function(){s.forEach(((n,o)=>{let s;(0,r.alwaysValidSchema)(a,n)?e.var(h,!0):s=t.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},h),o>0&&e.if(i._`${h} && ${l}`).assign(l,!1).assign(u,i._`[${u}, ${o}]`).else(),e.if(h,(()=>{e.assign(l,!0),e.assign(u,o),s&&t.mergeEvaluated(s,i.Name)}))}))})),t.result(l,(()=>t.reset()),(()=>t.error(!0)))}};e.default=o},2296:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(6776),a=n(6776),s={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:s,parentSchema:l,it:u}=t,{opts:h}=u,c=(0,i.allSchemaProperties)(n),d=c.filter((t=>(0,o.alwaysValidSchema)(u,n[t])));if(0===c.length||d.length===c.length&&(!u.opts.unevaluated||!0===u.props))return;const f=h.strictSchema&&!h.allowMatchingProperties&&l.properties,p=e.name("valid");!0===u.props||u.props instanceof r.Name||(u.props=(0,a.evaluatedPropsToName)(e,u.props));const{props:g}=u;function m(t){for(const e in f)new RegExp(t).test(e)&&(0,o.checkStrictMode)(u,`property ${e} matches pattern ${t} (use allowMatchingProperties)`)}function v(n){e.forIn("key",s,(o=>{e.if(r._`${(0,i.usePattern)(t,n)}.test(${o})`,(()=>{const i=d.includes(n);i||t.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:a.Type.Str},p),u.opts.unevaluated&&!0!==g?e.assign(r._`${g}[${o}]`,!0):i||u.allErrors||e.if((0,r.not)(p),(()=>e.break()))}))}))}!function(){for(const t of c)f&&m(t),u.allErrors?v(t):(e.var(p,!0),v(t),e.if(p))}()}};e.default=s},2924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4665),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,i.validateTuple)(t,"items")};e.default=r},6239:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4815),r=n(412),o=n(6776),a=n(9351),s={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:s,data:l,it:u}=t;"all"===u.opts.removeAdditional&&void 0===s.additionalProperties&&a.default.code(new i.KeywordCxt(u,a.default,"additionalProperties"));const h=(0,r.allSchemaProperties)(n);for(const t of h)u.definedProperties.add(t);u.opts.unevaluated&&h.length&&!0!==u.props&&(u.props=o.mergeEvaluated.props(e,(0,o.toHash)(h),u.props));const c=h.filter((t=>!(0,o.alwaysValidSchema)(u,n[t])));if(0===c.length)return;const d=e.name("valid");for(const n of c)f(n)?p(n):(e.if((0,r.propertyInData)(e,l,n,u.opts.ownProperties)),p(n),u.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(n),t.ok(d);function f(t){return u.opts.useDefaults&&!u.compositeRule&&void 0!==n[t].default}function p(e){t.subschema({keyword:"properties",schemaProp:e,dataProp:e},d)}}};e.default=s},3708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:t})=>i._`{propertyName: ${t.propertyName}}`},code(t){const{gen:e,schema:n,data:o,it:a}=t;if((0,r.alwaysValidSchema)(a,n))return;const s=e.name("valid");e.forIn("key",o,(n=>{t.setParams({propertyName:n}),t.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},s),e.if((0,i.not)(s),(()=>{t.error(!0),a.allErrors||e.break()}))})),t.ok(s)}};e.default=o},6552:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6776),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){void 0===e.if&&(0,i.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};e.default=r},412:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateUnion=e.validateArray=e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.isOwnProperty=e.hasPropFunc=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;const i=n(3487),r=n(6776),o=n(2141),a=n(6776);function s(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function l(t,e,n){return i._`${s(t)}.call(${e}, ${n})`}function u(t,e,n,r){const o=i._`${e}${(0,i.getProperty)(n)} === undefined`;return r?(0,i.or)(o,(0,i.not)(l(t,e,n))):o}function h(t){return t?Object.keys(t).filter((t=>"__proto__"!==t)):[]}e.checkReportMissingProp=function(t,e){const{gen:n,data:r,it:o}=t;n.if(u(n,r,e,o.opts.ownProperties),(()=>{t.setParams({missingProperty:i._`${e}`},!0),t.error()}))},e.checkMissingProp=function({gen:t,data:e,it:{opts:n}},r,o){return(0,i.or)(...r.map((r=>(0,i.and)(u(t,e,r,n.ownProperties),i._`${o} = ${r}`))))},e.reportMissingProp=function(t,e){t.setParams({missingProperty:e},!0),t.error()},e.hasPropFunc=s,e.isOwnProperty=l,e.propertyInData=function(t,e,n,r){const o=i._`${e}${(0,i.getProperty)(n)} !== undefined`;return r?i._`${o} && ${l(t,e,n)}`:o},e.noPropertyInData=u,e.allSchemaProperties=h,e.schemaProperties=function(t,e){return h(e).filter((n=>!(0,r.alwaysValidSchema)(t,e[n])))},e.callValidateCode=function({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:a,errorPath:s},it:l},u,h,c){const d=c?i._`${t}, ${e}, ${r}${a}`:e,f=[[o.default.instancePath,(0,i.strConcat)(o.default.instancePath,s)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&f.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=i._`${d}, ${n.object(...f)}`;return h!==i.nil?i._`${u}.call(${h}, ${p})`:i._`${u}(${p})`};const c=i._`new RegExp`;e.usePattern=function({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:o}=e.code,s=o(n,r);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:i._`${"new RegExp"===o.code?c:(0,a.useFunc)(t,o)}(${n}, ${r})`})},e.validateArray=function(t){const{gen:e,data:n,keyword:o,it:a}=t,s=e.name("valid");if(a.allErrors){const t=e.let("valid",!0);return l((()=>e.assign(t,!1))),t}return e.var(s,!0),l((()=>e.break())),s;function l(a){const l=e.const("len",i._`${n}.length`);e.forRange("i",0,l,(n=>{t.subschema({keyword:o,dataProp:n,dataPropType:r.Type.Num},s),e.if((0,i.not)(s),a)}))}},e.validateUnion=function(t){const{gen:e,schema:n,keyword:o,it:a}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((t=>(0,r.alwaysValidSchema)(a,t)))&&!a.opts.unevaluated)return;const s=e.let("valid",!1),l=e.name("_valid");e.block((()=>n.forEach(((n,r)=>{const a=t.subschema({keyword:o,schemaProp:r,compositeRule:!0},l);e.assign(s,i._`${s} || ${l}`),t.mergeValidEvaluated(a,l)||e.if((0,i.not)(s))})))),t.result(s,(()=>t.reset()),(()=>t.error(!0)))}},8386:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=n},5684:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(8386),r=n(8280),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,r.default];e.default=o},8280:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;const i=n(6646),r=n(412),o=n(3487),a=n(2141),s=n(5173),l=n(6776),u={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:a,schemaEnv:l,validateName:u,opts:d,self:f}=r,{root:p}=l;if(("#"===n||"#/"===n)&&a===p.baseId)return function(){if(l===p)return c(t,u,l,l.$async);const n=e.scopeValue("root",{ref:p});return c(t,o._`${n}.validate`,p,p.$async)}();const g=s.resolveRef.call(f,p,a,n);if(void 0===g)throw new i.default(a,n);return g instanceof s.SchemaEnv?function(e){const n=h(t,e);c(t,n,e,e.$async)}(g):function(i){const r=e.scopeValue("schema",!0===d.code.source?{ref:i,code:(0,o.stringify)(i)}:{ref:i}),a=e.name("valid"),s=t.subschema({schema:i,dataTypes:[],schemaPath:o.nil,topSchemaRef:r,errSchemaPath:n},a);t.mergeEvaluated(s),t.ok(a)}(g)}};function h(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):o._`${n.scopeValue("wrapper",{ref:e})}.validate`}function c(t,e,n,i){const{gen:s,it:u}=t,{allErrors:h,schemaEnv:c,opts:d}=u,f=d.passContext?a.default.this:o.nil;function p(t){const e=o._`${t}.errors`;s.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${e} : ${a.default.vErrors}.concat(${e})`),s.assign(a.default.errors,o._`${a.default.vErrors}.length`)}function g(t){var e;if(!u.opts.unevaluated)return;const i=null===(e=null==n?void 0:n.validate)||void 0===e?void 0:e.evaluated;if(!0!==u.props)if(i&&!i.dynamicProps)void 0!==i.props&&(u.props=l.mergeEvaluated.props(s,i.props,u.props));else{const e=s.var("props",o._`${t}.evaluated.props`);u.props=l.mergeEvaluated.props(s,e,u.props,o.Name)}if(!0!==u.items)if(i&&!i.dynamicItems)void 0!==i.items&&(u.items=l.mergeEvaluated.items(s,i.items,u.items));else{const e=s.var("items",o._`${t}.evaluated.items`);u.items=l.mergeEvaluated.items(s,e,u.items,o.Name)}}i?function(){if(!c.$async)throw new Error("async schema referenced by sync schema");const n=s.let("valid");s.try((()=>{s.code(o._`await ${(0,r.callValidateCode)(t,e,f)}`),g(e),h||s.assign(n,!0)}),(t=>{s.if(o._`!(${t} instanceof ${u.ValidationError})`,(()=>s.throw(t))),p(t),h||s.assign(n,!1)})),t.ok(n)}():t.result((0,r.callValidateCode)(t,e,f),(()=>g(e)),(()=>p(e)))}e.getValidate=h,e.callRef=c,e.default=u},1240:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(9306),o=n(5173),a=n(6776),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:t,tagName:e}})=>t===r.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>i._`{error: ${t}, tag: ${n}, tagValue: ${e}}`},code(t){const{gen:e,data:n,schema:s,parentSchema:l,it:u}=t,{oneOf:h}=l;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");const c=s.propertyName;if("string"!=typeof c)throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const d=e.let("valid",!1),f=e.const("tag",i._`${n}${(0,i.getProperty)(c)}`);function p(n){const r=e.name("valid"),o=t.subschema({keyword:"oneOf",schemaProp:n},r);return t.mergeEvaluated(o,i.Name),r}e.if(i._`typeof ${f} == "string"`,(()=>function(){const n=function(){var t;const e={},n=r(l);let i=!0;for(let e=0;e<h.length;e++){let l=h[e];(null==l?void 0:l.$ref)&&!(0,a.schemaHasRulesButRef)(l,u.self.RULES)&&(l=o.resolveRef.call(u.self,u.schemaEnv,u.baseId,null==l?void 0:l.$ref),l instanceof o.SchemaEnv&&(l=l.schema));const d=null===(t=null==l?void 0:l.properties)||void 0===t?void 0:t[c];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);i=i&&(n||r(l)),s(d,e)}if(!i)throw new Error(`discriminator: "${c}" must be required`);return e;function r({required:t}){return Array.isArray(t)&&t.includes(c)}function s(t,e){if(t.const)d(t.const,e);else{if(!t.enum)throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`);for(const n of t.enum)d(n,e)}}function d(t,n){if("string"!=typeof t||t in e)throw new Error(`discriminator: "${c}" values must be unique strings`);e[t]=n}}();e.if(!1);for(const t in n)e.elseIf(i._`${f} === ${t}`),e.assign(d,p(n[t]));e.else(),t.error(!1,{discrError:r.DiscrError.Mapping,tag:f,tagName:c}),e.endIf()}()),(()=>t.error(!1,{discrError:r.DiscrError.Tag,tag:f,tagName:c}))),t.ok(d)}};e.default=s},9306:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,(n=e.DiscrError||(e.DiscrError={})).Tag="tag",n.Mapping="mapping"},3924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5684),r=n(2649),o=n(8200),a=n(9502),s=n(6167),l=[i.default,r.default,(0,o.default)(),a.default,s.metadataVocabulary,s.contentVocabulary];e.default=l},9651:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>i.str`must match format "${t}"`,params:({schemaCode:t})=>i._`{format: ${t}}`},code(t,e){const{gen:n,data:r,$data:o,schema:a,schemaCode:s,it:l}=t,{opts:u,errSchemaPath:h,schemaEnv:c,self:d}=l;u.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:d.formats,code:u.code.formats}),a=n.const("fDef",i._`${o}[${s}]`),l=n.let("fType"),h=n.let("format");n.if(i._`typeof ${a} == "object" && !(${a} instanceof RegExp)`,(()=>n.assign(l,i._`${a}.type || "string"`).assign(h,i._`${a}.validate`)),(()=>n.assign(l,i._`"string"`).assign(h,a))),t.fail$data((0,i.or)(!1===u.strictSchema?i.nil:i._`${s} && !${h}`,function(){const t=c.$async?i._`(${a}.async ? await ${h}(${r}) : ${h}(${r}))`:i._`${h}(${r})`,n=i._`(typeof ${h} == "function" ? ${t} : ${h}.test(${r}))`;return i._`${h} && ${h} !== true && ${l} === ${e} && !${n}`}()))}():function(){const o=d.formats[a];if(!o)return void function(){if(!1!==u.strictSchema)throw new Error(t());function t(){return`unknown format "${a}" ignored in schema at path "${h}"`}d.logger.warn(t())}();if(!0===o)return;const[s,l,f]=function(t){const e=t instanceof RegExp?(0,i.regexpCode)(t):u.code.formats?i._`${u.code.formats}${(0,i.getProperty)(a)}`:void 0,r=n.scopeValue("formats",{key:a,ref:t,code:e});return"object"!=typeof t||t instanceof RegExp?["string",t,r]:[t.type||"string",t.validate,i._`${r}.validate`]}(o);s===e&&t.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!c.$async)throw new Error("async format in sync schema");return i._`await ${f}(${r})`}return"function"==typeof l?i._`${f}(${r})`:i._`${f}.test(${r})`}())}())}};e.default=r},9502:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=[n(9651).default];e.default=i},6167:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},4693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(3510),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:t})=>i._`{allowedValue: ${t}}`},code(t){const{gen:e,data:n,$data:a,schemaCode:s,schema:l}=t;a||l&&"object"==typeof l?t.fail$data(i._`!${(0,r.useFunc)(e,o.default)}(${n}, ${s})`):t.fail(i._`${l} !== ${n}`)}};e.default=a},966:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(3510),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:t})=>i._`{allowedValues: ${t}}`},code(t){const{gen:e,data:n,$data:a,schema:s,schemaCode:l,it:u}=t;if(!a&&0===s.length)throw new Error("enum must have non-empty array");const h=s.length>=u.opts.loopEnum,c=(0,r.useFunc)(e,o.default);let d;if(h||a)d=e.let("valid"),t.block$data(d,(function(){e.assign(d,!1),e.forOf("v",l,(t=>e.if(i._`${c}(${n}, ${t})`,(()=>e.assign(d,!0).break()))))}));else{if(!Array.isArray(s))throw new Error("ajv implementation error");const t=e.const("vSchema",l);d=(0,i.or)(...s.map(((e,r)=>function(t,e){const r=s[e];return"object"==typeof r&&null!==r?i._`${c}(${n}, ${t}[${e}])`:i._`${n} === ${r}`}(t,r))))}t.pass(d)}};e.default=a},2649:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3983),r=n(430),o=n(3229),a=n(4336),s=n(498),l=n(3301),u=n(1687),h=n(2958),c=n(4693),d=n(966),f=[i.default,r.default,o.default,a.default,s.default,l.default,u.default,h.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];e.default=f},1687:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxItems"===t?"more":"fewer";return i.str`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:r}=t,o="maxItems"===e?i.operators.GT:i.operators.LT;t.fail$data(i._`${n}.length ${o} ${r}`)}};e.default=r},3229:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(4499),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxLength"===t?"more":"fewer";return i.str`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:a,it:s}=t,l="maxLength"===e?i.operators.GT:i.operators.LT,u=!1===s.opts.unicode?i._`${n}.length`:i._`${(0,r.useFunc)(t.gen,o.default)}(${n})`;t.fail$data(i._`${u} ${l} ${a}`)}};e.default=a},3983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r=i.operators,o={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:t,schemaCode:e})=>i.str`must be ${o[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>i._`{comparison: ${o[t].okStr}, limit: ${e}}`},s={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:a,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data(i._`${n} ${o[e].fail} ${r} || isNaN(${n})`)}};e.default=s},498:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxProperties"===t?"more":"fewer";return i.str`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:r}=t,o="maxProperties"===e?i.operators.GT:i.operators.LT;t.fail$data(i._`Object.keys(${n}).length ${o} ${r}`)}};e.default=r},430:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:t})=>i.str`must be multiple of ${t}`,params:({schemaCode:t})=>i._`{multipleOf: ${t}}`},code(t){const{gen:e,data:n,schemaCode:r,it:o}=t,a=o.opts.multipleOfPrecision,s=e.let("res"),l=a?i._`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:i._`${s} !== parseInt(${s})`;t.fail$data(i._`(${r} === 0 || (${s} = ${n}/${r}, ${l}))`)}};e.default=r},4336:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),r=n(3487),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>r.str`must match pattern "${t}"`,params:({schemaCode:t})=>r._`{pattern: ${t}}`},code(t){const{data:e,$data:n,schema:o,schemaCode:a,it:s}=t,l=s.opts.unicodeRegExp?"u":"",u=n?r._`(new RegExp(${a}, ${l}))`:(0,i.usePattern)(t,o);t.fail$data(r._`!${u}.test(${e})`)}};e.default=o},3301:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(6776),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:t}})=>r.str`must have required property '${t}'`,params:({params:{missingProperty:t}})=>r._`{missingProperty: ${t}}`},code(t){const{gen:e,schema:n,schemaCode:a,data:s,$data:l,it:u}=t,{opts:h}=u;if(!l&&0===n.length)return;const c=n.length>=h.loopRequired;if(u.allErrors?function(){if(c||l)t.block$data(r.nil,d);else for(const e of n)(0,i.checkReportMissingProp)(t,e)}():function(){const o=e.let("missing");if(c||l){const n=e.let("valid",!0);t.block$data(n,(()=>function(n,o){t.setParams({missingProperty:n}),e.forOf(n,a,(()=>{e.assign(o,(0,i.propertyInData)(e,s,n,h.ownProperties)),e.if((0,r.not)(o),(()=>{t.error(),e.break()}))}),r.nil)}(o,n))),t.ok(n)}else e.if((0,i.checkMissingProp)(t,n,o)),(0,i.reportMissingProp)(t,o),e.else()}(),h.strictRequired){const e=t.parentSchema.properties,{definedProperties:i}=t.it;for(const t of n)if(void 0===(null==e?void 0:e[t])&&!i.has(t)){const e=`required property "${t}" is not defined at "${u.schemaEnv.baseId+u.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(u,e,u.opts.strictRequired)}}function d(){e.forOf("prop",a,(n=>{t.setParams({missingProperty:n}),e.if((0,i.noPropertyInData)(e,s,n,h.ownProperties),(()=>t.error()))}))}}};e.default=a},2958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(453),r=n(3487),o=n(6776),a=n(3510),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:t,j:e}})=>r.str`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>r._`{i: ${t}, j: ${e}}`},code(t){const{gen:e,data:n,$data:s,schema:l,parentSchema:u,schemaCode:h,it:c}=t;if(!s&&!l)return;const d=e.let("valid"),f=u.items?(0,i.getSchemaTypes)(u.items):[];function p(o,a){const s=e.name("item"),l=(0,i.checkDataTypes)(f,s,c.opts.strictNumbers,i.DataType.Wrong),u=e.const("indices",r._`{}`);e.for(r._`;${o}--;`,(()=>{e.let(s,r._`${n}[${o}]`),e.if(l,r._`continue`),f.length>1&&e.if(r._`typeof ${s} == "string"`,r._`${s} += "_"`),e.if(r._`typeof ${u}[${s}] == "number"`,(()=>{e.assign(a,r._`${u}[${s}]`),t.error(),e.assign(d,!1).break()})).code(r._`${u}[${s}] = ${o}`)}))}function g(i,s){const l=(0,o.useFunc)(e,a.default),u=e.name("outer");e.label(u).for(r._`;${i}--;`,(()=>e.for(r._`${s} = ${i}; ${s}--;`,(()=>e.if(r._`${l}(${n}[${i}], ${n}[${s}])`,(()=>{t.error(),e.assign(d,!1).break(u)}))))))}t.block$data(d,(function(){const i=e.let("i",r._`${n}.length`),o=e.let("j");t.setParams({i,j:o}),e.assign(d,!0),e.if(r._`${i} > 1`,(()=>(f.length>0&&!f.some((t=>"object"===t||"array"===t))?p:g)(i,o)))}),r._`${h} === false`),t.ok(d)}};e.default=s},3076:t=>{"use strict";function e(t,e,n,i,r){for(var o=r+1;i<=r;){var a=i+r>>>1,s=t[a];(void 0!==n?n(s,e):s-e)>=0?(o=a,r=a-1):i=a+1}return o}function n(t,e,n,i,r){for(var o=r+1;i<=r;){var a=i+r>>>1,s=t[a];(void 0!==n?n(s,e):s-e)>0?(o=a,r=a-1):i=a+1}return o}function i(t,e,n,i,r){for(var o=i-1;i<=r;){var a=i+r>>>1,s=t[a];(void 0!==n?n(s,e):s-e)<0?(o=a,i=a+1):r=a-1}return o}function r(t,e,n,i,r){for(var o=i-1;i<=r;){var a=i+r>>>1,s=t[a];(void 0!==n?n(s,e):s-e)<=0?(o=a,i=a+1):r=a-1}return o}function o(t,e,n,i,r){for(;i<=r;){var o=i+r>>>1,a=t[o],s=void 0!==n?n(a,e):a-e;if(0===s)return o;s<=0?i=o+1:r=o-1}return-1}function a(t,e,n,i,r,o){return"function"==typeof n?o(t,e,n,void 0===i?0:0|i,void 0===r?t.length-1:0|r):o(t,e,void 0,void 0===n?0:0|n,void 0===i?t.length-1:0|i)}t.exports={ge:function(t,n,i,r,o){return a(t,n,i,r,o,e)},gt:function(t,e,i,r,o){return a(t,e,i,r,o,n)},lt:function(t,e,n,r,o){return a(t,e,n,r,o,i)},le:function(t,e,n,i,o){return a(t,e,n,i,o,r)},eq:function(t,e,n,i,r){return a(t,e,n,i,r,o)}}},4328:(t,e,n)=>{!function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=t.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(t){return t&&t.bracketRegex||/[(){}[\]]/}function o(t,e,o){var s=t.getLineHandle(e.line),l=e.ch-1,u=o&&o.afterCursor;null==u&&(u=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var h=r(o),c=!u&&l>=0&&h.test(s.text.charAt(l))&&i[s.text.charAt(l)]||h.test(s.text.charAt(l+1))&&i[s.text.charAt(++l)];if(!c)return null;var d=">"==c.charAt(1)?1:-1;if(o&&o.strict&&d>0!=(l==e.ch))return null;var f=t.getTokenTypeAt(n(e.line,l+1)),p=a(t,n(e.line,l+(d>0?1:0)),d,f,o);return null==p?null:{from:n(e.line,l),to:p&&p.pos,match:p&&p.ch==c.charAt(0),forward:d>0}}function a(t,e,o,a,s){for(var l=s&&s.maxScanLineLength||1e4,u=s&&s.maxScanLines||1e3,h=[],c=r(s),d=o>0?Math.min(e.line+u,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-u),f=e.line;f!=d;f+=o){var p=t.getLine(f);if(p){var g=o>0?0:p.length-1,m=o>0?p.length:-1;if(!(p.length>l))for(f==e.line&&(g=e.ch-(o<0?1:0));g!=m;g+=o){var v=p.charAt(g);if(c.test(v)&&(void 0===a||(t.getTokenTypeAt(n(f,g+1))||"")==(a||""))){var y=i[v];if(y&&">"==y.charAt(1)==o>0)h.push(v);else{if(!h.length)return{pos:n(f,g),ch:v};h.pop()}}}}}return f-o!=(o>0?t.lastLine():t.firstLine())&&null}function s(t,i,r){for(var a=t.state.matchBrackets.maxHighlightLineLength||1e3,s=r&&r.highlightNonMatching,l=[],u=t.listSelections(),h=0;h<u.length;h++){var c=u[h].empty()&&o(t,u[h].head,r);if(c&&(c.match||!1!==s)&&t.getLine(c.from.line).length<=a){var d=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(t.markText(c.from,n(c.from.line,c.from.ch+1),{className:d})),c.to&&t.getLine(c.to.line).length<=a&&l.push(t.markText(c.to,n(c.to.line,c.to.ch+1),{className:d}))}}if(l.length){e&&t.state.focused&&t.focus();var f=function(){t.operation((function(){for(var t=0;t<l.length;t++)l[t].clear()}))};if(!i)return f;setTimeout(f,800)}}function l(t){t.operation((function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=s(t,!1,t.state.matchBrackets)}))}function u(t){t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,(function(e,n,i){i&&i!=t.Init&&(e.off("cursorActivity",l),e.off("focus",l),e.off("blur",u),u(e)),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",l),e.on("focus",l),e.on("blur",u))})),t.defineExtension("matchBrackets",(function(){s(this,!0)})),t.defineExtension("findMatchingBracket",(function(t,e,n){return(n||"boolean"==typeof e)&&(n?(n.strict=e,e=n):e=e?{strict:!0}:null),o(this,t,e)})),t.defineExtension("scanForBracket",(function(t,e,n,i){return a(this,t,e,n,i)}))}(n(4631))},3256:(t,e,n)=>{!function(t){"use strict";var e="CodeMirror-lint-markers";function n(t){t.parentNode&&t.parentNode.removeChild(t)}function i(e,i,r,o){var a=function(e,n,i){var r=document.createElement("div");function o(e){if(!r.parentNode)return t.off(document,"mousemove",o);r.style.top=Math.max(0,e.clientY-r.offsetHeight-5)+"px",r.style.left=e.clientX+5+"px"}return r.className="CodeMirror-lint-tooltip cm-s-"+e.options.theme,r.appendChild(i.cloneNode(!0)),e.state.lint.options.selfContain?e.getWrapperElement().appendChild(r):document.body.appendChild(r),t.on(document,"mousemove",o),o(n),null!=r.style.opacity&&(r.style.opacity=1),r}(e,i,r);function s(){var e;t.off(o,"mouseout",s),a&&((e=a).parentNode&&(null==e.style.opacity&&n(e),e.style.opacity=0,setTimeout((function(){n(e)}),600)),a=null)}var l=setInterval((function(){if(a)for(var t=o;;t=t.parentNode){if(t&&11==t.nodeType&&(t=t.host),t==document.body)return;if(!t){s();break}}if(!a)return clearInterval(l)}),400);t.on(o,"mouseout",s)}function r(t,e,n){for(var r in this.marked=[],e instanceof Function&&(e={getAnnotations:e}),e&&!0!==e||(e={}),this.options={},this.linterOptions=e.options||{},o)this.options[r]=o[r];for(var r in e)o.hasOwnProperty(r)?null!=e[r]&&(this.options[r]=e[r]):e.options||(this.linterOptions[r]=e[r]);this.timeout=null,this.hasGutter=n,this.onMouseOver=function(e){!function(t,e){var n=e.target||e.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var r=n.getBoundingClientRect(),o=(r.left+r.right)/2,a=(r.top+r.bottom)/2,s=t.findMarksAt(t.coordsChar({left:o,top:a},"client")),u=[],h=0;h<s.length;++h){var c=s[h].__annotation;c&&u.push(c)}u.length&&function(t,e,n){for(var r=n.target||n.srcElement,o=document.createDocumentFragment(),a=0;a<e.length;a++){var s=e[a];o.appendChild(l(s))}i(t,n,o,r)}(t,u,e)}}(t,e)},this.waitingFor=0}var o={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function a(t){var n=t.state.lint;n.hasGutter&&t.clearGutter(e),n.options.highlightLines&&function(t){t.eachLine((function(e){var n=e.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(e.wrapClass);n&&t.removeLineClass(e,"wrap",n[0])}))}(t);for(var i=0;i<n.marked.length;++i)n.marked[i].clear();n.marked.length=0}function s(e,n,r,o,a){var s=document.createElement("div"),l=s;return s.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+r,o&&((l=s.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),0!=a&&t.on(l,"mouseover",(function(t){i(e,t,n,l)})),s}function l(t){var e=t.severity;e||(e="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message CodeMirror-lint-message-"+e,void 0!==t.messageHTML?n.innerHTML=t.messageHTML:n.appendChild(document.createTextNode(t.message)),n}function u(e){var n=e.state.lint;if(n){var i=n.options,r=i.getAnnotations||e.getHelper(t.Pos(0,0),"lint");if(r)if(i.async||r.async)!function(e,n){var i=e.state.lint,r=++i.waitingFor;function o(){r=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,a){e.off("change",o),i.waitingFor==r&&(a&&n instanceof t&&(n=a),e.operation((function(){h(e,n)})))}),i.linterOptions,e)}(e,r);else{var o=r(e.getValue(),n.linterOptions,e);if(!o)return;o.then?o.then((function(t){e.operation((function(){h(e,t)}))})):e.operation((function(){h(e,o)}))}}}function h(t,n){var i,r,o=t.state.lint;if(o){var u=o.options;a(t);for(var h=function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r=i.from.line;(e[r]||(e[r]=[])).push(i)}return e}(n),c=0;c<h.length;++c){var d=h[c];if(d){var f=[];d=d.filter((function(t){return!(f.indexOf(t.message)>-1)&&f.push(t.message)}));for(var p=null,g=o.hasGutter&&document.createDocumentFragment(),m=0;m<d.length;++m){var v=d[m],y=v.severity;y||(y="error"),r=y,p="error"==(i=p)?i:r,u.formatAnnotation&&(v=u.formatAnnotation(v)),o.hasGutter&&g.appendChild(l(v)),v.to&&o.marked.push(t.markText(v.from,v.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+y,__annotation:v}))}o.hasGutter&&t.setGutterMarker(c,e,s(t,g,p,h[c].length>1,u.tooltips)),u.highlightLines&&t.addLineClass(c,"wrap","CodeMirror-lint-line-"+p)}}u.onUpdateLinting&&u.onUpdateLinting(n,h,t)}}function c(t){var e=t.state.lint;e&&(clearTimeout(e.timeout),e.timeout=setTimeout((function(){u(t)}),e.options.delay))}t.defineOption("lint",!1,(function(n,i,o){if(o&&o!=t.Init&&(a(n),!1!==n.state.lint.options.lintOnChange&&n.off("change",c),t.off(n.getWrapperElement(),"mouseover",n.state.lint.onMouseOver),clearTimeout(n.state.lint.timeout),delete n.state.lint),i){for(var s=n.getOption("gutters"),l=!1,h=0;h<s.length;++h)s[h]==e&&(l=!0);var d=n.state.lint=new r(n,i,l);d.options.lintOnChange&&n.on("change",c),0!=d.options.tooltips&&"gutter"!=d.options.tooltips&&t.on(n.getWrapperElement(),"mouseover",d.onMouseOver),u(n)}})),t.defineExtension("performLint",(function(){u(this)}))}(n(4631))},5615:(t,e,n)=>{!function(t){"use strict";function e(e,i){t.changeEnd(i).line==e.lastLine()&&n(e)}function n(t){var e="";t.lineCount()>1&&(e=t.display.scroller.clientHeight-30-t.getLineHandle(t.lastLine()).height+"px"),t.state.scrollPastEndPadding!=e&&(t.state.scrollPastEndPadding=e,t.display.lineSpace.parentNode.style.paddingBottom=e,t.off("refresh",n),t.setSize(),t.on("refresh",n))}t.defineOption("scrollPastEnd",!1,(function(i,r,o){o&&o!=t.Init&&(i.off("change",e),i.off("refresh",n),i.display.lineSpace.parentNode.style.paddingBottom="",i.state.scrollPastEndPadding=null),r&&(i.on("change",e),i.on("refresh",n),n(i))}))}(n(4631))},4631:function(t){t.exports=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),a=i||r||o,s=a&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(t),u=l&&/Qt\/\d+\.\d+/.test(t),h=!o&&/Chrome\//.test(t),c=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=d&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),m=/Android/.test(t),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),_=/\bCrOS\b/.test(t),x=/win/i.test(e),w=c&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(c=!1,l=!0);var b=y&&(u||c&&(null==w||w<12.11)),S=n||a&&s>=9;function M(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var P,T=function(t,e){var n=t.className,i=M(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function C(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function A(t,e){return C(t).appendChild(e)}function L(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function k(t,e,n,i){var r=L(t,e,n,i);return r.setAttribute("role","presentation"),r}function E(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function O(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function N(t,e){var n=t.className;M(e).test(n)||(t.className+=(n?" ":"")+e)}function I(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!M(n[i]).test(e)&&(e+=" "+n[i]);return e}P=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var R=function(t){t.select()};function D(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function j(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function z(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,a=r||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}}g?R=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:a&&(R=function(t){try{t.select()}catch(t){}});var V=function(){this.id=null,this.f=null,this.time=0,this.handler=D(this.onTimeout,this)};function G(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}V.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},V.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var $={toString:function(){return"CodeMirror.Pass"}},F={scroll:!1},B={origin:"*mouse"},H={origin:"+move"};function U(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var a=o-i;if(o==t.length||r+a>=e)return i+Math.min(a,e-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=e)return i}}var W=[""];function q(t){for(;W.length<=t;)W.push(X(W)+" ");return W[t]}function X(t){return t[t.length-1]}function Z(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Y(){}function K(t,e){var n;return Object.create?n=Object.create(t):(Y.prototype=t,n=new Y),e&&j(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&Q(t))||e.test(t):Q(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(t){return t.charCodeAt(0)>=768&&nt.test(t)}function rt(t,e,n){for(;(n<0?e>0:e<t.length)&&it(t.charAt(e));)e+=n;return e}function ot(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}var at=null;function st(t,e,n){var i;at=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:at=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:at=r)}return null!=i?i:at}var lt=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(a,s){var l,u="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!t.test(a))return!1;for(var h=a.length,c=[],d=0;d<h;++d)c.push((l=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var f=0,p=u;f<h;++f){var g=c[f];"m"==g?c[f]=p:p=g}for(var m=0,v=u;m<h;++m){var y=c[m];"1"==y&&"r"==v?c[m]="n":n.test(y)&&(v=y,"r"==y&&(c[m]="R"))}for(var _=1,x=c[0];_<h-1;++_){var w=c[_];"+"==w&&"1"==x&&"1"==c[_+1]?c[_]="1":","!=w||x!=c[_+1]||"1"!=x&&"n"!=x||(c[_]=x),x=w}for(var b=0;b<h;++b){var S=c[b];if(","==S)c[b]="N";else if("%"==S){var M=void 0;for(M=b+1;M<h&&"%"==c[M];++M);for(var P=b&&"!"==c[b-1]||M<h&&"1"==c[M]?"1":"N",T=b;T<M;++T)c[T]=P;b=M-1}}for(var C=0,A=u;C<h;++C){var L=c[C];"L"==A&&"1"==L?c[C]="L":n.test(L)&&(A=L)}for(var k=0;k<h;++k)if(e.test(c[k])){var E=void 0;for(E=k+1;E<h&&e.test(c[E]);++E);for(var O="L"==(k?c[k-1]:u),N=O==("L"==(E<h?c[E]:u))?O?"L":"R":u,I=k;I<E;++I)c[I]=N;k=E-1}for(var R,D=[],j=0;j<h;)if(i.test(c[j])){var z=j;for(++j;j<h&&i.test(c[j]);++j);D.push(new o(0,z,j))}else{var V=j,G=D.length,$="rtl"==s?1:0;for(++j;j<h&&"L"!=c[j];++j);for(var F=V;F<j;)if(r.test(c[F])){V<F&&(D.splice(G,0,new o(1,V,F)),G+=$);var B=F;for(++F;F<j&&r.test(c[F]);++F);D.splice(G,0,new o(2,B,F)),G+=$,V=F}else++F;V<j&&D.splice(G,0,new o(1,V,j))}return"ltr"==s&&(1==D[0].level&&(R=a.match(/^\s+/))&&(D[0].from=R[0].length,D.unshift(new o(0,0,R[0].length))),1==X(D).level&&(R=a.match(/\s+$/))&&(X(D).to-=R[0].length,D.push(new o(0,h-R[0].length,h)))),"rtl"==s?D.reverse():D}}();function ut(t,e){var n=t.order;return null==n&&(n=t.order=lt(t.text,e)),n}var ht=[],ct=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||ht).concat(n)}};function dt(t,e){return t._handlers&&t._handlers[e]||ht}function ft(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=G(r,n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function pt(t,e){var n=dt(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function gt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),pt(t,n||e.type,t,e),wt(e)||e.codemirrorIgnore}function mt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==G(n,e[i])&&n.push(e[i])}function vt(t,e){return dt(t,e).length>0}function yt(t){t.prototype.on=function(t,e){ct(this,t,e)},t.prototype.off=function(t,e){ft(this,t,e)}}function _t(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function xt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function wt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function bt(t){_t(t),xt(t)}function St(t){return t.target||t.srcElement}function Mt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var Pt,Tt,Ct=function(){if(a&&s<9)return!1;var t=L("div");return"draggable"in t||"dragDrop"in t}();function At(t){if(null==Pt){var e=L("span","​");A(t,L("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Pt=e.offsetWidth<=1&&e.offsetHeight>2&&!(a&&s<8))}var n=Pt?L("span","​"):L("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Lt(t){if(null!=Tt)return Tt;var e=A(t,document.createTextNode("AخA")),n=P(e,0,1).getBoundingClientRect(),i=P(e,1,2).getBoundingClientRect();return C(t),!(!n||n.left==n.right)&&(Tt=i.right-n.right<3)}var kt,Et=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Ot=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Nt="oncopy"in(kt=L("div"))||(kt.setAttribute("oncopy","return;"),"function"==typeof kt.oncopy),It=null;var Rt={},Dt={};function jt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Rt[t]=e}function zt(t){if("string"==typeof t&&Dt.hasOwnProperty(t))t=Dt[t];else if(t&&"string"==typeof t.name&&Dt.hasOwnProperty(t.name)){var e=Dt[t.name];"string"==typeof e&&(e={name:e}),(t=K(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return zt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return zt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Vt(t,e){e=zt(e);var n=Rt[e.name];if(!n)return Vt(t,"text/plain");var i=n(t,e);if(Gt.hasOwnProperty(e.name)){var r=Gt[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)i[a]=e.modeProps[a];return i}var Gt={};function $t(t,e){j(e,Gt.hasOwnProperty(t)?Gt[t]:Gt[t]={})}function Ft(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Bt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Ht(t,e,n){return!t.startState||t.startState(e,n)}var Ut=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Wt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function qt(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r})),i}function Xt(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function Zt(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function Yt(t){if(null==t.parent)return null;for(var e=t.parent,n=G(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function Kt(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var s=t.lines[a].height;if(e<s)break;e-=s}return n+a}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function Qt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,n){if(void 0===n&&(n=null),!(this instanceof te))return new te(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ne(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function ie(t){return te(t.line,t.ch)}function re(t,e){return ee(t,e)<0?e:t}function oe(t,e){return ee(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function se(t,e){if(e.line<t.first)return te(t.first,0);var n=t.first+t.size-1;return e.line>n?te(n,Wt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?te(t.line,e):n<0?te(t.line,0):t}(e,Wt(t,e.line).text.length)}function le(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=se(t,e[i]);return n}Ut.prototype.eol=function(){return this.pos>=this.string.length},Ut.prototype.sol=function(){return this.pos==this.lineStart},Ut.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ut.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ut.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Ut.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Ut.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Ut.prototype.skipToEnd=function(){this.pos=this.string.length},Ut.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Ut.prototype.backUp=function(t){this.pos-=t},Ut.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},Ut.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ut.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Ut.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Ut.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ue=function(t,e){this.state=t,this.lookAhead=e},he=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function ce(t,e,n,i){var r=[t.state.modeGen],o={};xe(t,e.text,t.doc.mode,n,(function(t,e){return r.push(t,e)}),o,i);for(var a=n.state,s=function(i){n.baseTokens=r;var s=t.state.overlays[i],l=1,u=0;n.state=!0,xe(t,e.text,s.mode,n,(function(t,e){for(var n=l;u<t;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,u=Math.min(t,i)}if(e)if(s.opaque)r.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)s(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function de(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=fe(t,Yt(e)),r=e.text.length>t.options.maxHighlightLength&&Ft(t.doc.mode,i.state),o=ce(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function fe(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new he(i,!0,e);var o=function(t,e,n){for(var i,r,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=Wt(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof ue?u.lookAhead:0)<=o.modeFrontier))return s;var h=z(l.text,null,t.options.tabSize);(null==r||i>h)&&(r=s-1,i=h)}return r}(t,e,n),a=o>i.first&&Wt(i,o-1).stateAfter,s=a?he.fromSaved(i,a,o):new he(i,Ht(i.mode),o);return i.iter(o,e,(function(n){pe(t,n.text,s);var i=s.line;n.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()})),n&&(i.modeFrontier=s.line),s}function pe(t,e,n,i){var r=t.doc.mode,o=new Ut(e,t.options.tabSize,n);for(o.start=o.pos=i||0,""==e&&ge(r,n.state);!o.eol();)me(r,o,n.state),o.start=o.pos}function ge(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Bt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function me(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Bt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}he.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},he.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},he.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},he.fromSaved=function(t,e,n){return e instanceof ue?new he(t,Ft(t.mode,e.state),n,e.lookAhead):new he(t,Ft(t.mode,e),n)},he.prototype.save=function(t){var e=!1!==t?Ft(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ue(e,this.maxLookAhead):e};var ve=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ye(t,e,n,i){var r,o,a=t.doc,s=a.mode,l=Wt(a,(e=se(a,e)).line),u=fe(t,e.line,n),h=new Ut(l.text,t.options.tabSize,u);for(i&&(o=[]);(i||h.pos<e.ch)&&!h.eol();)h.start=h.pos,r=me(s,h,u.state),i&&o.push(new ve(h,r,Ft(a.mode,u.state)));return i?o:new ve(h,r,u.state)}function _e(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[i])||(e[i]+=" "+n[2])}return t}function xe(t,e,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,u=0,h=null,c=new Ut(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&_e(ge(n,i.state),o);!c.eol();){if(c.pos>t.options.maxHighlightLength?(s=!1,a&&pe(t,e,i,c.pos),c.pos=e.length,l=null):l=_e(me(n,c,i.state,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||h!=l){for(;u<c.start;)r(u=Math.min(c.start,u+5e3),h);h=l}c.start=c.pos}for(;u<c.pos;){var p=Math.min(c.pos,u+5e3);r(p,h),u=p}}var we=!1,be=!1;function Se(t,e,n){this.marker=t,this.from=e,this.to=n}function Me(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Pe(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Te(t,e){if(e.full)return null;var n=Jt(t,e.from.line)&&Wt(t,e.from.line).markedSpans,i=Jt(t,e.to.line)&&Wt(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,a=0==ee(e.from,e.to),s=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new Se(a,o.from,s?null:o.to))}}return i}(n,r,a),l=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new Se(a,s?null:o.from-e,null==o.to?null:o.to-e))}}return i}(i,o,a),u=1==e.text.length,h=X(e.text).length+(u?r:0);if(s)for(var c=0;c<s.length;++c){var d=s[c];if(null==d.to){var f=Me(l,d.marker);f?u&&(d.to=null==f.to?null:f.to+h):d.to=r}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=h),null==g.from?Me(s,g.marker)||(g.from=h,u&&(s||(s=[])).push(g)):(g.from+=h,u&&(s||(s=[])).push(g))}s&&(s=Ce(s)),l&&l!=s&&(l=Ce(l));var m=[s];if(!u){var v,y=e.text.length-2;if(y>0&&s)for(var _=0;_<s.length;++_)null==s[_].to&&(v||(v=[])).push(new Se(s[_].marker,null,null));for(var x=0;x<y;++x)m.push(v);m.push(l)}return m}function Ce(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Ae(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Le(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function ke(t){return t.inclusiveLeft?-1:0}function Ee(t){return t.inclusiveRight?1:0}function Oe(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=ee(i.from,r.from)||ke(t)-ke(e);return o?-o:ee(i.to,r.to)||Ee(t)-Ee(e)||e.id-t.id}function Ne(t,e){var n,i=be&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(e?r.from:r.to)&&(!n||Oe(n,r.marker)<0)&&(n=r.marker);return n}function Ie(t){return Ne(t,!0)}function Re(t){return Ne(t,!1)}function De(t,e){var n,i=be&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Oe(n,o.marker)<0)&&(n=o.marker)}return n}function je(t,e,n,i,r){var o=Wt(t,e),a=be&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),h=ee(u.from,n)||ke(l.marker)-ke(r),c=ee(u.to,i)||Ee(l.marker)-Ee(r);if(!(h>=0&&c<=0||h<=0&&c>=0)&&(h<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(u.to,n)>=0:ee(u.to,n)>0)||h>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(u.from,i)<=0:ee(u.from,i)<0)))return!0}}}function ze(t){for(var e;e=Ie(t);)t=e.find(-1,!0).line;return t}function Ve(t,e){var n=Wt(t,e),i=ze(n);return n==i?e:Yt(i)}function Ge(t,e){if(e>t.lastLine())return e;var n,i=Wt(t,e);if(!$e(t,i))return e;for(;n=Re(i);)i=n.find(1,!0).line;return Yt(i)+1}function $e(t,e){var n=be&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Fe(t,e,i))return!0}}function Fe(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return Fe(t,i.line,Me(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if((r=e.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Fe(t,e,r))return!0}function Be(t){for(var e=0,n=(t=ze(t)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;e+=s.height}return e}function He(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=Ie(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=Re(i);){var o=e.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Ue(t){var e=t.display,n=t.doc;e.maxLine=Wt(n,n.first),e.maxLineLength=He(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=He(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var We=function(t,e,n){this.text=t,Le(this,e),this.height=n?n(this):1};function qe(t){t.parent=null,Ae(t)}We.prototype.lineNo=function(){return Yt(this)},yt(We);var Xe={},Ze={};function Ye(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Ze:Xe;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ke(t,e){var n=k("span",null,null,l?"padding-right: .1px":null),i={pre:k("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o=r?e.rest[r-1]:e.line,a=void 0;i.pos=0,i.addToken=Qe,Lt(t.display.measure)&&(a=ut(o,t.doc.direction))&&(i.addToken=tn(i.addToken,a)),i.map=[],nn(o,i,de(t,o,e!=t.display.externalMeasured&&Yt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=I(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=I(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(At(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var s=i.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return pt(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=I(i.pre.className,i.textClass||"")),i}function Je(t){var e=L("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,n,i,r,o,l){if(e){var u,h=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o=" "),i+=o,n=" "==o}return i}(e,t.trailingSpace):e,c=t.cm.state.specialChars,d=!1;if(c.test(e)){u=document.createDocumentFragment();for(var f=0;;){c.lastIndex=f;var p=c.exec(e),g=p?p.index-f:e.length-f;if(g){var m=document.createTextNode(h.slice(f,f+g));a&&s<9?u.appendChild(L("span",[m])):u.appendChild(m),t.map.push(t.pos,t.pos+g,m),t.col+=g,t.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,_=y-t.col%y;(v=u.appendChild(L("span",q(_),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),t.col+=_}else"\r"==p[0]||"\n"==p[0]?((v=u.appendChild(L("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((v=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),a&&s<9?u.appendChild(L("span",[v])):u.appendChild(v),t.col+=1);t.map.push(t.pos,t.pos+1,v),t.pos++}}else t.col+=e.length,u=document.createTextNode(h),t.map.push(t.pos,t.pos+e.length,u),a&&s<9&&(d=!0),t.pos+=e.length;if(t.trailingSpace=32==h.charCodeAt(e.length-1),n||i||r||d||o||l){var x=n||"";i&&(x+=i),r&&(x+=r);var w=L("span",[u],x,o);if(l)for(var b in l)l.hasOwnProperty(b)&&"style"!=b&&"class"!=b&&w.setAttribute(b,l[b]);return t.content.appendChild(w)}t.content.appendChild(u)}}function tn(t,e){return function(n,i,r,o,a,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,h=u+i.length;;){for(var c=void 0,d=0;d<e.length&&!((c=e[d]).to>u&&c.from<=u);d++);if(c.to>=h)return t(n,i,r,o,a,s,l);t(n,i.slice(0,c.to-u),r,o,null,s,l),o=null,i=i.slice(c.to-u),u=c.to}}}function en(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var a,s,l,u,h,c,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=u=h=s="",d=null,c=null,v=1/0;for(var y=[],_=void 0,x=0;x<i.length;++x){var w=i[x],b=w.marker;if("bookmark"==b.type&&w.from==p&&b.widgetNode)y.push(b);else if(w.from<=p&&(null==w.to||w.to>p||b.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&v>w.to&&(v=w.to,u=""),b.className&&(l+=" "+b.className),b.css&&(s=(s?s+";":"")+b.css),b.startStyle&&w.from==p&&(h+=" "+b.startStyle),b.endStyle&&w.to==v&&(_||(_=[])).push(b.endStyle,w.to),b.title&&((d||(d={})).title=b.title),b.attributes)for(var S in b.attributes)(d||(d={}))[S]=b.attributes[S];b.collapsed&&(!c||Oe(c.marker,b)<0)&&(c=w)}else w.from>p&&v>w.from&&(v=w.from)}if(_)for(var M=0;M<_.length;M+=2)_[M+1]==v&&(u+=" "+_[M]);if(!c||c.from==p)for(var P=0;P<y.length;++P)en(e,0,y[P]);if(c&&(c.from||0)==p){if(en(e,(null==c.to?f+1:c.to)-p,c.marker,null==c.from),null==c.to)return;c.to==p&&(c=!1)}}if(p>=f)break;for(var T=Math.min(f,v);;){if(m){var C=p+m.length;if(!c){var A=C>T?m.slice(0,T-p):m;e.addToken(e,A,a?a+l:l,h,p+A.length==v?u:"",s,d)}if(C>=T){m=m.slice(T-p),p=T;break}p=C,h=""}m=r.slice(o,o=n[g++]),a=Ye(n[g++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,r.slice(o,o=n[L]),Ye(n[L+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Re(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Yt(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=$e(t,e)}function on(t,e,n){for(var i,r=[],o=e;o<n;o=i){var a=new rn(t.doc,Wt(t.doc,o),o);i=o+a.size,r.push(a)}return r}var an=null;var sn=null;function ln(t,e){var n=dt(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);an?i=an.delayedCallbacks:sn?i=sn:(i=sn=[],setTimeout(un,0));for(var o=function(t){i.push((function(){return n[t].apply(null,r)}))},a=0;a<n.length;++a)o(a)}}function un(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function hn(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?fn(t,e):"gutter"==o?gn(t,e,n,i):"class"==o?pn(t,e):"widget"==o&&mn(t,e,i)}e.changes=null}function cn(t){return t.node==t.text&&(t.node=L("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),a&&s<8&&(t.node.style.zIndex=2)),t.node}function dn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ke(t,e)}function fn(t,e){var n=e.text.className,i=dn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,pn(t,e)):n&&(e.text.className=n)}function pn(t,e){(function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=cn(e);e.background=i.insertBefore(L("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}})(t,e),e.line.wrapClass?cn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function gn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=cn(e);e.gutterBackground=L("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=cn(e),s=e.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),t.display.input.setUneditable(s),a.insertBefore(s,e.text),e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(L("div",Qt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<t.display.gutterSpecs.length;++l){var u=t.display.gutterSpecs[l].className,h=o.hasOwnProperty(u)&&o[u];h&&s.appendChild(L("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function mn(t,e,n){e.alignable&&(e.alignable=null);for(var i=M("CodeMirror-linewidget"),r=e.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&e.node.removeChild(r);yn(t,e,n)}function vn(t,e,n,i){var r=dn(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),pn(t,e),gn(t,e,n,i),yn(t,e,i),e.node}function yn(t,e,n){if(_n(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)_n(t,e.rest[i],e,n,!1)}function _n(t,e,n,i,r){if(e.widgets)for(var o=cn(n),a=0,s=e.widgets;a<s.length;++a){var l=s[a],u=L("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),xn(l,u,n,i),t.display.input.setUneditable(u),r&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(l,"redraw")}}function xn(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function wn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!E(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),A(e.display.measure,L("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function bn(t,e){for(var n=St(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Sn(t){return t.lineSpace.offsetTop}function Mn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Pn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=A(t.measure,L("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Tn(t){return 50-t.display.nativeBarWidth}function Cn(t){return t.display.scroller.clientWidth-Tn(t)-t.display.barWidth}function An(t){return t.display.scroller.clientHeight-Tn(t)-t.display.barHeight}function Ln(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(Yt(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}}function kn(t,e,n,i){return Nn(t,On(t,e),n,i)}function En(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[hi(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function On(t,e){var n=Yt(e),i=En(t,n);i&&!i.text?i=null:i&&i.changes&&(hn(t,i,n,oi(t)),t.curOp.forceUpdate=!0),i||(i=function(t,e){var n=Yt(e=ze(e)),i=t.display.externalMeasured=new rn(t.doc,e,n);i.lineN=n;var r=i.built=Ke(t,i);return i.text=r.pre,A(t.display.lineMeasure,r.pre),i}(t,e));var r=Ln(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Nn(t,e,n,i,r){e.before&&(n=-1);var o,l=n+(i||"");return e.cache.hasOwnProperty(l)?o=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var i=t.options.lineWrapping,r=i&&Cn(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,i){var r,o=Dn(e.map,n,i),l=o.node,u=o.start,h=o.end,c=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;u&&it(e.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+h<o.coverEnd&&it(e.line.text.charAt(o.coverStart+h));)++h;if((r=a&&s<9&&0==u&&h==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():jn(P(l,u,h).getClientRects(),i)).left||r.right||0==u)break;h=u,u-=1,c="right"}a&&s<11&&(r=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=It)return It;var e=A(t,L("span","x")),n=e.getBoundingClientRect(),i=P(e,0,1).getBoundingClientRect();return It=Math.abs(n.left-i.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,r))}else{var f;u>0&&(c=i="right"),r=t.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!u&&(!r||!r.left&&!r.right)){var p=l.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+ri(t.display),top:p.top,bottom:p.bottom}:Rn}for(var g=r.top-e.rect.top,m=r.bottom-e.rect.top,v=(g+m)/2,y=e.view.measure.heights,_=0;_<y.length-1&&!(v<y[_]);_++);var x=_?y[_-1]:0,w=y[_],b={left:("right"==c?r.right:r.left)-e.rect.left,right:("left"==c?r.left:r.right)-e.rect.left,top:x,bottom:w};return r.left||r.right||(b.bogus=!0),t.options.singleCursorHeightPerLine||(b.rtop=g,b.rbottom=m),b}(t,e,n,i)).bogus||(e.cache[l]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var In,Rn={left:0,right:0,top:0,bottom:0};function Dn(t,e,n){for(var i,r,o,a,s,l,u=0;u<t.length;u+=3)if(s=t[u],l=t[u+1],e<s?(r=0,o=1,a="left"):e<l?o=1+(r=e-s):(u==t.length-3||e==l&&t[u+3]>e)&&(r=(o=l-s)-1,e>=l&&(a="right")),null!=r){if(i=t[u+2],s==l&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],a="left";if("right"==n&&r==l-s)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:l}}function jn(t,e){var n=Rn;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var r=t.length-1;r>=0&&(n=t[r]).left==n.right;r--);return n}function zn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Vn(t){t.display.externalMeasure=null,C(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)zn(t.display.view[e])}function Gn(t){Vn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function $n(){return h&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Fn(){return h&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Bn(t){var e=ze(t).widgets,n=0;if(e)for(var i=0;i<e.length;++i)e[i].above&&(n+=wn(e[i]));return n}function Hn(t,e,n,i,r){if(!r){var o=Bn(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=Be(e);if("local"==i?a+=Sn(t.display):a-=t.display.viewOffset,"page"==i||"window"==i){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:Fn());var l=s.left+("window"==i?0:$n());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Un(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=$n(),r-=Fn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function Wn(t,e,n,i,r){return i||(i=Wt(t.doc,e.line)),Hn(t,i,kn(t,i,e.ch,r),n)}function qn(t,e,n,i,r,o){function a(e,a){var s=Nn(t,r,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Hn(t,i,s,n)}i=i||Wt(t.doc,e.line),r||(r=On(t,i));var s=ut(i,t.doc.direction),l=e.ch,u=e.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function h(t,e,n){return a(n?t-1:t,1==s[e].level!=n)}var c=st(s,l,u),d=at,f=h(l,c,"before"==u);return null!=d&&(f.other=h(l,d,"before"!=u)),f}function Xn(t,e){var n=0;e=se(t.doc,e),t.options.lineWrapping||(n=ri(t.display)*e.ch);var i=Wt(t.doc,e.line),r=Be(i)+Sn(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Zn(t,e,n,i,r){var o=te(t,e,n);return o.xRel=r,i&&(o.outside=i),o}function Yn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return Zn(i.first,0,null,-1,-1);var r=Kt(i,n),o=i.first+i.size-1;if(r>o)return Zn(i.first+i.size-1,Wt(i,o).text.length,null,1,1);e<0&&(e=0);for(var a=Wt(i,r);;){var s=ti(t,a,r,e,n),l=De(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==r)return u;a=Wt(i,r=u.line)}}function Kn(t,e,n,i){i-=Bn(e);var r=e.text.length,o=ot((function(e){return Nn(t,n,e-1).bottom<=i}),r,0);return{begin:o,end:r=ot((function(e){return Nn(t,n,e).top>i}),o,r)}}function Jn(t,e,n,i){return n||(n=On(t,e)),Kn(t,e,n,Hn(t,e,Nn(t,n,i),"line").top)}function Qn(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function ti(t,e,n,i,r){r-=Be(e);var o=On(t,e),a=Bn(e),s=0,l=e.text.length,u=!0,h=ut(e,t.doc.direction);if(h){var c=(t.options.lineWrapping?ni:ei)(t,e,n,o,h,i,r);s=(u=1!=c.level)?c.from:c.to-1,l=u?c.to:c.from-1}var d,f,p=null,g=null,m=ot((function(e){var n=Nn(t,o,e);return n.top+=a,n.bottom+=a,!!Qn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=e,g=n),!0)}),s,l),v=!1;if(g){var y=i-g.left<g.right-i,_=y==u;m=p+(_?0:1),f=_?"after":"before",d=y?g.left:g.right}else{u||m!=l&&m!=s||m++,f=0==m?"after":m==e.text.length?"before":Nn(t,o,m-(u?1:0)).bottom+a<=r==u?"after":"before";var x=qn(t,te(n,m,f),"line",e,o);d=x.left,v=r<x.top?-1:r>=x.bottom?1:0}return Zn(n,m=rt(e.text,m,1),f,v,i-d)}function ei(t,e,n,i,r,o,a){var s=ot((function(s){var l=r[s],u=1!=l.level;return Qn(qn(t,te(n,u?l.to:l.from,u?"before":"after"),"line",e,i),o,a,!0)}),0,r.length-1),l=r[s];if(s>0){var u=1!=l.level,h=qn(t,te(n,u?l.from:l.to,u?"after":"before"),"line",e,i);Qn(h,o,a,!0)&&h.top>a&&(l=r[s-1])}return l}function ni(t,e,n,i,r,o,a){var s=Kn(t,e,i,a),l=s.begin,u=s.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var h=null,c=null,d=0;d<r.length;d++){var f=r[d];if(!(f.from>=u||f.to<=l)){var p=Nn(t,i,1!=f.level?Math.min(u,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!h||c>g)&&(h=f,c=g)}}return h||(h=r[r.length-1]),h.from<l&&(h={from:l,to:h.to,level:h.level}),h.to>u&&(h={from:h.from,to:u,level:h.level}),h}function ii(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==In){In=L("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)In.appendChild(document.createTextNode("x")),In.appendChild(L("br"));In.appendChild(document.createTextNode("x"))}A(t.measure,In);var n=In.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),C(t.measure),n||1}function ri(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=L("span","xxxxxxxxxx"),n=L("pre",[e],"CodeMirror-line-like");A(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function oi(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=t.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+r,i[s]=o.clientWidth}return{fixedPos:ai(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function ai(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function si(t){var e=ii(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ri(t.display)-3);return function(r){if($e(t.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function li(t){var e=t.doc,n=si(t);e.iter((function(t){var e=n(t);e!=t.height&&Zt(t,e)}))}function ui(t,e,n,i){var r=t.display;if(!n&&"true"==St(e).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(t){return null}var l,u=Yn(t,o,a);if(i&&u.xRel>0&&(l=Wt(t.doc,u.line).text).length==u.ch){var h=z(l,l.length,t.options.tabSize)-l.length;u=te(u.line,Math.max(0,Math.round((o-Pn(t.display).left)/ri(t.display))-h))}return u}function hi(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function ci(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)be&&Ve(t.doc,e)<r.viewTo&&fi(t);else if(n<=r.viewFrom)be&&Ge(t.doc,n+i)>r.viewFrom?fi(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)fi(t);else if(e<=r.viewFrom){var o=pi(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):fi(t)}else if(n>=r.viewTo){var a=pi(t,e,e,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):fi(t)}else{var s=pi(t,e,e,-1),l=pi(t,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(on(t,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):fi(t)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(r.externalMeasured=null))}function di(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[hi(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==G(a,n)&&a.push(n)}}}function fi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function pi(t,e,n,i){var r,o=hi(t,e),a=t.display.view;if(!be||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=t.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=e){if(i>0){if(o==a.length-1)return null;r=s+a[o].size-e,o++}else r=s-e;e+=r,n+=r}for(;Ve(t.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function gi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function mi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function vi(t,e){void 0===e&&(e=!0);var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=t.options.$customCursor;a&&(e=!0);for(var s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var l=n.sel.ranges[s];if(!(l.from().line>=t.display.viewTo||l.to().line<t.display.viewFrom)){var u=l.empty();if(a){var h=a(t,l);h&&yi(t,h,r)}else(u||t.options.showCursorWhenSelecting)&&yi(t,l.head,r);u||xi(t,l,o)}}return i}function yi(t,e,n){var i=qn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(L("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var o=Wn(t,e,"div",null,null),a=o.right-o.left;r.style.width=(a>0?a:t.defaultCharWidth())+"px"}if(i.other){var s=n.appendChild(L("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=i.other.left+"px",s.style.top=i.other.top+"px",s.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function _i(t,e){return t.top-e.top||t.left-e.left}function xi(t,e,n){var i=t.display,r=t.doc,o=document.createDocumentFragment(),a=Pn(t.display),s=a.left,l=Math.max(i.sizerWidth,Cn(t)-i.sizer.offsetLeft)-a.right,u="ltr"==r.direction;function h(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?l-t:n)+"px;\n                             height: "+(i-e)+"px"))}function c(e,n,i){var o,a,c=Wt(r,e),d=c.text.length;function f(n,i){return Wn(t,te(e,n),"div",c,i)}function p(e,n,i){var r=Jn(t,c,null,e),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(c.text.charAt(r.end-1))?2:1),o)[o]}var g=ut(c,r.direction);return function(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(i(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}(g,n||0,null==i?d:i,(function(t,e,r,c){var m="ltr"==r,v=f(t,m?"left":"right"),y=f(e-1,m?"right":"left"),_=null==n&&0==t,x=null==i&&e==d,w=0==c,b=!g||c==g.length-1;if(y.top-v.top<=3){var S=(u?x:_)&&b,M=(u?_:x)&&w?s:(m?v:y).left,P=S?l:(m?y:v).right;h(M,v.top,P-M,v.bottom)}else{var T,C,A,L;m?(T=u&&_&&w?s:v.left,C=u?l:p(t,r,"before"),A=u?s:p(e,r,"after"),L=u&&x&&b?l:y.right):(T=u?p(t,r,"before"):s,C=!u&&_&&w?l:v.right,A=!u&&x&&b?s:y.left,L=u?p(e,r,"after"):l),h(T,v.top,C-T,v.bottom),v.bottom<y.top&&h(s,v.bottom,null,y.top),h(A,y.top,L-A,y.bottom)}(!o||_i(v,o)<0)&&(o=v),_i(y,o)<0&&(o=y),(!a||_i(v,a)<0)&&(a=v),_i(y,a)<0&&(a=y)})),{start:o,end:a}}var d=e.from(),f=e.to();if(d.line==f.line)c(d.line,d.ch,f.ch);else{var p=Wt(r,d.line),g=Wt(r,f.line),m=ze(p)==ze(g),v=c(d.line,d.ch,m?p.text.length+1:null).end,y=c(f.line,m?0:null,f.ch).start;m&&(v.top<y.top-2?(h(v.right,v.top,null,v.bottom),h(s,y.top,y.left,y.bottom)):h(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&h(s,v.bottom,null,y.top)}n.appendChild(o)}function wi(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||Pi(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function bi(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Mi(t))}function Si(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Pi(t))}),100)}function Mi(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(pt(t,"focus",t,e),t.state.focused=!0,N(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),wi(t))}function Pi(t,e){t.state.delayingBlurEvent||(t.state.focused&&(pt(t,"blur",t,e),t.state.focused=!1,T(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Ti(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=Math.max(0,e.scroller.getBoundingClientRect().top),r=e.lineDiv.getBoundingClientRect().top,o=0,l=0;l<e.view.length;l++){var u=e.view[l],h=t.options.lineWrapping,c=void 0,d=0;if(!u.hidden){if(r+=u.line.height,a&&s<8){var f=u.node.offsetTop+u.node.offsetHeight;c=f-n,n=f}else{var p=u.node.getBoundingClientRect();c=p.bottom-p.top,!h&&u.text.firstChild&&(d=u.text.firstChild.getBoundingClientRect().right-p.left-1)}var g=u.line.height-c;if((g>.005||g<-.005)&&(r<i&&(o-=g),Zt(u.line,c),Ci(u.line),u.rest))for(var m=0;m<u.rest.length;m++)Ci(u.rest[m]);if(d>t.display.sizerWidth){var v=Math.ceil(d/ri(t.display));v>t.display.maxLineLength&&(t.display.maxLineLength=v,t.display.maxLine=u.line,t.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(e.scroller.scrollTop+=o)}function Ci(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Ai(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Sn(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=Kt(e,i),a=Kt(e,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=Kt(e,Be(Wt(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=a&&(o=Kt(e,Be(Wt(e,l))-t.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function Li(t,e){var n=t.display,i=ii(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=An(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var s=t.doc.height+Mn(n),l=e.top<i,u=e.bottom>s-i;if(e.top<r)a.scrollTop=l?0:e.top;else if(e.bottom>r+o){var h=Math.min(e.top,(u?s:e.bottom)-o);h!=r&&(a.scrollTop=h)}var c=t.options.fixedGutter?0:n.gutters.offsetWidth,d=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-c,f=Cn(t)-n.gutters.offsetWidth,p=e.right-e.left>f;return p&&(e.right=e.left+f),e.left<10?a.scrollLeft=0:e.left<d?a.scrollLeft=Math.max(0,e.left+c-(p?0:10)):e.right>f+d-3&&(a.scrollLeft=e.right+(p?0:10)-f),a}function ki(t,e){null!=e&&(Ni(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ei(t){Ni(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Oi(t,e,n){null==e&&null==n||Ni(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Ni(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Ii(t,Xn(t,e.from),Xn(t,e.to),e.margin))}function Ii(t,e,n,i){var r=Li(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});Oi(t,r.scrollLeft,r.scrollTop)}function Ri(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||lr(t,{top:e}),Di(t,e,!0),n&&lr(t),ir(t,100))}function Di(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ji(t,e,n,i){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,cr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function zi(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Mn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Tn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Vi=function(t,e,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,t(i),t(r),ct(i,"scroll",(function(){i.clientHeight&&e(i.scrollTop,"vertical")})),ct(r,"scroll",(function(){r.clientWidth&&e(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Vi.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},Vi.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Vi.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Vi.prototype.zeroWidthHack=function(){var t=y&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new V,this.disableVert=new V},Vi.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function i(){var r=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}))},Vi.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Gi=function(){};function $i(t,e){e||(e=zi(t));var n=t.display.barWidth,i=t.display.barHeight;Fi(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&Ti(t),Fi(t,zi(t)),n=t.display.barWidth,i=t.display.barHeight}function Fi(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Gi.prototype.update=function(){return{bottom:0,right:0}},Gi.prototype.setScrollLeft=function(){},Gi.prototype.setScrollTop=function(){},Gi.prototype.clear=function(){};var Bi={native:Vi,null:Gi};function Hi(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&T(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Bi[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ct(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?ji(t,e):Ri(t,e)}),t),t.display.scrollbars.addClass&&N(t.display.wrapper,t.display.scrollbars.addClass)}var Ui=0;function Wi(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ui,markArrays:null},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function qi(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}(n)}finally{an=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Xi(e[n]);for(var i=0;i<e.length;i++)Zi(e[i]);for(var r=0;r<e.length;r++)Yi(e[r]);for(var o=0;o<e.length;o++)Ki(e[o]);for(var a=0;a<e.length;a++)Ji(e[a])}(t)}))}function Xi(t){var e=t.cm,n=e.display;(function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Tn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Tn(t)+"px",e.scrollbarsClipped=!0)})(e),t.updateMaxLine&&Ue(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new or(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Zi(t){t.updatedDisplay=t.mustUpdate&&ar(t.cm,t.update)}function Yi(t){var e=t.cm,n=e.display;t.updatedDisplay&&Ti(e),t.barMeasure=zi(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=kn(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Tn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Cn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Ki(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ji(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==O();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&$i(e,t.barMeasure),t.updatedDisplay&&hr(e,t.barMeasure),t.selectionChanged&&wi(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&bi(t.cm)}function Ji(t){var e=t.cm,n=e.display,i=e.doc;t.updatedDisplay&&sr(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Di(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ji(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!gt(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=L("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Sn(t.display))+"px;\n                         height: "+(e.bottom-e.top+Tn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,i){var r;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==e.sticky?te(e.line,e.ch+1,"before"):e,e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e);for(var o=0;o<5;o++){var a=!1,s=qn(t,e),l=n&&n!=e?qn(t,n):s,u=Li(t,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),h=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=u.scrollTop&&(Ri(t,u.scrollTop),Math.abs(t.doc.scrollTop-h)>1&&(a=!0)),null!=u.scrollLeft&&(ji(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(a=!0)),!a)break}return r}(e,se(i,t.scrollToPos.from),se(i,t.scrollToPos.to),t.scrollToPos.margin));var r=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||pt(r[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&pt(o[s],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&pt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Qi(t,e){if(t.curOp)return e();Wi(t);try{return e()}finally{qi(t)}}function tr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Wi(t);try{return e.apply(t,arguments)}finally{qi(t)}}}function er(t){return function(){if(this.curOp)return t.apply(this,arguments);Wi(this);try{return t.apply(this,arguments)}finally{qi(this)}}}function nr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Wi(e);try{return t.apply(this,arguments)}finally{qi(e)}}}function ir(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,D(rr,t))}function rr(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=fe(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(i.line>=t.display.viewFrom){var a=o.styles,s=o.text.length>t.options.maxHighlightLength?Ft(e.mode,i.state):null,l=ce(t,o,i,!0);s&&(i.state=s),o.styles=l.styles;var u=o.styleClasses,h=l.classes;h?o.styleClasses=h:u&&(o.styleClasses=null);for(var c=!a||a.length!=o.styles.length||u!=h&&(!u||!h||u.bgClass!=h.bgClass||u.textClass!=h.textClass),d=0;!c&&d<a.length;++d)c=a[d]!=o.styles[d];c&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=t.options.maxHighlightLength&&pe(t,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ir(t,t.options.workDelay),!0})),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&Qi(t,(function(){for(var e=0;e<r.length;e++)di(t,r[e],"text")}))}}var or=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Ai(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Cn(t),this.force=n,this.dims=oi(t),this.events=[]};function ar(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return fi(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gi(t))return!1;dr(t)&&(fi(t),e.dims=oi(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),a=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),be&&(o=Ve(t.doc,o),a=Ge(t.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;(function(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=on(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=on(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(hi(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(on(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,hi(t,n)))),i.viewTo=n})(t,o,a),n.viewOffset=Be(Wt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var u=gi(t);if(!s&&0==u&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var h=function(t){if(t.hasFocus())return null;var e=O();if(!e||!E(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&E(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(t);return u>4&&(n.lineDiv.style.display="none"),function(t,e,n){var i=t.display,r=t.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function s(e){var n=e.nextSibling;return l&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var u=i.view,h=i.viewFrom,c=0;c<u.length;c++){var d=u[c];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=s(a);var f=r&&null!=e&&e<=h&&d.lineNumber;d.changes&&(G(d.changes,"gutter")>-1&&(f=!1),hn(t,d,h,n)),f&&(C(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Qt(t.options,h)))),a=d.node.nextSibling}else{var p=vn(t,d,h,n);o.insertBefore(p,a)}h+=d.size}for(;a;)a=s(a)}(t,n.updateLineNumbers,e.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=O()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&E(document.body,t.anchorNode)&&E(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(h),C(n.cursorDiv),C(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ir(t,400)),n.updateLineNumbers=null,!0}function sr(t,e){for(var n=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldDisplayWidth!=Cn(t))i&&(e.visible=Ai(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Mn(t.display)-An(t),n.top)}),e.visible=Ai(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!ar(t,e))break;Ti(t);var r=zi(t);mi(t),$i(t,r),hr(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function lr(t,e){var n=new or(t,e);if(ar(t,n)){Ti(t),sr(t,n);var i=zi(t);mi(t),$i(t,i),hr(t,i),n.finish()}}function ur(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",ln(t,"gutterChanged",t)}function hr(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Tn(t)+"px"}function cr(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=ai(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function dr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=Qt(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ur(t.display),!0}return!1}function fr(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:a})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pr(t){var e=t.gutters,n=t.gutterSpecs;C(e),t.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,s=e.appendChild(L("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(t.lineGutter=s,s.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",ur(t)}function gr(t){pr(t.display),ci(t),cr(t)}function mr(t,e,i,r){var o=this;this.input=i,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=k("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=k("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=k("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[u],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fr(r.gutters,r.lineNumbers),pr(o),i.init(o)}or.prototype.signal=function(t,e){vt(t,e)&&this.events.push(arguments)},or.prototype.finish=function(){for(var t=0;t<this.events.length;t++)pt.apply(null,this.events[t])};var vr=0,yr=null;function _r(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function xr(t){var e=_r(t);return e.x*=yr,e.y*=yr,e}function wr(t,e){var i=_r(e),r=i.x,o=i.y,a=yr;0===e.deltaMode&&(r=e.deltaX,o=e.deltaY,a=1);var s=t.display,u=s.scroller,h=u.scrollWidth>u.clientWidth,d=u.scrollHeight>u.clientHeight;if(r&&h||o&&d){if(o&&y&&l)t:for(var f=e.target,p=s.view;f!=u;f=f.parentNode)for(var g=0;g<p.length;g++)if(p[g].node==f){t.display.currentWheelTarget=f;break t}if(r&&!n&&!c&&null!=a)return o&&d&&Ri(t,Math.max(0,u.scrollTop+o*a)),ji(t,Math.max(0,u.scrollLeft+r*a)),(!o||o&&d)&&_t(e),void(s.wheelStartX=null);if(o&&null!=a){var m=o*a,v=t.doc.scrollTop,_=v+s.wrapper.clientHeight;m<0?v=Math.max(0,v+m-50):_=Math.min(t.doc.height,_+m+50),lr(t,{top:v,bottom:_})}vr<20&&0!==e.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var t=u.scrollLeft-s.wheelStartX,e=u.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(yr=(yr*vr+n)/(vr+1),++vr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}a?yr=-.53:n?yr=15:h?yr=-.7:d&&(yr=-1/3);var br=function(t,e){this.ranges=t,this.primIndex=e};br.prototype.primary=function(){return this.ranges[this.primIndex]},br.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!ne(n.anchor,i.anchor)||!ne(n.head,i.head))return!1}return!0},br.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Sr(ie(this.ranges[e].anchor),ie(this.ranges[e].head));return new br(t,this.primIndex)},br.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},br.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ee(e,i.from())>=0&&ee(t,i.to())<=0)return n}return-1};var Sr=function(t,e){this.anchor=t,this.head=e};function Mr(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort((function(t,e){return ee(t.from(),e.from())})),n=G(e,r);for(var o=1;o<e.length;o++){var a=e[o],s=e[o-1],l=ee(s.to(),a.from());if(i&&!a.empty()?l>0:l>=0){var u=oe(s.from(),a.from()),h=re(s.to(),a.to()),c=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,e.splice(--o,2,new Sr(c?h:u,c?u:h))}}return new br(e,n)}function Pr(t,e){return new br([new Sr(t,e||t)],0)}function Tr(t){return t.text?te(t.from.line+t.text.length-1,X(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Cr(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Tr(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Tr(e).ch-e.to.ch),te(n,i)}function Ar(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new Sr(Cr(r.anchor,e),Cr(r.head,e)))}return Mr(t.cm,n,t.sel.primIndex)}function Lr(t,e,n){return t.line==e.line?te(n.line,t.ch-e.ch+n.ch):te(n.line+(t.line-e.line),t.ch)}function kr(t){t.doc.mode=Vt(t.options,t.doc.modeOption),Er(t)}function Er(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ir(t,100),t.state.modeGen++,t.curOp&&ci(t)}function Or(t,e){return 0==e.from.ch&&0==e.to.ch&&""==X(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Nr(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){(function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ae(t),Le(t,n);var r=i?i(t):1;r!=t.height&&Zt(t,r)})(t,n,r,i),ln(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new We(u[o],r(o),i));return n}var s=e.from,l=e.to,u=e.text,h=Wt(t,s.line),c=Wt(t,l.line),d=X(u),f=r(u.length-1),p=l.line-s.line;if(e.full)t.insert(0,a(0,u.length)),t.remove(u.length,t.size-u.length);else if(Or(t,e)){var g=a(0,u.length-1);o(c,c.text,f),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(h==c)if(1==u.length)o(h,h.text.slice(0,s.ch)+d+h.text.slice(l.ch),f);else{var m=a(1,u.length-1);m.push(new We(d+h.text.slice(l.ch),f,i)),o(h,h.text.slice(0,s.ch)+u[0],r(0)),t.insert(s.line+1,m)}else if(1==u.length)o(h,h.text.slice(0,s.ch)+u[0]+c.text.slice(l.ch),r(0)),t.remove(s.line+1,p);else{o(h,h.text.slice(0,s.ch)+u[0],r(0)),o(c,d+c.text.slice(l.ch),f);var v=a(1,u.length-1);p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,v)}ln(t,"change",t,e)}function Ir(t,e,n){!function t(i,r,o){if(i.linked)for(var a=0;a<i.linked.length;++a){var s=i.linked[a];if(s.doc!=r){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),t(s.doc,i,l))}}}(t,null,!0)}function Rr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,li(t),kr(t),Dr(t),t.options.direction=e.direction,t.options.lineWrapping||Ue(t),t.options.mode=e.modeOption,ci(t)}function Dr(t){("rtl"==t.doc.direction?N:T)(t.display.lineDiv,"CodeMirror-rtl")}function jr(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function zr(t,e){var n={from:ie(e.from),to:Tr(e),text:qt(t,e.from,e.to)};return Br(t,n,e.from.line,e.to.line+1),Ir(t,(function(t){return Br(t,n,e.from.line,e.to.line+1)}),!0),n}function Vr(t){for(;t.length&&X(t).ranges;)t.pop()}function Gr(t,e,n,i){var r=t.history;r.undone.length=0;var o,a,s=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Vr(t.done),X(t.done)):t.done.length&&!X(t.done).ranges?X(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),X(t.done)):void 0}(r,r.lastOp==i)))a=X(o.changes),0==ee(e.from,e.to)&&0==ee(e.from,a.to)?a.to=Tr(e):o.changes.push(zr(t,e));else{var l=X(r.done);for(l&&l.ranges||Fr(t.sel,r.done),o={changes:[zr(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,a||pt(t,"historyAdded")}function $r(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,X(r.done),e))?r.done[r.done.length-1]=e:Fr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Vr(r.undone)}function Fr(t,e){var n=X(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Br(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function Hr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ur(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(Hr(n[r]));return i}(t,e),i=Te(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else a&&(n[r]=a)}return n}function Wr(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?br.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],h=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(h=c.match(/^spans_(\d+)$/))&&G(e,Number(h[1]))>-1&&(X(s)[c]=u[c],delete u[c])}}}return i}function qr(t,e,n,i){if(i){var r=t.anchor;if(n){var o=ee(e,r)<0;o!=ee(n,r)<0?(r=e,e=n):o!=ee(e,n)<0&&(e=n)}return new Sr(r,e)}return new Sr(n||e,e)}function Xr(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),Qr(t,new br([qr(t.sel.primary(),e,n,r)],0),i)}function Zr(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=qr(t.sel.ranges[o],e[o],null,r);Qr(t,Mr(t.cm,i,t.sel.primIndex),n)}function Yr(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,Qr(t,Mr(t.cm,r,t.sel.primIndex),i)}function Kr(t,e,n,i){Qr(t,Pr(e,n),i)}function Jr(t,e,n){var i=t.history.done,r=X(i);r&&r.ranges?(i[i.length-1]=e,to(t,e,n)):Qr(t,e,n)}function Qr(t,e,n){to(t,e,n),$r(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function to(t,e,n){(vt(t,"beforeSelectionChange")||t.cm&&vt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new Sr(se(t,e[n].anchor),se(t,e[n].head))},origin:n&&n.origin};return pt(t,"beforeSelectionChange",t,i),t.cm&&pt(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Mr(t.cm,i.ranges,i.ranges.length-1):e}(t,e,n));var i=n&&n.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);eo(t,io(t,e,i,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||Ei(t.cm)}function eo(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,mt(t.cm)),ln(t,"cursorActivity",t))}function no(t){eo(t,io(t,t.sel,null,!1))}function io(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=oo(t,a.anchor,s&&s.anchor,n,i),u=oo(t,a.head,s&&s.head,n,i);(r||l!=a.anchor||u!=a.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new Sr(l,u))}return r?Mr(t.cm,r,e.primIndex):e}function ro(t,e,n,i,r){var o=Wt(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,h="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(h?s.to>=e.ch:s.to>e.ch))){if(r&&(pt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),d=void 0;if((i<0?h:u)&&(c=ao(t,c,-i,c&&c.line==e.line?o:null)),c&&c.line==e.line&&(d=ee(c,n))&&(i<0?d<0:d>0))return ro(t,c,e,i,r)}var f=l.find(i<0?-1:1);return(i<0?u:h)&&(f=ao(t,f,i,f.line==e.line?o:null)),f?ro(t,f,e,i,r):null}}return e}function oo(t,e,n,i,r){var o=i||1;return ro(t,e,n,o,r)||!r&&ro(t,e,n,o,!0)||ro(t,e,n,-o,r)||!r&&ro(t,e,n,-o,!0)||(t.cantEdit=!0,te(t.first,0))}function ao(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?se(t,te(e.line-1)):null:n>0&&e.ch==(i||Wt(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+n)}function so(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),F)}function lo(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=se(t,e)),n&&(i.to=se(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),pt(t,"beforeChange",t,i),t.cm&&pt(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function uo(t,e,n){if(t.cm){if(!t.cm.curOp)return tr(t.cm,uo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"))||(e=lo(t,e,!0))){var i=we&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=G(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),l=0;l<r.length;++l){var u=r[l];if(!(ee(u.to,s.from)<0||ee(u.from,s.to)>0)){var h=[l,1],c=ee(u.from,s.from),d=ee(u.to,s.to);(c<0||!a.inclusiveLeft&&!c)&&h.push({from:u.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&h.push({from:s.to,to:u.to}),r.splice.apply(r,h),l+=h.length-3}}return r}(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)ho(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else ho(t,e)}}function ho(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var n=Ar(t,e);Gr(t,e,n,t.cm?t.cm.curOp.id:NaN),po(t,e,n,Te(t,e));var i=[];Ir(t,(function(t,n){n||-1!=G(i,t.history)||(yo(t.history,e),i.push(t.history)),po(t,e,null,Te(t,e))}))}}function co(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,a=t.sel,s="undo"==e?o.done:o.undone,l="undo"==e?o.undone:o.done,u=0;u<s.length&&(r=s[u],n?!r.ranges||r.equals(t.sel):r.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(Fr(r,l),n&&!r.equals(t.sel))return void Qr(t,r,{clearRedo:!1});a=r}var h=[];Fr(a,l),l.push({changes:h,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var c=vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"),d=function(n){var i=r.changes[n];if(i.origin=e,c&&!lo(t,i,!1))return s.length=0,{};h.push(zr(t,i));var o=n?Ar(t,i):X(s);po(t,i,o,Ur(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Tr(i)});var a=[];Ir(t,(function(t,e){e||-1!=G(a,t.history)||(yo(t.history,i),a.push(t.history)),po(t,i,null,Ur(t,i))}))},f=r.changes.length-1;f>=0;--f){var p=d(f);if(p)return p.v}}}}function fo(t,e){if(0!=e&&(t.first+=e,t.sel=new br(Z(t.sel.ranges,(function(t){return new Sr(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){ci(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)di(t.cm,i,"gutter")}}function po(t,e,n,i){if(t.cm&&!t.cm.curOp)return tr(t.cm,po)(t,e,n,i);if(e.to.line<t.first)fo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);fo(t,r),e={from:te(t.first,0),to:te(e.to.line+r,e.to.ch),text:[X(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:te(o,Wt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=qt(t,e.from,e.to),n||(n=Ar(t,e)),t.cm?function(t,e,n){var i=t.doc,r=t.display,o=e.from,a=e.to,s=!1,l=o.line;t.options.lineWrapping||(l=Yt(ze(Wt(i,o.line))),i.iter(l,a.line+1,(function(t){if(t==r.maxLine)return s=!0,!0}))),i.sel.contains(e.from,e.to)>-1&&mt(t),Nr(i,e,n,si(t)),t.options.lineWrapping||(i.iter(l,o.line+e.text.length,(function(t){var e=He(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,s=!1)})),s&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=Wt(t,i).stateAfter;if(r&&(!(r instanceof ue)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(i,o.line),ir(t,400);var u=e.text.length-(a.line-o.line)-1;e.full?ci(t):o.line!=a.line||1!=e.text.length||Or(t.doc,e)?ci(t,o.line,a.line+1,u):di(t,o.line,"text");var h=vt(t,"changes"),c=vt(t,"change");if(c||h){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};c&&ln(t,"change",t,d),h&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,i):Nr(t,e,i),to(t,n,F),t.cantEdit&&oo(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function go(t,e,n,i,r){var o;i||(i=n),ee(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),uo(t,{from:n,to:i,text:e,origin:r})}function mo(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function vo(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],a=!0;if(o.ranges){o.copied||((o=t[r]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)mo(o.ranges[s].anchor,e,n,i),mo(o.ranges[s].head,e,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=te(u.from.line+i,u.from.ch),u.to=te(u.to.line+i,u.to.ch);else if(e<=u.to.line){a=!1;break}}a||(t.splice(0,r+1),r=0)}}}function yo(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;vo(t.done,n,i,r),vo(t.undone,n,i,r)}function _o(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=Wt(t,ae(t,e)):r=Yt(e),null==r?null:(i(o,r)&&t.cm&&di(t.cm,r,n),o)}function xo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function wo(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}Sr.prototype.from=function(){return oe(this.anchor,this.head)},Sr.prototype.to=function(){return re(this.anchor,this.head)},Sr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,qe(r),ln(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},wo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),a=i.height;if(i.removeInner(t,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof xo))){var s=[];this.collapse(s),this.children=[new xo(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,s=a;s<r.lines.length;){var l=new xo(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new wo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=G(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new wo(t.children);i.parent=t,t.children=[i,e],t=i}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var a=Math.min(e,o-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var bo=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};function So(t,e,n){Be(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&ki(t,n)}bo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=Yt(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=wn(this);Zt(n,Math.max(0,n.height-o)),t&&(Qi(t,(function(){So(t,n,-o),di(t,i,"widget")})),ln(t,"lineWidgetCleared",t,this,i))}},bo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=wn(this)-e;r&&($e(this.doc,i)||Zt(i,i.height+r),n&&Qi(n,(function(){n.curOp.forceUpdate=!0,So(n,i,r),ln(n,"lineWidgetChanged",n,t,Yt(i))})))},yt(bo);var Mo=0,Po=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Mo};function To(t,e,n,i,r){if(i&&i.shared)return function(t,e,n,i,r){(i=j(i)).shared=!1;var o=[To(t,e,n,i,r)],a=o[0],s=i.widgetNode;return Ir(t,(function(t){s&&(i.widgetNode=s.cloneNode(!0)),o.push(To(t,se(t,e),se(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=X(o)})),new Co(o,a)}(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return tr(t.cm,To)(t,e,n,i,r);var o=new Po(t,r),a=ee(e,n);if(i&&j(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=k("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(je(t,e.line,e,n,o)||e.line!=n.line&&je(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");be=!0}o.addToHistory&&Gr(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,u=t.cm;if(t.iter(l,n.line+1,(function(i){u&&o.collapsed&&!u.options.lineWrapping&&ze(i)==u.display.maxLine&&(s=!0),o.collapsed&&l!=e.line&&Zt(i,0),function(t,e,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],i&&i.add(t.markedSpans)),e.marker.attachLine(t)}(i,new Se(o,l==e.line?e.ch:null,l==n.line?n.ch:null),t.cm&&t.cm.curOp),++l})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){$e(t,e)&&Zt(e,0)})),o.clearOnEnter&&ct(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(we=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Mo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)ci(u,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var h=e.line;h<=n.line;h++)di(u,h,"text");o.atomic&&no(u.doc),ln(u,"markerAdded",u,o)}return o}Po.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Wi(t),vt(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Me(a.markedSpans,this);t&&!this.collapsed?di(t,Yt(a),"text"):t&&(null!=s.to&&(r=Yt(a)),null!=s.from&&(i=Yt(a))),a.markedSpans=Pe(a.markedSpans,s),null==s.from&&this.collapsed&&!$e(this.doc,a)&&t&&Zt(a,ii(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=ze(this.lines[l]),h=He(u);h>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&ci(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&no(t.doc)),t&&ln(t,"markerCleared",t,this,i,r),e&&qi(t),this.parent&&this.parent.clear()}},Po.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Me(o.markedSpans,this);if(null!=a.from&&(n=te(e?o:Yt(o),a.from),-1==t))return n;if(null!=a.to&&(i=te(e?o:Yt(o),a.to),1==t))return i}return n&&{from:n,to:i}},Po.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&Qi(i,(function(){var r=e.line,o=Yt(e.line),a=En(i,o);if(a&&(zn(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!$e(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=wn(n)-s;l&&Zt(r,r.height+l)}ln(i,"markerChanged",i,t)}))},Po.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=G(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Po.prototype.detachLine=function(t){if(this.lines.splice(G(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},yt(Po);var Co=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Ao(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),(function(t){return t.parent}))}function Lo(t){for(var e=function(e){var n=t[e],i=[n.primary.doc];Ir(n.primary.doc,(function(t){return i.push(t)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==G(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<t.length;n++)e(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},Co.prototype.find=function(t,e){return this.primary.find(t,e)},yt(Co);var ko=0,Eo=function(t,e,n,i,r){if(!(this instanceof Eo))return new Eo(t,e,n,i,r);null==n&&(n=0),wo.call(this,[new xo([new We("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=te(n,0);this.sel=Pr(o),this.history=new jr(null),this.id=++ko,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Nr(this,{from:o,to:o,text:t}),Qr(this,Pr(o),F)};Eo.prototype=K(wo.prototype,{constructor:Eo,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Xt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:nr((function(t){var e=te(this.first,0),n=this.first+this.size-1;uo(this,{from:e,to:te(n,Wt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Oi(this.cm,0,0),Qr(this,Pr(e),F)})),replaceRange:function(t,e,n,i){go(this,t,e=se(this,e),n=n?se(this,n):e,i)},getRange:function(t,e,n){var i=qt(this,se(this,t),se(this,e));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return Wt(this,t)},getLineNumber:function(t){return Yt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Wt(this,t)),ze(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return se(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nr((function(t,e,n){Kr(this,se(this,"number"==typeof t?te(t,e||0):t),null,n)})),setSelection:nr((function(t,e,n){Kr(this,se(this,t),se(this,e||t),n)})),extendSelection:nr((function(t,e,n){Xr(this,se(this,t),e&&se(this,e),n)})),extendSelections:nr((function(t,e){Zr(this,le(this,t),e)})),extendSelectionsBy:nr((function(t,e){Zr(this,le(this,Z(this.sel.ranges,t)),e)})),setSelections:nr((function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new Sr(se(this,t[r].anchor),se(this,t[r].head||t[r].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Qr(this,Mr(this.cm,i,e),n)}})),addSelection:nr((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new Sr(se(this,t),se(this,e||t))),Qr(this,Mr(this.cm,i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=qt(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=qt(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:nr((function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var s=e&&"end"!=e&&function(t,e,n){for(var i=[],r=te(t.first,0),o=r,a=0;a<e.length;a++){var s=e[a],l=Lr(s.from,r,o),u=Lr(Tr(s),r,o);if(r=s.to,o=u,"around"==n){var h=t.sel.ranges[a],c=ee(h.head,h.anchor)<0;i[a]=new Sr(c?u:l,c?l:u)}else i[a]=new Sr(l,l)}return new br(i,t.sel.primIndex)}(this,i,e),l=i.length-1;l>=0;l--)uo(this,i[l]);s?Jr(this,s):this.cm&&Ei(this.cm)})),undo:nr((function(){co(this,"undo")})),redo:nr((function(){co(this,"redo")})),undoSelection:nr((function(){co(this,"undo",!0)})),redoSelection:nr((function(){co(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new jr(this.history),Ir(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Wr(this.history.done),undone:Wr(this.history.undone)}},setHistory:function(t){var e=this.history=new jr(this.history);e.done=Wr(t.done.slice(0),null,!0),e.undone=Wr(t.undone.slice(0),null,!0)},setGutterMarker:nr((function(t,e,n){return _o(this,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&et(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:nr((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&_o(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,et(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=Wt(this,t)))return null}else if(null==(e=Yt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:nr((function(t,e,n){return _o(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[i]){if(M(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:nr((function(t,e,n){return _o(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(M(n));if(!o)return!1;var a=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0}))})),addLineWidget:nr((function(t,e,n){return function(t,e,n,i){var r=new bo(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),_o(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!$e(t,e)){var i=Be(e)<t.scrollTop;Zt(e,e.height+wn(r)),i&&ki(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,r,"number"==typeof e?e:Yt(e)),r}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return To(this,se(this,t),se(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return To(this,t=se(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Wt(this,(t=se(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=se(this,t),e=se(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>t)return e=t,!0;t-=o,++n})),se(this,te(n,e))},indexFromPos:function(t){var e=(t=se(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new Eo(Xt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Eo(Xt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),a=t.clipPos(r.to);if(ee(o,a)){var s=To(t,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,Ao(this)),i},unlinkDoc:function(t){if(t instanceof Ca&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Lo(Ao(this));break}if(t.history==this.history){var n=[t.id];Ir(t,(function(t){return n.push(t.id)}),!0),t.history=new jr(null),t.history.done=Wr(this.history.done,n),t.history.undone=Wr(this.history.undone,n)}},iterLinkedDocs:function(t){Ir(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Et(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nr((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&Qi(e=this.cm,(function(){Dr(e),ci(e)})))}))}),Eo.prototype.eachLine=Eo.prototype.iter;var Oo=0;function No(t){var e=this;if(Io(e),!gt(e,t)&&!bn(e.display,t)){_t(t),a&&(Oo=+new Date);var n=ui(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,l=function(){++s==r&&tr(e,(function(){var t={from:n=se(e.doc,n),to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};uo(e.doc,t),Jr(e.doc,Pr(se(e.doc,n),se(e.doc,Tr(t))))}))()},u=function(t,n){if(e.options.allowDropFileTypes&&-1==G(e.options.allowDropFileTypes,t.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var t=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),l()},i.readAsText(t)}},h=0;h<i.length;h++)u(i[h],h);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var c=t.dataTransfer.getData("Text");if(c){var d;if(e.state.draggingText&&!e.state.draggingText.copy&&(d=e.listSelections()),to(e.doc,Pr(n,n)),d)for(var f=0;f<d.length;++f)go(e.doc,"",d[f].anchor,d[f].head,"drag");e.replaceSelection(c,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Io(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Ro(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Do=!1;function jo(){var t;Do||(ct(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Ro(zo)}),100))})),ct(window,"blur",(function(){return Ro(Pi)})),Do=!0)}function zo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Vo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Go=0;Go<10;Go++)Vo[Go+48]=Vo[Go+96]=String(Go);for(var $o=65;$o<=90;$o++)Vo[$o]=String.fromCharCode($o);for(var Fo=1;Fo<=12;Fo++)Vo[Fo+111]=Vo[Fo+63235]="F"+Fo;var Bo={};function Ho(t){var e,n,i,r,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Uo(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=Z(n.split(" "),Ho),o=0;o<r.length;o++){var a=void 0,s=void 0;o==r.length-1?(s=r.join(" "),a=i):(s=r.slice(0,o+1).join(" "),a="...");var l=e[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var u in e)t[u]=e[u];return t}function Wo(t,e,n,i){var r=(e=Yo(e)).call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Wo(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var a=Wo(t,e.fallthrough[o],n,i);if(a)return a}}}function qo(t){var e="string"==typeof t?t:Vo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Xo(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(b?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(b?e.ctrlKey:e.metaKey)&&"Mod"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function Zo(t,e){if(c&&34==t.keyCode&&t.char)return!1;var n=Vo[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Xo(n,t,e))}function Yo(t){return"string"==typeof t?Bo[t]:t}function Ko(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&ee(o.from,X(i).to)<=0;){var a=i.pop();if(ee(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Qi(t,(function(){for(var e=i.length-1;e>=0;e--)go(t.doc,"",i[e].from,i[e].to,"+delete");Ei(t)}))}function Jo(t,e,n){var i=rt(t.text,e+n,n);return i<0||i>t.text.length?null:i}function Qo(t,e,n){var i=Jo(t,e.ch,n);return null==i?null:new te(e.line,i,n<0?"after":"before")}function ta(t,e,n,i,r){if(t){"rtl"==e.doc.direction&&(r=-r);var o=ut(n,e.doc.direction);if(o){var a,s=r<0?X(o):o[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==e.doc.direction){var u=On(e,n);a=r<0?n.text.length-1:0;var h=Nn(e,u,a).top;a=ot((function(t){return Nn(e,u,t).top==h}),r<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=Jo(n,a,1))}else a=r<0?s.to:s.from;return new te(i,a,l)}}return new te(i,r<0?n.text.length:0,r<0?"before":"after")}Bo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bo.default=y?Bo.macDefault:Bo.pcDefault;var ea={selectAll:so,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),F)},killLine:function(t){return Ko(t,(function(e){if(e.empty()){var n=Wt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Ko(t,(function(e){return{from:te(e.from().line,0),to:se(t.doc,te(e.to().line+1,0))}}))},delLineLeft:function(t){return Ko(t,(function(t){return{from:te(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Ko(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Ko(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return na(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return ia(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=Wt(t.doc,e),i=function(t){for(var e;e=Re(t);)t=e.find(1,!0).line;return t}(n);return i!=n&&(e=Yt(i)),ta(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),H)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),H)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?ia(t,e.head):i}),H)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=z(t.getLine(o.line),o.ch,i);e.push(q(i-a%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Qi(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=Wt(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new te(r.line,r.ch-1)),r.ch>0)r=new te(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),te(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var a=Wt(t.doc,r.line-1).text;a&&(r=new te(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),te(r.line-1,a.length-1),r,"+transpose"))}n.push(new Sr(r,r))}t.setSelections(n)}))},newlineAndIndent:function(t){return Qi(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);Ei(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function na(t,e){var n=Wt(t.doc,e),i=ze(n);return i!=n&&(e=Yt(i)),ta(!0,t,i,e,1)}function ia(t,e){var n=na(t,e.line),i=Wt(t.doc,n.line),r=ut(i,t.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return te(n.line,a?0:o,n.sticky)}return n}function ra(t,e,n){if("string"==typeof e&&!(e=ea[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=$}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}var oa=new V;function aa(t,e,n,i){var r=t.state.keySeq;if(r){if(qo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:oa.set(50,(function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())})),sa(t,r+" "+e,n,i))return!0}return sa(t,e,n,i)}function sa(t,e,n,i){var r=function(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=Wo(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&Wo(e,t.options.extraKeys,n,t)||Wo(e,t.options.keyMap,n,t)}(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&ln(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(_t(n),wi(t)),!!r}function la(t,e){var n=Zo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?aa(t,"Shift-"+n,e,(function(e){return ra(t,e,!0)}))||aa(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return ra(t,e)})):aa(t,n,e,(function(e){return ra(t,e)})))}var ua=null;function ha(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=O(),gt(e,t)))){a&&s<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var r=la(e,t);c&&(ua=r?i:null,r||88!=i||Nt||!(y?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!y&&!r&&46==i&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(T(e,"CodeMirror-crosshair"),ft(document,"keyup",n),ft(document,"mouseover",n))}N(e,"CodeMirror-crosshair"),ct(document,"keyup",n),ct(document,"mouseover",n)}(e)}}function ca(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function da(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||bn(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(c&&n==ua)return ua=null,void _t(t);if(!c||t.which&&!(t.which<10)||!la(e,t)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(t,e,n){return aa(t,"'"+n+"'",e,(function(e){return ra(t,e,!0)}))}(e,t,r)||e.display.input.onKeyPress(t))}}}var fa,pa,ga=function(t,e,n){this.time=t,this.pos=e,this.button=n};function ma(t){var e=this,n=e.display;if(!(gt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,bn(n,t))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!_a(e,t)){var i=ui(e,t),r=Mt(t),o=i?function(t,e){var n=+new Date;return pa&&pa.compare(n,t,e)?(fa=pa=null,"triple"):fa&&fa.compare(n,t,e)?(pa=new ga(n,t,e),fa=null,"double"):(fa=new ga(n,t,e),pa=null,"single")}(i,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&function(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),aa(t,Xo(o=(1==e?"Left":2==e?"Middle":"Right")+o,r),r,(function(e){if("string"==typeof e&&(e=ea[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=$}finally{t.state.suppressEdits=!1}return i}))}(e,r,i,o,t)||(1==r?i?function(t,e,n,i){a?setTimeout(D(bi,t),0):t.curOp.focus=O();var r,o=function(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=_?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(t,n,i),u=t.doc.sel;t.options.dragDrop&&Ct&&!t.isReadOnly()&&"single"==n&&(r=u.contains(e))>-1&&(ee((r=u.ranges[r]).from(),e)<0||e.xRel>0)&&(ee(r.to(),e)>0||e.xRel<0)?function(t,e,n,i){var r=t.display,o=!1,u=tr(t,(function(e){l&&(r.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Si(t)),ft(r.wrapper.ownerDocument,"mouseup",u),ft(r.wrapper.ownerDocument,"mousemove",h),ft(r.scroller,"dragstart",c),ft(r.scroller,"drop",u),o||(_t(e),i.addNew||Xr(t.doc,n,null,null,i.extend),l&&!d||a&&9==s?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),h=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},c=function(){return o=!0};l&&(r.scroller.draggable=!0),t.state.draggingText=u,u.copy=!i.moveOnDrag,ct(r.wrapper.ownerDocument,"mouseup",u),ct(r.wrapper.ownerDocument,"mousemove",h),ct(r.scroller,"dragstart",c),ct(r.scroller,"drop",u),t.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}(t,i,e,o):function(t,e,n,i){a&&Si(t);var r=t.display,o=t.doc;_t(e);var s,l,u=o.sel,h=u.ranges;if(i.addNew&&!i.extend?(l=o.sel.contains(n),s=l>-1?h[l]:new Sr(n,n)):(s=o.sel.primary(),l=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new Sr(n,n)),n=ui(t,e,!0,!0),l=-1;else{var c=va(t,n,i.unit);s=i.extend?qr(s,c.anchor,c.head,i.extend):c}i.addNew?-1==l?(l=h.length,Qr(o,Mr(t,h.concat([s]),l),{scroll:!1,origin:"*mouse"})):h.length>1&&h[l].empty()&&"char"==i.unit&&!i.extend?(Qr(o,Mr(t,h.slice(0,l).concat(h.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=o.sel):Yr(o,l,s,B):(l=0,Qr(o,new br([s],0),B),u=o.sel);var d=n;function f(e){if(0!=ee(d,e))if(d=e,"rectangle"==i.unit){for(var r=[],a=t.options.tabSize,h=z(Wt(o,n.line).text,n.ch,a),c=z(Wt(o,e.line).text,e.ch,a),f=Math.min(h,c),p=Math.max(h,c),g=Math.min(n.line,e.line),m=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=m;g++){var v=Wt(o,g).text,y=U(v,f,a);f==p?r.push(new Sr(te(g,y),te(g,y))):v.length>y&&r.push(new Sr(te(g,y),te(g,U(v,p,a))))}r.length||r.push(new Sr(n,n)),Qr(o,Mr(t,u.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var _,x=s,w=va(t,e,i.unit),b=x.anchor;ee(w.anchor,b)>0?(_=w.head,b=oe(x.from(),w.anchor)):(_=w.anchor,b=re(x.to(),w.head));var S=u.ranges.slice(0);S[l]=function(t,e){var n=e.anchor,i=e.head,r=Wt(t.doc,n.line);if(0==ee(n,i)&&n.sticky==i.sticky)return e;var o=ut(r);if(!o)return e;var a=st(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return e;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return e;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var h=st(o,i.ch,i.sticky),c=h-a||(i.ch-n.ch)*(1==s.level?-1:1);l=h==u-1||h==u?c<0:c>0}var d=o[u+(l?-1:0)],f=l==(1==d.level),p=f?d.from:d.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?e:new Sr(new te(n.line,p,g),i)}(t,new Sr(se(o,b),_)),Qr(o,Mr(t,S,l),B)}}var p=r.wrapper.getBoundingClientRect(),g=0;function m(e){var n=++g,a=ui(t,e,!0,"rectangle"==i.unit);if(a)if(0!=ee(a,d)){t.curOp.focus=O(),f(a);var s=Ai(r,o);(a.line>=s.to||a.line<s.from)&&setTimeout(tr(t,(function(){g==n&&m(e)})),150)}else{var l=e.clientY<p.top?-20:e.clientY>p.bottom?20:0;l&&setTimeout(tr(t,(function(){g==n&&(r.scroller.scrollTop+=l,m(e))})),50)}}function v(e){t.state.selectingText=!1,g=1/0,e&&(_t(e),r.input.focus()),ft(r.wrapper.ownerDocument,"mousemove",y),ft(r.wrapper.ownerDocument,"mouseup",_),o.history.lastSelOrigin=null}var y=tr(t,(function(t){0!==t.buttons&&Mt(t)?m(t):v(t)})),_=tr(t,v);t.state.selectingText=_,ct(r.wrapper.ownerDocument,"mousemove",y),ct(r.wrapper.ownerDocument,"mouseup",_)}(t,i,e,o)}(e,i,o,t):St(t)==n.scroller&&_t(t):2==r?(i&&Xr(e.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(S?e.display.input.onContextMenu(t):Si(e)))}}function va(t,e,n){if("char"==n)return new Sr(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Sr(te(e.line,0),se(t.doc,te(e.line+1,0)));var i=n(t,e);return new Sr(i.from,i.to)}function ya(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(t){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&_t(e);var a=t.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!vt(t,n))return wt(e);o-=s.top-a.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r)return pt(t,n,t,Kt(t.doc,o),t.display.gutterSpecs[l].className,e),wt(e)}}function _a(t,e){return ya(t,e,"gutterClick",!0)}function xa(t,e){bn(t.display,e)||function(t,e){return!!vt(t,"gutterContextMenu")&&ya(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||S||t.display.input.onContextMenu(e)}function wa(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Gn(t)}ga.prototype.compare=function(t,e,n){return this.time+400>t&&0==ee(e,this.pos)&&n==this.button};var ba={toString:function(){return"CodeMirror.Init"}},Sa={},Ma={};function Pa(t,e,n){if(!e!=!(n&&n!=ba)){var i=t.display.dragFunctions,r=e?ct:ft;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Ta(t){t.options.lineWrapping?(N(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(T(t.display.wrapper,"CodeMirror-wrap"),Ue(t)),li(t),ci(t),Gn(t),setTimeout((function(){return $i(t)}),100)}function Ca(t,e){var n=this;if(!(this instanceof Ca))return new Ca(t,e);this.options=e=e?j(e):{},j(Sa,e,!1);var i=e.value;"string"==typeof i?i=new Eo(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new Ca.inputStyles[e.inputStyle](this),o=this.display=new mr(t,i,r,e);for(var u in o.wrapper.CodeMirror=this,wa(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new V,keySeq:null,specialChars:null},e.autofocus&&!v&&o.input.focus(),a&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;ct(e.scroller,"mousedown",tr(t,ma)),ct(e.scroller,"dblclick",a&&s<11?tr(t,(function(e){if(!gt(t,e)){var n=ui(t,e);if(n&&!_a(t,e)&&!bn(t.display,e)){_t(e);var i=t.findWordAt(n);Xr(t.doc,i.anchor,i.head)}}})):function(e){return gt(t,e)||_t(e)}),ct(e.scroller,"contextmenu",(function(e){return xa(t,e)})),ct(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||xa(t,n)}));var n,i={end:0};function r(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(i=e.activeTouch).end=+new Date)}function o(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function l(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}ct(e.scroller,"touchstart",(function(r){if(!gt(t,r)&&!o(r)&&!_a(t,r)){e.input.ensurePolled(),clearTimeout(n);var a=+new Date;e.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==r.touches.length&&(e.activeTouch.left=r.touches[0].pageX,e.activeTouch.top=r.touches[0].pageY)}})),ct(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),ct(e.scroller,"touchend",(function(n){var i=e.activeTouch;if(i&&!bn(e,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,a=t.coordsChar(e.activeTouch,"page");o=!i.prev||l(i,i.prev)?new Sr(a,a):!i.prev.prev||l(i,i.prev.prev)?t.findWordAt(a):new Sr(te(a.line,0),se(t.doc,te(a.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),_t(n)}r()})),ct(e.scroller,"touchcancel",r),ct(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Ri(t,e.scroller.scrollTop),ji(t,e.scroller.scrollLeft,!0),pt(t,"scroll",t))})),ct(e.scroller,"mousewheel",(function(e){return wr(t,e)})),ct(e.scroller,"DOMMouseScroll",(function(e){return wr(t,e)})),ct(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){gt(t,e)||bt(e)},over:function(e){gt(t,e)||(function(t,e){var n=ui(t,e);if(n){var i=document.createDocumentFragment();yi(t,n,i),t.display.dragCursor||(t.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),A(t.display.dragCursor,i)}}(t,e),bt(e))},start:function(e){return function(t,e){if(a&&(!t.state.draggingText||+new Date-Oo<100))bt(e);else if(!gt(t,e)&&!bn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),c&&n.parentNode.removeChild(n)}}(t,e)},drop:tr(t,No),leave:function(e){gt(t,e)||Io(t)}};var u=e.input.getField();ct(u,"keyup",(function(e){return ca.call(t,e)})),ct(u,"keydown",tr(t,ha)),ct(u,"keypress",tr(t,da)),ct(u,"focus",(function(e){return Mi(t,e)})),ct(u,"blur",(function(e){return Pi(t,e)}))}(this),jo(),Wi(this),this.curOp.forceUpdate=!0,Rr(this,i),e.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Mi(n)}),20):Pi(this),Ma)Ma.hasOwnProperty(u)&&Ma[u](this,e[u],ba);dr(this),e.finishInit&&e.finishInit(this);for(var h=0;h<Aa.length;++h)Aa[h](this);qi(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ca.defaults=Sa,Ca.optionHandlers=Ma;var Aa=[];function La(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=fe(t,e).state:n="prev");var a=t.options.tabSize,s=Wt(o,e),l=z(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,h=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(r,s.text.slice(h.length),s.text))==$||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?z(Wt(o,e-1).text,null,a):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var c="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(u/a);f;--f)d+=a,c+="\t";if(d<u&&(c+=q(u-d)),c!=h)return go(o,c,te(e,0),te(e,h.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<h.length){var m=te(e,h.length);Yr(o,p,new Sr(m,m));break}}}Ca.defineInitHook=function(t){return Aa.push(t)};var ka=null;function Ea(t){ka=t}function Oa(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var a=+new Date-200,s="paste"==r||t.state.pasteIncoming>a,l=Et(e),u=null;if(s&&i.ranges.length>1)if(ka&&ka.text.join("\n")==e){if(i.ranges.length%ka.text.length==0){u=[];for(var h=0;h<ka.text.length;h++)u.push(o.splitLines(ka.text[h]))}}else l.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(u=Z(l,(function(t){return[t]})));for(var c=t.curOp.updateInput,d=i.ranges.length-1;d>=0;d--){var f=i.ranges[d],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=te(p.line,p.ch-n):t.state.overwrite&&!s?g=te(g.line,Math.min(Wt(o,g.line).text.length,g.ch+X(l).length)):s&&ka&&ka.lineWise&&ka.text.join("\n")==l.join("\n")&&(p=g=te(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:l,origin:r||(s?"paste":t.state.cutIncoming>a?"cut":"+input")};uo(t.doc,m),ln(t,"inputRead",t,m)}e&&!s&&Ia(t,e),Ei(t),t.curOp.updateInput<2&&(t.curOp.updateInput=c),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Na(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Qi(e,(function(){return Oa(e,n,0,null,"paste")})),!0}function Ia(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(e.indexOf(o.electricChars.charAt(s))>-1){a=La(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Wt(t.doc,r.head.line).text.slice(0,r.head.ch))&&(a=La(t,r.head.line,"smart"));a&&ln(t,"electricInput",t,r.head.line)}}}function Ra(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:te(r,0),head:te(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Da(t,e,n,i){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",i?"":"off"),t.setAttribute("spellcheck",!!e)}function ja(){var t=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),e=L("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Da(t),e}function za(t,e,n,i,r){var o=e,a=n,s=Wt(t,e.line),l=r&&"rtl"==t.direction?-n:n;function u(o){var a,u;if("codepoint"==i){var h=s.text.charCodeAt(e.ch+(n>0?0:-1));if(isNaN(h))a=null;else{var c=n>0?h>=55296&&h<56320:h>=56320&&h<57343;a=new te(e.line,Math.max(0,Math.min(s.text.length,e.ch+n*(c?2:1))),-n)}}else a=r?function(t,e,n,i){var r=ut(e,t.doc.direction);if(!r)return Qo(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=st(r,n.ch,n.sticky),a=r[o];if("ltr"==t.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return Qo(e,n,i);var s,l=function(t,n){return Jo(e,t instanceof te?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(s=s||On(t,e),Jn(t,e,s,n)):{begin:0,end:e.text.length}},h=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==a.level){var c=1==a.level==i<0,d=l(n,c?1:-1);if(null!=d&&(c?d<=a.to&&d<=h.end:d>=a.from&&d>=h.begin)){var f=c?"before":"after";return new te(n.line,d,f)}}var p=function(t,e,i){for(var o=function(t,e){return e?new te(n.line,l(t,1),"before"):new te(n.line,t,"after")};t>=0&&t<r.length;t+=e){var a=r[t],s=e>0==(1!=a.level),u=s?i.begin:l(i.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),i.begin<=u&&u<i.end)return o(u,s)}},g=p(o+i,i,h);if(g)return g;var m=i>0?h.end:l(h.begin,-1);return null==m||i>0&&m==e.text.length||!(g=p(i>0?0:r.length-1,i,u(m)))?null:g}(t.cm,s,e,n):Qo(s,e,n);if(null==a){if(o||((u=e.line+l)<t.first||u>=t.first+t.size||(e=new te(u,e.ch,e.sticky),!(s=Wt(t,u)))))return!1;e=ta(r,t.cm,s,e.line,l)}else e=a;return!0}if("char"==i||"codepoint"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var h=null,c="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(n<0)||u(!f);f=!1){var p=s.text.charAt(e.ch)||"\n",g=tt(p,d)?"w":c&&"\n"==p?"n":!c||/\s/.test(p)?null:"p";if(!c||f||g||(g="s"),h&&h!=g){n<0&&(n=1,u(),e.sticky="after");break}if(g&&(h=g),n>0&&!u(!f))break}var m=oo(t,e,o,a,!0);return ne(o,m)&&(m.hitSide=!0),m}function Va(t,e,n,i){var r,o,a=t.doc,s=e.left;if("page"==i){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*ii(t.display),3);r=(n>0?e.bottom:e.top)+n*u}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;(o=Yn(t,s,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var Ga=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new V,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function $a(t,e){var n=En(t,e.line);if(!n||n.hidden)return null;var i=Wt(t.doc,e.line),r=Ln(n,i,e.line),o=ut(i,t.doc.direction),a="left";o&&(a=st(o,e.ch)%2?"right":"left");var s=Dn(r.map,e.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Fa(t,e){return e&&(t.bad=!0),t}function Ba(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Fa(t.clipPos(te(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return Ha(o,e,n)}}function Ha(t,e,n){var i=t.text.firstChild,r=!1;if(!e||!E(i,e))return Fa(te(Yt(t.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[n],n=0,!e)){var o=t.rest?X(t.rest):t.line;return Fa(te(Yt(o),o.text.length),r)}var a=3==e.nodeType?e:null,s=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var l=t.measure,u=l.maps;function h(e,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?l.map:u[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var h=Yt(r<0?t.line:t.rest[r]),c=o[a]+i;return(i<0||s!=e)&&(c=o[a+(i?1:0)]),te(h,c)}}}var c=h(a,s,n);if(c)return Fa(c,r);for(var d=s.nextSibling,f=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(c=h(d,d.firstChild,0))return Fa(te(c.line,c.ch-f),r);f+=d.textContent.length}for(var p=s.previousSibling,g=n;p;p=p.previousSibling){if(c=h(p,p.firstChild,-1))return Fa(te(c.line,c.ch+g),r);g+=p.textContent.length}}Ga.prototype.init=function(t){var e=this,n=this,i=n.cm,r=n.div=t.lineDiv;function o(t){for(var e=t.target;e;e=e.parentNode){if(e==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function a(t){if(o(t)&&!gt(i,t)){if(i.somethingSelected())Ea({lineWise:!1,text:i.getSelections()}),"cut"==t.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var e=Ra(i);Ea({lineWise:!0,text:e.text}),"cut"==t.type&&i.operation((function(){i.setSelections(e.ranges,0,F),i.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var a=ka.text.join("\n");if(t.clipboardData.setData("Text",a),t.clipboardData.getData("Text")==a)return void t.preventDefault()}var s=ja(),l=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),l.value=ka.text.join("\n");var u=O();R(l),setTimeout((function(){i.display.lineSpace.removeChild(s),u.focus(),u==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Da(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ct(r,"paste",(function(t){!o(t)||gt(i,t)||Na(t,i)||s<=11&&setTimeout(tr(i,(function(){return e.updateFromDOM()})),20)})),ct(r,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),ct(r,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),ct(r,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),ct(r,"touchstart",(function(){return n.forceCompositionEnd()})),ct(r,"input",(function(){e.composing||e.readFromDOMSoon()})),ct(r,"copy",a),ct(r,"cut",a)},Ga.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Ga.prototype.prepareSelection=function(){var t=vi(this.cm,!1);return t.focus=O()==this.div,t},Ga.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Ga.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ga.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(e.display.viewTo==e.display.viewFrom||r.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var a=Ba(e,t.anchorNode,t.anchorOffset),s=Ba(e,t.focusNode,t.focusOffset);if(!a||a.bad||!s||s.bad||0!=ee(oe(a,s),r)||0!=ee(re(a,s),o)){var l=e.display.view,u=r.line>=e.display.viewFrom&&$a(e,r)||{node:l[0].measure.map[2],offset:0},h=o.line<e.display.viewTo&&$a(e,o);if(!h){var c=l[l.length-1].measure,d=c.maps?c.maps[c.maps.length-1]:c.map;h={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(u&&h){var f,p=t.rangeCount&&t.getRangeAt(0);try{f=P(u.node,u.offset,h.offset,h.node)}catch(t){}f&&(!n&&e.state.focused?(t.collapse(u.node,u.offset),f.collapsed||(t.removeAllRanges(),t.addRange(f))):(t.removeAllRanges(),t.addRange(f)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Ga.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},Ga.prototype.showMultipleSelections=function(t){A(this.cm.display.cursorDiv,t.cursors),A(this.cm.display.selectionDiv,t.selection)},Ga.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Ga.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return E(this.div,e)},Ga.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&O()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ga.prototype.blur=function(){this.div.blur()},Ga.prototype.getField=function(){return this.div},Ga.prototype.supportsTouch=function(){return!0},Ga.prototype.receivedFocus=function(){var t=this,e=this;this.selectionInEditor()?setTimeout((function(){return t.pollSelection()}),20):Qi(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Ga.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Ga.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(m&&h&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ba(e,t.anchorNode,t.anchorOffset),i=Ba(e,t.focusNode,t.focusOffset);n&&i&&Qi(e,(function(){Qr(e.doc,Pr(n,i),F),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)}))}}},Ga.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=te(a.line-1,Wt(i.doc,a.line-1).length)),s.ch==Wt(i.doc,s.line).text.length&&s.line<i.lastLine()&&(s=te(s.line+1,0)),a.line<r.viewFrom||s.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(t=hi(i,a.line))?(e=Yt(r.view[0].line),n=r.view[0].node):(e=Yt(r.view[t].line),n=r.view[t-1].node.nextSibling);var l,u,h=hi(i,s.line);if(h==r.view.length-1?(l=r.viewTo-1,u=r.lineDiv.lastChild):(l=Yt(r.view[h+1].line)-1,u=r.view[h+1].node.previousSibling),!n)return!1;for(var c=i.doc.splitLines(function(t,e,n,i,r){var o="",a=!1,s=t.doc.lineSeparator(),l=!1;function u(){a&&(o+=s,l&&(o+=s),a=l=!1)}function h(t){t&&(u(),o+=t)}function c(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void h(n);var o,d=e.getAttribute("cm-marker");if(d){var f=t.findMarks(te(i,0),te(r+1,0),(m=+d,function(t){return t.id==m}));return void(f.length&&(o=f[0].find(0))&&h(qt(t.doc,o.from,o.to).join(s)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&u();for(var g=0;g<e.childNodes.length;g++)c(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),p&&(a=!0)}else 3==e.nodeType&&h(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;c(e),e!=n;)e=e.nextSibling,l=!1;return o}(i,n,u,e,l)),d=qt(i.doc,te(e,0),te(l,Wt(i.doc,l).text.length));c.length>1&&d.length>1;)if(X(c)==X(d))c.pop(),d.pop(),l--;else{if(c[0]!=d[0])break;c.shift(),d.shift(),e++}for(var f=0,p=0,g=c[0],m=d[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=X(c),_=X(d),x=Math.min(y.length-(1==c.length?f:0),_.length-(1==d.length?f:0));p<x&&y.charCodeAt(y.length-p-1)==_.charCodeAt(_.length-p-1);)++p;if(1==c.length&&1==d.length&&e==a.line)for(;f&&f>a.ch&&y.charCodeAt(y.length-p-1)==_.charCodeAt(_.length-p-1);)f--,p++;c[c.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),c[0]=c[0].slice(f).replace(/\u200b+$/,"");var w=te(e,f),b=te(l,d.length?X(d).length-p:0);return c.length>1||c[0]||ee(w,b)?(go(i.doc,c,w,b,"+input"),!0):void 0},Ga.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ga.prototype.reset=function(){this.forceCompositionEnd()},Ga.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ga.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},Ga.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Qi(this.cm,(function(){return ci(t.cm)}))},Ga.prototype.setUneditable=function(t){t.contentEditable="false"},Ga.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||tr(this.cm,Oa)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Ga.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Ga.prototype.onContextMenu=function(){},Ga.prototype.resetPosition=function(){},Ga.prototype.needsContentAttribute=!0;var Ua=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new V,this.hasSelection=!1,this.composing=null};Ua.prototype.init=function(t){var e=this,n=this,i=this.cm;this.createField(t);var r=this.textarea;function o(t){if(!gt(i,t)){if(i.somethingSelected())Ea({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var e=Ra(i);Ea({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,F):(n.prevInput="",r.value=e.text.join("\n"),R(r))}"cut"==t.type&&(i.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(r.style.width="0px"),ct(r,"input",(function(){a&&s>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),ct(r,"paste",(function(t){gt(i,t)||Na(t,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),ct(r,"cut",o),ct(r,"copy",o),ct(t.scroller,"paste",(function(e){if(!bn(t,e)&&!gt(i,e)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,r.dispatchEvent(o)}})),ct(t.lineSpace,"selectstart",(function(e){bn(t,e)||_t(e)})),ct(r,"compositionstart",(function(){var t=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}})),ct(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Ua.prototype.createField=function(t){this.wrapper=ja(),this.textarea=this.wrapper.firstChild},Ua.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},Ua.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=vi(t);if(t.options.moveInputWithCursor){var r=qn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},Ua.prototype.showSelection=function(t){var e=this.cm.display;A(e.cursorDiv,t.cursors),A(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Ua.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&R(this.textarea),a&&s>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Ua.prototype.getField=function(){return this.textarea},Ua.prototype.supportsTouch=function(){return!1},Ua.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||O()!=this.textarea))try{this.textarea.focus()}catch(t){}},Ua.prototype.blur=function(){this.textarea.blur()},Ua.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ua.prototype.receivedFocus=function(){this.slowPoll()},Ua.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Ua.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},Ua.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Ot(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(i.length,r.length);l<u&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Qi(e,(function(){Oa(e,r.slice(l),i.length-l,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ua.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ua.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ua.prototype.onContextMenu=function(t){var e=this,n=e.cm,i=n.display,r=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=ui(n,t),u=i.scroller.scrollTop;if(o&&!c){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&tr(n,Qr)(n.doc,Pr(o),F);var h,d=r.style.cssText,f=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(h=window.scrollY),i.input.focus(),l&&window.scrollTo(null,h),i.input.reset(),n.somethingSelected()||(r.value=e.prevInput=" "),e.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),a&&s>=9&&m(),S){bt(t);var g=function(){ft(window,"mouseup",g),setTimeout(v,20)};ct(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=r.selectionStart){var t=n.somethingSelected(),o="​"+(t?r.value:"");r.value="⇚",r.value=o,e.prevInput=t?"":"​",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(e.contextMenuPending==v&&(e.contextMenuPending=!1,e.wrapper.style.cssText=f,r.style.cssText=d,a&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!a||a&&s<9)&&m();var t=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==e.prevInput?tr(n,so)(n):t++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},Ua.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},Ua.prototype.setUneditable=function(){},Ua.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,i,r,o){t.defaults[n]=i,r&&(e[n]=o?function(t,e,n){n!=ba&&r(t,e,n)}:r)}t.defineOption=n,t.Init=ba,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,kr(t)}),!0),n("indentUnit",2,kr,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Er(t),Gn(t),ci(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter((function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(te(i,o))}i++}));for(var r=n.length-1;r>=0;r--)go(t.doc,e,n[r],te(n[r].line,n[r].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=ba&&t.refresh()})),n("specialCharPlaceholder",Je,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){wa(t),gr(t)}),!0),n("keyMap","default",(function(t,e,n){var i=Yo(e),r=n!=ba&&Yo(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ta,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=fr(e,t.options.lineNumbers),gr(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?ai(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return $i(t)}),!0),n("scrollbarStyle","native",(function(t){Hi(t),$i(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=fr(t.options.gutters,e),gr(t)}),!0),n("firstLineNumber",1,gr,!0),n("lineNumberFormatter",(function(t){return t}),gr,!0),n("showCursorWhenSelecting",!1,mi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(Pi(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("screenReaderLabel",null,(function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Pa),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mi,!0),n("singleCursorHeightPerLine",!0,mi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Er,!0),n("addModeClass",!1,Er,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Er,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(Ca),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,r=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&tr(this,e[t])(this,n,r),pt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Yo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:er((function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");(function(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)})(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,ci(this)})),removeOverlay:er((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void ci(this)}})),indentLine:er((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&La(this,t,e,n)})),indentSelection:er((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(La(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&Ei(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)La(this,l,t);var u=this.doc.sel.ranges;0==o.ch&&e.length==u.length&&u[i].from().ch>0&&Yr(this.doc,i,new Sr(o,u[i].to()),F)}}})),getTokenAt:function(t,e){return ye(this,t,e)},getLineTokens:function(t,e){return ye(this,te(t),e,!0)},getTokenTypeAt:function(t){t=se(this.doc,t);var e,n=de(this,Wt(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}i=a+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!n.hasOwnProperty(e))return i;var r=n[e],o=this.getModeAt(t);if("string"==typeof o[e])r[o[e]]&&i.push(r[o[e]]);else if(o[e])for(var a=0;a<o[e].length;a++){var s=r[o[e][a]];s&&i.push(s)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var u=r._global[l];u.pred(o,this)&&-1==G(i,u.val)&&i.push(u.val)}return i},getStateAfter:function(t,e){var n=this.doc;return fe(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return qn(this,null==t?n.head:"object"==typeof t?se(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Wn(this,se(this.doc,t),e||"page")},coordsChar:function(t,e){return Yn(this,(t=Un(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Un(this,{top:t,left:0},e||"page").top,Kt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0),i=Wt(this.doc,t)}else i=t;return Hn(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-Be(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o,a,s,l=this.display,u=(t=qn(this,se(this.doc,t))).bottom,h=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==i)u=t.top;else if("above"==i||"near"==i){var c=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>c)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=c&&(u=t.bottom),h+e.offsetWidth>d&&(h=d-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==r?(h=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?h=0:"middle"==r&&(h=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=h+"px"),n&&(o=this,a={left:h,top:u,right:h+e.offsetWidth,bottom:u+e.offsetHeight},null!=(s=Li(o,a)).scrollTop&&Ri(o,s.scrollTop),null!=s.scrollLeft&&ji(o,s.scrollLeft))},triggerOnKeyDown:er(ha),triggerOnKeyPress:er(da),triggerOnKeyUp:ca,triggerOnMouseDown:er(ma),execCommand:function(t){if(ea.hasOwnProperty(t))return ea[t].call(null,this)},triggerElectric:er((function(t){Ia(this,t)})),findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=se(this.doc,t),a=0;a<e&&!(o=za(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:er((function(t,e){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?za(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()}),H)})),deleteH:er((function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Ko(this,(function(n){var r=za(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var a=se(this.doc,t),s=0;s<e;++s){var l=qn(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Va(this,l,r,n)).hitSide)break}return a},moveV:er((function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(o)return t<0?a.from():a.to();var s=qn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var l=Va(n,s,t,e);return"page"==e&&a==i.sel.primary()&&ki(n,Wn(n,l,"div").top-s.top),l}),H),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]})),findWordAt:function(t){var e=Wt(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;for(var o=e.charAt(n),a=tt(o,r)?function(t){return tt(t,r)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};n>0&&a(e.charAt(n-1));)--n;for(;i<e.length&&a(e.charAt(i));)++i}return new Sr(te(t.line,n),te(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:er((function(t,e){Oi(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Tn(this)-this.display.barHeight,width:t.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:An(this),clientWidth:Cn(this)}},scrollIntoView:er((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Ni(t),t.curOp.scrollToPos=e}(this,t):Ii(this,t.from,t.to,t.margin)})),setSize:er((function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&Vn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){di(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,pt(this,"refresh",this)})),operation:function(t){return Qi(this,t)},startOperation:function(){return Wi(this)},endOperation:function(){return qi(this)},refresh:er((function(){var t=this.display.cachedTextHeight;ci(this),this.curOp.forceUpdate=!0,Gn(this),Oi(this,this.doc.scrollLeft,this.doc.scrollTop),ur(this.display),(null==t||Math.abs(t-ii(this.display))>.5||this.options.lineWrapping)&&li(this),pt(this,"refresh",this)})),swapDoc:er((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Rr(this,t),Gn(this),this.display.input.reset(),Oi(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yt(t),t.registerHelper=function(e,i,r){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=r},t.registerGlobalHelper=function(e,i,r,o){t.registerHelper(e,i,o),n[e]._global.push({pred:r,val:o})}}(Ca);var Wa="iter insert remove copy getEditor constructor".split(" ");for(var qa in Eo.prototype)Eo.prototype.hasOwnProperty(qa)&&G(Wa,qa)<0&&(Ca.prototype[qa]=function(t){return function(){return t.apply(this.doc,arguments)}}(Eo.prototype[qa]));return yt(Eo),Ca.inputStyles={textarea:Ua,contenteditable:Ga},Ca.defineMode=function(t){Ca.defaults.mode||"null"==t||(Ca.defaults.mode=t),jt.apply(this,arguments)},Ca.defineMIME=function(t,e){Dt[t]=e},Ca.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Ca.defineMIME("text/plain","null"),Ca.defineExtension=function(t,e){Ca.prototype[t]=e},Ca.defineDocExtension=function(t,e){Eo.prototype[t]=e},Ca.fromTextArea=function(t,e){if((e=e?j(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=O();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function i(){t.value=s.getValue()}var r;if(t.form&&(ct(t.form,"submit",i),!e.leaveSubmitMethodAlone)){var o=t.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(t){}}e.finishInit=function(n){n.save=i,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,i(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(ft(t.form,"submit",i),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var s=Ca((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return s},function(t){t.off=ft,t.on=ct,t.wheelEventPixels=xr,t.Doc=Eo,t.splitLines=Et,t.countColumn=z,t.findColumn=U,t.isWordChar=Q,t.Pass=$,t.signal=pt,t.Line=We,t.changeEnd=Tr,t.scrollbarModel=Bi,t.Pos=te,t.cmpPos=ee,t.modes=Rt,t.mimeModes=Dt,t.resolveMode=zt,t.getMode=Vt,t.modeExtensions=Gt,t.extendMode=$t,t.copyState=Ft,t.startState=Ht,t.innerMode=Bt,t.commands=ea,t.keyMap=Bo,t.keyName=Zo,t.isModifierKey=qo,t.lookupKey=Wo,t.normalizeKeyMap=Uo,t.StringStream=Ut,t.SharedTextMarker=Co,t.TextMarker=Po,t.LineWidget=bo,t.e_preventDefault=_t,t.e_stopPropagation=xt,t.e_stop=bt,t.addClass=N,t.contains=E,t.rmClass=T,t.keyNames=Vo}(Ca),Ca.version="5.65.1",Ca}()},6876:(t,e,n)=>{!function(t){"use strict";t.defineMode("javascript",(function(e,n){var i,r,o=e.indentUnit,a=n.statementIndent,s=n.jsonld,l=n.json||s,u=!1!==n.trackScope,h=n.typescript,c=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),r=t("keyword d"),o=t("operator"),a={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:t("new"),delete:i,void:i,throw:i,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:t("this"),class:t("class"),super:t("atom"),yield:i,export:t("export"),import:t("import"),extends:i,await:i}}(),f=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(t,e,n){return i=t,r=n,e}function m(t,e){var n,i=t.next();if('"'==i||"'"==i)return e.tokenize=(n=i,function(t,e){var i,r=!1;if(s&&"@"==t.peek()&&t.match(p))return e.tokenize=m,g("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(e.tokenize=m),g("string","string")}),e.tokenize(t,e);if("."==i&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return g("number","number");if("."==i&&t.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return g(i);if("="==i&&t.eat(">"))return g("=>","operator");if("0"==i&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return g("number","number");if(/\d/.test(i))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),g("number","number");if("/"==i)return t.eat("*")?(e.tokenize=v,v(t,e)):t.eat("/")?(t.skipToEnd(),g("comment","comment")):Qt(t,e,1)?(function(t){for(var e,n=!1,i=!1;null!=(e=t.next());){if(!n){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}n=!n&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),g("regexp","string-2")):(t.eat("="),g("operator","operator",t.current()));if("`"==i)return e.tokenize=y,y(t,e);if("#"==i&&"!"==t.peek())return t.skipToEnd(),g("meta","meta");if("#"==i&&t.eatWhile(c))return g("variable","property");if("<"==i&&t.match("!--")||"-"==i&&t.match("->")&&!/\S/.test(t.string.slice(0,t.start)))return t.skipToEnd(),g("comment","comment");if(f.test(i))return">"==i&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=i&&"="!=i||t.eat("="):/[<>*+\-|&?]/.test(i)&&(t.eat(i),">"==i&&t.eat(i))),"?"==i&&t.eat(".")?g("."):g("operator","operator",t.current());if(c.test(i)){t.eatWhile(c);var r=t.current();if("."!=e.lastType){if(d.propertyIsEnumerable(r)){var o=d[r];return g(o.type,o.style,r)}if("async"==r&&t.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return g("async","keyword",r)}return g("variable","variable",r)}}function v(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=m;break}i="*"==n}return g("comment","comment")}function y(t,e){for(var n,i=!1;null!=(n=t.next());){if(!i&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=m;break}i=!i&&"\\"==n}return g("quasi","string-2",t.current())}function _(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(h){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));i&&(n=i.index)}for(var r=0,o=!1,a=n-1;a>=0;--a){var s=t.string.charAt(a),l="([{}])".indexOf(s);if(l>=0&&l<3){if(!r){++a;break}if(0==--r){"("==s&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(c.test(s))o=!0;else if(/["'\/`]/.test(s))for(;;--a){if(0==a)return;if(t.string.charAt(a-1)==s&&"\\"!=t.string.charAt(a-2)){a--;break}}else if(o&&!r){++a;break}}o&&!r&&(e.fatArrowAt=a)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function w(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function b(t,e){if(!u)return!1;for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var i=t.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==e)return!0}function S(t,e,n,i,r){var o=t.cc;for(M.state=t,M.stream=r,M.marked=null,M.cc=o,M.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((o.length?o.pop():l?F:G)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return M.marked?M.marked:"variable"==n&&b(t,i)?"variable-2":e}}var M={state:null,column:null,marked:null,cc:null};function P(){for(var t=arguments.length-1;t>=0;t--)M.cc.push(arguments[t])}function T(){return P.apply(null,arguments),!0}function C(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function A(t){var e=M.state;if(M.marked="def",u){if(e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var i=L(t,e.context);if(null!=i)return void(e.context=i)}else if(!C(t,e.localVars))return void(e.localVars=new O(t,e.localVars));n.globalVars&&!C(t,e.globalVars)&&(e.globalVars=new O(t,e.globalVars))}}function L(t,e){if(e){if(e.block){var n=L(t,e.prev);return n?n==e.prev?e:new E(n,e.vars,!0):null}return C(t,e.vars)?e:new E(e.prev,new O(t,e.vars),!1)}return null}function k(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function E(t,e,n){this.prev=t,this.vars=e,this.block=n}function O(t,e){this.name=t,this.next=e}var N=new O("this",new O("arguments",null));function I(){M.state.context=new E(M.state.context,M.state.localVars,!1),M.state.localVars=N}function R(){M.state.context=new E(M.state.context,M.state.localVars,!0),M.state.localVars=null}function D(){M.state.localVars=M.state.context.vars,M.state.context=M.state.context.prev}function j(t,e){var n=function(){var n=M.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new w(i,M.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function z(){var t=M.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function V(t){return function e(n){return n==t?T():";"==t||"}"==n||")"==n||"]"==n?P():T(e)}}function G(t,e){return"var"==t?T(j("vardef",e),Mt,V(";"),z):"keyword a"==t?T(j("form"),H,G,z):"keyword b"==t?T(j("form"),G,z):"keyword d"==t?M.stream.match(/^\s*$/,!1)?T():T(j("stat"),W,V(";"),z):"debugger"==t?T(V(";")):"{"==t?T(j("}"),R,lt,z,D):";"==t?T():"if"==t?("else"==M.state.lexical.info&&M.state.cc[M.state.cc.length-1]==z&&M.state.cc.pop()(),T(j("form"),H,G,z,kt)):"function"==t?T(It):"for"==t?T(j("form"),R,Et,G,D,z):"class"==t||h&&"interface"==e?(M.marked="keyword",T(j("form","class"==t?t:e),Vt,z)):"variable"==t?h&&"declare"==e?(M.marked="keyword",T(G)):h&&("module"==e||"enum"==e||"type"==e)&&M.stream.match(/^\s*\w/,!1)?(M.marked="keyword","enum"==e?T(Kt):"type"==e?T(Dt,V("operator"),ft,V(";")):T(j("form"),Pt,V("{"),j("}"),lt,z,z)):h&&"namespace"==e?(M.marked="keyword",T(j("form"),F,G,z)):h&&"abstract"==e?(M.marked="keyword",T(G)):T(j("stat"),et):"switch"==t?T(j("form"),H,V("{"),j("}","switch"),R,lt,z,z,D):"case"==t?T(F,V(":")):"default"==t?T(V(":")):"catch"==t?T(j("form"),I,$,G,z,D):"export"==t?T(j("stat"),Bt,z):"import"==t?T(j("stat"),Ut,z):"async"==t?T(G):"@"==e?T(F,G):P(j("stat"),F,V(";"),z)}function $(t){if("("==t)return T(jt,V(")"))}function F(t,e){return U(t,e,!1)}function B(t,e){return U(t,e,!0)}function H(t){return"("!=t?P():T(j(")"),W,V(")"),z)}function U(t,e,n){if(M.state.fatArrowAt==M.stream.start){var i=n?J:K;if("("==t)return T(I,j(")"),at(jt,")"),z,V("=>"),i,D);if("variable"==t)return P(I,Pt,V("=>"),i,D)}var r=n?X:q;return x.hasOwnProperty(t)?T(r):"function"==t?T(It,r):"class"==t||h&&"interface"==e?(M.marked="keyword",T(j("form"),zt,z)):"keyword c"==t||"async"==t?T(n?B:F):"("==t?T(j(")"),W,V(")"),z,r):"operator"==t||"spread"==t?T(n?B:F):"["==t?T(j("]"),Yt,z,r):"{"==t?st(it,"}",null,r):"quasi"==t?P(Z,r):"new"==t?T(function(t){return function(e){return"."==e?T(t?tt:Q):"variable"==e&&h?T(wt,t?X:q):P(t?B:F)}}(n)):T()}function W(t){return t.match(/[;\}\)\],]/)?P():P(F)}function q(t,e){return","==t?T(W):X(t,e,!1)}function X(t,e,n){var i=0==n?q:X,r=0==n?F:B;return"=>"==t?T(I,n?J:K,D):"operator"==t?/\+\+|--/.test(e)||h&&"!"==e?T(i):h&&"<"==e&&M.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(j(">"),at(ft,">"),z,i):"?"==e?T(F,V(":"),r):T(r):"quasi"==t?P(Z,i):";"!=t?"("==t?st(B,")","call",i):"."==t?T(nt,i):"["==t?T(j("]"),W,V("]"),z,i):h&&"as"==e?(M.marked="keyword",T(ft,i)):"regexp"==t?(M.state.lastType=M.marked="operator",M.stream.backUp(M.stream.pos-M.stream.start-1),T(r)):void 0:void 0}function Z(t,e){return"quasi"!=t?P():"${"!=e.slice(e.length-2)?T(Z):T(W,Y)}function Y(t){if("}"==t)return M.marked="string-2",M.state.tokenize=y,T(Z)}function K(t){return _(M.stream,M.state),P("{"==t?G:F)}function J(t){return _(M.stream,M.state),P("{"==t?G:B)}function Q(t,e){if("target"==e)return M.marked="keyword",T(q)}function tt(t,e){if("target"==e)return M.marked="keyword",T(X)}function et(t){return":"==t?T(z,G):P(q,V(";"),z)}function nt(t){if("variable"==t)return M.marked="property",T()}function it(t,e){return"async"==t?(M.marked="property",T(it)):"variable"==t||"keyword"==M.style?(M.marked="property","get"==e||"set"==e?T(rt):(h&&M.state.fatArrowAt==M.stream.start&&(n=M.stream.match(/^\s*:\s*/,!1))&&(M.state.fatArrowAt=M.stream.pos+n[0].length),T(ot))):"number"==t||"string"==t?(M.marked=s?"property":M.style+" property",T(ot)):"jsonld-keyword"==t?T(ot):h&&k(e)?(M.marked="keyword",T(it)):"["==t?T(F,ut,V("]"),ot):"spread"==t?T(B,ot):"*"==e?(M.marked="keyword",T(it)):":"==t?P(ot):void 0;var n}function rt(t){return"variable"!=t?P(ot):(M.marked="property",T(It))}function ot(t){return":"==t?T(B):"("==t?P(It):void 0}function at(t,e,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var a=M.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),T((function(n,i){return n==e||i==e?P():P(t)}),i)}return r==e||o==e?T():n&&n.indexOf(";")>-1?P(t):T(V(e))}return function(n,r){return n==e||r==e?T():P(t,i)}}function st(t,e,n){for(var i=3;i<arguments.length;i++)M.cc.push(arguments[i]);return T(j(e,n),at(t,e),z)}function lt(t){return"}"==t?T():P(G,lt)}function ut(t,e){if(h){if(":"==t)return T(ft);if("?"==e)return T(ut)}}function ht(t,e){if(h&&(":"==t||"in"==e))return T(ft)}function ct(t){if(h&&":"==t)return M.stream.match(/^\s*\w+\s+is\b/,!1)?T(F,dt,ft):T(ft)}function dt(t,e){if("is"==e)return M.marked="keyword",T()}function ft(t,e){return"keyof"==e||"typeof"==e||"infer"==e||"readonly"==e?(M.marked="keyword",T("typeof"==e?B:ft)):"variable"==t||"void"==e?(M.marked="type",T(xt)):"|"==e||"&"==e?T(ft):"string"==t||"number"==t||"atom"==t?T(xt):"["==t?T(j("]"),at(ft,"]",","),z,xt):"{"==t?T(j("}"),gt,z,xt):"("==t?T(at(_t,")"),pt,xt):"<"==t?T(at(ft,">"),ft):"quasi"==t?P(vt,xt):void 0}function pt(t){if("=>"==t)return T(ft)}function gt(t){return t.match(/[\}\)\]]/)?T():","==t||";"==t?T(gt):P(mt,gt)}function mt(t,e){return"variable"==t||"keyword"==M.style?(M.marked="property",T(mt)):"?"==e||"number"==t||"string"==t?T(mt):":"==t?T(ft):"["==t?T(V("variable"),ht,V("]"),mt):"("==t?P(Rt,mt):t.match(/[;\}\)\],]/)?void 0:T()}function vt(t,e){return"quasi"!=t?P():"${"!=e.slice(e.length-2)?T(vt):T(ft,yt)}function yt(t){if("}"==t)return M.marked="string-2",M.state.tokenize=y,T(vt)}function _t(t,e){return"variable"==t&&M.stream.match(/^\s*[?:]/,!1)||"?"==e?T(_t):":"==t?T(ft):"spread"==t?T(_t):P(ft)}function xt(t,e){return"<"==e?T(j(">"),at(ft,">"),z,xt):"|"==e||"."==t||"&"==e?T(ft):"["==t?T(ft,V("]"),xt):"extends"==e||"implements"==e?(M.marked="keyword",T(ft)):"?"==e?T(ft,V(":"),ft):void 0}function wt(t,e){if("<"==e)return T(j(">"),at(ft,">"),z,xt)}function bt(){return P(ft,St)}function St(t,e){if("="==e)return T(ft)}function Mt(t,e){return"enum"==e?(M.marked="keyword",T(Kt)):P(Pt,ut,At,Lt)}function Pt(t,e){return h&&k(e)?(M.marked="keyword",T(Pt)):"variable"==t?(A(e),T()):"spread"==t?T(Pt):"["==t?st(Ct,"]"):"{"==t?st(Tt,"}"):void 0}function Tt(t,e){return"variable"!=t||M.stream.match(/^\s*:/,!1)?("variable"==t&&(M.marked="property"),"spread"==t?T(Pt):"}"==t?P():"["==t?T(F,V("]"),V(":"),Tt):T(V(":"),Pt,At)):(A(e),T(At))}function Ct(){return P(Pt,At)}function At(t,e){if("="==e)return T(B)}function Lt(t){if(","==t)return T(Mt)}function kt(t,e){if("keyword b"==t&&"else"==e)return T(j("form","else"),G,z)}function Et(t,e){return"await"==e?T(Et):"("==t?T(j(")"),Ot,z):void 0}function Ot(t){return"var"==t?T(Mt,Nt):"variable"==t?T(Nt):P(Nt)}function Nt(t,e){return")"==t?T():";"==t?T(Nt):"in"==e||"of"==e?(M.marked="keyword",T(F,Nt)):P(F,Nt)}function It(t,e){return"*"==e?(M.marked="keyword",T(It)):"variable"==t?(A(e),T(It)):"("==t?T(I,j(")"),at(jt,")"),z,ct,G,D):h&&"<"==e?T(j(">"),at(bt,">"),z,It):void 0}function Rt(t,e){return"*"==e?(M.marked="keyword",T(Rt)):"variable"==t?(A(e),T(Rt)):"("==t?T(I,j(")"),at(jt,")"),z,ct,D):h&&"<"==e?T(j(">"),at(bt,">"),z,Rt):void 0}function Dt(t,e){return"keyword"==t||"variable"==t?(M.marked="type",T(Dt)):"<"==e?T(j(">"),at(bt,">"),z):void 0}function jt(t,e){return"@"==e&&T(F,jt),"spread"==t?T(jt):h&&k(e)?(M.marked="keyword",T(jt)):h&&"this"==t?T(ut,At):P(Pt,ut,At)}function zt(t,e){return"variable"==t?Vt(t,e):Gt(t,e)}function Vt(t,e){if("variable"==t)return A(e),T(Gt)}function Gt(t,e){return"<"==e?T(j(">"),at(bt,">"),z,Gt):"extends"==e||"implements"==e||h&&","==t?("implements"==e&&(M.marked="keyword"),T(h?ft:F,Gt)):"{"==t?T(j("}"),$t,z):void 0}function $t(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||h&&k(e))&&M.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(M.marked="keyword",T($t)):"variable"==t||"keyword"==M.style?(M.marked="property",T(Ft,$t)):"number"==t||"string"==t?T(Ft,$t):"["==t?T(F,ut,V("]"),Ft,$t):"*"==e?(M.marked="keyword",T($t)):h&&"("==t?P(Rt,$t):";"==t||","==t?T($t):"}"==t?T():"@"==e?T(F,$t):void 0}function Ft(t,e){if("!"==e)return T(Ft);if("?"==e)return T(Ft);if(":"==t)return T(ft,At);if("="==e)return T(B);var n=M.state.lexical.prev;return P(n&&"interface"==n.info?Rt:It)}function Bt(t,e){return"*"==e?(M.marked="keyword",T(Zt,V(";"))):"default"==e?(M.marked="keyword",T(F,V(";"))):"{"==t?T(at(Ht,"}"),Zt,V(";")):P(G)}function Ht(t,e){return"as"==e?(M.marked="keyword",T(V("variable"))):"variable"==t?P(B,Ht):void 0}function Ut(t){return"string"==t?T():"("==t?P(F):"."==t?P(q):P(Wt,qt,Zt)}function Wt(t,e){return"{"==t?st(Wt,"}"):("variable"==t&&A(e),"*"==e&&(M.marked="keyword"),T(Xt))}function qt(t){if(","==t)return T(Wt,qt)}function Xt(t,e){if("as"==e)return M.marked="keyword",T(Wt)}function Zt(t,e){if("from"==e)return M.marked="keyword",T(F)}function Yt(t){return"]"==t?T():P(at(B,"]"))}function Kt(){return P(j("form"),Pt,V("{"),j("}"),at(Jt,"}"),z,z)}function Jt(){return P(Pt,At)}function Qt(t,e,n){return e.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}return I.lex=R.lex=!0,D.lex=!0,z.lex=!0,{startState:function(t){var e={tokenize:m,lastType:"sof",cc:[],lexical:new w((t||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new E(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),_(t,e)),e.tokenize!=v&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==i?n:(e.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",S(e,n,i,r,t))},indent:function(e,i){if(e.tokenize==v||e.tokenize==y)return t.Pass;if(e.tokenize!=m)return 0;var r,s=i&&i.charAt(0),l=e.lexical;if(!/^\s*else\b/.test(i))for(var u=e.cc.length-1;u>=0;--u){var h=e.cc[u];if(h==z)l=l.prev;else if(h!=kt&&h!=D)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(r=e.cc[e.cc.length-1])&&(r==q||r==X)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;a&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var c=l.type,d=s==c;return"vardef"==c?l.indented+("operator"==e.lastType||","==e.lastType?l.info.length+1:0):"form"==c&&"{"==s?l.indented:"form"==c?l.indented+o:"stat"==c?l.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||f.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,i)?a||o:0):"switch"!=l.info||d||0==n.doubleIndentSwitch?l.align?l.column+(d?0:1):l.indented+(d?0:o):l.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:Qt,skipExpression:function(e){S(e,"atom","atom","true",new t.StringStream("",2,null))}}})),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(4631))},1009:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.transformParameter=S,e.transformDomain=T;var a=d(n(2861)),s=d(n(3578)),l=n(5013),u=n(1515),h=n(8990),c=n(560);function d(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._covjson=e,this.type=u.COVERAGE,this.ld={},this._exposeLd(e),this.prefixes=(0,h.getNamespacePrefixes)(this.ld),this.options=n?(0,h.shallowcopy)(n):{},this.id=e.id,this.parameters=new Map;var i=!0,r=!1,o=void 0;try{for(var a,s=Object.keys(e.parameters)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;S(e.parameters,l),this.parameters.set(l,e.parameters[l])}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}var c=void 0;(c="string"==typeof this._covjson.domain?this._covjson.domainType:this._covjson.domain.domainType||this._covjson.domainType)&&-1===c.indexOf(":")&&(c=h.DOMAINTYPES_PREFIX+c),this.domainType=c,this._updateLoadStatus()}return o(t,[{key:"_updateLoadStatus",value:function(){var t=this,e=function(t){return"object"===(void 0===t?"undefined":r(t))},n=e(this._covjson.domain),i=Object.keys(this._covjson.ranges).every((function(n){return e(t._covjson.ranges[n])}));this.loaded=n&&i}},{key:"_exposeLd",value:function(t){if(t["@context"]){var e=(0,h.shallowcopy)(t);delete e.domain,delete e.ranges,this.ld=JSON.parse(JSON.stringify(e))}}},{key:"loadDomain",value:function(){var t=this,e=this._covjson.domain;if(this._domainPromise)return this._domainPromise;var n=void 0;if("object"===(void 0===e?"undefined":r(e))){var i=e;T(i,this.options.referencing,this.domainType),n=Promise.resolve(i)}else{var o=e;n=(0,c.load)(o).then((function(e){var n=e.data;return T(n,t.options.referencing,t.domainType),t._covjson.domain=n,t._updateLoadStatus(),n}))}return this._domainPromise=n,n}},{key:"loadRange",value:function(t){return v(this)(t)}},{key:"loadRanges",value:function(t){return m(this)(t)}},{key:"subsetByIndex",value:function(t){return b(this)(t)}},{key:"subsetByValue",value:function(t){return(0,l.subsetByValue)(this,t)}}]),t}();function g(t,e){if(!t)return e._axisNames;var n=[].concat(f(t.axes.values())).filter((function(t){return t.values.length>1})).length>1,i=t._rangeAxisOrder||e._axisNames;if(n&&!i)throw new Error("Range axis order missing");return i||[].concat(f(t.axes.keys()))}function m(t){return function(e){return void 0===e&&(e=t.parameters.keys()),e=Array.from(e),Promise.all(e.map((function(e){return t.loadRange(e)}))).then((function(t){for(var n=new Map,i=0;i<e.length;i++)n.set(e[i],t[i]);return n}))}}function v(t,e){return function(n){return t.loadDomain().then((function(){var i=t._covjson.ranges[n];if("object"===(void 0===i?"undefined":r(i)))return y(t,n,i,t._covjson.domain,e);var o=i;return(0,c.load)(o).then((function(i){var r=i.data;return y(t,n,r,t._covjson.domain,e)}))}))}}function y(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(r=(0,l.normalizeIndexSubsetConstraints)(i,r),"NdArray"===n.type||"Range"===n.type){M(n,i),t.options.cacheRanges&&(t._covjson.ranges[e]=n,t._updateLoadStatus());var o=w(n,i,r);return Promise.resolve(o)}if("TiledNdArray"===n.type)return _(n,r);throw new Error("Unsupported: "+n.type)}function _(t,e){for(var n=t.axisNames.map((function(t){return e[t]})),i=function(e){return e.map((function(e,n){return null===e?t.shape[n]:e}))},o=t.tileSets.map((function(t){return function(t,e){for(var n=1,i=0;i<t.length;i++){var r=e[i],o=r.start,a=r.stop,s=r.step,l=t[i],u=Math.floor(o/l),h=l*(Math.ceil(a/l)-u);n*=Math.ceil(h/Math.max(s,l))}return{tileCount:n,valueCount:n*t.reduce((function(t,e){return t*e}))}}(i(t.tileShape),n)})),l=function(t){return t.map((function(t){return t.tileCount+t.valueCount/1e3})).reduce((function(t,e,n,i){return e<i[t]?n:t}),0)}(o),u=t.tileSets[l],h=s.default.parse(u.urlTemplate),d=i(u.tileShape),p=[],g=0;g<d.length;g++){for(var m=n[g],v=m.start,y=m.stop,_=m.step,w=d[g],b=Math.floor(v/w),S=Math.ceil(y/w),T=[],C=b;C<S;C++){var A=(C+.5)*w,L=Math.floor((A-v)/_);(v+L*_>=C*w||(C+1)*w<=v+(L+1)*_)&&T.push(C)}p.push(T)}var k=x(p),E=n.map((function(t){var e=t.start,n=t.stop,i=t.step;return Math.floor((n-e)/i)+(n-e)%i}));function O(e){var n={};return e.forEach((function(e,i){return n[t.axisNames[i]]=e})),h.expand(n)}if(1===k.length&&E.every((function(t,e){return t===d[e]}))){var N=O(k[0]);return(0,c.load)(N).then((function(t){var e=t.data;return M(e),e}))}var I,R,D,j=(I=E.reduce((function(t,e){return t*e})),R=(0,a.default)(new Array(I),E),D=k.map((function(t){var e=O(t);return(0,c.load)(e).then((function(e){var i=e.data;M(i);for(var r=t.map((function(t,e){return t*d[e]})),o=[],a=0;a<d.length;a++){var s=n[a],l=s.start,u=s.stop,h=s.step,c=d[a],p=r[a],g=[],m=0;p<l&&(m=l-p);var v=c;p+v>u&&(v=u-p);for(var y=m;y<v;y++)(p+y-l)%h==0&&g.push(y);o.push(g)}var _=x(o),w=!0,b=!1,S=void 0;try{for(var P,T=_[Symbol.iterator]();!(w=(P=T.next()).done);w=!0){var C,A=P.value,L=(C=i._ndarr).get.apply(C,f(A)),k=A.map((function(t,e){var i=r[e]+t;return Math.floor((i-n[e].start)/n[e].step)}));R.set.apply(R,f(k).concat([L]))}}catch(t){b=!0,S=t}finally{try{!w&&T.return&&T.return()}finally{if(b)throw S}}}))})),{v:Promise.all(D).then((function(){var e={dataType:t.dataType,get:P(R,t.axisNames),_ndarr:R,_axisNames:t.axisNames,_shape:E};return e.shape=new Map(t.axisNames.map((function(t,e){return[t,R.shape[e]]}))),e}))});if("object"===(void 0===j?"undefined":r(j)))return j.v}function x(t){return t.reduce((function(t,e){return t.map((function(t){return e.map((function(e){return t.concat(e)}))})).reduce((function(t,e){return t.concat(e)}),[])}),[[]])}function w(t,e,n){var i,r,o=t._ndarr,a=g(e,t),s=a.map((function(t){return n[t].start})),l=a.map((function(t){return n[t].stop})),u=a.map((function(t){return n[t].step})),h=(i=(r=o.hi.apply(o,f(l))).lo.apply(r,f(s))).step.apply(i,f(u)),c={dataType:t.dataType,get:P(h,a),_ndarr:h,_axisNames:a,_shape:h.shape};return c.shape=new Map(a.map((function(t,e){return[t,h.shape[e]]}))),c}function b(t,e){return function(n){return t.loadDomain().then((function(i){n=(0,l.normalizeIndexSubsetConstraints)(i,n);var r=(0,l.subsetDomainByIndex)(i,n),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!0,r=!1,o=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=t[l],h=e[l]||{},c=h.start,d=void 0===c?0:c,f=h.step,p=void 0===f?1:f;n[l]={start:d+p*u.start,stop:d+p*u.stop,step:p*u.step}}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(n,e);i._rangeAxisOrder&&(r._rangeAxisOrder=i._rangeAxisOrder);var a={_covjson:t._covjson,options:t.options,type:u.COVERAGE,domainProfiles:t.domainProfiles,domainType:t.domainType,parameters:t.parameters,loadDomain:function(){return Promise.resolve(r)}};return a.loadRange=v(a,o),a.loadRanges=m(a),a.subsetByIndex=b(a,o),a.subsetByValue=l.subsetByValue.bind(null,a),a}))}}function S(t,e){if(!("__transformDone"in t[e])){var n=t[e];if(n.key=e,n.unit&&"string"==typeof n.unit.symbol&&(n.unit.symbol={value:n.unit.symbol}),n.categoryEncoding){var i=new Map,r=!0,o=!1,a=void 0;try{for(var s,l=Object.keys(n.categoryEncoding)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,h=n.categoryEncoding[u];Array.isArray(h)||(h=[h]),i.set(u,h)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}n.categoryEncoding=i}n.__transformDone=!0}}function M(t,e){if(!("__transformDone"in t)){var n=t.values;if(void 0===t.actualMin){var r=(0,l.minMax)(n),o=i(r,2),s=o[0],u=o[1];null!==s&&(t.actualMin=s,t.actualMax=u)}t.shape&&(t._shape=t.shape),t.axisNames&&(t._axisNames=t.axisNames,delete t.axisNames);var h=g(e,t),c=function(t,e){if(!t)return e._shape;var n=g(t,e).map((function(e){return t.axes.get(e).values.length}));if(e._shape&&(e._shape.length!==n.length||!e._shape.every((function(t,e){return t===n[e]}))))throw new Error("range.shape must match domain axis sizes");return n}(e,t),d=(0,a.default)(n,c);return t._ndarr=d,t.get=P(d,h),t.shape=new Map(h.map((function(t,e){return[t,c[e]]}))),t.__transformDone=!0,t}}function P(t,e){for(var n="",i=0;i<e.length;i++)n&&(n+=","),n+="'"+e[i]+"' in obj ? obj['"+e[i]+"'] : 0";return new Function("ndarr","return function ndarrget (obj) { return ndarr.get("+n+") }")(t)}function T(t,e,n){if(!("__transformDone"in t)){(n=t.domainType||n)&&-1===n.indexOf(":")&&(n=h.DOMAINTYPES_PREFIX+n),t.domainType=n;var r=new Map,o=!0,a=!1,s=void 0;try{for(var l,u=Object.keys(t.axes)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.set(c,t.axes[c])}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}t.axes=r;var d=!0,f=!1,p=void 0;try{for(var g,m=r[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=i(g.value,2),y=v[0],_=v[1];if(_.key=y,_.dataType&&-1===_.dataType.indexOf(":")&&(_.dataType=h.CORE_PREFIX+_.dataType),_.components&&(_.coordinates=_.components),_.coordinates||(_.coordinates=[y]),_.components=_.coordinates,"start"in _&&"stop"in _&&"num"in _){var x=new Float64Array(_.num),w=void 0;if(1===_.num){if(_.start!==_.stop)throw new Error("regular axis of length 1 must have equal start/stop values");w=0}else w=(_.stop-_.start)/(_.num-1);for(var b=0;b<_.num;b++)x[b]=_.start+b*w;_.values=x,delete _.start,delete _.stop,delete _.num}if(Array.isArray(_.values)&&"number"==typeof _.values[0]){for(var S=new Float64Array(_.values.length),M=0;M<_.values.length;M++)S[M]=_.values[M];_.values=S}_.bounds=C(_)}}catch(t){f=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}e&&(t.referencing=e);var P=!0,T=!1,A=void 0;try{for(var L,k=t.referencing[Symbol.iterator]();!(P=(L=k.next()).done);P=!0){var E=L.value;E.components&&(E.coordinates=E.components)}}catch(t){T=!0,A=t}finally{try{!P&&k.return&&k.return()}finally{if(T)throw A}}return t.rangeAxisOrder&&(t._rangeAxisOrder=t.rangeAxisOrder,delete t.rangeAxisOrder),t.__transformDone=!0,t}}function C(t){if(t.bounds){var e=(n=t.bounds,{v:{get:function(t){return[n[2*t],n[2*t+1]]}}});if("object"===(void 0===e?"undefined":r(e)))return e.v}var n}e.default=p},9937:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1515),a=n(1009),s=(i=a)&&i.__esModule?i:{default:i},l=n(8990),u=n(5013),h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=o.COVERAGECOLLECTION,this.ld={},this._exposeLd(e),this.prefixes=(0,l.getNamespacePrefixes)(this.ld),this.id=e.id;var n=e.domainType;n&&-1===n.indexOf(":")&&(n=l.DOMAINTYPES_PREFIX+n),this.domainType=n;var i=[],r=e.parameters?e.parameters:{},u=!0,h=!1,c=void 0;try{for(var d,f=Object.keys(r)[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=r[d.value];p.id||(p.id=Math.round((new Date).getTime()*Math.random()).toString())}}catch(t){h=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw c}}var g={};e.referencing&&(g.referencing=e.referencing);var m=!0,v=!1,y=void 0;try{for(var _,x=e.coverages[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var w=_.value;w.domainType||(w.domainType=n),w.parameters||(w.parameters={});var b=!0,S=!1,M=void 0;try{for(var P,T=Object.keys(r)[Symbol.iterator]();!(b=(P=T.next()).done);b=!0){var C=P.value;C in w.ranges&&(w.parameters[C]=r[C])}}catch(t){S=!0,M=t}finally{try{!b&&T.return&&T.return()}finally{if(S)throw M}}e["@context"]&&(w["@context"]=e["@context"]),i.push(new s.default(w,g))}}catch(t){v=!0,y=t}finally{try{!m&&x.return&&x.return()}finally{if(v)throw y}}if(this.coverages=i,e.parameters){this.parameters=new Map;var A=!0,L=!1,k=void 0;try{for(var E,O=Object.keys(e.parameters)[Symbol.iterator]();!(A=(E=O.next()).done);A=!0){var N=E.value;(0,a.transformParameter)(e.parameters,N),this.parameters.set(N,e.parameters[N])}}catch(t){L=!0,k=t}finally{try{!A&&O.return&&O.return()}finally{if(L)throw k}}}e.domainTemplate&&((0,a.transformDomain)(e.domainTemplate),this.domainTemplate=e.domainTemplate)}return r(t,[{key:"query",value:function(){return new u.CollectionQuery(this)}},{key:"_exposeLd",value:function(t){if(t["@context"]){var e=(0,l.shallowcopy)(t);delete e.coverages,this.ld=JSON.parse(JSON.stringify(e))}}}]),t}();e.default=h},1515:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5013);Object.defineProperty(e,"DOMAIN",{enumerable:!0,get:function(){return i.DOMAIN}}),Object.defineProperty(e,"COVERAGE",{enumerable:!0,get:function(){return i.COVERAGE}}),Object.defineProperty(e,"COVERAGECOLLECTION",{enumerable:!0,get:function(){return i.COVERAGECOLLECTION}}),e.LINKRELPREFIX="http://www.iana.org/assignments/relation/"},2925:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COVJSON_PROFILE_STANDALONE=e.EXT=e.MEDIATYPE=void 0,e.getAcceptHeader=function(t){return r.COVJSON+(t?'; profile="'+o+'"':"")+"; q=1.0, "+r.JSONLD+"; q=0.1, "+r.JSON+"; q=0.1"},e.matchesMediaTypes=function(t,e){return Array.isArray(e)||(e=[e]),e.some((function(e){return 0===t.indexOf(e)}))};var i=n(8990),r=e.MEDIATYPE={COVJSON:"application/prs.coverage+json",JSONLD:"application/ld+json",JSON:"application/json",TEXT:"text/plain"},o=(e.EXT={COVJSON:".covjson"},e.COVJSON_PROFILE_STANDALONE=i.CORE_PREFIX+"standalone")},560:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.load=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arraybuffer";if(-1===["arraybuffer","text"].indexOf(o))throw new Error;var a=n.headers||{};return new Promise((function(t,s){var l=new XMLHttpRequest;l.open("GET",e),l.responseType=o;var u=(0,i.getAcceptHeader)(n.eagerload);if(l.setRequestHeader("Accept",u),a){var h=!0,c=!1,d=void 0;try{for(var f,p=Object.keys(a)[Symbol.iterator]();!(h=(f=p.next()).done);h=!0){var g=f.value;l.setRequestHeader(g,a[g])}}catch(t){c=!0,d=t}finally{try{!h&&p.return&&p.return()}finally{if(c)throw d}}}l.addEventListener("load",(function(){try{if(!(l.status>=200&&l.status<300||304===l.status))return void s(new Error('Resource "'+e+'" not found, HTTP status code: '+l.status));var n=void 0;if("arraybuffer"===o){if(!window.TextDecoder)return void s({responseType:"text"});var i=new Date;n=JSON.parse((new TextDecoder).decode(new DataView(l.response))),console.log("JSON decoding: "+(new Date-i)+"ms")}else{var a=new Date;n=JSON.parse(l.response),console.log("JSON decoding (slow path): "+(new Date-a)+"ms")}var u=r(l.getAllResponseHeaders());t({data:n,headers:u})}catch(t){s(t)}})),l.addEventListener("error",(function(){s(new Error("Network error loading resource at "+e))})),l.send()})).catch((function(n){if(n.responseType)return t(e,a,n.responseType);throw n}))};var i=n(2925);function r(t){var e={};if(!t)return e;for(var n=t.split("\r\n"),i=0;i<n.length;i++){var r=n[i],o=r.indexOf(": ");if(o>0){var a=r.substring(0,o).toLowerCase(),s=r.substring(o+2);e[a]=s}}return e}},2181:(t,e,n)=>{"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.ij=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"===(void 0===t?"undefined":i(t))?Promise.resolve().then((function(){return d(t)})):c(t,e).then((function(t){return d(t.data,t.headers)}))};var r=n(1009),o=h(r),a=h(n(9937)),s=n(8990),l=n(1515),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(560));function h(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return u.load(t,e)}function d(t,e){if(function(t){(0,s.assert)("type"in t,'"type" missing'),t.type===l.COVERAGE?((0,s.assert)("parameters"in t,'"parameters" missing'),(0,s.assert)("domain"in t,'"domain" missing'),(0,s.assert)("ranges"in t,'"ranges" missing')):t.type===l.COVERAGECOLLECTION&&(0,s.assert)(Array.isArray(t.coverages),'"coverages" must be an array')}(t),-1===[l.COVERAGE,l.COVERAGECOLLECTION,l.DOMAIN].indexOf(t.type))throw new Error("CoverageJSON document must be of Coverage, CoverageCollection, or Domain type");var n=void 0;return t.type===l.DOMAIN?((0,r.transformDomain)(t),n=t):n=t.type===l.COVERAGE?new o.default(t):new a.default(t),t.type!==l.COVERAGE&&t.type!==l.COVERAGECOLLECTION||function(t,e){if(e&&e.link){var n=t.ld,i=!0,r=!1,o=void 0;try{for(var a,s=e.link.split(",")[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,h=(u=u.trim()).split(";"),c=h[0].substr(1,h[0].length-2),d=!0,f=!1,p=void 0;try{for(var g,m=h.slice(1)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value,y=v.indexOf("rel=");if(-1!==y){var _=v.substring(y+5,v.length-1);0!==_.indexOf("http://")&&0!==_.indexOf("https://")&&(_=l.LINKRELPREFIX+_),n[_]?Array.isArray(n[_])?n[_].push(c):n[_]=[n[_],c]:n[_]=c}}}catch(t){f=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}}(n,e),n}},8990:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5013);Object.defineProperty(e,"minMax",{enumerable:!0,get:function(){return i.minMax}}),Object.defineProperty(e,"indicesOfNearest",{enumerable:!0,get:function(){return i.indicesOfNearest}}),Object.defineProperty(e,"indexOfNearest",{enumerable:!0,get:function(){return i.indexOfNearest}}),e.assert=function(t,e){if(!t)throw e=e||"Assertion failed",new Error(e)},e.shallowcopy=function(t){var e=Object.create(Object.getPrototypeOf(t));for(var n in t)e[n]=t[n];return e},e.getNamespacePrefixes=function(t){var e=t["@context"];if(e){Array.isArray(e)||(e=[e]);var n=new Map,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if("string"!=typeof l){var u=!0,h=!1,c=void 0;try{for(var d,f=Object.keys(l)[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value;"string"==typeof l[p]&&n.set(p,l[p])}}catch(t){h=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw c}}}}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}};var r="https://covjson.org/def/";e.CORE_PREFIX=r+"core#",e.DOMAINTYPES_PREFIX=r+"domainTypes#"},2634:(t,e)=>{"use strict";function n(t,e){if(0===t.length)throw new Error("Array must have at least one element");var n=-1,i=t.length;if(1===t.length||t[0]<t[1])for(;i-n>1;){var r=Math.round((n+i)/2);t[r]<=e?n=r:i=r}else for(;i-n>1;){var o=Math.round((n+i)/2);t[o]>=e?n=o:i=o}return t[n]===e&&(i=n),-1===n&&(n=i),i===t.length&&(i=n),[n,i]}Object.defineProperty(e,"__esModule",{value:!0}),e.minMax=function(t){for(var e=t.length,n=1/0,i=-1/0;e--;){var r=t[e];null==r||(r<n?n=r:r>i&&(i=r))}return n===1/0?n=i:i===-1/0&&(i=n),n!==1/0&&n!==-1/0||(n=null,i=null),[n,i]},e.indicesOfNearest=n,e.indexOfNearest=function(t,e){var i=n(t,e),r=i[0],o=i[1];return Math.abs(e-t[r])<=Math.abs(e-t[o])?r:o}},3734:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectionQuery=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.addCollectionQueryFunction=function(t){if(t.paging)throw new Error("Paged collections not supported");t.query=function(){return new a(t)}};var r=n(3915),o=n(919),a=e.CollectionQuery=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._collection=e,this._filter={},this._subset={}}return i(t,[{key:"filter",value:function(t){return s(t,this._filter),this}},{key:"subset",value:function(t){return s(t,this._subset),this}},{key:"execute",value:function(){var e=this,n=this._collection,i={type:r.COVERAGECOLLECTION,coverages:[],parameters:n.parameters,domainType:n.domainType},a=[],s=!0,l=!1,u=void 0;try{for(var h,c=function(){var t=h.value;a.push(t.loadDomain().then((function(n){if(function(t,e){var n=!0,i=!1,r=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=e[l];if(!t.axes.has(l))throw new Error('Axis "'+l+'" does not exist');var h=t.axes.get(l).values,c=h[0],d=h[h.length-1];if("number"!=typeof c&&"string"!=typeof c)throw new Error("Can only filter primitive axis values");var f=u.start,p=u.stop;if((0,o.isISODateAxis)(t,l)){var g=[(0,o.asTime)(c),(0,o.asTime)(d)];c=g[0],d=g[1];var m=[(0,o.asTime)(f),(0,o.asTime)(p)];f=m[0],p=m[1]}else if((0,o.isLongitudeAxis)(t,l)){var v=(0,o.getLongitudeWrapper)(t,l),y=[v(f),v(p)];f=y[0],p=y[1]}if(c>d){var _=[d,c];c=_[0],d=_[1]}if(d<f||p<c)return!1}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return!0}(n,e._filter))return 0!==Object.keys(e._subset).length?t.subsetByValue(e._subset).then((function(t){i.coverages.push(t)})):void i.coverages.push(t)})))},d=n.coverages[Symbol.iterator]();!(s=(h=d.next()).done);s=!0)c()}catch(t){l=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}return Promise.all(a).then((function(){return i.query=function(){return new t(i)},i}))}}]),t}();function s(t,e){var n=!0,i=!1,r=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e[s]=t[s]}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},3915:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOMAIN="Domain";var n=e.COVERAGE="Coverage",i=(e.COVERAGECOLLECTION=n+"Collection","http://covjson.org/def/core#");e.COVJSON_DATATYPE_TUPLE=i+"tuple",e.COVJSON_DATATYPE_POLYGON=i+"polygon"},2793:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.fromDomain=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,o.checkDomain)(t);var n=e.gridAxes,a=i(n=void 0===n?["x","y"]:n,2),h=a[0],c=a[1],d="domain",f="Domain",p=t.axes.has(h)&&t.axes.has(c)&&(t.axes.get(h).values.length>1||t.axes.get(c).values.length>1),g=void 0,m=void 0,v="a",y=0,_="b",x=1;p?(g=[{id:v,label:{en:"A"}},{id:_,label:{en:"B"}}],m=new Map([[v,[y]],[_,[x]]])):(g=[{id:v,label:{en:"X"}}],m=new Map([[v,[y]]]));var w=new Map;w.set(d,{key:d,observedProperty:{label:{en:f},categories:g},categoryEncoding:m});var b=new Map([].concat(s(t.axes)).map((function(t){var e=i(t,2);return[e[0],e[1].values.length]}))),S=void 0;S=p?function(t){var e=t.x,n=void 0===e?0:e,i=t.y;return(n+(void 0===i?0:i))%2?y:x}:function(){return y};var M=function(){return Promise.resolve({shape:b,dataType:"integer",get:S})},P={type:r.COVERAGE,domainType:t.domainType,parameters:w,loadDomain:function(){return Promise.resolve(t)},loadRange:M};return u(P),l(P),P},e.fromXndarray=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.parameter,o=void 0===n?{key:"p1",observedProperty:{label:{en:"Parameter 1"}}}:n,a=e.referencing,h=e.domainType,c=new Map;c.set(o.key,o),a||(a=[],t.coords.has("x")&&t.coords.has("y")&&a.push({coordinates:["x","y"],system:{type:"GeographicCRS",id:"http://www.opengis.net/def/crs/OGC/1.3/CRS84"}}),t.coords.has("t")&&a.push({coordinates:["t"],system:{type:"TemporalRS",calendar:"Gregorian"}}));var d=new Map,f=!0,p=!1,g=void 0;try{for(var m,v=t.coords[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){for(var y=i(m.value,2),_=y[0],x=y[1],w=new Array(x.size),b=0;b<x.size;b++)w[b]=x.get(b);d.set(_,{key:_,coordinates:[_],values:w})}}catch(t){p=!0,g=t}finally{try{!f&&v.return&&v.return()}finally{if(p)throw g}}var S={type:r.DOMAIN,domainType:h,referencing:a,axes:d},M=new Map([].concat(s(S.axes)).map((function(t){var e=i(t,2);return[e[0],e[1].values.length]}))),P=-1!==t.dtype.indexOf("int")?"integer":"float",T=function(){return Promise.resolve({shape:M,dataType:P,get:t.xget.bind(t)})},C={type:r.COVERAGE,domainType:h,parameters:c,loadDomain:function(){return Promise.resolve(S)},loadRange:T};return u(C),l(C),C},e.addSubsetFunctions=l,e.addLoadRangesFunction=u;var r=n(3915),o=n(1067),a=n(5666);function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function l(t){(0,o.checkCoverage)(t),t.subsetByIndex=a.subsetByIndex.bind(null,t),t.subsetByValue=a.subsetByValue.bind(null,t)}function u(t){(0,o.checkCoverage)(t),t.loadRanges=function(e){return e||(e=t.parameters.keys()),Promise.all([].concat(s(e)).map(t.loadRange)).then((function(t){return new Map(e.map((function(e,n){return[e,t[n]]})))}))}}},178:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.reproject=function t(e,n){return e.loadDomain().then((function(a){var s=(0,o.getHorizontalCRSReferenceObject)(a);if(s.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");if(s.coordinates.some(a.axes.has))throw new Error("Grid reprojection not supported yet");var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(s.coordinates,2),u=l[0],h=l[1],c=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(a.axes.values())).find((function(t){return s.coordinates.every((function(e){return-1!==t.coordinates.indexOf(e)}))})),d=c.coordinates.indexOf(u),f=c.coordinates.indexOf(h),p=(0,o.getProjection)(a),g=(0,o.getProjection)(n),m=void 0;if(c.dataType!==r.COVJSON_DATATYPE_TUPLE)throw new Error("Unsupported data type: "+c.dataType);m=c.values.map((function(t){return t.slice()}));var v=!0,y=!1,_=void 0;try{for(var x,w=m[Symbol.iterator]();!(v=(x=w.next()).done);v=!0){var b=x.value,S=b[d],M=b[f],P=p.unproject({x:S,y:M}),T=g.project(P),C=T.x,A=T.y;b[d]=C,b[f]=A}}catch(t){y=!0,_=t}finally{try{!v&&w.return&&w.return()}finally{if(y)throw _}}var L=new Map(a.axes),k=(0,i.shallowcopy)(c);delete k.bounds,k.values=m,L.set(c.key,k);var E=(0,o.getHorizontalCRSReferenceObject)(n);if(E.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");var O=a.referencing.map((function(t){return t===s?{coordinates:s.coordinates,system:E.system}:t})),N={type:r.DOMAIN,domainType:a.domainType,axes:L,referencing:O};return{type:r.COVERAGE,domainType:e.domainType,parameters:e.parameters,loadDomain:function(){return Promise.resolve(N)},loadRange:function(t){return e.loadRange(t)},loadRanges:function(t){return e.loadRanges(t)},subsetByIndex:function(i){return e.subsetByIndex(i).then((function(e){return t(e,n)}))},subsetByValue:function(i){return e.subsetByValue(i).then((function(e){return t(e,n)}))}}}))};var i=n(9049),r=n(3915),o=n(919)},5666:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.subsetByBbox=function(t,e){var n,r=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2],o=i(e,4),a=o[0],s=o[1],u=o[2],h=o[3];return t.subsetByValue((l(n={},r[0],{start:a,stop:u}),l(n,r[1],{start:s,stop:h}),n))},e.subsetByIndex=function t(e,n){return e.loadDomain().then((function(r){n=(0,o.normalizeIndexSubsetConstraints)(r,n);var a=(0,o.subsetDomainByIndex)(r,n),l=function(t){var e={dataType:t.dataType,get:function(e){var i={},r=!0,o=!1,a=void 0;try{for(var s,l=Object.keys(e)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,h=n[u],c=h.start,d=h.step;i[u]=c+e[u]*d}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return t.get(i)}};e.shape=new Map;var i=!0,o=!1,s=void 0;try{for(var l,u=r.axes.keys()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value,c=a.axes.get(h).values.length;e.shape.set(h,c)}}catch(t){o=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}return e},h={type:s.COVERAGE,domainType:e.domainType,parameters:e.parameters,loadDomain:function(){return Promise.resolve(a)},loadRange:function(t){return e.loadRange(t).then(l)},loadRanges:function(t){return e.loadRanges(t).then((function(t){return new Map([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)).map((function(t){var e=i(t,2),n=e[0],r=e[1];return[n,l(r)]})))}))}};return h.subsetByIndex=t.bind(null,h),h.subsetByValue=u.bind(null,h),h}))},e.subsetByValue=u;var r=n(919),o=n(3907),a=n(2634),s=n(3915);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){return t.loadDomain().then((function(n){var o={},s=!0,l=!1,u=void 0;try{for(var h,c=Object.keys(e)[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var d=h.value,f=e[d];if(null!=f&&n.axes.has(d)){var p=n.axes.get(d).values,g=(0,r.isISODateAxis)(n,d),m=(0,r.isLongitudeAxis)(n,d),v=m?(0,r.getLongitudeWrapper)(n,d):void 0;if("number"==typeof f||"string"==typeof f||f instanceof Date){var y=f;g?(y=(0,r.asTime)(y),p=p.map((function(t){return new Date(t).getTime()}))):m&&(y=v(y));var _;if(-1===(_=p.indexOf?p.indexOf(y):Array.prototype.indexOf.call(p,y)))throw new Error("Domain value not found: "+f);o[d]=_}else if("target"in f){var x=f.target;if(g)x=(0,r.asTime)(x),p=p.map((function(t){return new Date(t).getTime()}));else if(m)x=v(x);else if("number"!=typeof p[0]||"number"!=typeof x)throw new Error("Invalid axis or constraint value type");var w=(0,a.indexOfNearest)(p,x);o[d]=w}else{if(!("start"in f)||!("stop"in f))throw new Error("Invalid subset constraints");var b=f.start,S=f.stop;if(g){var M=[(0,r.asTime)(b),(0,r.asTime)(S)];b=M[0],S=M[1],p=p.map((function(t){return new Date(t).getTime()}))}else if(m){var P=[v(b),v(S)];b=P[0],S=P[1]}else if("number"!=typeof p[0]||"number"!=typeof b)throw new Error("Invalid axis or constraint value type");var T=(0,a.indicesOfNearest)(p,b),C=i(T,2),A=C[0],L=C[1],k=(0,a.indicesOfNearest)(p,S),E=i(k,2),O=E[0],N=E[1],I=Math.min(A,L,O,N),R=Math.max(A,L,O,N)+1;o[d]={start:I,stop:R}}}}}catch(t){l=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(l)throw u}}return t.subsetByIndex(o)}))}},706:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.maskByPolygon=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2];(0,s.checkCoverage)(t),"Polygon"===e.type&&(e={type:"MultiPolygon",coordinates:[e.coordinates]});var r=e.coordinates;r.forEach((function(t){return(0,l.ensureClockwisePolygon)(t)}));var u=(0,l.getPointInPolygonsFn)(r),h=i(n,2),c=h[0],d=h[1];return t.loadDomain().then((function(e){for(var n=e.axes.get(c).values,i=e.axes.get(d).values,r=(0,o.default)(new Uint8Array(n.length*i.length),[n.length,i.length]),s=0;s<n.length;s++)for(var l=0;l<i.length;l++){var h=u([n[s],i[l]])>=0;r.set(s,l,h)}var f=function(t,e){return r.get(t[c]||0,t[d]||0)?e.get(t):null},p=t,g=!0,m=!1,v=void 0;try{for(var y,_=t.parameters.keys()[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){var x=y.value;p=(0,a.mapRange)(p,x,f)}}catch(t){m=!0,v=t}finally{try{!g&&_.return&&_.return()}finally{if(m)throw v}}return p}))};var r,o=(r=n(2861))&&r.__esModule?r:{default:r},a=n(2849),s=n(1067),l=n(2743)},2849:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withSimpleDerivedParameter=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.withParameters=u,e.withCategories=function(t,e,n,r){if((0,o.checkCoverage)(t),n.categories.some((function(t){return!t.id})))throw new Error('At least one category object is missing the "id" property');var s=(0,a.shallowcopy)(t.parameters),h=(0,a.shallowcopy)(s.get(e));s.set(e,h),s.get(e).observedProperty=n;var c=t.parameters.get(e).categoryEncoding,d=new Map,f=n.categories,p=!0,g=!1,m=void 0;try{for(var v,y=f[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var _=v.value,x=[],w=!0,b=!1,S=void 0;try{for(var M,P=r[Symbol.iterator]();!(w=(M=P.next()).done);w=!0){var T=i(M.value,2),C=T[0];T[1]===_.id&&c.has(C)&&x.push.apply(x,l(c.get(C)))}}catch(t){b=!0,S=t}finally{try{!w&&P.return&&P.return()}finally{if(b)throw S}}x.length>0&&d.set(_.id,x)}}catch(t){g=!0,m=t}finally{try{!p&&y.return&&y.return()}finally{if(g)throw m}}return s.get(e).categoryEncoding=d,u(t,s)},e.withDomainType=function t(e,n){(0,o.checkCoverage)(e);var i=function(t){return{type:r.DOMAIN,domainType:n,axes:t.axes,referencing:t.referencing}};return{type:r.COVERAGE,domainType:n,parameters:e.parameters,loadDomain:function(){return e.loadDomain().then(i)},loadRange:function(t){return e.loadRange(t)},loadRanges:function(t){return e.loadRanges(t)},subsetByIndex:function(i){return e.subsetByIndex(i).then((function(e){return t(e,n)}))},subsetByValue:function(i){return e.subsetByValue(i).then((function(e){return t(e,n)}))}}},e.asCovJSONDomainType=function(t){return t.loadDomain().then((function(t){}))},e.renameAxes=function t(e,n){(0,o.checkCoverage)(e),n=new Map(n);var a=!0,s=!1,u=void 0;try{for(var h,c=e.axes.keys()[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var d=h.value;n.has(d)||n.set(d,d)}}catch(t){s=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}var f=function(t){var e=new Map,o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=i(l.value,2),c=h[0],d=h[1],f=t.axes.get(c),p=f.dataType,g=f.coordinates,m=f.values,v=f.bounds,y={key:d,dataType:p,coordinates:g.map((function(t){return n.has(t)?n.get(t):t})),values:m,bounds:v};e.set(d,y)}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var _=t.referencing.map((function(t){var e=t.coordinates,i=t.system;return{coordinates:e.map((function(t){return n.has(t)?n.get(t):t})),system:i}}));return{type:r.DOMAIN,domainType:t.domainType,axes:e,referencing:_}},p=[].concat(l(n)).map((function(t){var e=i(t,2);return"['"+e[0]+"']:obj['"+e[1]+"']"})).join(","),g=function(t){var e=new Function("range","return function get (obj){return range.get({"+p+"})}")(t);return{shape:new Map([].concat(l(t.shape)).map((function(t){var e=i(t,2),r=e[0],o=e[1];return[n.get(r),o]}))),dataType:t.dataType,get:e}};return{type:r.COVERAGE,domainType:e.domainType,parameters:e.parameters,loadDomain:function(){return e.loadDomain().then(f)},loadRange:function(t){return e.loadRange(t).then(g)},loadRanges:function(t){return e.loadRanges(t).then((function(t){return new Map([].concat(l(t)).map((function(t){var e=i(t,2),n=e[0],r=e[1];return[n,g(r)]})))}))},subsetByIndex:function(i){return e.subsetByIndex(i).then((function(e){return t(e,n)}))},subsetByValue:function(i){return e.subsetByValue(i).then((function(e){return t(e,n)}))}}},e.mapRange=function t(e,n,a,s){(0,o.checkCoverage)(e);var u=function(t){return{shape:t.shape,dataType:s||t.dataType,get:function(e){return a(e,t)}}};return{type:r.COVERAGE,domainType:e.domainType,parameters:e.parameters,loadDomain:function(){return e.loadDomain()},loadRange:function(t){return n===t?e.loadRange(t).then(u):e.loadRange(t)},loadRanges:function(t){return e.loadRanges(t).then((function(t){return new Map([].concat(l(t)).map((function(t){var e=i(t,2),r=e[0],o=e[1];return[r,n===r?u(o):o]})))}))},subsetByIndex:function(i){return e.subsetByIndex(i).then((function(e){return t(e,n,a,s)}))},subsetByValue:function(i){return e.subsetByValue(i).then((function(e){return t(e,n,a,s)}))}}},e.withDerivedParameter=h;var r=n(3915),o=n(1067),a=n(9049),s=n(2793);function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t,e){return{type:r.COVERAGE,domainType:t.domainType,parameters:e,loadDomain:function(){return t.loadDomain()},loadRange:function(e){return t.loadRange(e)},loadRanges:function(e){return t.loadRanges(e)},subsetByIndex:function(n){return t.subsetByIndex(n).then((function(t){return u(t,e)}))},subsetByValue:function(n){return t.subsetByValue(n).then((function(t){return u(t,e)}))}}}function h(t,e){(0,o.checkCoverage)(t);var n=e.parameter,i=e.inputParameters,a=e.dataType,u=void 0===a?"float":a,c=e.fn,d=new Map(t.parameters);d.set(n.key,n);var f={type:r.COVERAGE,domainType:t.domainType,parameters:d,loadDomain:function(){return t.loadDomain()},loadRange:function(e){return n.key===e?t.loadRanges(i).then((function(t){var e=i.map((function(e){return t.get(e)}));return{shape:e[0].shape,dataType:u,get:function(t){return c.apply(void 0,[t].concat(l(e)))}}})):t.loadRange(e)},subsetByIndex:function(n){return t.subsetByIndex(n).then((function(t){return h(t,e)}))},subsetByValue:function(n){return t.subsetByValue(n).then((function(t){return h(t,e)}))}};return(0,s.addLoadRangesFunction)(f),f}e.withSimpleDerivedParameter=function(t,e){var n=e.parameter,i=e.inputParameters,r=e.dataType,o=e.fn,a={parameter:n,inputParameters:i,dataType:r,fn:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var a=i.map((function(e,i){return n[i].get(t)}));return a.some((function(t){return null===t}))?null:o.apply(void 0,l(a))}};return h(t,a)}},2743:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ensureClockwisePolygon=function(t){for(var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=e?a.ringArea:o.ringArea,i=0;i<t.length;i++){var r=n(t[i]);(0===i&&r<0||i>0&&r>0)&&t[i].reverse()}},e.getPointInPolygonsFn=function(t){var e=t.map(r.default),n=t.length;return function(t){for(var i=0;i<n;i++)if(e[i](t)<=0)return i;return-1}};var i,r=(i=n(5557))&&i.__esModule?i:{default:i},o=n(283),a=n(2922)},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.getReferenceObject=p,e.getHorizontalCRSReferenceObject=g,e.isEllipsoidalCRS=m,e.getProjection=v,e.loadProjection=function(t){try{return v(t)}catch(t){}var e=g(t);if(!e)throw new Error("No horizontal CRS found in coverage domain");var n=e.system.id;return o.load(n).then((function(t){return _(t)}))},e.getHorizontalCRSComponents=function(t){return y(t)},e.getHorizontalCRSCoordinateIDs=y,e.reprojectCoords=function(t,e,n){return n.project(e.unproject(t))},e.getLongitudeWrapper=function(t,e){if(!x(t,e))throw new Error("'"+e+"' is not a longitude axis");var n=t.axes.get(e).values,i=n[0],r=n[n.length-1];if(i>r){var o=[r,i];i=o[0],r=o[1]}var a=(r+i)/2,s=a-180,l=a+180;return function(t){return s<=t&&t<=l?t:((t-s)%360+360)%360+s}},e.isLongitudeAxis=x,e.isISODateAxis=function(t,e){var n=t.axes.get(e).values[0];return"string"==typeof n&&!isNaN(new Date(n).getTime())},e.asTime=function(t){var e=void 0,n=!1;if("string"==typeof t?e=new Date(t).getTime():t instanceof Date?e=t.getTime():n=!0,isNaN(e)&&(n=!0),n)throw new Error("Invalid date: "+t);return e};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(4202)),a=n(3915);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l="http://www.opengis.net/def/crs/",u=l+"EPSG/0/4979",h=l+"EPSG/0/4326",c=l+"OGC/1.3/CRS84",d=[u,h,c],f=(s(i={},u,1),s(i,h,1),s(i,c,0),i);function p(t,e){return t.referencing.find((function(t){return-1!==t.coordinates.indexOf(e)}))}function g(t){return t.referencing.find((function(t){return-1!==["GeodeticCRS","GeographicCRS","GeocentricCRS","ProjectedCRS"].indexOf(t.system.type)}))}function m(t){return"GeographicCRS"===t.type||-1!==d.indexOf(t.id)}function v(t){var e=t.referencing.some((function(t){return m(t.system)}));if(e)return function(t){var e=t.referencing.find((function(t){return m(t.system)})),n=f[e.system.id];if(n>1)throw new Error;var i=e.coordinates[n],o=void 0,s=void 0;if(t.axes.has(i)){var l=i,u=t.axes.get(l).values;if((o=u[0])>(s=u[u.length-1])){var h=[s,o];o=h[0],s=h[1]}}else{var c=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.axes.values())).find((function(t){return-1!==t.coordinates.indexOf(i)})),d=c.coordinates.indexOf(i);if(o=1/0,s=-1/0,c.dataType===a.COVJSON_DATATYPE_TUPLE){var p=!0,g=!1,v=void 0;try{for(var y,_=c.values[Symbol.iterator]();!(p=(y=_.next()).done);p=!0){var x=y.value[d];o=Math.min(x,o),s=Math.max(x,s)}}catch(t){g=!0,v=t}finally{try{!p&&_.return&&_.return()}finally{if(g)throw v}}}else{if(c.dataType!==a.COVJSON_DATATYPE_POLYGON)throw new Error("Unsupported data type: "+c.dataType);var w=!0,b=!1,S=void 0;try{for(var M,P=c.values[Symbol.iterator]();!(w=(M=P.next()).done);w=!0){var T=M.value,C=!0,A=!1,L=void 0;try{for(var k,E=T[Symbol.iterator]();!(C=(k=E.next()).done);C=!0){var O=k.value,N=!0,I=!1,R=void 0;try{for(var D,j=O[Symbol.iterator]();!(N=(D=j.next()).done);N=!0){var z=D.value[d];o=Math.min(z,o),s=Math.max(z,s)}}catch(t){I=!0,R=t}finally{try{!N&&j.return&&j.return()}finally{if(I)throw R}}}}catch(t){A=!0,L=t}finally{try{!C&&E.return&&E.return()}finally{if(A)throw L}}}}catch(t){b=!0,S=t}finally{try{!w&&P.return&&P.return()}finally{if(b)throw S}}}}var V=(s+o)/2,G=V-180,$=V+180;return{project:function(t){var e,i=t.lon,o=t.lat;e=G<=i&&i<=$?i:((i-G)%360+360)%360+G;var a=r(0===n?[e,o]:[o,e],2);return{x:a[0],y:a[1]}},unproject:function(t){var e=t.x,i=t.y,o=r(0===n?[e,i]:[i,e],2);return{lon:o[0],lat:o[1]}}}}(t);var n=g(t);if(!n)throw new Error("No horizontal CRS found in coverage domain");var i=n.system.id,s=o.get(i);if(!s)throw new Error("Projection "+i+" not cached in uriproj, use loadProjection() instead");return _(s)}function y(t){return g(t).coordinates}function _(t){return{project:function(e){var n=e.lon,i=e.lat,o=t.forward([n,i]),a=r(o,2);return{x:a[0],y:a[1]}},unproject:function(e){var n=e.x,i=e.y,o=t.inverse([n,i]),a=r(o,2);return{lon:a[0],lat:a[1]}}}}function x(t,e){var n=p(t,e);if(!n)return!1;var i=n.system.id;if(-1===d.indexOf(i))return!1;var r=n.coordinates.indexOf(e);return f[i]===r}},3907:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeIndexSubsetConstraints=r,e.subsetDomainByIndex=function(t,e){e=r(t,e);var n={type:i.DOMAIN,domainType:t.domainType,axes:new Map(t.axes),referencing:t.referencing},o=!0,a=!1,s=void 0;try{for(var l,u=function(){var i=l.value,r=t.axes.get(i),o=r.values,a=r.bounds,s=e[i],u=void 0,h=void 0,c=s.start,d=s.stop,f=s.step;if(0===c&&d===o.length&&1===f)u=o,h=a;else if(1===f)u=o.subarray?o.subarray(c,d):o.slice(c,d),a&&(h={get:function(t){return a.get(c+t)}});else{var p=Math.trunc((d-c)/f)+(d-c)%f;u=new o.constructor(p);for(var g=c,m=0;g<d;g+=f,m++)u[m]=o[g];a&&(h={get:function(t){return a.get(c+t*f)}})}var v={dataType:r.dataType,coordinates:r.coordinates,values:u,bounds:h};n.axes.set(i,v)},h=Object.keys(e)[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)u()}catch(t){a=!0,s=t}finally{try{!o&&h.return&&h.return()}finally{if(a)throw s}}return n};var i=n(3915);function r(t,e){var n={};for(var i in e)if(t.axes.has(i)&&void 0!==e[i]&&null!==e[i]){if("number"==typeof e[i]){var r=e[i];n[i]={start:r,stop:r+1}}else n[i]=e[i];var o=n[i],a=o.start,s=void 0===a?0:a,l=o.stop,u=void 0===l?t.axes.get(i).values.length:l,h=o.step,c=void 0===h?1:h;if(c<=0)throw new Error("Invalid constraint for "+i+": step="+c+" must be > 0");if(s>=u||s<0)throw new Error("Invalid constraint for "+i+": stop="+u+" must be > start="+s+" and both >= 0");n[i]={start:s,stop:u,step:c}}var d=!0,f=!1,p=void 0;try{for(var g,m=t.axes.keys()[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;if(!(v in n)){var y=t.axes.get(v).values.length;n[v]={start:0,stop:y,step:1}}}}catch(t){f=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}return n}},9197:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLanguageTag=i,e.getLanguageString=function(t){var e=arguments.length<=1||void 0===arguments[1]?n:arguments[1],r=i(t,e);return t[r]};var n="en";function i(t){var e=arguments.length<=1||void 0===arguments[1]?n:arguments[1];if(e in t)return e;var i=e.split("-")[0],r=Object.keys(t).filter((function(t){return i===t.split("-")[0]}));return r.length?r[0]:Object.keys(t)[0]}},7534:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2634);Object.keys(i).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}));var r=n(3915);Object.keys(r).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var o=n(9197);Object.keys(o).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}));var a=n(2277);Object.keys(a).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var s=n(6182);Object.keys(s).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}));var l=n(4264);Object.keys(l).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}));var u=n(1067);Object.keys(u).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})}));var h=n(919);Object.keys(h).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})}));var c=n(3907);Object.keys(c).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}));var d=n(2793);Object.keys(d).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})}));var f=n(178);Object.keys(f).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})}));var p=n(5666);Object.keys(p).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})}));var g=n(2849);Object.keys(g).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})}));var m=n(3734);Object.keys(m).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})}))},5013:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7534);Object.keys(i).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}));var r=n(2743);Object.keys(r).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var o=n(706);Object.keys(o).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}))},4264:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.getCategory=function(t,e){var i=!0,r=!1,o=void 0;try{for(var a,s=function(){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(a.value,2),i=n[0];if(-1!==n[1].indexOf(e))return{v:t.observedProperty.categories.filter((function(t){return t.id===i}))[0]}},l=t.categoryEncoding[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=s();if("object"===(void 0===u?"undefined":n(u)))return u.v}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}},6182:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function i(t,e){var i=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.shape));i.sort((function(t,e){return n(t,2)[1]-n(e,2)[1]}));var r="var obj = {}",o="",a=!0,s=!1,l=void 0;try{for(var u,h=i[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var c=n(u.value,2),d=c[0];r+="\n      for (var i"+d+"=0; i"+d+" < "+c[1]+"; ++i"+d+") {\n        obj['"+d+"'] = i"+d+"\n    ",o+="}"}}catch(t){s=!0,l=t}finally{try{!a&&h.return&&h.return()}finally{if(s)throw l}}r+="\n    fn(get(obj))\n  ",new Function("return function iterRange (get, fn) { "+r+" "+o+" }")()(t.get,e)}e.minMaxOfRange=function(t){var e=1/0,n=-1/0;return i(t,(function(t){null!==t&&(t<e&&(e=t),t>n&&(n=t))})),e===1/0?[void 0,void 0]:[e,n]},e.reduceRange=function(t,e,n){var r=n;return i(t,(function(t){r=e(r,t)})),r},e.iterateRange=i},2277:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringifyUnit=function(t,e){if(!t)return"";if(t.symbol){var n=t.symbol.value||t.symbol;return"http://www.opengis.net/def/uom/UCUM/"===t.symbol.type&&("Cel"===n?n="°C":"1"===n&&(n="")),n}return(0,i.getLanguageString)(t.label,e)};var i=n(9197)},9049:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shallowcopy=function(t){var e=void 0;if(t instanceof Map)e=new Map(t);else for(var n in e=Object.create(Object.getPrototypeOf(t)),t)e[n]=t[n];return e}},1067:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCoverage=r,e.checkCoverage=function(t){if(!r(t))throw new Error("must be a Coverage")},e.isDomain=o,e.checkDomain=function(t){if(!o(t))throw new Error("must be a Domain")};var i=n(3915);function r(t){return t.type===i.COVERAGE}function o(t){return t.type===i.DOMAIN}},5078:(t,e,n)=>{var i,r;!function(){var o={version:"3.5.17"},a=[].slice,s=function(t){return a.call(t)},l=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function h(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var c=this.Element.prototype,d=c.setAttribute,f=c.setAttributeNS,p=this.CSSStyleDeclaration.prototype,g=p.setProperty;c.setAttribute=function(t,e){d.call(this,t,e+"")},c.setAttributeNS=function(t,e,n){f.call(this,t,e,n+"")},p.setProperty=function(t,e,n){g.call(this,t,e+"",n)}}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return null===t?NaN:+t}function y(t){return!isNaN(t)}function _(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}o.ascending=m,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},o.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},o.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},o.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)y(n=+t[o])&&(i+=n);else for(;++o<r;)y(n=+e.call(t,t[o],o))&&(i+=n);return i},o.mean=function(t,e){var n,i=0,r=t.length,o=-1,a=r;if(1===arguments.length)for(;++o<r;)y(n=v(t[o]))?i+=n:--a;else for(;++o<r;)y(n=v(e.call(t,t[o],o)))?i+=n:--a;if(a)return i/a},o.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},o.median=function(t,e){var n,i=[],r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)y(n=v(t[a]))&&i.push(n);else for(;++a<r;)y(n=v(e.call(t,t[a],a)))&&i.push(n);if(i.length)return o.quantile(i.sort(m),.5)},o.variance=function(t,e){var n,i,r=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<r;)y(n=v(t[s]))&&(a+=(i=n-o)*(n-(o+=i/++l)));else for(;++s<r;)y(n=v(e.call(t,t[s],s)))&&(a+=(i=n-o)*(n-(o+=i/++l)));if(l>1)return a/(l-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var x=_(m);function w(t){return t.length}o.bisectLeft=x.left,o.bisect=o.bisectRight=x.right,o.bisector=function(t){return _(1===t.length?function(e,n){return m(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},o.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},o.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},o.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=o.min(t,w),i=new Array(n);++e<n;)for(var r,a=-1,s=i[e]=new Array(r);++a<r;)s[a]=t[a][e];return i},o.zip=function(){return o.transpose(arguments)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n};var b=Math.abs;function S(t){for(var e=1;t*e%1;)e*=10;return e}function M(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function P(){this._=Object.create(null)}function T(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function C(t){return"\0"===(t+="")[0]?t.slice(1):t}function A(t){return T(t)in this._}function L(t){return(t=T(t))in this._&&delete this._[t]}function k(){var t=[];for(var e in this._)t.push(C(e));return t}function E(){var t=0;for(var e in this._)++t;return t}function O(){for(var t in this._)return!1;return!0}function N(){this._=Object.create(null)}function I(t){return t}function R(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function D(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=j.length;n<i;++n){var r=j[n]+e;if(r in t)return r}}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],o=S(b(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},o.map=function(t,e){var n=new P;if(t instanceof P)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n},M(P,{has:A,get:function(t){return this._[T(t)]},set:function(t,e){return this._[T(t)]=e},remove:L,keys:k,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:C(e),value:this._[e]});return t},size:E,empty:O,forEach:function(t){for(var e in this._)t.call(this,C(e),this._[e])}}),o.nest=function(){var t,e,n={},i=[],r=[];function a(r,o,s){if(s>=i.length)return e?e.call(n,o):t?o.sort(t):o;for(var l,u,h,c,d=-1,f=o.length,p=i[s++],g=new P;++d<f;)(c=g.get(l=p(u=o[d])))?c.push(u):g.set(l,[u]);return r?(u=r(),h=function(t,e){u.set(t,a(r,e,s))}):(u={},h=function(t,e){u[t]=a(r,e,s)}),g.forEach(h),u}function s(t,e){if(e>=i.length)return t;var n=[],o=r[e++];return t.forEach((function(t,i){n.push({key:t,values:s(i,e)})})),o?n.sort((function(t,e){return o(t.key,e.key)})):n}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return s(a(o.map,t,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return r[i.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new N;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},M(N,{has:A,add:function(t){return this._[T(t+="")]=!0,t},remove:L,values:k,size:E,empty:O,forEach:function(t){for(var e in this._)t.call(this,C(e))}}),o.behavior={},o.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=R(t,e,e[n]);return t};var j=["webkit","ms","moz","Moz","o","O"];function z(){}function V(){}function G(t){var e=[],n=new P;function i(){for(var n,i=e,r=-1,o=i.length;++r<o;)(n=i[r].on)&&n.apply(this,arguments);return t}return i.on=function(i,r){var o,a=n.get(i);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(i)),r&&e.push(n.set(i,{on:r})),t)},i}function $(){o.event.preventDefault()}function F(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function B(t){for(var e=new V,n=0,i=arguments.length;++n<i;)e[arguments[n]]=G(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=o.event;r.target=t,o.event=r,e[r.type].apply(n,i)}finally{o.event=a}}},e}o.dispatch=function(){for(var t=new V,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=G(t);return t},V.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},o.event=null,o.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function W(t){return U(t,Y),t}var q=function(t,e){return e.querySelector(t)},X=function(t,e){return e.querySelectorAll(t)},Z=function(t,e){var n=t.matches||t[D(t,"matchesSelector")];return Z=function(t,e){return n.call(t,e)},Z(t,e)};"function"==typeof Sizzle&&(q=function(t,e){return Sizzle(t,e)[0]||null},X=Sizzle,Z=Sizzle.matchesSelector),o.selection=function(){return o.select(l.documentElement)};var Y=o.selection.prototype=[];function K(t){return"function"==typeof t?t:function(){return q(t,this)}}function J(t){return"function"==typeof t?t:function(){return X(t,this)}}Y.select=function(t){var e,n,i,r,o=[];t=K(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return W(o)},Y.selectAll=function(t){var e,n,i=[];t=J(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],l=-1,u=a.length;++l<u;)(n=a[l])&&(i.push(e=s(t.call(n,n.__data__,l,r))),e.parentNode=n);return W(i)};var Q="http://www.w3.org/1999/xhtml",tt={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function et(t,e){return t=o.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function nt(t){return t.trim().replace(/\s+/g," ")}function it(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function rt(t){return(t+"").trim().split(/^|\s+/)}function ot(t,e){var n=(t=rt(t).map(at)).length;return"function"==typeof e?function(){for(var i=-1,r=e.apply(this,arguments);++i<n;)t[i](this,r)}:function(){for(var i=-1;++i<n;)t[i](this,e)}}function at(t){var e=it(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",nt(r+" "+t))):n.setAttribute("class",nt(r.replace(e," ")))}}function st(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}:function(){this.style.setProperty(t,e,n)}}function lt(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ut(t){return"function"==typeof t?t:(t=o.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q&&e.documentElement.namespaceURI===Q?e.createElement(t):e.createElementNS(n,t)}}function ht(){var t=this.parentNode;t&&t.removeChild(this)}function ct(t){return{__data__:t}}function dt(t){return function(){return Z(this,t)}}function ft(t){return arguments.length||(t=m),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function pt(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],a=0,s=o.length;a<s;a++)(r=o[a])&&e(r,a,n);return t}function gt(t){return U(t,mt),t}o.ns={prefix:tt,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),tt.hasOwnProperty(n)?{space:tt[n],local:t}:t}},Y.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=o.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},Y.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=rt(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!it(t[r]).test(e))return!1;return!0}for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},Y.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(st(n,t[n],e));return this}if(i<2){var r=this.node();return h(r).getComputedStyle(r,null).getPropertyValue(t)}n=""}return this.each(st(t,e,n))},Y.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(lt(e,t[e]));return this}return this.each(lt(t,e))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(t){return t=ut(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},Y.insert=function(t,e){return t=ut(t),e=K(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},Y.remove=function(){return this.each(ht)},Y.data=function(t,e){var n,i,r=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++r<o;)(i=n[r])&&(t[r]=i.__data__);return t}function a(t,n){var i,r,o,a=t.length,h=n.length,c=Math.min(a,h),d=new Array(h),f=new Array(h),p=new Array(a);if(e){var g,m=new P,v=new Array(a);for(i=-1;++i<a;)(r=t[i])&&(m.has(g=e.call(r,r.__data__,i))?p[i]=r:m.set(g,r),v[i]=g);for(i=-1;++i<h;)(r=m.get(g=e.call(n,o=n[i],i)))?!0!==r&&(d[i]=r,r.__data__=o):f[i]=ct(o),m.set(g,!0);for(i=-1;++i<a;)i in v&&!0!==m.get(v[i])&&(p[i]=t[i])}else{for(i=-1;++i<c;)r=t[i],o=n[i],r?(r.__data__=o,d[i]=r):f[i]=ct(o);for(;i<h;++i)f[i]=ct(n[i]);for(;i<a;++i)p[i]=t[i]}f.update=d,f.parentNode=d.parentNode=p.parentNode=t.parentNode,s.push(f),l.push(d),u.push(p)}var s=gt([]),l=W([]),u=W([]);if("function"==typeof t)for(;++r<o;)a(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<o;)a(n=this[r],t);return l.enter=function(){return s},l.exit=function(){return u},l},Y.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Y.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=dt(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return W(r)},Y.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Y.sort=function(t){t=ft.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Y.each=function(t){return pt(this,(function(e,n,i){t.call(e,e.__data__,n,i)}))},Y.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},Y.size=function(){var t=0;return pt(this,(function(){++t})),t};var mt=[];function vt(t){var e,n;return function(i,r,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<l;);return a}}function yt(t,e,n){var i="__on"+t,r=t.indexOf("."),a=xt;r>0&&(t=t.slice(0,r));var l=_t.get(t);function u(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}return l&&(t=l,a=wt),r?e?function(){var r=a(e,s(arguments));u.call(this),this.addEventListener(t,this[i]=r,r.$=n),r._=e}:u:e?z:function(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}}o.selection.enter=gt,o.selection.enter.prototype=mt,mt.append=Y.append,mt.empty=Y.empty,mt.node=Y.node,mt.call=Y.call,mt.size=Y.size,mt.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;++u<h;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return W(a)},mt.insert=function(t,e){return arguments.length<2&&(e=vt(this)),Y.insert.call(this,t,e)},o.select=function(t){var e;return"string"==typeof t?(e=[q(t,l)]).parentNode=l.documentElement:(e=[t]).parentNode=u(t),W([e])},o.selectAll=function(t){var e;return"string"==typeof t?(e=s(X(t,l))).parentNode=l.documentElement:(e=s(t)).parentNode=null,W([e])},Y.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(yt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(yt(t,e,n))};var _t=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xt(t,e){return function(n){var i=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=i}}}function wt(t,e){var n=xt(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}l&&_t.forEach((function(t){"on"+t in l&&_t.remove(t)}));var bt,St=0;function Mt(t){var e=".dragsuppress-"+ ++St,n="click"+e,i=o.select(h(t)).on("touchmove"+e,$).on("dragstart"+e,$).on("selectstart"+e,$);if(null==bt&&(bt=!("onselectstart"in t)&&D(t.style,"userSelect")),bt){var r=u(t).style,a=r[bt];r[bt]="none"}return function(t){if(i.on(e,null),bt&&(r[bt]=a),t){var o=function(){i.on(n,null)};i.on(n,(function(){$(),o()}),!0),setTimeout(o,0)}}}o.mouse=function(t){return Tt(t,F())};var Pt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Tt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(Pt<0){var r=h(t);if(r.scrollX||r.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Pt=!(a.f||a.e),n.remove()}}return Pt?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Ct(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=F().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return Tt(t,i)},o.behavior.drag=function(){var t=B(r,"drag","dragstart","dragend"),e=null,n=a(z,o.mouse,h,"mousemove","mouseup"),i=a(Ct,o.touch,I,"touchmove","touchend");function r(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function a(n,i,r,a,s){return function(){var l,u=this,h=o.event.target.correspondingElement||o.event.target,c=u.parentNode,d=t.of(u,arguments),f=0,p=n(),g=".drag"+(null==p?"":"-"+p),m=o.select(r(h)).on(a+g,_).on(s+g,x),v=Mt(h),y=i(c,p);function _(){var t,e,n=i(c,p);n&&(t=n[0]-y[0],e=n[1]-y[1],f|=t|e,y=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function x(){i(c,p)&&(m.on(a+g,null).on(s+g,null),v(f),d({type:"dragend"}))}l=e?[(l=e.apply(u,arguments)).x-y[0],l.y-y[1]]:[0,0],d({type:"dragstart"})}}return r.origin=function(t){return arguments.length?(e=t,r):e},o.rebind(r,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=F().touches),e?s(e).map((function(e){var n=Tt(t,e);return n.identifier=e.identifier,n})):[]};var At=1e-6,Lt=At*At,kt=Math.PI,Et=2*kt,Ot=Et-At,Nt=kt/2,It=kt/180,Rt=180/kt;function Dt(t){return t>0?1:t<0?-1:0}function jt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function zt(t){return t>1?0:t<-1?kt:Math.acos(t)}function Vt(t){return t>1?Nt:t<-1?-Nt:Math.asin(t)}function Gt(t){return((t=Math.exp(t))+1/t)/2}function $t(t){return(t=Math.sin(t/2))*t}var Ft=Math.SQRT2;o.interpolateZoom=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],h=s-r,c=l-o,d=h*h+c*c;if(d<Lt)i=Math.log(u/a)/Ft,n=function(t){return[r+t*h,o+t*c,a*Math.exp(Ft*t*i)]};else{var f=Math.sqrt(d),p=(u*u-a*a+4*d)/(2*a*2*f),g=(u*u-a*a-4*d)/(2*u*2*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/Ft,n=function(t){var e,n=t*i,s=Gt(m),l=a/(2*f)*(s*(e=Ft*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[r+l*h,o+l*c,a*s/Gt(Ft*n+m)]}}return n.duration=1e3*i,n},o.behavior.zoom=function(){var t,e,n,i,r,a,s,u,c,d={x:0,y:0,k:1},f=[960,500],p=Ut,g=250,m=0,v="mousedown.zoom",y="mousemove.zoom",_="mouseup.zoom",x="touchstart.zoom",w=B(b,"zoomstart","zoom","zoomend");function b(t){t.on(v,E).on(Ht+".zoom",N).on("dblclick.zoom",I).on(x,O)}function S(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function M(t){d.k=Math.max(p[0],Math.min(p[1],t))}function P(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function T(t,n,i,r){t.__chart__={x:d.x,y:d.y,k:d.k},M(Math.pow(2,r)),P(e=n,i),t=o.select(t),g>0&&(t=t.transition().duration(g)),t.call(b.event)}function C(){s&&s.domain(a.range().map((function(t){return(t-d.x)/d.k})).map(a.invert)),c&&c.domain(u.range().map((function(t){return(t-d.y)/d.k})).map(u.invert))}function A(t){m++||t({type:"zoomstart"})}function L(t){C(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function k(t){--m||(t({type:"zoomend"}),e=null)}function E(){var t=this,e=w.of(t,arguments),n=0,i=o.select(h(t)).on(y,s).on(_,l),r=S(o.mouse(t)),a=Mt(t);function s(){n=1,P(o.mouse(t),r),L(e)}function l(){i.on(y,null).on(_,null),a(n),k(e)}Rs.call(t),A(e)}function O(){var t,e=this,n=w.of(e,arguments),i={},a=0,s=".zoom-"+o.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,h=[],c=o.select(e),f=Mt(e);function p(){var n=o.touches(e);return t=d.k,n.forEach((function(t){t.identifier in i&&(i[t.identifier]=S(t))})),n}function g(){var t=o.event.target;o.select(t).on(l,m).on(u,y),h.push(t);for(var n=o.event.changedTouches,s=0,c=n.length;s<c;++s)i[n[s].identifier]=null;var f=p(),g=Date.now();if(1===f.length){if(g-r<500){var v=f[0];T(e,v,i[v.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),$()}r=g}else if(f.length>1){v=f[0];var _=f[1],x=v[0]-_[0],w=v[1]-_[1];a=x*x+w*w}}function m(){var s,l,u,h,c=o.touches(e);Rs.call(e);for(var d=0,f=c.length;d<f;++d,h=null)if(u=c[d],h=i[u.identifier]){if(l)break;s=u,l=h}if(h){var p=(p=u[0]-s[0])*p+(p=u[1]-s[1])*p,g=a&&Math.sqrt(p/a);s=[(s[0]+u[0])/2,(s[1]+u[1])/2],l=[(l[0]+h[0])/2,(l[1]+h[1])/2],M(g*t)}r=null,P(s,l),L(n)}function y(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,r=t.length;e<r;++e)delete i[t[e].identifier];for(var a in i)return void p()}o.selectAll(h).on(s,null),c.on(v,E).on(x,O),f(),k(n)}g(),A(n),c.on(v,null).on(x,g)}function N(){var r=w.of(this,arguments);i?clearTimeout(i):(Rs.call(this),t=S(e=n||o.mouse(this)),A(r)),i=setTimeout((function(){i=null,k(r)}),50),$(),M(Math.pow(2,.002*Bt())*d.k),P(e,t),L(r)}function I(){var t=o.mouse(this),e=Math.log(d.k)/Math.LN2;T(this,t,S(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Ht||(Ht="onwheel"in l?(Bt=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(Bt=function(){return o.event.wheelDelta},"mousewheel"):(Bt=function(){return-o.event.detail},"MozMousePixelScroll")),b.event=function(t){t.each((function(){var t=w.of(this,arguments),n=d;zs?o.select(this).transition().each("start.zoom",(function(){d=this.__chart__||{x:0,y:0,k:1},A(t)})).tween("zoom:zoom",(function(){var i=f[0],r=f[1],a=e?e[0]:i/2,s=e?e[1]:r/2,l=o.interpolateZoom([(a-d.x)/d.k,(s-d.y)/d.k,i/d.k],[(a-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(e){var n=l(e),r=i/n[2];this.__chart__=d={x:a-n[0]*r,y:s-n[1]*r,k:r},L(t)}})).each("interrupt.zoom",(function(){k(t)})).each("end.zoom",(function(){k(t)})):(this.__chart__=d,A(t),L(t),k(t))}))},b.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},C(),b):[d.x,d.y]},b.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},M(+t),C(),b):d.k},b.scaleExtent=function(t){return arguments.length?(p=null==t?Ut:[+t[0],+t[1]],b):p},b.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],b):n},b.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],b):f},b.duration=function(t){return arguments.length?(g=+t,b):g},b.x=function(t){return arguments.length?(s=t,a=t.copy(),d={x:0,y:0,k:1},b):s},b.y=function(t){return arguments.length?(c=t,u=t.copy(),d={x:0,y:0,k:1},b):c},o.rebind(b,w,"on")};var Bt,Ht,Ut=[0,1/0];function Wt(){}function qt(t,e,n){return this instanceof qt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof qt?new qt(t.h,t.s,t.l):pe(""+t,ge,qt):new qt(t,e,n)}o.color=Wt,Wt.prototype.toString=function(){return this.rgb()+""},o.hsl=qt;var Xt=qt.prototype=new Wt;function Zt(t,e,n){var i,r;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(r-i)*t/60:t<180?r:t<240?i+(r-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,i=2*(n=n<0?0:n>1?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new ue(o(t+120),o(t),o(t-120))}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.c,t.l):oe(t instanceof Qt?t.l:(t=me((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Yt(t,e,n)}Xt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,this.l/t)},Xt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,t*this.l)},Xt.rgb=function(){return Zt(this.h,this.s,this.l)},o.hcl=Yt;var Kt=Yt.prototype=new Wt;function Jt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Qt(n,Math.cos(t*=It)*e,Math.sin(t)*e)}function Qt(t,e,n){return this instanceof Qt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Qt?new Qt(t.l,t.a,t.b):t instanceof Yt?Jt(t.h,t.c,t.l):me((t=ue(t)).r,t.g,t.b):new Qt(t,e,n)}Kt.brighter=function(t){return new Yt(this.h,this.c,Math.min(100,this.l+te*(arguments.length?t:1)))},Kt.darker=function(t){return new Yt(this.h,this.c,Math.max(0,this.l-te*(arguments.length?t:1)))},Kt.rgb=function(){return Jt(this.h,this.c,this.l).rgb()},o.lab=Qt;var te=18,ee=.95047,ne=1.08883,ie=Qt.prototype=new Wt;function re(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return new ue(le(3.2404542*(r=ae(r)*ee)-1.5371385*(i=1*ae(i))-.4985314*(o=ae(o)*ne)),le(-.969266*r+1.8760108*i+.041556*o),le(.0556434*r-.2040259*i+1.0572252*o))}function oe(t,e,n){return t>0?new Yt(Math.atan2(n,e)*Rt,Math.sqrt(e*e+n*n),t):new Yt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ue(t,e,n){return this instanceof ue?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ue?new ue(t.r,t.g,t.b):pe(""+t,ue,Zt):new ue(t,e,n)}function he(t){return new ue(t>>16,t>>8&255,255&t)}function ce(t){return he(t)+""}ie.brighter=function(t){return new Qt(Math.min(100,this.l+te*(arguments.length?t:1)),this.a,this.b)},ie.darker=function(t){return new Qt(Math.max(0,this.l-te*(arguments.length?t:1)),this.a,this.b)},ie.rgb=function(){return re(this.l,this.a,this.b)},o.rgb=ue;var de=ue.prototype=new Wt;function fe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function pe(t,e,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ye(r[0]),ye(r[1]),ye(r[2]))}return(o=_e.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function ge(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=l<.5?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&l<1?0:i),new qt(i,r,l)}function me(t,e,n){var i=se((.4124564*(t=ve(t))+.3575761*(e=ve(e))+.1804375*(n=ve(n)))/ee),r=se((.2126729*t+.7151522*e+.072175*n)/1);return Qt(116*r-16,500*(i-r),200*(r-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ve(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ye(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}de.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&e<r&&(e=r),n&&n<r&&(n=r),i&&i<r&&(i=r),new ue(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ue(r,r,r)},de.darker=function(t){return new ue((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},de.hsl=function(){return ge(this.r,this.g,this.b)},de.toString=function(){return"#"+fe(this.r)+fe(this.g)+fe(this.b)};var _e=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xe(t){return"function"==typeof t?t:function(){return t}}function we(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),be(e,n,t,i)}}function be(t,e,n,i){var r={},a=o.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,h=null;function c(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=n.call(r,u)}catch(t){return void a.error.call(r,t)}a.load.call(r,t)}else a.error.call(r,u)}return this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(t)&&(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=c:u.onreadystatechange=function(){u.readyState>3&&c()},u.onprogress=function(t){var e=o.event;o.event=t;try{a.progress.call(r,u)}finally{o.event=e}},r.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",r)},r.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",r):e},r.responseType=function(t){return arguments.length?(h=t,r):h},r.response=function(t){return n=t,r},["get","post"].forEach((function(t){r[t]=function(){return r.send.apply(r,[t].concat(s(arguments)))}})),r.send=function(n,i,o){if(2===arguments.length&&"function"==typeof i&&(o=i,i=null),u.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),u.setRequestHeader)for(var s in l)u.setRequestHeader(s,l[s]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=h&&(u.responseType=h),null!=o&&r.on("error",o).on("load",(function(t){o(null,t)})),a.beforesend.call(r,u),u.send(null==i?null:i),r},r.abort=function(){return u.abort(),r},o.rebind(r,a,"on"),null==i?r:r.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(i))}_e.forEach((function(t,e){_e.set(t,he(e))})),o.functor=xe,o.xhr=we(I),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);function r(t,n,i){arguments.length<3&&(i=n,n=null);var r=be(t,e,null==n?o:a(n),i);return r.row=function(t){return arguments.length?r.response(null==(n=t)?o:a(t)):n},r}function o(t){return r.parse(t.responseText)}function a(t){return function(e){return r.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return r.parse=function(t,e){var n;return r.parseRows(t,(function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}");n=e?function(t,n){return e(r(t),n)}:r}))},r.parseRows=function(t,e){var n,r,o={},a={},s=[],l=t.length,u=0,h=0;function c(){if(u>=l)return a;if(r)return r=!1,o;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return u=n+2,13===(s=t.charCodeAt(n+1))?(r=!0,10===t.charCodeAt(n+2)&&++u):10===s&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u<l;){var s,h=1;if(10===(s=t.charCodeAt(u++)))r=!0;else if(13===s)r=!0,10===t.charCodeAt(u)&&(++u,++h);else if(s!==i)continue;return t.slice(e,u-h)}return t.slice(e)}for(;(n=c())!==a;){for(var d=[];n!==o&&n!==a;)d.push(n),n=c();e&&null==(d=e(d,h++))||s.push(d)}return s},r.format=function(e){if(Array.isArray(e[0]))return r.formatRows(e);var n=new N,i=[];return e.forEach((function(t){for(var e in t)n.has(e)||i.push(n.add(e))})),[i.map(l).join(t)].concat(e.map((function(e){return i.map((function(t){return l(e[t])})).join(t)}))).join("\n")},r.formatRows=function(t){return t.map(s).join("\n")},r},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var Se,Me,Pe,Te,Ce=this[D(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ae(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r=n+e,o={c:t,t:r,n:null};return Me?Me.n=o:Se=o,Me=o,Pe||(Te=clearTimeout(Te),Pe=1,Ce(Le)),o}function Le(){var t=ke(),e=Ee()-t;e>24?(isFinite(e)&&(clearTimeout(Te),Te=setTimeout(Le,e)),Pe=0):(Pe=1,Ce(Le))}function ke(){for(var t=Date.now(),e=Se;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ee(){for(var t,e=Se,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Se=e.n;return Me=t,n}function Oe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(){Ae.apply(this,arguments)},o.timer.flush=function(){ke(),Ee()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ne=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(t,e){var n=Math.pow(10,3*b(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}));function Ie(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,a=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:I;return function(t){var n=Re.exec(t),i=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",h=n[5],c=+n[6],d=n[7],f=n[8],p=n[9],g=1,m="",v="",y=!1,_=!0;switch(f&&(f=+f.substring(1)),(h||"0"===i&&"="===s)&&(h=i="0",s="="),p){case"n":d=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":_=!1;case"d":y=!0,f=0;break;case"s":g=-1,p="r"}"$"===u&&(m=r[0],v=r[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=De.get(p)||je;var x=h&&d;return function(t){var n=v;if(y&&t%1)return"";var r=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var u=o.formatPrefix(t,f);t=u.scale(t),n=u.symbol+v}else t*=g;var w,b,S=(t=p(t,f)).lastIndexOf(".");if(S<0){var M=_?t.lastIndexOf("e"):-1;M<0?(w=t,b=""):(w=t.substring(0,M),b=t.substring(M))}else w=t.substring(0,S),b=e+t.substring(S+1);!h&&d&&(w=a(w,1/0));var P=m.length+w.length+b.length+(x?0:r.length),T=P<c?new Array(P=c-P+1).join(i):"";return x&&(w=a(T+w,T.length?c-b.length:1/0)),r+=m,t=w+b,("<"===s?r+t+T:">"===s?T+r+t:"^"===s?T.substring(0,P>>=1)+r+t+T.substring(P):r+(x?t:T+t))+n}}}o.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=o.round(t,Oe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ne[8+n/3]};var Re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,De=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,Oe(t,e))).toFixed(Math.max(0,Math.min(20,Oe(t*(1+1e-15),e))))}});function je(t){return t+""}var ze=o.time={},Ve=Date;function Ge(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ge.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){$e.setUTCDate.apply(this._,arguments)},setDay:function(){$e.setUTCDay.apply(this._,arguments)},setFullYear:function(){$e.setUTCFullYear.apply(this._,arguments)},setHours:function(){$e.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){$e.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){$e.setUTCMinutes.apply(this._,arguments)},setMonth:function(){$e.setUTCMonth.apply(this._,arguments)},setSeconds:function(){$e.setUTCSeconds.apply(this._,arguments)},setTime:function(){$e.setTime.apply(this._,arguments)}};var $e=Date.prototype;function Fe(t,e,n){function i(e){var n=t(e),i=o(n,1);return e-n<i-e?n:i}function r(n){return e(n=t(new Ve(n-1)),1),n}function o(t,n){return e(t=new Ve(+t),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;a<i;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<i;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var s=t.utc=Be(t);return s.floor=s,s.round=Be(i),s.ceil=Be(r),s.offset=Be(o),s.range=function(t,e,n){try{Ve=Ge;var i=new Ge;return i._=t,a(i,e,n)}finally{Ve=Date}},t}function Be(t){return function(e,n){try{Ve=Ge;var i=new Ge;return i._=e,t(i,n)._}finally{Ve=Date}}}function He(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function h(t){var e=t.length;function n(n){for(var i,r,o,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=Ue[i=t.charAt(++s)])&&(i=t.charAt(++s)),(o=w[i])&&(i=o(n,null==r?"e"===i?" ":"0":r)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&Ve!==Ge,r=new(i?Ge:Ve);return"j"in n?r.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),r.setFullYear(n.y,0,1),r.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(r.getDay()+5)%7:n.w+7*n.U-(r.getDay()+6)%7)):r.setFullYear(n.y,n.m,n.d),r.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?r._:r},n.toString=function(){return t},n}function c(t,e,n,i){for(var r,o,a,s=0,l=e.length,u=n.length;s<l;){if(i>=u)return-1;if(37===(r=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=b[a in Ue?e.charAt(s++):a])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}h.utc=function(t){var e=h(t);function n(t){try{var n=new(Ve=Ge);return n._=t,e(n)}finally{Ve=Date}}return n.parse=function(t){try{Ve=Ge;var n=e.parse(t);return n&&n._}finally{Ve=Date}},n.toString=e.toString,n},h.multi=h.utc.multi=fn;var d=o.map(),f=Ze(a),p=Ye(a),g=Ze(s),m=Ye(s),v=Ze(l),y=Ye(l),_=Ze(u),x=Ye(u);r.forEach((function(t,e){d.set(t.toLowerCase(),e)}));var w={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:h(e),d:function(t,e){return Xe(t.getDate(),e,2)},e:function(t,e){return Xe(t.getDate(),e,2)},H:function(t,e){return Xe(t.getHours(),e,2)},I:function(t,e){return Xe(t.getHours()%12||12,e,2)},j:function(t,e){return Xe(1+ze.dayOfYear(t),e,3)},L:function(t,e){return Xe(t.getMilliseconds(),e,3)},m:function(t,e){return Xe(t.getMonth()+1,e,2)},M:function(t,e){return Xe(t.getMinutes(),e,2)},p:function(t){return r[+(t.getHours()>=12)]},S:function(t,e){return Xe(t.getSeconds(),e,2)},U:function(t,e){return Xe(ze.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Xe(ze.mondayOfYear(t),e,2)},x:h(n),X:h(i),y:function(t,e){return Xe(t.getFullYear()%100,e,2)},Y:function(t,e){return Xe(t.getFullYear()%1e4,e,4)},Z:cn,"%":function(){return"%"}},b={a:function(t,e,n){g.lastIndex=0;var i=g.exec(e.slice(n));return i?(t.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){_.lastIndex=0;var i=_.exec(e.slice(n));return i?(t.m=x.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return c(t,w.c.toString(),e,n)},d:on,e:on,H:sn,I:sn,j:an,L:hn,m:rn,M:ln,p:function(t,e,n){var i=d.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:un,U:Je,w:Ke,W:Qe,x:function(t,e,n){return c(t,w.x.toString(),e,n)},X:function(t,e,n){return c(t,w.X.toString(),e,n)},y:en,Y:tn,Z:nn,"%":dn};return h}ze.year=Fe((function(t){return(t=ze.day(t)).setMonth(0,1),t}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t){return t.getFullYear()})),ze.years=ze.year.range,ze.years.utc=ze.year.utc.range,ze.day=Fe((function(t){var e=new Ve(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t){return t.getDate()-1})),ze.days=ze.day.range,ze.days.utc=ze.day.utc.range,ze.dayOfYear=function(t){var e=ze.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,e){e=7-e;var n=ze[t]=Fe((function(t){return(t=ze.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t}),(function(t,e){t.setDate(t.getDate()+7*Math.floor(e))}),(function(t){var n=ze.year(t).getDay();return Math.floor((ze.dayOfYear(t)+(n+e)%7)/7)-(n!==e)}));ze[t+"s"]=n.range,ze[t+"s"].utc=n.utc.range,ze[t+"OfYear"]=function(t){var n=ze.year(t).getDay();return Math.floor((ze.dayOfYear(t)+(n+e)%7)/7)}})),ze.week=ze.sunday,ze.weeks=ze.sunday.range,ze.weeks.utc=ze.sunday.utc.range,ze.weekOfYear=ze.sundayOfYear;var Ue={"-":"",_:" ",0:"0"},We=/^\s*\d+/,qe=/^%/;function Xe(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Ze(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function Ye(t){for(var e=new P,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ke(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Je(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Qe(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function tn(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function en(t,e,n){We.lastIndex=0;var i,r=We.exec(e.slice(n,n+2));return r?(t.y=(i=+r[0])+(i>68?1900:2e3),n+r[0].length):-1}function nn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function rn(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function on(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function an(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function sn(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ln(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function un(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function hn(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function cn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=b(e)/60|0,r=b(e)%60;return n+Xe(i,"0",2)+Xe(r,"0",2)}function dn(t,e,n){qe.lastIndex=0;var i=qe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function fn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}o.locale=function(t){return{numberFormat:Ie(t),timeFormat:He(t)}};var pn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gn(){}o.format=pn.numberFormat,o.geo={},gn.prototype={s:0,t:0,add:function(t){vn(t,this.t,mn),vn(mn.s,this.s,this),this.s?this.t+=mn.t:this.s=mn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mn=new gn;function vn(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function yn(t,e){t&&xn.hasOwnProperty(t.type)&&xn[t.type](t,e)}o.geo.stream=function(t,e){t&&_n.hasOwnProperty(t.type)?_n[t.type](t,e):yn(t,e)};var _n={Feature:function(t,e){yn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)yn(n[i].geometry,e)}},xn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){wn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)wn(n[i],e,0)},Polygon:function(t,e){bn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)bn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)yn(n[i],e)}};function wn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function bn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)wn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return Sn=0,o.geo.stream(t,Dn),Sn};var Sn,Mn,Pn,Tn,Cn,An,Ln,kn,En,On,Nn,In,Rn=new gn,Dn={sphere:function(){Sn+=4*kt},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Rn.reset(),Dn.lineStart=jn},polygonEnd:function(){var t=2*Rn;Sn+=t<0?4*kt+t:t,Dn.lineStart=Dn.lineEnd=Dn.point=z}};function jn(){var t,e,n,i,r;function o(t,e){e=e*It/2+kt/4;var o=(t*=It)-n,a=o>=0?1:-1,s=a*o,l=Math.cos(e),u=Math.sin(e),h=r*u,c=i*l+h*Math.cos(s),d=h*a*Math.sin(s);Rn.add(Math.atan2(d,c)),n=t,i=l,r=u}Dn.point=function(a,s){Dn.point=o,n=(t=a)*It,i=Math.cos(s=(e=s)*It/2+kt/4),r=Math.sin(s)},Dn.lineEnd=function(){o(t,e)}}function zn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Vn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $n(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Hn(t){return[Math.atan2(t[1],t[0]),Vt(t[2])]}function Un(t,e){return b(t[0]-e[0])<At&&b(t[1]-e[1])<At}o.geo.bounds=function(){var t,e,n,i,r,a,s,l,u,h,c,d={point:f,lineStart:g,lineEnd:m,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=_,u=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),d.point=f,d.lineStart=g,d.lineEnd=m,Rn<0?(t=-(n=180),e=-(i=90)):u>At?i=90:u<-At&&(e=-90),c[0]=t,c[1]=n}};function f(r,o){h.push(c=[t=r,n=r]),o<e&&(e=o),o>i&&(i=o)}function p(o,a){var s=zn([o*It,a*It]);if(l){var u=Gn(l,s),h=Gn([u[1],-u[0],0],u);Bn(h),h=Hn(h);var c=o-r,d=c>0?1:-1,p=h[0]*Rt*d,g=b(c)>180;if(g^(d*r<p&&p<d*o))(m=h[1]*Rt)>i&&(i=m);else if(g^(d*r<(p=(p+360)%360-180)&&p<d*o)){var m;(m=-h[1]*Rt)<e&&(e=m)}else a<e&&(e=a),a>i&&(i=a);g?o<r?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>r?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o)}else f(o,a);l=s,r=o}function g(){d.point=p}function m(){c[0]=t,c[1]=n,d.point=f,l=null}function v(t,e){if(l){var n=t-r;u+=b(n)>180?n+(n>0?360:-360):n}else a=t,s=e;Dn.point(t,e),p(t,e)}function y(){Dn.lineStart()}function _(){v(a,s),Dn.lineEnd(),b(u)>At&&(t=-(n=180)),c[0]=t,c[1]=n,l=null}function x(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function S(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(r){if(i=n=-(t=e=1/0),h=[],o.geo.stream(r,d),u=h.length){h.sort(w);for(var a=1,s=[g=h[0]];a<u;++a)S((f=h[a])[0],g)||S(f[1],g)?(x(g[0],f[1])>x(g[0],g[1])&&(g[1]=f[1]),x(f[0],g[1])>x(g[0],g[1])&&(g[0]=f[0])):s.push(g=f);for(var l,u,f,p=-1/0,g=(a=0,s[u=s.length-1]);a<=u;g=f,++a)f=s[a],(l=x(g[1],f[0]))>p&&(p=l,t=f[0],n=g[1])}return h=c=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,i]]}}(),o.geo.centroid=function(t){Mn=Pn=Tn=Cn=An=Ln=kn=En=On=Nn=In=0,o.geo.stream(t,Wn);var e=On,n=Nn,i=In,r=e*e+n*n+i*i;return r<Lt&&(e=Ln,n=kn,i=En,Pn<At&&(e=Tn,n=Cn,i=An),(r=e*e+n*n+i*i)<Lt)?[NaN,NaN]:[Math.atan2(n,e)*Rt,Vt(i/Math.sqrt(r))*Rt]};var Wn={sphere:z,point:qn,lineStart:Zn,lineEnd:Yn,polygonStart:function(){Wn.lineStart=Kn},polygonEnd:function(){Wn.lineStart=Zn}};function qn(t,e){t*=It;var n=Math.cos(e*=It);Xn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Xn(t,e,n){++Mn,Tn+=(t-Tn)/Mn,Cn+=(e-Cn)/Mn,An+=(n-An)/Mn}function Zn(){var t,e,n;function i(i,r){i*=It;var o=Math.cos(r*=It),a=o*Math.cos(i),s=o*Math.sin(i),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=e*l-n*s)*u+(u=n*a-t*l)*u+(u=t*s-e*a)*u),t*a+e*s+n*l);Pn+=u,Ln+=u*(t+(t=a)),kn+=u*(e+(e=s)),En+=u*(n+(n=l)),Xn(t,e,n)}Wn.point=function(r,o){r*=It;var a=Math.cos(o*=It);t=a*Math.cos(r),e=a*Math.sin(r),n=Math.sin(o),Wn.point=i,Xn(t,e,n)}}function Yn(){Wn.point=qn}function Kn(){var t,e,n,i,r;function o(t,e){t*=It;var o=Math.cos(e*=It),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(e),u=i*l-r*s,h=r*a-n*l,c=n*s-i*a,d=Math.sqrt(u*u+h*h+c*c),f=n*a+i*s+r*l,p=d&&-zt(f)/d,g=Math.atan2(d,f);On+=p*u,Nn+=p*h,In+=p*c,Pn+=g,Ln+=g*(n+(n=a)),kn+=g*(i+(i=s)),En+=g*(r+(r=l)),Xn(n,i,r)}Wn.point=function(a,s){t=a,e=s,Wn.point=o,a*=It;var l=Math.cos(s*=It);n=l*Math.cos(a),i=l*Math.sin(a),r=Math.sin(s),Xn(n,i,r)},Wn.lineEnd=function(){o(t,e),Wn.lineEnd=Yn,Wn.point=qn}}function Jn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Qn(){return!0}function ti(t,e,n,i,r){var o=[],a=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Un(n,i)){r.lineStart();for(var s=0;s<e;++s)r.point((n=t[s])[0],n[1]);r.lineEnd()}else{var l=new ni(n,t,null,!0),u=new ni(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new ni(i,t,null,!1),u=new ni(i,null,l,!0),l.o=u,o.push(l),a.push(u)}}})),a.sort(e),ei(o),ei(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var h,c,d=o[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;h=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=h.length;s<u;++s)r.point((c=h[s])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(s=(h=f.p.z).length-1;s>=0;--s)r.point((c=h[s])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}h=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function ei(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function ni(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ii(t,e,n,i){return function(r,a){var s,l=e(a),u=r.invert(i[0],i[1]),h={point:c,lineStart:f,lineEnd:p,polygonStart:function(){h.point=x,h.lineStart=w,h.lineEnd=b,s=[],g=[]},polygonEnd:function(){h.point=c,h.lineStart=f,h.lineEnd=p,s=o.merge(s);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Rn.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],h=u.length;if(h)for(var c=u[0],d=c[0],f=c[1]/2+kt/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===h&&(m=0);var v=(t=u[m])[0],y=t[1]/2+kt/4,_=Math.sin(y),x=Math.cos(y),w=v-d,b=w>=0?1:-1,S=b*w,M=S>kt,P=p*_;if(Rn.add(Math.atan2(P*b*Math.sin(S),g*x+P*Math.cos(S))),o+=M?w+b*Et:w,M^d>=n^v>=n){var T=Gn(zn(c),zn(t));Bn(T);var C=Gn(r,T);Bn(C);var A=(M^w>=0?-1:1)*Vt(C[2]);(i>A||i===A&&(T[0]||T[1]))&&(a+=M^w>=0?1:-1)}if(!m++)break;d=v,p=_,g=x,c=t}}return(o<-At||o<At&&Rn<-At)^1&a}(u,g);s.length?(_||(a.polygonStart(),_=!0),ti(s,ai,t,n,a)):t&&(_||(a.polygonStart(),_=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function c(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function d(t,e){var n=r(t,e);l.point(n[0],n[1])}function f(){h.point=d,l.lineStart()}function p(){h.point=c,l.lineEnd()}var g,m,v=oi(),y=e(v),_=!1;function x(t,e){m.push([t,e]);var n=r(t,e);y.point(n[0],n[1])}function w(){y.lineStart(),m=[]}function b(){x(m[0][0],m[0][1]),y.lineEnd();var t,e=y.clean(),n=v.buffer(),i=n.length;if(m.pop(),g.push(m),m=null,i)if(1&e){var r,o=-1;if((i=(t=n[0]).length-1)>0){for(_||(a.polygonStart(),_=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ri))}return h}}function ri(t){return t.length>1}function oi(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:z,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ai(t,e){return((t=t.x)[0]<0?t[1]-Nt-At:Nt-t[1])-((e=e.x)[0]<0?e[1]-Nt-At:Nt-e[1])}var si=ii(Qn,(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?kt:-kt,l=b(o-n);b(l-kt)<At?(t.point(n,i=(i+a)/2>0?Nt:-Nt),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=kt&&(b(n-r)<At&&(n-=r*At),b(o-s)<At&&(o-=s*At),i=function(t,e,n,i){var r,o,a=Math.sin(t-n);return b(a)>At?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Nt,i.point(-kt,r),i.point(0,r),i.point(kt,r),i.point(kt,0),i.point(kt,-r),i.point(0,-r),i.point(-kt,-r),i.point(-kt,0),i.point(-kt,r);else if(b(t[0]-e[0])>At){var o=t[0]<e[0]?kt:-kt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-kt,-kt/2]);function li(t){var e=Math.cos(t),n=e>0,i=b(e)>At;return ii(r,(function(t){var e,s,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,d){var f,p=[c,d],g=r(c,d),m=n?g?0:a(c,d):g?a(c+(c<0?kt:-kt),d):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(f=o(e,p),(Un(e,f)||Un(p,f))&&(p[0]+=At,p[1]+=At,g=r(p[0],p[1]))),g!==l)h=0,g?(t.lineStart(),f=o(p,e),t.point(f[0],f[1])):(f=o(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&n^g){var v;m&s||!(v=o(p,e,!0))||(h=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Un(e,p)||t.point(p[0],p[1]),e=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(u&&l)<<1}}}),Ui(t,6*It),n?[0,-t]:[-kt,t-kt]);function r(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,i){var r=[1,0,0],o=Gn(zn(t),zn(n)),a=Vn(o,o),s=o[0],l=a-s*s;if(!l)return!i&&t;var u=e*a/l,h=-e*s/l,c=Gn(r,o),d=Fn(r,u);$n(d,Fn(o,h));var f=c,p=Vn(d,f),g=Vn(f,f),m=p*p-g*(Vn(d,d)-1);if(!(m<0)){var v=Math.sqrt(m),y=Fn(f,(-p-v)/g);if($n(y,d),y=Hn(y),!i)return y;var _,x=t[0],w=n[0],S=t[1],M=n[1];w<x&&(_=x,x=w,w=_);var P=w-x,T=b(P-kt)<At;if(!T&&M<S&&(_=S,S=M,M=_),T||P<At?T?S+M>0^y[1]<(b(y[0]-x)<At?S:M):S<=y[1]&&y[1]<=M:P>kt^(x<=y[0]&&y[0]<=w)){var C=Fn(f,(-p+v)/g);return $n(C,d),[y,Hn(C)]}}}function a(e,i){var r=n?t:kt-t,o=0;return e<-r?o|=1:e>r&&(o|=2),i<-r?o|=4:i>r&&(o|=8),o}}function ui(t,e,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,u=a.y,h=0,c=1,d=s.x-l,f=s.y-u;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>h&&(h=o)}if(o=n-l,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<c&&(c=o)}if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}return h>0&&(r.a={x:l+h*d,y:u+h*f}),c<1&&(r.b={x:l+c*d,y:u+c*f}),r}}}}}}var hi=1e9;function ci(t,e,n,i){return function(l){var u,h,c,d,f,p,g,m,v,y,_,x=l,w=oi(),b=ui(t,e,n,i),S={point:T,lineStart:function(){S.point=C,h&&h.push(c=[]),y=!0,v=!1,g=m=NaN},lineEnd:function(){u&&(C(d,f),p&&v&&w.rejoin(),u.push(w.buffer())),S.point=T,v&&l.lineEnd()},polygonStart:function(){l=w,u=[],h=[],_=!0},polygonEnd:function(){l=x,u=o.merge(u);var e=function(t){for(var e=0,n=h.length,i=t[1],r=0;r<n;++r)for(var o,a=1,s=h[r],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=i?o[1]>i&&jt(u,o,t)>0&&++e:o[1]<=i&&jt(u,o,t)<0&&--e,u=o;return 0!==e}([t,i]),n=_&&e,r=u.length;(n||r)&&(l.polygonStart(),n&&(l.lineStart(),M(null,null,1,l),l.lineEnd()),r&&ti(u,a,e,M,l),l.polygonEnd()),u=h=c=null}};function M(o,a,l,u){var h=0,c=0;if(null==o||(h=r(o,l))!==(c=r(a,l))||s(o,a)<0^l>0)do{u.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+l+4)%4)!==c);else u.point(a[0],a[1])}function P(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function T(t,e){P(t,e)&&l.point(t,e)}function C(t,e){var n=P(t=Math.max(-1e9,Math.min(hi,t)),e=Math.max(-1e9,Math.min(hi,e)));if(h&&c.push([t,e]),y)d=t,f=e,p=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var i={a:{x:g,y:m},b:{x:t,y:e}};b(i)?(v||(l.lineStart(),l.point(i.a.x,i.a.y)),l.point(i.b.x,i.b.y),n||l.lineEnd(),_=!1):n&&(l.lineStart(),l.point(t,e),_=!1)}g=t,m=e,v=n}return S};function r(i,r){return b(i[0]-t)<At?r>0?0:3:b(i[0]-n)<At?r>0?2:1:b(i[1]-e)<At?r>0?1:0:r>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function di(t){var e=0,n=kt/3,i=ji(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*kt/180,n=t[1]*kt/180):[e/kt*180,n/kt*180]},r}function fi(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,r=1+n*(2*i-n),o=Math.sqrt(r)/i;function a(t,e){var n=Math.sqrt(r-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,Vt((r-(t*t+n*n)*i*i)/(2*i))]},a}o.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),(r=o(t)).valid=!0,r},extent:function(s){return arguments.length?(o=ci(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return di(fi)}).raw=fi,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,i,r=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function u(r){var o=r[0],a=r[1];return t=null,e(o,a),t||(n(o,a),t)||i(o,a),t}return u.invert=function(t){var e=r.scale(),n=r.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&i>=-.425&&i<-.214?a:o>=.166&&o<.234&&i>=-.214&&i<-.115?s:r).invert(t)},u.stream=function(t){var e=r.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},u.precision=function(t){return arguments.length?(r.precision(t),a.precision(t),s.precision(t),u):r.precision()},u.scale=function(t){return arguments.length?(r.scale(t),a.scale(.35*t),s.scale(t),u.translate(r.translate())):r.scale()},u.translate=function(t){if(!arguments.length)return r.translate();var o=r.scale(),h=+t[0],c=+t[1];return e=r.translate(t).clipExtent([[h-.455*o,c-.238*o],[h+.455*o,c+.238*o]]).stream(l).point,n=a.translate([h-.307*o,c+.201*o]).clipExtent([[h-.425*o+At,c+.12*o+At],[h-.214*o-At,c+.234*o-At]]).stream(l).point,i=s.translate([h-.205*o,c+.212*o]).clipExtent([[h-.214*o+At,c+.166*o+At],[h-.115*o-At,c+.234*o-At]]).stream(l).point,u},u.scale(1070)};var pi,gi,mi,vi,yi,_i,xi={point:z,lineStart:z,lineEnd:z,polygonStart:function(){gi=0,xi.lineStart=wi},polygonEnd:function(){xi.lineStart=xi.lineEnd=xi.point=z,pi+=b(gi/2)}};function wi(){var t,e,n,i;function r(t,e){gi+=i*t-n*e,n=t,i=e}xi.point=function(o,a){xi.point=r,t=n=o,e=i=a},xi.lineEnd=function(){r(t,e)}}var bi={point:function(t,e){t<mi&&(mi=t),t>yi&&(yi=t),e<vi&&(vi=e),e>_i&&(_i=e)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function Si(){var t=Mi(4.5),e=[],n={point:i,lineStart:function(){n.point=r},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=i},pointRadius:function(e){return t=Mi(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function i(n,i){e.push("M",n,",",i,t)}function r(t,i){e.push("M",t,",",i),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=i}function s(){e.push("Z")}return n}function Mi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Pi,Ti={point:Ci,lineStart:Ai,lineEnd:Li,polygonStart:function(){Ti.lineStart=ki},polygonEnd:function(){Ti.point=Ci,Ti.lineStart=Ai,Ti.lineEnd=Li}};function Ci(t,e){Tn+=t,Cn+=e,++An}function Ai(){var t,e;function n(n,i){var r=n-t,o=i-e,a=Math.sqrt(r*r+o*o);Ln+=a*(t+n)/2,kn+=a*(e+i)/2,En+=a,Ci(t=n,e=i)}Ti.point=function(i,r){Ti.point=n,Ci(t=i,e=r)}}function Li(){Ti.point=Ci}function ki(){var t,e,n,i;function r(t,e){var r=t-n,o=e-i,a=Math.sqrt(r*r+o*o);Ln+=a*(n+t)/2,kn+=a*(i+e)/2,En+=a,On+=(a=i*t-n*e)*(n+t),Nn+=a*(i+e),In+=3*a,Ci(n=t,i=e)}Ti.point=function(o,a){Ti.point=r,Ci(t=n=o,e=i=a)},Ti.lineEnd=function(){r(t,e)}}function Ei(t){var e=4.5,n={point:i,lineStart:function(){n.point=r},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=i},pointRadius:function(t){return e=t,n},result:z};function i(n,i){t.moveTo(n+e,i),t.arc(n,i,e,0,Et)}function r(e,i){t.moveTo(e,i),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=i}function s(){t.closePath()}return n}function Oi(t){var e=.5,n=Math.cos(30*It),i=16;function r(t){return(i?a:o)(t)}function o(e){return Ri(e,(function(n,i){n=t(n,i),e.point(n[0],n[1])}))}function a(e){var n,r,o,a,l,u,h,c,d,f,p,g,m={point:v,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=w},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){c=NaN,m.point=_,e.lineStart()}function _(n,r){var o=zn([n,r]),a=t(n,r);s(c,d,h,f,p,g,c=a[0],d=a[1],h=n,f=o[0],p=o[1],g=o[2],i,e),e.point(c,d)}function x(){m.point=v,e.lineEnd()}function w(){y(),m.point=b,m.lineEnd=S}function b(t,e){_(n=t,e),r=c,o=d,a=f,l=p,u=g,m.point=_}function S(){s(c,d,h,f,p,g,r,o,n,a,l,u,i,e),m.lineEnd=x,x()}return m}function s(i,r,o,a,l,u,h,c,d,f,p,g,m,v){var y=h-i,_=c-r,x=y*y+_*_;if(x>4*e&&m--){var w=a+f,S=l+p,M=u+g,P=Math.sqrt(w*w+S*S+M*M),T=Math.asin(M/=P),C=b(b(M)-1)<At||b(o-d)<At?(o+d)/2:Math.atan2(S,w),A=t(C,T),L=A[0],k=A[1],E=L-i,O=k-r,N=_*E-y*O;(N*N/x>e||b((y*E+_*O)/x-.5)>.3||a*f+l*p+u*g<n)&&(s(i,r,o,a,l,u,L,k,C,w/=P,S/=P,M,m,v),v.point(L,k),s(L,k,C,w,S,M,h,c,d,f,p,g,m,v))}}return r.precision=function(t){return arguments.length?(i=(e=t*t)>0&&16,r):Math.sqrt(e)},r}function Ni(t){var e=Oi((function(e,n){return t([e*Rt,n*Rt])}));return function(t){return zi(e(t))}}function Ii(t){this.stream=t}function Ri(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Di(t){return ji((function(){return t}))()}function ji(t){var e,n,i,r,a,s,l=Oi((function(t,n){return[(t=e(t,n))[0]*u+r,a-t[1]*u]})),u=150,h=480,c=250,d=0,f=0,p=0,g=0,m=0,v=si,y=I,_=null,x=null;function w(t){return[(t=i(t[0]*It,t[1]*It))[0]*u+r,a-t[1]*u]}function b(t){return(t=i.invert((t[0]-r)/u,(a-t[1])/u))&&[t[0]*Rt,t[1]*Rt]}function S(){i=Jn(n=$i(p,g,m),e);var t=e(d,f);return r=h-t[0]*u,a=c+t[1]*u,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=zi(v(n,l(y(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(v=null==t?(_=t,si):li((_=+t)*It),M()):_},w.clipExtent=function(t){return arguments.length?(x=t,y=t?ci(t[0][0],t[0][1],t[1][0],t[1][1]):I,M()):x},w.scale=function(t){return arguments.length?(u=+t,S()):u},w.translate=function(t){return arguments.length?(h=+t[0],c=+t[1],S()):[h,c]},w.center=function(t){return arguments.length?(d=t[0]%360*It,f=t[1]%360*It,S()):[d*Rt,f*Rt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*It,g=t[1]%360*It,m=t.length>2?t[2]%360*It:0,S()):[p*Rt,g*Rt,m*Rt]},o.rebind(w,l,"precision"),function(){return e=t.apply(this,arguments),w.invert=e.invert&&b,S()}}function zi(t){return Ri(t,(function(e,n){t.point(e*It,n*It)}))}function Vi(t,e){return[t,e]}function Gi(t,e){return[t>kt?t-Et:t<-kt?t+Et:t,e]}function $i(t,e,n){return t?e||n?Jn(Bi(t),Hi(e,n)):Bi(t):e||n?Hi(e,n):Gi}function Fi(t){return function(e,n){return[(e+=t)>kt?e-Et:e<-kt?e+Et:e,n]}}function Bi(t){var e=Fi(t);return e.invert=Fi(-t),e}function Hi(t,e){var n=Math.cos(t),i=Math.sin(t),r=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),h=u*n+s*i;return[Math.atan2(l*r-h*o,s*n-u*i),Vt(h*r+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),h=u*r-l*o;return[Math.atan2(l*r+u*o,s*n+h*i),Vt(h*n-s*i)]},a}function Ui(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var l=a*e;null!=r?(r=Wi(n,r),o=Wi(n,o),(a>0?r<o:r>o)&&(r+=a*Et)):(r=t+a*Et,o=t-.5*l);for(var u,h=r;a>0?h>o:h<o;h-=l)s.point((u=Hn([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],u[1])}}function Wi(t,e){var n=zn(e);n[0]-=t,Bn(n);var i=zt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-At)%(2*Math.PI)}function qi(t,e,n){var i=o.range(t,e-At,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Xi(t,e,n){var i=o.range(t,e-At,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Zi(t){return t.source}function Yi(t){return t.target}o.geo.path=function(){var t,e,n,i,r,a=4.5;function s(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),r&&r.valid||(r=n(i)),o.geo.stream(t,r)),i.result()}function l(){return r=null,s}return s.area=function(t){return pi=0,o.geo.stream(t,n(xi)),pi},s.centroid=function(t){return Tn=Cn=An=Ln=kn=En=On=Nn=In=0,o.geo.stream(t,n(Ti)),In?[On/In,Nn/In]:En?[Ln/En,kn/En]:An?[Tn/An,Cn/An]:[NaN,NaN]},s.bounds=function(t){return yi=_i=-(mi=vi=1/0),o.geo.stream(t,n(bi)),[[mi,vi],[yi,_i]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||Ni(e):I,l()):t},s.context=function(t){return arguments.length?(i=null==(e=t)?new Si:new Ei(t),"function"!=typeof a&&i.pointRadius(a),l()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new Ii(e);for(var i in t)n[i]=t[i];return n}}},Ii.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Di,o.geo.projectionMutator=ji,(o.geo.equirectangular=function(){return Di(Vi)}).raw=Vi.invert=Vi,o.geo.rotation=function(t){function e(e){return(e=t(e[0]*It,e[1]*It))[0]*=Rt,e[1]*=Rt,e}return t=$i(t[0]%360*It,t[1]*It,t.length>2?t[2]*It:0),e.invert=function(e){return(e=t.invert(e[0]*It,e[1]*It))[0]*=Rt,e[1]*=Rt,e},e},Gi.invert=Vi,o.geo.circle=function(){var t,e,n=[0,0],i=6;function r(){var t="function"==typeof n?n.apply(this,arguments):n,i=$i(-t[0]*It,-t[1]*It,0).invert,r=[];return e(null,null,1,{point:function(t,e){r.push(t=i(t,e)),t[0]*=Rt,t[1]*=Rt}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(t){return arguments.length?(n=t,r):n},r.angle=function(n){return arguments.length?(e=Ui((t=+n)*It,i*It),r):t},r.precision=function(n){return arguments.length?(e=Ui(t*It,(i=+n)*It),r):i},r.angle(90)},o.geo.distance=function(t,e){var n,i=(e[0]-t[0])*It,r=t[1]*It,o=e[1]*It,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((n=c*a)*n+(n=u*h-l*c*s)*n),l*h+u*c*s)},o.geo.graticule=function(){var t,e,n,i,r,a,s,l,u,h,c,d,f=10,p=f,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:_()}}function _(){return o.range(Math.ceil(i/g)*g,n,g).map(c).concat(o.range(Math.ceil(l/m)*m,s,m).map(d)).concat(o.range(Math.ceil(e/f)*f,t,f).filter((function(t){return b(t%g)>At})).map(u)).concat(o.range(Math.ceil(a/p)*p,r,p).filter((function(t){return b(t%m)>At})).map(h))}return y.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(d(s).slice(1),c(n).reverse().slice(1),d(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),y.precision(v)):[[i,l],[n,s]]},y.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),a>r&&(n=a,a=r,r=n),y.precision(v)):[[e,a],[t,r]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],y):[f,p]},y.precision=function(o){return arguments.length?(v=+o,u=qi(a,r,90),h=Xi(e,t,v),c=qi(l,s,90),d=Xi(i,n,v),y):v},y.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},o.geo.greatArc=function(){var t,e,n=Zi,i=Yi;function r(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||i.apply(this,arguments)]}}return r.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||i.apply(this,arguments))},r.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,r):n},r.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,r):i},r.precision=function(){return arguments.length?r:0},r},o.geo.interpolate=function(t,e){return n=t[0]*It,i=t[1]*It,r=e[0]*It,o=e[1]*It,a=Math.cos(i),s=Math.sin(i),l=Math.cos(o),u=Math.sin(o),h=a*Math.cos(n),c=a*Math.sin(n),d=l*Math.cos(r),f=l*Math.sin(r),p=2*Math.asin(Math.sqrt($t(o-i)+a*l*$t(r-n))),g=1/Math.sin(p),(m=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,i=n*h+e*d,r=n*c+e*f,o=n*s+e*u;return[Math.atan2(r,i)*Rt,Math.atan2(o,Math.sqrt(i*i+r*r))*Rt]}:function(){return[n*Rt,i*Rt]}).distance=p,m;var n,i,r,o,a,s,l,u,h,c,d,f,p,g,m},o.geo.length=function(t){return Pi=0,o.geo.stream(t,Ki),Pi};var Ki={sphere:z,point:z,lineStart:function(){var t,e,n;function i(i,r){var o=Math.sin(r*=It),a=Math.cos(r),s=b((i*=It)-t),l=Math.cos(s);Pi+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*l)*s),e*o+n*a*l),t=i,e=o,n=a}Ki.point=function(r,o){t=r*It,e=Math.sin(o*=It),n=Math.cos(o),Ki.point=i},Ki.lineEnd=function(){Ki.point=Ki.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Ji(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}var Qi=Ji((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(o.geo.azimuthalEqualArea=function(){return Di(Qi)}).raw=Qi;var tr=Ji((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),I);function er(t,e){var n=Math.cos(t),i=function(t){return Math.tan(kt/4+t/2)},r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),o=n*Math.pow(i(t),r)/r;if(!r)return rr;function a(t,e){o>0?e<-Nt+At&&(e=-Nt+At):e>Nt-At&&(e=Nt-At);var n=o/Math.pow(i(e),r);return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}return a.invert=function(t,e){var n=o-e,i=Dt(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(o/i,1/r))-Nt]},a}function nr(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;if(b(i)<At)return Vi;function o(t,e){var n=r-e;return[n*Math.sin(i*t),r-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,r-Dt(i)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Di(tr)}).raw=tr,(o.geo.conicConformal=function(){return di(er)}).raw=er,(o.geo.conicEquidistant=function(){return di(nr)}).raw=nr;var ir=Ji((function(t){return 1/t}),Math.atan);function rr(t,e){return[t,Math.log(Math.tan(kt/4+e/2))]}function or(t){var e,n=Di(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=kt*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return Di(ir)}).raw=ir,rr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Nt]},(o.geo.mercator=function(){return or(rr)}).raw=rr;var ar=Ji((function(){return 1}),Math.asin);(o.geo.orthographic=function(){return Di(ar)}).raw=ar;var sr=Ji((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));function lr(t,e){return[Math.log(Math.tan(kt/4+e/2)),-t]}function ur(t){return t[0]}function hr(t){return t[1]}function cr(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;i>1&&jt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function dr(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return Di(sr)}).raw=sr,lr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Nt]},(o.geo.transverseMercator=function(){var t=or(lr),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=lr,o.geom={},o.geom.hull=function(t){var e=ur,n=hr;if(arguments.length)return i(t);function i(t){if(t.length<3)return[];var i,r=xe(e),o=xe(n),a=t.length,s=[],l=[];for(i=0;i<a;i++)s.push([+r.call(this,t[i],i),+o.call(this,t[i],i),i]);for(s.sort(dr),i=0;i<a;i++)l.push([s[i][0],-s[i][1]]);var u=cr(s),h=cr(l),c=h[0]===u[0],d=h[h.length-1]===u[u.length-1],f=[];for(i=u.length-1;i>=0;--i)f.push(t[s[u[i]][2]]);for(i=+c;i<h.length-d;++i)f.push(t[s[h[i]][2]]);return f}return i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i},o.geom.polygon=function(t){return U(t,fr),t};var fr=o.geom.polygon.prototype=[];function pr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function gr(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,d=(s*(l-u)-c*(r-o))/(c*a-s*h);return[r+d*a,l+d*h]}function mr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}fr.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},fr.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},fr.clip=function(t){for(var e,n,i,r,o,a,s=mr(t),l=-1,u=this.length-mr(this),h=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)pr(a=e[n],h,r)?(pr(o,h,r)||t.push(gr(o,a,h,r)),t.push(a)):pr(o,h,r)&&t.push(gr(o,a,h,r)),o=a;s&&t.push(t[0]),h=r}return t};var vr,yr,_r,xr,wr,br=[],Sr=[];function Mr(){Fr(this),this.edge=this.site=this.circle=null}function Pr(t){var e=br.pop()||new Mr;return e.site=t,e}function Tr(t){Rr(t),_r.remove(t),br.push(t),Fr(t)}function Cr(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Tr(t);for(var l=o;l.circle&&b(n-l.circle.x)<At&&b(i-l.circle.cy)<At;)o=l.P,s.unshift(l),Tr(l),l=o;s.unshift(l),Rr(l);for(var u=a;u.circle&&b(n-u.circle.x)<At&&b(i-u.circle.cy)<At;)a=u.N,s.push(u),Tr(u),u=a;s.push(u),Rr(u);var h,c=s.length;for(h=1;h<c;++h)u=s[h],l=s[h-1],Vr(u.edge,l.site,u.site,r);l=s[0],(u=s[c-1]).edge=zr(l.site,u.site,null,r),Ir(l),Ir(u)}function Ar(t){for(var e,n,i,r,o=t.x,a=t.y,s=_r._;s;)if((i=Lr(s,a)-o)>At)s=s.L;else{if(!((r=o-kr(s,a))>At)){i>-At?(e=s.P,n=s):r>-At?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Pr(t);if(_r.insert(e,l),e||n){if(e===n)return Rr(e),n=Pr(e.site),_r.insert(l,n),l.edge=n.edge=zr(e.site,l.site),Ir(e),void Ir(n);if(n){Rr(e),Rr(n);var u=e.site,h=u.x,c=u.y,d=t.x-h,f=t.y-c,p=n.site,g=p.x-h,m=p.y-c,v=2*(d*m-f*g),y=d*d+f*f,_=g*g+m*m,x={x:(m*y-f*_)/v+h,y:(d*_-g*y)/v+c};Vr(n.edge,u,p,x),l.edge=zr(u,t,null,x),n.edge=zr(t,p,null,x),Ir(e),Ir(n)}else l.edge=zr(e.site,l.site)}}function Lr(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var h=s-i,c=1/o-1/u,d=h/u;return c?(-d+Math.sqrt(d*d-2*c*(h*h/(-2*u)-l+u/2+r-o/2)))/c+i:(i+s)/2}function kr(t,e){var n=t.N;if(n)return Lr(n,e);var i=t.site;return i.y===e?i.x:1/0}function Er(t){this.site=t,this.edges=[]}function Or(t,e){return e.angle-t.angle}function Nr(){Fr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ir(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,u=i.y-s,h=o.x-a,c=2*(l*(m=o.y-s)-u*h);if(!(c>=-Lt)){var d=l*l+u*u,f=h*h+m*m,p=(m*d-u*f)/c,g=(l*f-h*d)/c,m=g+s,v=Sr.pop()||new Nr;v.arc=t,v.site=r,v.x=p+a,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var y=null,_=wr._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}wr.insert(y,v),y||(xr=v)}}}}function Rr(t){var e=t.circle;e&&(e.P||(xr=e.N),wr.remove(e),Sr.push(e),Fr(e),t.circle=null)}function Dr(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],h=t.l,c=t.r,d=h.x,f=h.y,p=c.x,g=c.y,m=(d+p)/2,v=(f+g)/2;if(g===f){if(m<a||m>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(r=v-(i=(d-p)/(g-f))*m,i<-1||i>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(f<g){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function jr(t,e){this.l=t,this.r=e,this.a=this.b=null}function zr(t,e,n,i){var r=new jr(t,e);return vr.push(r),n&&Vr(r,t,e,n),i&&Vr(r,e,t,i),yr[t.i].edges.push(new Gr(r,t,e)),yr[e.i].edges.push(new Gr(r,e,t)),r}function Vr(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Gr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function $r(){this._=null}function Fr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Br(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Hr(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ur(t){for(;t.L;)t=t.L;return t}function Wr(t,e){var n,i,r,o=t.sort(qr).pop();for(vr=[],yr=new Array(t.length),_r=new $r,wr=new $r;;)if(r=xr,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))o.x===n&&o.y===i||(yr[o.i]=new Er(o),Ar(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;Cr(r.arc)}e&&(function(t){for(var e,n=vr,i=ui(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)(!Dr(e=n[r],t)||!i(e)||b(e.a.x-e.b.x)<At&&b(e.a.y-e.b.y)<At)&&(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,o,a,s,l,u,h,c=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],g=yr,m=g.length;m--;)if((o=g[m])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)i=(h=s[a].end()).x,r=h.y,e=(u=s[++a%l].start()).x,n=u.y,(b(i-e)>At||b(r-n)>At)&&(s.splice(a,0,new Gr((v=o.site,y=h,_=b(i-c)<At&&p-r>At?{x:c,y:b(e-c)<At?n:p}:b(r-p)<At&&d-i>At?{x:b(n-p)<At?e:d,y:p}:b(i-d)<At&&r-f>At?{x:d,y:b(e-d)<At?n:f}:b(r-f)<At&&i-c>At?{x:b(n-f)<At?e:c,y:f}:null,x=void 0,(x=new jr(v,null)).a=y,x.b=_,vr.push(x),x),o.site,null)),++l);var v,y,_,x}(e));var a={cells:yr,edges:vr};return _r=wr=vr=yr=null,a}function qr(t,e){return e.y-t.y||e.x-t.x}Er.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Or),e.length},Gr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},$r.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ur(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Br(this,n),n=(t=n).U),n.C=!1,i.C=!0,Hr(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Hr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Br(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Ur(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Br(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Hr(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Br(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Hr(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Br(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Hr(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=ur,n=hr,i=e,r=n,o=Xr;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],i=o[0][1],r=o[1][0],a=o[1][1];return Wr(s(t),o).cells.forEach((function(o,s){var l=o.edges,u=o.site;(e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):u.x>=n&&u.x<=r&&u.y>=i&&u.y<=a?[[n,a],[r,a],[r,i],[n,i]]:[]).point=t[s]})),e}function s(t){return t.map((function(t,e){return{x:Math.round(i(t,e)/At)*At,y:Math.round(r(t,e)/At)*At,i:e}}))}return a.links=function(t){return Wr(s(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},a.triangles=function(t){var e=[];return Wr(s(t)).cells.forEach((function(n,i){for(var r,o,a,s,l=n.site,u=n.edges.sort(Or),h=-1,c=u.length,d=u[c-1].edge,f=d.l===l?d.r:d.l;++h<c;)r=f,f=(d=u[h].edge).l===l?d.r:d.l,i<r.i&&i<f.i&&(a=r,s=f,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[i],t[r.i],t[f.i]])})),e},a.x=function(t){return arguments.length?(i=xe(e=t),a):e},a.y=function(t){return arguments.length?(r=xe(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?Xr:t,a):o===Xr?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Xr?null:o&&o[1]},a};var Xr=[[-1e6,-1e6],[1e6,1e6]];function Zr(t){return t.x}function Yr(t){return t.y}function Kr(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),l=e.nodes;l[0]&&Kr(t,l[0],n,i,a,s),l[1]&&Kr(t,l[1],a,i,r,s),l[2]&&Kr(t,l[2],n,s,a,o),l[3]&&Kr(t,l[3],a,s,r,o)}}function Jr(t,e,n,i,r,o,a){var s,l=1/0;return function t(u,h,c,d,f){if(!(h>o||c>a||d<i||f<r)){if(p=u.point){var p,g=e-u.x,m=n-u.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);i=e-y,r=n-y,o=e+y,a=n+y,s=p}}for(var _=u.nodes,x=.5*(h+d),w=.5*(c+f),b=(n>=w)<<1|e>=x,S=b+4;b<S;++b)if(u=_[3&b])switch(3&b){case 0:t(u,h,c,x,w);break;case 1:t(u,x,c,d,w);break;case 2:t(u,h,w,x,f);break;case 3:t(u,x,w,d,f)}}}(t,i,r,o,a),s}function Qr(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,s=e.g-i,l=e.b-r;return function(t){return"#"+fe(Math.round(n+a*t))+fe(Math.round(i+s*t))+fe(Math.round(r+l*t))}}function to(t,e){var n,i={},r={};for(n in t)n in e?i[n]=oo(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function eo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function no(t,e){var n,i,r,o=io.lastIndex=ro.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=io.exec(t))&&(i=ro.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:eo(n,i)})),o=ro.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,i,r){var o,a=ur,s=hr;if(o=arguments.length)return a=Zr,s=Yr,3===o&&(r=n,i=e,n=e=0),l(t);function l(t){var l,u,h,c,d,f,p,g,m,v=xe(a),y=xe(s);if(null!=e)f=e,p=n,g=i,m=r;else if(g=m=-(f=p=1/0),u=[],h=[],d=t.length,o)for(c=0;c<d;++c)(l=t[c]).x<f&&(f=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>m&&(m=l.y),u.push(l.x),h.push(l.y);else for(c=0;c<d;++c){var _=+v(l=t[c],c),x=+y(l,c);_<f&&(f=_),x<p&&(p=x),_>g&&(g=_),x>m&&(m=x),u.push(_),h.push(x)}var w=g-f,S=m-p;function M(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(b(l-n)+b(u-i)<.01)P(t,e,n,i,r,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,P(t,h,l,u,r,o,a,s),P(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else P(t,e,n,i,r,o,a,s)}function P(t,e,n,i,r,o,a,s){var l=.5*(r+a),u=.5*(o+s),h=n>=l,c=i>=u,d=c<<1|h;t.leaf=!1,h?r=l:a=l,c?o=u:s=u,M(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,o,a,s)}w>S?m=p+w:g=f+S;var T={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(T,t,+v(t,++c),+y(t,c),f,p,g,m)},visit:function(t){Kr(t,T,f,p,g,m)},find:function(t){return Jr(T,t[0],t[1],f,p,g,m)}};if(c=-1,null==e){for(;++c<d;)M(T,t[c],u[c],h[c],f,p,g,m);--c}else t.forEach(T.add);return u=h=t=l=null,T}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),l):null==e?null:[[e,n],[i,r]]},l.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),l):null==e?null:[i-e,r-n]},l},o.interpolateRgb=Qr,o.interpolateObject=to,o.interpolateNumber=eo,o.interpolateString=no;var io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ro=new RegExp(io.source,"g");function oo(t,e){for(var n,i=o.interpolators.length;--i>=0&&!(n=o.interpolators[i](t,e)););return n}function ao(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(oo(t[n],e[n]));for(;n<o;++n)r[n]=t[n];for(;n<a;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}o.interpolate=oo,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?_e.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Qr:no:e instanceof Wt?Qr:Array.isArray(e)?ao:"object"===n&&isNaN(e)?to:eo)(t,e)}],o.interpolateArray=ao;var so=function(){return I},lo=o.map({linear:so,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return po},cubic:function(){return go},sin:function(){return vo},exp:function(){return yo},circle:function(){return _o},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Et*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Et/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return xo}}),uo=o.map({in:I,out:co,"in-out":fo,"out-in":function(t){return fo(co(t))}});function ho(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function co(t){return function(e){return 1-t(1-e)}}function fo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function po(t){return t*t}function go(t){return t*t*t}function mo(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function vo(t){return 1-Math.cos(t*Nt)}function yo(t){return Math.pow(2,10*(t-1))}function _o(t){return 1-Math.sqrt(1-t*t)}function xo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function wo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function bo(t){var e,n,i,r=[t.a,t.b],o=[t.c,t.d],a=Mo(r),s=So(r,o),l=Mo(((e=o)[0]+=(i=-s)*(n=r)[0],e[1]+=i*n[1],e))||0;r[0]*o[1]<o[0]*r[1]&&(r[0]*=-1,r[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(r[1],r[0]):Math.atan2(-o[0],o[1]))*Rt,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Rt:0}function So(t,e){return t[0]*e[0]+t[1]*e[1]}function Mo(t){var e=Math.sqrt(So(t,t));return e&&(t[0]/=e,t[1]/=e),e}o.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=lo.get(n)||so,ho((i=uo.get(i)||I)(n.apply(null,a.call(arguments,1))))},o.interpolateHcl=function(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,s=e.c-i,l=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return Jt(n+a*t,i+s*t,r+l*t)+""}},o.interpolateHsl=function(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,s=e.s-i,l=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return Zt(n+a*t,i+s*t,r+l*t)+""}},o.interpolateLab=function(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,s=e.a-i,l=e.b-r;return function(t){return re(n+a*t,i+s*t,r+l*t)+""}},o.interpolateRound=wo,o.transform=function(t){var e=l.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new bo(n?n.matrix:Po)})(t)},bo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Po={a:1,b:0,c:0,d:1,e:0,f:0};function To(t){return t.length?t.pop()+",":""}function Co(t,e){var n=[],i=[];return t=o.transform(t),e=o.transform(e),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:eo(t[0],e[0])},{i:r-2,x:eo(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,i),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(To(n)+"rotate(",null,")")-2,x:eo(t,e)})):e&&n.push(To(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,i),function(t,e,n,i){t!==e?i.push({i:n.push(To(n)+"skewX(",null,")")-2,x:eo(t,e)}):e&&n.push(To(n)+"skewX("+e+")")}(t.skew,e.skew,n,i),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(To(n)+"scale(",null,",",null,")");i.push({i:r-4,x:eo(t[0],e[0])},{i:r-2,x:eo(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(To(n)+"scale("+e+")")}(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function Ao(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Lo(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ko(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;for(var n=Eo(t),i=Eo(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Eo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Oo(t){t.fixed|=2}function No(t){t.fixed&=-7}function Io(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ro(t){t.fixed&=-5}function Do(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)null!=(o=a[l])&&(Do(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}o.interpolateTransform=Co,o.layout={},o.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(ko(t[n]));return e}},o.layout.chord=function(){var t,e,n,i,r,a,s,l={},u=0;function h(){var l,h,d,f,p,g={},m=[],v=o.range(i),y=[];for(t=[],e=[],l=0,f=-1;++f<i;){for(h=0,p=-1;++p<i;)h+=n[f][p];m.push(h),y.push(o.range(i)),l+=h}for(r&&v.sort((function(t,e){return r(m[t],m[e])})),a&&y.forEach((function(t,e){t.sort((function(t,i){return a(n[e][t],n[e][i])}))})),l=(Et-u*i)/l,h=0,f=-1;++f<i;){for(d=h,p=-1;++p<i;){var _=v[f],x=y[_][p],w=n[_][x],b=h,S=h+=w*l;g[_+"-"+x]={index:_,subindex:x,startAngle:b,endAngle:S,value:w}}e[_]={index:_,startAngle:d,endAngle:h,value:m[_]},h+=u}for(f=-1;++f<i;)for(p=f-1;++p<i;){var M=g[f+"-"+p],P=g[p+"-"+f];(M.value||P.value)&&t.push(M.value<P.value?{source:P,target:M}:{source:M,target:P})}s&&c()}function c(){t.sort((function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(r){return arguments.length?(i=(n=r)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(u=n,t=e=null,l):u},l.sortGroups=function(n){return arguments.length?(r=n,t=e=null,l):r},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(s=e,t&&c(),l):s},l.chords=function(){return t||h(),t},l.groups=function(){return e||h(),e},l},o.layout.force=function(){var t,e,n,i,r,a,s={},l=o.dispatch("start","tick","end"),u=[1,1],h=.9,c=jo,d=zo,f=-30,p=Vo,g=.1,m=.64,v=[],y=[];function _(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,l=o*o+a*a;if(s*s/m<l){if(l<p){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}e.point&&l&&l<p&&(u=e.pointCharge/l,t.px-=o*u,t.py-=a*u)}return!e.charge}}function x(t){t.px=o.event.x,t.py=o.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var e,s,c,d,p,m,x,w,b,S=v.length,M=y.length;for(s=0;s<M;++s)d=(c=y[s]).source,(m=(w=(p=c.target).x-d.x)*w+(b=p.y-d.y)*b)&&(w*=m=n*r[s]*((m=Math.sqrt(m))-i[s])/m,b*=m,p.x-=w*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=b*x,d.x+=w*(x=1-x),d.y+=b*x);if((x=n*g)&&(w=u[0]/2,b=u[1]/2,s=-1,x))for(;++s<S;)(c=v[s]).x+=(w-c.x)*x,c.y+=(b-c.y)*x;if(f)for(Do(e=o.geom.quadtree(v),n,a),s=-1;++s<S;)(c=v[s]).fixed||e.visit(_(c));for(s=-1;++s<S;)(c=v[s]).fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*h,c.y-=(c.py-(c.py=c.y))*h);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=Ae(s.tick)),s):n},s.start=function(){var t,e,n,o=v.length,l=y.length,h=u[0],p=u[1];for(t=0;t<o;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<o;++t)n=v[t],isNaN(n.x)&&(n.x=g("x",h)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof c)for(t=0;t<l;++t)i[t]=+c.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=c;if(r=[],"function"==typeof d)for(t=0;t<l;++t)r[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)r[t]=d;if(a=[],"function"==typeof f)for(t=0;t<o;++t)a[t]=+f.call(this,v[t],t);else for(t=0;t<o;++t)a[t]=f;function g(n,i){if(!e){for(e=new Array(o),u=0;u<o;++u)e[u]=[];for(u=0;u<l;++u){var r=y[u];e[r.source.index].push(r.target),e[r.target.index].push(r.source)}}for(var a,s=e[t],u=-1,h=s.length;++u<h;)if(!isNaN(a=s[u][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=o.behavior.drag().origin(I).on("dragstart.force",Oo).on("drag.force",x).on("dragend.force",No)),!arguments.length)return e;this.on("mouseover.force",Io).on("mouseout.force",Ro).call(e)},o.rebind(s,l,"on")};var jo=20,zo=1,Vo=1/0;function Go(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Wo,t}function $o(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function Fo(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function Bo(t){return t.children}function Ho(t){return t.value}function Uo(t,e){return e.value-t.value}function Wo(t){return o.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}o.layout.hierarchy=function(){var t=Uo,e=Bo,n=Ho;function i(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(u=e.call(i,o,o.depth))&&(l=u.length)){for(var l,u,h;--l>=0;)a.push(h=u[l]),h.parent=o,h.depth=o.depth+1;n&&(o.value=0),o.children=u}else n&&(o.value=+n.call(i,o,o.depth)||0),delete o.children;return Fo(r,(function(e){var i,r;t&&(i=e.children)&&i.sort(t),n&&(r=e.parent)&&(r.value+=e.value)})),s}return i.sort=function(e){return arguments.length?(t=e,i):t},i.children=function(t){return arguments.length?(e=t,i):e},i.value=function(t){return arguments.length?(n=t,i):n},i.revalue=function(t){return n&&($o(t,(function(t){t.children&&(t.value=0)})),Fo(t,(function(t){var e;t.children||(t.value=+n.call(i,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},i},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(t,e,i,r){var o=t.children;if(t.x=e,t.y=t.depth*r,t.dx=i,t.dy=r,o&&(a=o.length)){var a,s,l,u=-1;for(i=t.value?i/t.value:0;++u<a;)n(s=o[u],e,l=s.value*i,r),e+=l}}function i(t){var e=t.children,n=0;if(e&&(r=e.length))for(var r,o=-1;++o<r;)n=Math.max(n,i(e[o]));return 1+n}function r(r,o){var a=t.call(this,r,o);return n(a[0],0,e[0],e[1]/i(a[0])),a}return r.size=function(t){return arguments.length?(e=t,r):e},Go(r,t)},o.layout.pie=function(){var t=Number,e=qo,n=0,i=Et,r=0;function a(s){var l,u=s.length,h=s.map((function(e,n){return+t.call(a,e,n)})),c=+("function"==typeof n?n.apply(this,arguments):n),d=("function"==typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(d)/u,+("function"==typeof r?r.apply(this,arguments):r)),p=f*(d<0?-1:1),g=o.sum(h),m=g?(d-u*p)/g:0,v=o.range(u),y=[];return null!=e&&v.sort(e===qo?function(t,e){return h[e]-h[t]}:function(t,n){return e(s[t],s[n])}),v.forEach((function(t){y[t]={data:s[t],value:l=h[t],startAngle:c,endAngle:c+=l*m+p,padAngle:f}})),y}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(r=t,a):r},a};var qo={};function Xo(t){return t.x}function Zo(t){return t.y}function Yo(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=I,e=Qo,n=ta,i=Yo,r=Xo,a=Zo;function s(l,u){if(!(f=l.length))return l;var h=l.map((function(e,n){return t.call(s,e,n)})),c=h.map((function(t){return t.map((function(t,e){return[r.call(s,t,e),a.call(s,t,e)]}))})),d=e.call(s,c,u);h=o.permute(h,d),c=o.permute(c,d);var f,p,g,m,v=n.call(s,c,u),y=h[0].length;for(g=0;g<y;++g)for(i.call(s,h[0][g],m=v[g],c[0][g][1]),p=1;p<f;++p)i.call(s,h[p][g],m+=c[p-1][g][1],c[p][g][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:Ko.get(t)||Qo,s):e},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:Jo.get(t)||ta,s):n},s.x=function(t){return arguments.length?(r=t,s):r},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Ko=o.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ea),a=t.map(na),s=o.range(i).sort((function(t,e){return r[t]-r[e]})),l=0,u=0,h=[],c=[];for(e=0;e<i;++e)n=s[e],l<u?(l+=a[n],h.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(h)},reverse:function(t){return o.range(t.length).reverse()},default:Qo}),Jo=o.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,r,o,a,s,l,u,h=t.length,c=t[0],d=c.length,f=[];for(f[0]=l=u=0,n=1;n<d;++n){for(e=0,r=0;e<h;++e)r+=t[e][n][1];for(e=0,o=0,s=c[n][0]-c[n-1][0];e<h;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}f[n]=l-=r?o/r*s:0,l<u&&(u=l)}for(n=0;n<d;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;n<o;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:ta});function Qo(t){return o.range(t.length)}function ta(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ea(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function na(t){return t.reduce(ia,0)}function ia(t,e){return t+e[1]}function ra(t,e){return oa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function oa(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function aa(t){return[o.min(t),o.max(t)]}function sa(t,e){return t.value-e.value}function la(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ua(t,e){t._pack_next=e,e._pack_prev=t}function ha(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function ca(t){if((e=t.children)&&(l=e.length)){var e,n,i,r,o,a,s,l,u=1/0,h=-1/0,c=1/0,d=-1/0;if(e.forEach(da),(n=e[0]).x=-n.r,n.y=0,_(n),l>1&&((i=e[1]).x=i.r,i.y=0,_(i),l>2))for(ga(n,i,r=e[2]),_(r),la(n,r),n._pack_prev=r,la(r,i),i=n._pack_next,o=3;o<l;o++){ga(n,i,r=e[o]);var f=0,p=1,g=1;for(a=i._pack_next;a!==i;a=a._pack_next,p++)if(ha(a,r)){f=1;break}if(1==f)for(s=n._pack_prev;s!==a._pack_prev&&!ha(s,r);s=s._pack_prev,g++);f?(p<g||p==g&&i.r<n.r?ua(n,i=a):ua(n=s,i),o--):(la(n,r),i=r,_(r))}var m=(u+h)/2,v=(c+d)/2,y=0;for(o=0;o<l;o++)(r=e[o]).x-=m,r.y-=v,y=Math.max(y,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=y,e.forEach(fa)}function _(t){u=Math.min(t.x-t.r,u),h=Math.max(t.x+t.r,h),c=Math.min(t.y-t.r,c),d=Math.max(t.y+t.r,d)}}function da(t){t._pack_next=t._pack_prev=t}function fa(t){delete t._pack_next,delete t._pack_prev}function pa(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)pa(r[o],e,n,i)}function ga(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o,l=.5+((i*=i)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function ma(t,e){return t.parent==e.parent?1:2}function va(t){var e=t.children;return e.length?e[0]:t.t}function ya(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function _a(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function xa(t,e,n){return t.a.parent===e.parent?t.a:n}function wa(t){var e=t.children;return e&&e.length?wa(e[0]):t}function ba(t){var e,n=t.children;return n&&(e=n.length)?ba(n[e-1]):t}function Sa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ma(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Pa(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Ta(t){return t.rangeExtent?t.rangeExtent():Pa(t.range())}function Ca(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Aa(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function La(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ka}o.layout.histogram=function(){var t=!0,e=Number,n=aa,i=ra;function r(r,a){for(var s,l,u=[],h=r.map(e,this),c=n.call(this,h,a),d=i.call(this,c,h,a),f=(a=-1,h.length),p=d.length-1,g=t?1:1/f;++a<p;)(s=u[a]=[]).dx=d[a+1]-(s.x=d[a]),s.y=0;if(p>0)for(a=-1;++a<f;)(l=h[a])>=c[0]&&l<=c[1]&&((s=u[o.bisect(d,l,1,p)-1]).y+=g,s.push(r[a]));return u}return r.value=function(t){return arguments.length?(e=t,r):e},r.range=function(t){return arguments.length?(n=xe(t),r):n},r.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return oa(e,t)}:xe(t),r):i},r.frequency=function(e){return arguments.length?(t=!!e,r):t},r},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(sa),n=0,i=[1,1];function r(r,o){var a=e.call(this,r,o),s=a[0],l=i[0],u=i[1],h=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Fo(s,(function(t){t.r=+h(t.value)})),Fo(s,ca),n){var c=n*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;Fo(s,(function(t){t.r+=c})),Fo(s,ca),Fo(s,(function(t){t.r-=c}))}return pa(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}return r.size=function(t){return arguments.length?(i=t,r):i},r.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,r):t},r.padding=function(t){return arguments.length?(n=+t,r):n},Go(r,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ma,n=[1,1],i=null;function r(r,o){var u=t.call(this,r,o),h=u[0],c=function(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;a<s;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}(h);if(Fo(c,a),c.parent.m=-c.z,$o(c,s),i)$o(h,l);else{var d=h,f=h,p=h;$o(h,(function(t){t.x<d.x&&(d=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)}));var g=e(d,f)/2-d.x,m=n[0]/(f.x+e(f,d)/2+g),v=n[1]/(p.depth||1);$o(h,(function(t){t.x=(t.x+g)*m,t.y=t.depth*v}))}return u}function a(t){var n=t.children,i=t.parent.children,r=t.i?i[t.i-1]:null;if(n.length){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+e(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+e(t._,r._));t.parent.A=function(t,n,i){if(n){for(var r,o=t,a=t,s=n,l=o.parent.children[0],u=o.m,h=a.m,c=s.m,d=l.m;s=ya(s),o=va(o),s&&o;)l=va(l),(a=ya(a)).a=t,(r=s.z+c-o.z-u+e(s._,o._))>0&&(_a(xa(s,t,i),t,r),u+=r,h+=r),c+=s.m,u+=o.m,d+=l.m,h+=a.m;s&&!ya(a)&&(a.t=s,a.m+=c-h),o&&!va(l)&&(l.t=o,l.m+=u-d,i=t)}return i}(t,r,t.parent.A||i[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(t){return arguments.length?(i=null==(n=t)?l:null,r):i?null:n},r.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,r):i?n:null},Go(r,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ma,n=[1,1],i=!1;function r(r,a){var s,l=t.call(this,r,a),u=l[0],h=0;Fo(u,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(n),t.y=function(t){return 1+o.max(t,(function(t){return t.y}))}(n)):(t.x=s?h+=e(t,s):0,t.y=0,s=t)}));var c=wa(u),d=ba(u),f=c.x-e(c,d)/2,p=d.x+e(d,c)/2;return Fo(u,i?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-f)/(p-f)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),l}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(t){return arguments.length?(i=null==(n=t),r):i?null:n},r.nodeSize=function(t){return arguments.length?(i=null!=(n=t),r):i?n:null},Go(r,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,i=[1,1],r=null,a=Sa,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function h(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function c(t){var e=t.children;if(e&&e.length){var n,i,r,o=a(t),s=[],u=e.slice(),d=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(h(u,o.dx*o.dy/t.value),s.area=0;(r=u.length)>0;)s.push(n=u[r-1]),s.area+=n.area,"squarify"!==l||(i=f(s,g))<=d?(u.pop(),d=i):(s.area-=s.pop().area,p(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,g,o,!0),s.length=s.area=0),e.forEach(c)}}function d(t){var e=t.children;if(e&&e.length){var n,i=a(t),r=e.slice(),o=[];for(h(r,i.dx*i.dy/t.value),o.area=0;n=r.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?i.dx:i.dy,i,!r.length),o.length=o.area=0);e.forEach(d)}}function f(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>r&&(r=n));return e*=e,(i*=i)?Math.max(e*r*u/i,i/(e*o*u)):1/0}function p(t,e,i,r){var o,a=-1,s=t.length,l=i.x,u=i.y,h=e?n(t.area/e):0;if(e==i.dx){for((r||h>i.dy)&&(h=i.dy);++a<s;)(o=t[a]).x=l,o.y=u,o.dy=h,l+=o.dx=Math.min(i.x+i.dx-l,h?n(o.area/h):0);o.z=!0,o.dx+=i.x+i.dx-l,i.y+=h,i.dy-=h}else{for((r||h>i.dx)&&(h=i.dx);++a<s;)(o=t[a]).x=l,o.y=u,o.dx=h,u+=o.dy=Math.min(i.y+i.dy-u,h?n(o.area/h):0);o.z=!1,o.dy+=i.y+i.dy-u,i.x+=h,i.dx-=h}}function g(n){var r=t||e(n),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,t&&e.revalue(o),h([o],o.dx*o.dy/o.value),(t?d:c)(o),s&&(t=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return r;function e(e){var n=t.call(g,e,e.depth);return null==n?Sa(e):Ma(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Ma(e,t)}var i;return a=null==(r=t)?Sa:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(s=e,t=null,g):s},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(l=t+"",g):l},Go(g,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var ka={floor:I,ceil:I};function Ea(t,e,n,i){var r=[],a=[],s=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=l;)r.push(n(t[s-1],t[s])),a.push(i(e[s-1],e[s]));return function(e){var n=o.bisect(t,e,1,l)-1;return a[n](r[n](e))}}function Oa(t,e,n,i){var r,o;function a(){var a=Math.min(t.length,e.length)>2?Ea:Ca,l=i?Lo:Ao;return r=a(t,e,l,n),o=a(e,t,l,oo),s}function s(t){return r(t)}return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},s.range=function(t){return arguments.length?(e=t,a()):e},s.rangeRound=function(t){return s.range(t).interpolate(wo)},s.clamp=function(t){return arguments.length?(i=t,a()):i},s.interpolate=function(t){return arguments.length?(n=t,a()):n},s.ticks=function(e){return Da(t,e)},s.tickFormat=function(e,n){return ja(t,e,n)},s.nice=function(e){return Ia(t,e),a()},s.copy=function(){return Oa(t,e,n,i)},a()}function Na(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ia(t,e){return Aa(t,La(Ra(t,e)[2])),Aa(t,La(Ra(t,e)[2])),t}function Ra(t,e){null==e&&(e=10);var n=Pa(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Da(t,e){return o.range.apply(o,Ra(t,e))}function ja(t,e,n){var i=Ra(t,e);if(n){var r=Re.exec(n);if(r.shift(),"s"===r[8]){var a=o.formatPrefix(Math.max(b(i[0]),b(i[1])));return r[7]||(r[7]="."+Va(a.scale(i[2]))),r[8]="f",n=o.format(r.join("")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]="."+function(t,e){var n=Va(e[2]);return t in za?Math.abs(n-Va(Math.max(b(e[0]),b(e[1]))))+ +("e"!==t):n-2*("%"===t)}(r[8],i)),n=r.join("")}else n=",."+Va(i[2])+"f";return o.format(n)}o.scale.linear=function(){return Oa([0,1],[0,1],oo,!1)};var za={s:1,g:1,p:1,r:1,e:1};function Va(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ga(t,e,n,i){function r(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(r(e))}return s.invert=function(e){return a(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),s):i},s.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),s):e},s.nice=function(){var e=Aa(i.map(r),n?Math:Fa);return t.domain(e),i=e.map(a),s},s.ticks=function(){var t=Pa(i),o=[],s=t[0],l=t[1],u=Math.floor(r(s)),h=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(h-u)){if(n){for(;u<h;u++)for(var d=1;d<c;d++)o.push(a(u)*d);o.push(a(u))}else for(o.push(a(u));u++<h;)for(d=c-1;d>0;d--)o.push(a(u)*d);for(u=0;o[u]<s;u++);for(h=o.length;o[h-1]>l;h--);o=o.slice(u,h)}return o},s.tickFormat=function(t,n){if(!arguments.length)return $a;arguments.length<2?n=$a:"function"!=typeof n&&(n=o.format(n));var i=Math.max(1,e*t/s.ticks().length);return function(t){var o=t/a(Math.round(r(t)));return o*e<e-.5&&(o*=e),o<=i?n(t):""}},s.copy=function(){return Ga(t.copy(),e,n,i)},Na(s,t)}o.scale.log=function(){return Ga(o.scale.linear().domain([0,1]),10,!0,[1,10])};var $a=o.format(".0e"),Fa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ba(t,e,n){var i=Ha(e),r=Ha(1/e);function o(e){return t(i(e))}return o.invert=function(e){return r(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),o):n},o.ticks=function(t){return Da(n,t)},o.tickFormat=function(t,e){return ja(n,t,e)},o.nice=function(t){return o.domain(Ia(n,t))},o.exponent=function(a){return arguments.length?(i=Ha(e=a),r=Ha(1/e),t.domain(n.map(i)),o):e},o.copy=function(){return Ba(t.copy(),e,n)},Na(o,t)}function Ha(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ua(t,e){var n,i,r;function a(r){return i[((n.get(r)||("range"===e.t?n.set(r,t.push(r)):NaN))-1)%i.length]}function s(e,n){return o.range(t.length).map((function(t){return e+n*t}))}return a.domain=function(i){if(!arguments.length)return t;t=[],n=new P;for(var r,o=-1,s=i.length;++o<s;)n.has(r=i[o])||n.set(r,t.push(r));return a[e.t].apply(a,e.a)},a.range=function(t){return arguments.length?(i=t,r=0,e={t:"range",a:arguments},a):i},a.rangePoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],u=n[1],h=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+o);return i=s(l+h*o/2,h),r=0,e={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],u=n[1],h=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+o)|0;return i=s(l+Math.round(h*o/2+(u-l-(t.length-1+o)*h)/2),h),r=0,e={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=n[1]<n[0],h=n[u-0],c=n[1-u],d=(c-h)/(t.length-o+2*l);return i=s(h+d*l,d),u&&i.reverse(),r=d*(1-o),e={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=n[1]<n[0],h=n[u-0],c=n[1-u],d=Math.floor((c-h)/(t.length-o+2*l));return i=s(h+Math.round((c-h-(t.length-o)*d)/2),d),u&&i.reverse(),r=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return r},a.rangeExtent=function(){return Pa(e.a[0])},a.copy=function(){return Ua(t,e)},a.domain(t)}o.scale.pow=function(){return Ba(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return Ua([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Wa)},o.scale.category20=function(){return o.scale.ordinal().range(qa)},o.scale.category20b=function(){return o.scale.ordinal().range(Xa)},o.scale.category20c=function(){return o.scale.ordinal().range(Za)};var Wa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ce),qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ce),Xa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ce),Za=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ce);function Ya(t,e){var n;function i(){var i=0,a=e.length;for(n=[];++i<a;)n[i-1]=o.quantile(t,i/a);return r}function r(t){if(!isNaN(t=+t))return e[o.bisect(n,t)]}return r.domain=function(e){return arguments.length?(t=e.map(v).filter(y).sort(m),i()):t},r.range=function(t){return arguments.length?(e=t,i()):e},r.quantiles=function(){return n},r.invertExtent=function(i){return(i=e.indexOf(i))<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},r.copy=function(){return Ya(t,e)},i()}function Ka(t,e,n){var i,r;function o(e){return n[Math.max(0,Math.min(r,Math.floor(i*(e-t))))]}function a(){return i=n.length/(e-t),r=n.length-1,o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},o.range=function(t){return arguments.length?(n=t,a()):n},o.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/i+t,e+1/i]},o.copy=function(){return Ka(t,e,n)},a()}function Ja(t,e){function n(n){if(n<=n)return e[o.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return Ja(t,e)},n}function Qa(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Da(t,e)},e.tickFormat=function(e,n){return ja(t,e,n)},e.copy=function(){return Qa(t)},e}function ts(){return 0}o.scale.quantile=function(){return Ya([],[])},o.scale.quantize=function(){return Ka(0,1,[0,1])},o.scale.threshold=function(){return Ja([.5],[0,1])},o.scale.identity=function(){return Qa([0,1])},o.svg={},o.svg.arc=function(){var t=ns,e=is,n=ts,i=es,r=rs,o=os,a=as;function s(){var s=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),h=r.apply(this,arguments)-Nt,c=o.apply(this,arguments)-Nt,d=Math.abs(c-h),f=h>c?0:1;if(u<s&&(p=u,u=s,s=p),d>=Ot)return l(u,f)+(s?l(s,1-f):"")+"Z";var p,g,m,v,y,_,x,w,b,S,M,P,T=0,C=0,A=[];if((v=(+a.apply(this,arguments)||0)/2)&&(m=i===es?Math.sqrt(s*s+u*u):+i.apply(this,arguments),f||(C*=-1),u&&(C=Vt(m/u*Math.sin(v))),s&&(T=Vt(m/s*Math.sin(v)))),u){y=u*Math.cos(h+C),_=u*Math.sin(h+C),x=u*Math.cos(c-C),w=u*Math.sin(c-C);var L=Math.abs(c-h-2*C)<=kt?0:1;if(C&&ss(y,_,x,w)===f^L){var k=(h+c)/2;y=u*Math.cos(k),_=u*Math.sin(k),x=w=null}}else y=_=0;if(s){b=s*Math.cos(c-T),S=s*Math.sin(c-T),M=s*Math.cos(h+T),P=s*Math.sin(h+T);var E=Math.abs(h-c+2*T)<=kt?0:1;if(T&&ss(b,S,M,P)===1-f^E){var O=(h+c)/2;b=s*Math.cos(O),S=s*Math.sin(O),M=P=null}}else b=S=0;if(d>At&&(p=Math.min(Math.abs(u-s)/2,+n.apply(this,arguments)))>.001){g=s<u^f?0:1;var N=p,I=p;if(d<kt){var R=null==M?[b,S]:null==x?[y,_]:gr([y,_],[M,P],[x,w],[b,S]),D=y-R[0],j=_-R[1],z=x-R[0],V=w-R[1],G=1/Math.sin(Math.acos((D*z+j*V)/(Math.sqrt(D*D+j*j)*Math.sqrt(z*z+V*V)))/2),$=Math.sqrt(R[0]*R[0]+R[1]*R[1]);I=Math.min(p,(s-$)/(G-1)),N=Math.min(p,(u-$)/(G+1))}if(null!=x){var F=ls(null==M?[b,S]:[M,P],[y,_],u,N,f),B=ls([x,w],[b,S],u,N,f);p===N?A.push("M",F[0],"A",N,",",N," 0 0,",g," ",F[1],"A",u,",",u," 0 ",1-f^ss(F[1][0],F[1][1],B[1][0],B[1][1]),",",f," ",B[1],"A",N,",",N," 0 0,",g," ",B[0]):A.push("M",F[0],"A",N,",",N," 0 1,",g," ",B[0])}else A.push("M",y,",",_);if(null!=M){var H=ls([y,_],[M,P],s,-I,f),U=ls([b,S],null==x?[y,_]:[x,w],s,-I,f);p===I?A.push("L",U[0],"A",I,",",I," 0 0,",g," ",U[1],"A",s,",",s," 0 ",f^ss(U[1][0],U[1][1],H[1][0],H[1][1]),",",1-f," ",H[1],"A",I,",",I," 0 0,",g," ",H[0]):A.push("L",U[0],"A",I,",",I," 0 0,",g," ",H[0])}else A.push("L",b,",",S)}else A.push("M",y,",",_),null!=x&&A.push("A",u,",",u," 0 ",L,",",f," ",x,",",w),A.push("L",b,",",S),null!=M&&A.push("A",s,",",s," 0 ",E,",",1-f," ",M,",",P);return A.push("Z"),A.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=xe(e),s):t},s.outerRadius=function(t){return arguments.length?(e=xe(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=xe(t),s):n},s.padRadius=function(t){return arguments.length?(i=t==es?es:xe(t),s):i},s.startAngle=function(t){return arguments.length?(r=xe(t),s):r},s.endAngle=function(t){return arguments.length?(o=xe(t),s):o},s.padAngle=function(t){return arguments.length?(a=xe(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Nt;return[Math.cos(i)*n,Math.sin(i)*n]},s};var es="auto";function ns(t){return t.innerRadius}function is(t){return t.outerRadius}function rs(t){return t.startAngle}function os(t){return t.endAngle}function as(t){return t&&t.padAngle}function ss(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function ls(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,h=t[0]+l,c=t[1]+u,d=e[0]+l,f=e[1]+u,p=(h+d)/2,g=(c+f)/2,m=d-h,v=f-c,y=m*m+v*v,_=n-i,x=h*f-d*c,w=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-x*x)),b=(x*v-m*w)/y,S=(-x*m-v*w)/y,M=(x*v+m*w)/y,P=(-x*m+v*w)/y,T=b-p,C=S-g,A=M-p,L=P-g;return T*T+C*C>A*A+L*L&&(b=M,S=P),[[b-l,S-u],[b*n/_,S*n/_]]}function us(t){var e=ur,n=hr,i=Qn,r=cs,o=r.key,a=.7;function s(o){var s,l=[],u=[],h=-1,c=o.length,d=xe(e),f=xe(n);function p(){l.push("M",r(t(u),a))}for(;++h<c;)i.call(this,s=o[h],h)?u.push([+d.call(this,s,h),+f.call(this,s,h)]):u.length&&(p(),u=[]);return u.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(i=t,s):i},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?r=t:(r=hs.get(t)||cs).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}o.svg.line=function(){return us(I)};var hs=o.map({linear:cs,"linear-closed":ds,step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")},"step-before":fs,"step-after":ps,basis:vs,"basis-open":function(t){if(t.length<4)return cs(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(ys(ws,o)+","+ys(ws,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),bs(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[ys(ws,a),",",ys(ws,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),bs(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)r=u/n,(i=t[u])[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*l);return vs(t)},cardinal:function(t,e){return t.length<3?cs(t):t[0]+gs(t,ms(t,e))},"cardinal-open":function(t,e){return t.length<4?cs(t):t[1]+gs(t.slice(1,-1),ms(t,e))},"cardinal-closed":function(t,e){return t.length<3?ds(t):t[0]+gs((t.push(t[0]),t),ms([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?cs(t):t[0]+gs(t,function(t){for(var e,n,i,r,o=[],a=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Ss(r,o);++e<n;)i[e]=(a+(a=Ss(r=o,o=t[e+1])))/2;return i[e]=a,i}(t),s=-1,l=t.length-1;++s<l;)e=Ss(t[s],t[s+1]),b(e)<At?a[s]=a[s+1]=0:(r=(n=a[s]/e)*n+(i=a[s+1]/e)*i)>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i);for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}(t))}});function cs(t){return t.length>1?t.join("L"):t+"Z"}function ds(t){return t.join("L")+"Z"}function fs(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function ps(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function gs(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return cs(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var h=t[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+h[0]+","+h[1]}return i}function ms(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function vs(t){if(t.length<3)return cs(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",ys(ws,a),",",ys(ws,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),bs(l,a,s);return t.pop(),l.push("L",i),l.join("")}function ys(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}hs.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var _s=[0,2/3,1/3,0],xs=[0,1/3,2/3,0],ws=[0,1/6,2/3,1/6];function bs(t,e,n){t.push("C",ys(_s,e),",",ys(_s,n),",",ys(xs,e),",",ys(xs,n),",",ys(ws,e),",",ys(ws,n))}function Ss(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ms(t){for(var e,n,i,r=-1,o=t.length;++r<o;)n=(e=t[r])[0],i=e[1]-Nt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Ps(t){var e=ur,n=ur,i=0,r=hr,o=Qn,a=cs,s=a.key,l=a,u="L",h=.7;function c(s){var c,d,f,p=[],g=[],m=[],v=-1,y=s.length,_=xe(e),x=xe(i),w=e===n?function(){return d}:xe(n),b=i===r?function(){return f}:xe(r);function S(){p.push("M",a(t(m),h),u,l(t(g.reverse()),h),"Z")}for(;++v<y;)o.call(this,c=s[v],v)?(g.push([d=+_.call(this,c,v),f=+x.call(this,c,v)]),m.push([+w.call(this,c,v),+b.call(this,c,v)])):g.length&&(S(),g=[],m=[]);return g.length&&S(),p.length?p.join(""):null}return c.x=function(t){return arguments.length?(e=n=t,c):n},c.x0=function(t){return arguments.length?(e=t,c):e},c.x1=function(t){return arguments.length?(n=t,c):n},c.y=function(t){return arguments.length?(i=r=t,c):r},c.y0=function(t){return arguments.length?(i=t,c):i},c.y1=function(t){return arguments.length?(r=t,c):r},c.defined=function(t){return arguments.length?(o=t,c):o},c.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=hs.get(t)||cs).key,l=a.reverse||a,u=a.closed?"M":"L",c):s},c.tension=function(t){return arguments.length?(h=t,c):h},c}function Ts(t){return t.radius}function Cs(t){return[t.x,t.y]}function As(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Nt;return[n*Math.cos(i),n*Math.sin(i)]}}function Ls(){return 64}function ks(){return"circle"}function Es(t){var e=Math.sqrt(t/kt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=us(Ms);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},fs.reverse=ps,ps.reverse=fs,o.svg.area=function(){return Ps(I)},o.svg.area.radial=function(){var t=Ps(Ms);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=Zi,e=Yi,n=Ts,i=rs,r=os;function o(n,i){var r,o,u=a(this,t,n,i),h=a(this,e,n,i);return"M"+u.p0+s(u.r,u.p1,u.a1-u.a0)+(o=h,((r=u).a0==o.a0&&r.a1==o.a1?l(u.r,u.p1,u.r,u.p0):l(u.r,u.p1,h.r,h.p0)+s(h.r,h.p1,h.a1-h.a0)+l(h.r,h.p1,u.r,u.p0))+"Z")}function a(t,e,o,a){var s=e.call(t,o,a),l=n.call(t,s,a),u=i.call(t,s,a)-Nt,h=r.call(t,s,a)-Nt;return{r:l,a0:u,a1:h,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(h),l*Math.sin(h)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>kt)+",1 "+e}function l(t,e,n,i){return"Q 0,0 "+i}return o.radius=function(t){return arguments.length?(n=xe(t),o):n},o.source=function(e){return arguments.length?(t=xe(e),o):t},o.target=function(t){return arguments.length?(e=xe(t),o):e},o.startAngle=function(t){return arguments.length?(i=xe(t),o):i},o.endAngle=function(t){return arguments.length?(r=xe(t),o):r},o},o.svg.diagonal=function(){var t=Zi,e=Yi,n=Cs;function i(i,r){var o=t.call(this,i,r),a=e.call(this,i,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(e){return arguments.length?(t=xe(e),i):t},i.target=function(t){return arguments.length?(e=xe(t),i):e},i.projection=function(t){return arguments.length?(n=t,i):n},i},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=Cs,n=t.projection;return t.projection=function(t){return arguments.length?n(As(e=t)):e},t},o.svg.symbol=function(){var t=ks,e=Ls;function n(n,i){return(Os.get(t.call(this,n,i))||Es)(e.call(this,n,i))}return n.type=function(e){return arguments.length?(t=xe(e),n):t},n.size=function(t){return arguments.length?(e=xe(t),n):e},n};var Os=o.map({circle:Es,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Is)),n=e*Is;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ns),n=e*Ns/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ns),n=e*Ns/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=Os.keys();var Ns=Math.sqrt(3),Is=Math.tan(30*It);Y.transition=function(t){for(var e,n,i=zs||++$s,r=Hs(t),o=[],a=Vs||{time:Date.now(),ease:mo,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(n=u[h])&&Us(n,h,r,i,a),e.push(n)}return js(o,r,i)},Y.interrupt=function(t){return this.each(null==t?Rs:Ds(Hs(t)))};var Rs=Ds(Hs());function Ds(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function js(t,e,n){return U(t,Gs),t.namespace=e,t.id=n,t}var zs,Vs,Gs=[],$s=0;function Fs(t,e,n,i){var r=t.id,o=t.namespace;return pt(t,"function"==typeof n?function(t,a,s){t[o][r].tween.set(e,i(n.call(t,t.__data__,a,s)))}:(n=i(n),function(t){t[o][r].tween.set(e,n)}))}function Bs(t){return null==t&&(t=""),function(){this.textContent=t}}function Hs(t){return null==t?"__transition__":"__transition_"+t+"__"}function Us(t,e,n,i,r){var o,a,s,l,u,h=t[n]||(t[n]={active:0,count:0}),c=h[i];function d(n){var r=h.active,d=h[r];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--h.count,delete h[r],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),h)if(+p<i){var g=h[p];g.timer.c=null,g.timer.t=NaN,--h.count,delete h[p]}a.c=f,Ae((function(){return a.c&&f(n||1)&&(a.c=null,a.t=NaN),1}),0,o),h.active=i,c.event&&c.event.start.call(t,t.__data__,e),u=[],c.tween.forEach((function(n,i){(i=i.call(t,t.__data__,e))&&u.push(i)})),l=c.ease,s=c.duration}function f(r){for(var o=r/s,a=l(o),d=u.length;d>0;)u[--d].call(t,a);if(o>=1)return c.event&&c.event.end.call(t,t.__data__,e),--h.count?delete h[i]:delete t[n],1}c||(o=r.time,a=Ae((function(t){var e=c.delay;if(a.t=e+o,e<=t)return d(t-e);a.c=d}),0,o),c=h[i]={tween:new P,time:o,timer:a,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++h.count)}Gs.call=Y.call,Gs.empty=Y.empty,Gs.node=Y.node,Gs.size=Y.size,o.transition=function(t,e){return t&&t.transition?zs?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=Gs,Gs.select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=K(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(i=u[h])&&(n=t.call(i,i.__data__,h,s))?("__data__"in i&&(n.__data__=i.__data__),Us(n,h,o,r,i[o][r]),e.push(n)):e.push(null)}return js(a,o,r)},Gs.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,l=[];t=J(t);for(var u=-1,h=this.length;++u<h;)for(var c=this[u],d=-1,f=c.length;++d<f;)if(i=c[d]){o=i[s][a],n=t.call(i,i.__data__,d,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&Us(r,p,s,a,o),e.push(r)}return js(l,s,a)},Gs.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=dt(t));for(var r=0,o=this.length;r<o;r++){i.push(e=[]);for(var a,s=0,l=(a=this[r]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return js(i,this.namespace,this.id)},Gs.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):pt(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Gs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?Co:oo,i=o.ns.qualify(t);function r(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}function s(t){return null==t?r:(t+="",function(){var e,r=this.getAttribute(i);return r!==t&&(e=n(r,t),function(t){this.setAttribute(i,e(t))})})}function l(t){return null==t?a:(t+="",function(){var e,r=this.getAttributeNS(i.space,i.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return Fs(this,"attr."+t,e,i.local?l:s)},Gs.attrTween=function(t,e){var n=o.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,i){var r=e.call(this,t,i,this.getAttributeNS(n.space,n.local));return r&&function(t){this.setAttributeNS(n.space,n.local,r(t))}}:function(t,i){var r=e.call(this,t,i,this.getAttribute(n));return r&&function(t){this.setAttribute(n,r(t))}})},Gs.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function r(){this.style.removeProperty(t)}function o(e){return null==e?r:(e+="",function(){var i,r=h(this).getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=oo(r,e),function(e){this.style.setProperty(t,i(e),n)})})}return Fs(this,"style."+t,e,o)},Gs.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,h(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Gs.text=function(t){return Fs(this,"text",t,Bs)},Gs.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},Gs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=o.ease.apply(o,arguments)),pt(this,(function(i){i[n][e].ease=t})))},Gs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:pt(this,"function"==typeof t?function(i,r,o){i[n][e].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[n][e].delay=t}))},Gs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:pt(this,"function"==typeof t?function(i,r,o){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Gs.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Vs,a=zs;try{zs=n,pt(this,(function(e,r,o){Vs=e[i][n],t.call(e,e.__data__,r,o)}))}finally{Vs=r,zs=a}}else pt(this,(function(r){var a=r[i][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(t,e)}));return this},Gs.transition=function(){for(var t,e,n,i=this.id,r=++$s,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var u,h=0,c=(u=this[s]).length;h<c;h++)(e=u[h])&&Us(e,h,o,r,{time:(n=e[o][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return js(a,o,r)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Ws,i=6,r=6,a=3,l=[10],u=null;function h(s){s.each((function(){var s,h=o.select(this),c=this.__chart__||e,d=this.__chart__=e.copy(),f=null==u?d.ticks?d.ticks.apply(d,l):d.domain():u,p=null==t?d.tickFormat?d.tickFormat.apply(d,l):I:t,g=h.selectAll(".tick").data(f,d),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",At),v=o.transition(g.exit()).style("opacity",At).remove(),y=o.transition(g.order()).style("opacity",1),_=Math.max(i,0)+a,x=Ta(d),w=h.selectAll(".domain").data([0]),b=(w.enter().append("path").attr("class","domain"),o.transition(w));m.append("line"),m.append("text");var S,M,P,T,C=m.select("line"),A=y.select("line"),L=g.select("text").text(p),k=m.select("text"),E=y.select("text"),O="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Xs,S="x",P="y",M="x2",T="y2",L.attr("dy",O<0?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+x[0]+","+O*r+"V0H"+x[1]+"V"+O*r)):(s=Zs,S="y",P="x",M="y2",T="x2",L.attr("dy",".32em").style("text-anchor",O<0?"end":"start"),b.attr("d","M"+O*r+","+x[0]+"H0V"+x[1]+"H"+O*r)),C.attr(T,O*i),k.attr(P,O*_),A.attr(M,0).attr(T,O*i),E.attr(S,0).attr(P,O*_),d.rangeBand){var N=d,R=N.rangeBand()/2;c=d=function(t){return N(t)+R}}else c.rangeBand?c=d:v.call(s,d,c);m.call(s,c,d),y.call(s,d,d)}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.orient=function(t){return arguments.length?(n=t in qs?t+"":Ws,h):n},h.ticks=function(){return arguments.length?(l=s(arguments),h):l},h.tickValues=function(t){return arguments.length?(u=t,h):u},h.tickFormat=function(e){return arguments.length?(t=e,h):t},h.tickSize=function(t){var e=arguments.length;return e?(i=+t,r=+arguments[e-1],h):i},h.innerTickSize=function(t){return arguments.length?(i=+t,h):i},h.outerTickSize=function(t){return arguments.length?(r=+t,h):r},h.tickPadding=function(t){return arguments.length?(a=+t,h):a},h.tickSubdivide=function(){return arguments.length&&h},h};var Ws="bottom",qs={top:1,right:1,bottom:1,left:1};function Xs(t,e,n){t.attr("transform",(function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"}))}function Zs(t,e,n){t.attr("transform",(function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"}))}o.svg.brush=function(){var t,e,n=B(d,"brushstart","brush","brushend"),i=null,r=null,a=[0,0],s=[0,0],l=!0,u=!0,c=Ks[0];function d(t){t.each((function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(c,I);n.exit().remove(),n.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return Ys[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",d.empty()?"none":null);var a,s=o.transition(t),l=o.transition(e);i&&(a=Ta(i),l.attr("x",a[0]).attr("width",a[1]-a[0]),p(s)),r&&(a=Ta(r),l.attr("y",a[0]).attr("height",a[1]-a[0]),g(s)),f(s)}))}function f(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+a[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"}))}function p(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function g(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){var c,m,v=this,y=o.select(o.event.target),_=n.of(v,arguments),x=o.select(v),w=y.datum(),b=!/^(n|s)$/.test(w)&&i,S=!/^(e|w)$/.test(w)&&r,M=y.classed("extent"),P=Mt(v),T=o.mouse(v),C=o.select(h(v)).on("keydown.brush",k).on("keyup.brush",E);if(o.event.changedTouches?C.on("touchmove.brush",O).on("touchend.brush",I):C.on("mousemove.brush",O).on("mouseup.brush",I),x.interrupt().selectAll("*").interrupt(),M)T[0]=a[0]-T[0],T[1]=s[0]-T[1];else if(w){var A=+/w$/.test(w),L=+/^n/.test(w);m=[a[1-A]-T[0],s[1-L]-T[1]],T[0]=a[A],T[1]=s[L]}else o.event.altKey&&(c=T.slice());function k(){32==o.event.keyCode&&(M||(c=null,T[0]-=a[1],T[1]-=s[1],M=2),$())}function E(){32==o.event.keyCode&&2==M&&(T[0]+=a[1],T[1]+=s[1],M=0,$())}function O(){var t=o.mouse(v),e=!1;m&&(t[0]+=m[0],t[1]+=m[1]),M||(o.event.altKey?(c||(c=[(a[0]+a[1])/2,(s[0]+s[1])/2]),T[0]=a[+(t[0]<c[0])],T[1]=s[+(t[1]<c[1])]):c=null),b&&N(t,i,0)&&(p(x),e=!0),S&&N(t,r,1)&&(g(x),e=!0),e&&(f(x),_({type:"brush",mode:M?"move":"resize"}))}function N(n,i,r){var o,h,d=Ta(i),f=d[0],p=d[1],g=T[r],m=r?s:a,v=m[1]-m[0];if(M&&(f-=g,p-=v+g),o=(r?u:l)?Math.max(f,Math.min(p,n[r])):n[r],M?h=(o+=g)+v:(c&&(g=Math.max(f,Math.min(p,2*c[r]-o))),g<o?(h=o,o=g):h=g),m[0]!=o||m[1]!=h)return r?e=null:t=null,m[0]=o,m[1]=h,!0}function I(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),o.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),P(),_({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),O()}return d.event=function(i){i.each((function(){var i=n.of(this,arguments),r={x:a,y:s,i:t,j:e},l=this.__chart__||r;this.__chart__=r,zs?o.select(this).transition().each("start.brush",(function(){t=l.i,e=l.j,a=l.x,s=l.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var n=ao(a,r.x),o=ao(s,r.y);return t=e=null,function(t){a=r.x=n(t),s=r.y=o(t),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=r.i,e=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},d.x=function(t){return arguments.length?(c=Ks[!(i=t)<<1|!r],d):i},d.y=function(t){return arguments.length?(c=Ks[!i<<1|!(r=t)],d):r},d.clamp=function(t){return arguments.length?(i&&r?(l=!!t[0],u=!!t[1]):i?l=!!t:r&&(u=!!t),d):i&&r?[l,u]:i?l:r?u:null},d.extent=function(n){var o,l,u,h,c;return arguments.length?(i&&(o=n[0],l=n[1],r&&(o=o[0],l=l[0]),t=[o,l],i.invert&&(o=i(o),l=i(l)),l<o&&(c=o,o=l,l=c),o==a[0]&&l==a[1]||(a=[o,l])),r&&(u=n[0],h=n[1],i&&(u=u[1],h=h[1]),e=[u,h],r.invert&&(u=r(u),h=r(h)),h<u&&(c=u,u=h,h=c),u==s[0]&&h==s[1]||(s=[u,h])),d):(i&&(t?(o=t[0],l=t[1]):(o=a[0],l=a[1],i.invert&&(o=i.invert(o),l=i.invert(l)),l<o&&(c=o,o=l,l=c))),r&&(e?(u=e[0],h=e[1]):(u=s[0],h=s[1],r.invert&&(u=r.invert(u),h=r.invert(h)),h<u&&(c=u,u=h,h=c))),i&&r?[[o,u],[l,h]]:i?[o,l]:r&&[u,h])},d.clear=function(){return d.empty()||(a=[0,0],s=[0,0],t=e=null),d},d.empty=function(){return!!i&&a[0]==a[1]||!!r&&s[0]==s[1]},o.rebind(d,n,"on")};var Ys={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ks=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Js=ze.format=pn.timeFormat,Qs=Js.utc,tl=Qs("%Y-%m-%dT%H:%M:%S.%LZ");function el(t){return t.toISOString()}function nl(t,e,n){function i(e){return t(e)}function r(t,n){var i=(t[1]-t[0])/n,r=o.bisect(rl,i);return r==rl.length?[e.year,Ra(t.map((function(t){return t/31536e6})),n)[2]]:r?e[i/rl[r-1]<rl[r]/i?r-1:r]:[sl,Ra(t,n)[2]]}return i.invert=function(e){return il(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(il)},i.nice=function(t,e){var n=i.domain(),o=Pa(n),a=null==t?r(o,10):"number"==typeof t&&r(o,t);function s(n){return!isNaN(n)&&!t.range(n,il(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(Aa(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=il(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=il(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Pa(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],il(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return nl(t.copy(),e,n)},Na(i,t)}function il(t){return new Date(t)}Js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?el:tl,el.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},el.toString=tl.toString,ze.second=Fe((function(t){return new Ve(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))}),(function(t){return t.getSeconds()})),ze.seconds=ze.second.range,ze.seconds.utc=ze.second.utc.range,ze.minute=Fe((function(t){return new Ve(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))}),(function(t){return t.getMinutes()})),ze.minutes=ze.minute.range,ze.minutes.utc=ze.minute.utc.range,ze.hour=Fe((function(t){var e=t.getTimezoneOffset()/60;return new Ve(36e5*(Math.floor(t/36e5-e)+e))}),(function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))}),(function(t){return t.getHours()})),ze.hours=ze.hour.range,ze.hours.utc=ze.hour.utc.range,ze.month=Fe((function(t){return(t=ze.day(t)).setDate(1),t}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t){return t.getMonth()})),ze.months=ze.month.range,ze.months.utc=ze.month.utc.range;var rl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ol=[[ze.second,1],[ze.second,5],[ze.second,15],[ze.second,30],[ze.minute,1],[ze.minute,5],[ze.minute,15],[ze.minute,30],[ze.hour,1],[ze.hour,3],[ze.hour,6],[ze.hour,12],[ze.day,1],[ze.day,2],[ze.week,1],[ze.month,1],[ze.month,3],[ze.year,1]],al=Js.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Qn]]),sl={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(il)},floor:I,ceil:I};ol.year=ze.year,ze.scale=function(){return nl(o.scale.linear(),ol,al)};var ll=ol.map((function(t){return[t[0].utc,t[1]]})),ul=Qs.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Qn]]);function hl(t){return JSON.parse(t.responseText)}function cl(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}ll.year=ze.year.utc,ze.scale.utc=function(){return nl(o.scale.linear(),ll,ul)},o.text=we((function(t){return t.responseText})),o.json=function(t,e){return be(t,"application/json",hl,e)},o.html=function(t,e){return be(t,"text/html",cl,e)},o.xml=we((function(t){return t.responseXML})),this.d3=o,void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)}()},4063:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var a=o[r];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},4977:t=>{"use strict";function e(t,e,n,i,r,o){this._color=t,this.key=e,this.value=n,this.left=i,this.right=r,this._count=o}function n(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function i(t,n){return new e(t,n.key,n.value,n.left,n.right,n._count)}function r(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function o(t,e){this._compare=t,this.root=e}t.exports=function(t){return new o(t||f,null)};var a=o.prototype;function s(t,e){var n;return e.left&&(n=s(t,e.left))?n:(n=t(e.key,e.value))||(e.right?s(t,e.right):void 0)}function l(t,e,n,i){if(e(t,i.key)<=0){var r;if(i.left&&(r=l(t,e,n,i.left)))return r;if(r=n(i.key,i.value))return r}if(i.right)return l(t,e,n,i.right)}function u(t,e,n,i,r){var o,a=n(t,r.key),s=n(e,r.key);if(a<=0){if(r.left&&(o=u(t,e,n,i,r.left)))return o;if(s>0&&(o=i(r.key,r.value)))return o}if(s>0&&r.right)return u(t,e,n,i,r.right)}function h(t,e){this.tree=t,this._stack=e}Object.defineProperty(a,"keys",{get:function(){var t=[];return this.forEach((function(e,n){t.push(e)})),t}}),Object.defineProperty(a,"values",{get:function(){var t=[];return this.forEach((function(e,n){t.push(n)})),t}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(t,n){for(var a=this._compare,s=this.root,l=[],u=[];s;){var h=a(t,s.key);l.push(s),u.push(h),s=h<=0?s.left:s.right}l.push(new e(0,t,n,null,null,1));for(var c=l.length-2;c>=0;--c)s=l[c],u[c]<=0?l[c]=new e(s._color,s.key,s.value,l[c+1],s.right,s._count+1):l[c]=new e(s._color,s.key,s.value,s.left,l[c+1],s._count+1);for(c=l.length-1;c>1;--c){var d=l[c-1];if(s=l[c],1===d._color||1===s._color)break;var f=l[c-2];if(f.left===d)if(d.left===s){if(!(p=f.right)||0!==p._color){f._color=0,f.left=d.right,d._color=1,d.right=f,l[c-2]=d,l[c-1]=s,r(f),r(d),c>=3&&((g=l[c-3]).left===f?g.left=d:g.right=d);break}d._color=1,f.right=i(1,p),f._color=0,c-=1}else{if(!(p=f.right)||0!==p._color){d.right=s.left,f._color=0,f.left=s.right,s._color=1,s.left=d,s.right=f,l[c-2]=s,l[c-1]=d,r(f),r(d),r(s),c>=3&&((g=l[c-3]).left===f?g.left=s:g.right=s);break}d._color=1,f.right=i(1,p),f._color=0,c-=1}else if(d.right===s){if(!(p=f.left)||0!==p._color){f._color=0,f.right=d.left,d._color=1,d.left=f,l[c-2]=d,l[c-1]=s,r(f),r(d),c>=3&&((g=l[c-3]).right===f?g.right=d:g.left=d);break}d._color=1,f.left=i(1,p),f._color=0,c-=1}else{var p;if(!(p=f.left)||0!==p._color){var g;d.left=s.right,f._color=0,f.right=s.left,s._color=1,s.right=d,s.left=f,l[c-2]=s,l[c-1]=d,r(f),r(d),r(s),c>=3&&((g=l[c-3]).right===f?g.right=s:g.left=s);break}d._color=1,f.left=i(1,p),f._color=0,c-=1}}return l[0]._color=1,new o(a,l[0])},a.forEach=function(t,e,n){if(this.root)switch(arguments.length){case 1:return s(t,this.root);case 2:return l(e,this._compare,t,this.root);case 3:if(this._compare(e,n)>=0)return;return u(e,n,this._compare,t,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new h(this,t)}}),Object.defineProperty(a,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new h(this,t)}}),a.at=function(t){if(t<0)return new h(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new h(this,n);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new h(this,[])},a.ge=function(t){for(var e=this._compare,n=this.root,i=[],r=0;n;){var o=e(t,n.key);i.push(n),o<=0&&(r=i.length),n=o<=0?n.left:n.right}return i.length=r,new h(this,i)},a.gt=function(t){for(var e=this._compare,n=this.root,i=[],r=0;n;){var o=e(t,n.key);i.push(n),o<0&&(r=i.length),n=o<0?n.left:n.right}return i.length=r,new h(this,i)},a.lt=function(t){for(var e=this._compare,n=this.root,i=[],r=0;n;){var o=e(t,n.key);i.push(n),o>0&&(r=i.length),n=o<=0?n.left:n.right}return i.length=r,new h(this,i)},a.le=function(t){for(var e=this._compare,n=this.root,i=[],r=0;n;){var o=e(t,n.key);i.push(n),o>=0&&(r=i.length),n=o<0?n.left:n.right}return i.length=r,new h(this,i)},a.find=function(t){for(var e=this._compare,n=this.root,i=[];n;){var r=e(t,n.key);if(i.push(n),0===r)return new h(this,i);n=r<=0?n.left:n.right}return new h(this,[])},a.remove=function(t){var e=this.find(t);return e?e.remove():this},a.get=function(t){for(var e=this._compare,n=this.root;n;){var i=e(t,n.key);if(0===i)return n.value;n=i<=0?n.left:n.right}};var c=h.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function f(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(c,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(c,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),c.clone=function(){return new h(this.tree,this._stack.slice())},c.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var a=new Array(t.length),s=t[t.length-1];a[a.length-1]=new e(s._color,s.key,s.value,s.left,s.right,s._count);for(var l=t.length-2;l>=0;--l)(s=t[l]).left===t[l+1]?a[l]=new e(s._color,s.key,s.value,a[l+1],s.right,s._count):a[l]=new e(s._color,s.key,s.value,s.left,a[l+1],s._count);if((s=a[a.length-1]).left&&s.right){var u=a.length;for(s=s.left;s.right;)a.push(s),s=s.right;var h=a[u-1];for(a.push(new e(s._color,h.key,h.value,s.left,s.right,s._count)),a[u-1].key=s.key,a[u-1].value=s.value,l=a.length-2;l>=u;--l)s=a[l],a[l]=new e(s._color,s.key,s.value,s.left,a[l+1],s._count);a[u-1].left=a[u]}if(0===(s=a[a.length-1])._color){var c=a[a.length-2];for(c.left===s?c.left=null:c.right===s&&(c.right=null),a.pop(),l=0;l<a.length;++l)a[l]._count--;return new o(this.tree._compare,a[0])}if(s.left||s.right){for(s.left?d(s,s.left):s.right&&d(s,s.right),s._color=1,l=0;l<a.length-1;++l)a[l]._count--;return new o(this.tree._compare,a[0])}if(1===a.length)return new o(this.tree._compare,null);for(l=0;l<a.length;++l)a[l]._count--;var f=a[a.length-2];return function(t){for(var e,o,a,s,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=1);if((o=t[l-1]).left===e){if((a=o.right).right&&0===a.right._color)return s=(a=o.right=n(a)).right=n(a.right),o.right=a.left,a.left=o,a.right=s,a._color=o._color,e._color=1,o._color=1,s._color=1,r(o),r(a),l>1&&((u=t[l-2]).left===o?u.left=a:u.right=a),void(t[l-1]=a);if(a.left&&0===a.left._color)return s=(a=o.right=n(a)).left=n(a.left),o.right=s.left,a.left=s.right,s.left=o,s.right=a,s._color=o._color,o._color=1,a._color=1,e._color=1,r(o),r(a),r(s),l>1&&((u=t[l-2]).left===o?u.left=s:u.right=s),void(t[l-1]=s);if(1===a._color){if(0===o._color)return o._color=1,void(o.right=i(0,a));o.right=i(0,a);continue}a=n(a),o.right=a.left,a.left=o,a._color=o._color,o._color=0,r(o),r(a),l>1&&((u=t[l-2]).left===o?u.left=a:u.right=a),t[l-1]=a,t[l]=o,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if((a=o.left).left&&0===a.left._color)return s=(a=o.left=n(a)).left=n(a.left),o.left=a.right,a.right=o,a.left=s,a._color=o._color,e._color=1,o._color=1,s._color=1,r(o),r(a),l>1&&((u=t[l-2]).right===o?u.right=a:u.left=a),void(t[l-1]=a);if(a.right&&0===a.right._color)return s=(a=o.left=n(a)).right=n(a.right),o.left=s.right,a.right=s.left,s.right=o,s.left=a,s._color=o._color,o._color=1,a._color=1,e._color=1,r(o),r(a),r(s),l>1&&((u=t[l-2]).right===o?u.right=s:u.left=s),void(t[l-1]=s);if(1===a._color){if(0===o._color)return o._color=1,void(o.left=i(0,a));o.left=i(0,a);continue}var u;a=n(a),o.left=a.right,a.right=o,a._color=o._color,o._color=0,r(o),r(a),l>1&&((u=t[l-2]).right===o?u.right=a:u.left=a),t[l-1]=a,t[l]=o,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}(a),f.left===s?f.left=null:f.right=null,new o(this.tree._compare,a[0])},Object.defineProperty(c,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(c,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(c,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var n=this.tree.root;return n?n._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var i=e.length-2;i>=0;--i)e[i+1]===e[i].right&&(++t,e[i].left&&(t+=e[i].left._count));return t},enumerable:!0}),c.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(c,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),c.update=function(t){var n=this._stack;if(0===n.length)throw new Error("Can't update empty node!");var i=new Array(n.length),r=n[n.length-1];i[i.length-1]=new e(r._color,r.key,t,r.left,r.right,r._count);for(var a=n.length-2;a>=0;--a)(r=n[a]).left===n[a+1]?i[a]=new e(r._color,r.key,r.value,i[a+1],r.right,r._count):i[a]=new e(r._color,r.key,r.value,r.left,i[a+1],r._count);return new o(this.tree._compare,i[0])},c.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(c,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},821:(t,e,n)=>{"use strict";var i=n(3076);function r(t,e,n,i,r){this.mid=t,this.left=e,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(e?e.count:0)+(n?n.count:0)+i.length}t.exports=function(t){return t&&0!==t.length?new v(m(t)):new v(null)};var o=r.prototype;function a(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function s(t,e){var n=m(e);t.mid=n.mid,t.left=n.left,t.right=n.right,t.leftPoints=n.leftPoints,t.rightPoints=n.rightPoints,t.count=n.count}function l(t,e){var n=t.intervals([]);n.push(e),s(t,n)}function u(t,e){var n=t.intervals([]),i=n.indexOf(e);return i<0?0:(n.splice(i,1),s(t,n),1)}function h(t,e,n){for(var i=0;i<t.length&&t[i][0]<=e;++i){var r=n(t[i]);if(r)return r}}function c(t,e,n){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var r=n(t[i]);if(r)return r}}function d(t,e){for(var n=0;n<t.length;++n){var i=e(t[n]);if(i)return i}}function f(t,e){return t-e}function p(t,e){return t[0]-e[0]||t[1]-e[1]}function g(t,e){return t[1]-e[1]||t[0]-e[0]}function m(t){if(0===t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t[n][0],t[n][1]);e.sort(f);var i=e[e.length>>1],o=[],a=[],s=[];for(n=0;n<t.length;++n){var l=t[n];l[1]<i?o.push(l):i<l[0]?a.push(l):s.push(l)}var u=s,h=s.slice();return u.sort(p),h.sort(g),new r(i,m(o),m(a),u,h)}function v(t){this.root=t}o.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},o.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?l(this,t):this.left.insert(t):this.left=m([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?l(this,t):this.right.insert(t):this.right=m([t]);else{var n=i.ge(this.leftPoints,t,p),r=i.ge(this.rightPoints,t,g);this.leftPoints.splice(n,0,t),this.rightPoints.splice(r,0,t)}},o.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?u(this,t):2===(s=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?u(this,t):2===(s=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var n=this,r=this.left;r.right;)n=r,r=r.right;if(n===this)r.right=this.right;else{var o=this.left,s=this.right;n.count-=r.count,n.right=r.left,r.left=o,r.right=s}a(this,r),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(o=i.ge(this.leftPoints,t,p);o<this.leftPoints.length&&this.leftPoints[o][0]===t[0];++o)if(this.leftPoints[o]===t)for(this.count-=1,this.leftPoints.splice(o,1),s=i.ge(this.rightPoints,t,g);s<this.rightPoints.length&&this.rightPoints[s][1]===t[1];++s)if(this.rightPoints[s]===t)return this.rightPoints.splice(s,1),1;return 0},o.queryPoint=function(t,e){return t<this.mid?this.left&&(n=this.left.queryPoint(t,e))?n:h(this.leftPoints,t,e):t>this.mid?this.right&&(n=this.right.queryPoint(t,e))?n:c(this.rightPoints,t,e):d(this.leftPoints,e);var n},o.queryInterval=function(t,e,n){var i;return t<this.mid&&this.left&&(i=this.left.queryInterval(t,e,n))||e>this.mid&&this.right&&(i=this.right.queryInterval(t,e,n))?i:e<this.mid?h(this.leftPoints,e,n):t>this.mid?c(this.rightPoints,t,n):d(this.leftPoints,n)};var y=v.prototype;y.insert=function(t){this.root?this.root.insert(t):this.root=new r(t[0],null,null,[t],[t])},y.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},y.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},y.queryInterval=function(t,e,n){if(t<=e&&this.root)return this.root.queryInterval(t,e,n)},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},6907:t=>{"use strict";t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},8738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},9461:t=>{"use strict";var e=t.exports=function(t,e,i){"function"==typeof e&&(i=e,e={}),n(e,"function"==typeof(i=e.cb||i)?i:i.pre||function(){},i.post||function(){},t,"",t)};function n(t,i,r,o,a,s,l,u,h,c){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in i(o,a,s,l,u,h,c),o){var f=o[d];if(Array.isArray(f)){if(d in e.arrayKeywords)for(var p=0;p<f.length;p++)n(t,i,r,f[p],a+"/"+d+"/"+p,s,a,d,o,p)}else if(d in e.propsKeywords){if(f&&"object"==typeof f)for(var g in f)n(t,i,r,f[g],a+"/"+d+"/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,d,o,g)}else(d in e.keywords||t.allKeys&&!(d in e.skipKeywords))&&n(t,i,r,f,a+"/"+d,s,a,d,o)}r(o,a,s,l,u,h,c)}}e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},4216:(t,e)=>{"use strict";var n={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},i="a".charCodeAt();e.parse=function(t,e,r){var o={},a=0,s=0,l=0,u=r&&r.bigint&&"undefined"!=typeof BigInt;return{data:function e(n,i){var r;h(),y(n,"value");var o=f();switch(o){case"t":d("rue"),r=!0;break;case"f":d("alse"),r=!1;break;case"n":d("ull"),r=null;break;case'"':r=c();break;case"[":r=function(t){h();var n=[],i=0;if("]"==f())return n;for(p();;){var r=t+"/"+i;n.push(e(r)),h();var o=f();if("]"==o)break;","!=o&&b(),h(),i++}return n}(n);break;case"{":r=function(t){h();var n={};if("}"==f())return n;for(p();;){var i=x();'"'!=f()&&b();var r=c(),o=t+"/"+g(r);_(o,"key",i),y(o,"keyEnd"),h(),":"!=f()&&b(),h(),n[r]=e(o),h();var a=f();if("}"==a)break;","!=a&&b(),h()}return n}(n);break;default:p(),"-0123456789".indexOf(o)>=0?r=function(){var e="",n=!0;"-"==t[l]&&(e+=f()),e+="0"==t[l]?f():v(),"."==t[l]&&(e+=f()+v(),n=!1),"e"!=t[l]&&"E"!=t[l]||(e+=f(),"+"!=t[l]&&"-"!=t[l]||(e+=f()),e+=v(),n=!1);var i=+e;return u&&n&&(i>Number.MAX_SAFE_INTEGER||i<Number.MIN_SAFE_INTEGER)?BigInt(e):i}():w()}return y(n,"valueEnd"),h(),i&&l<t.length&&w(),r}("",!0),pointers:o};function h(){t:for(;l<t.length;){switch(t[l]){case" ":s++;break;case"\t":s+=4;break;case"\r":s=0;break;case"\n":s=0,a++;break;default:break t}l++}}function c(){for(var t,e="";'"'!=(t=f());)"\\"==t?(t=f())in n?e+=n[t]:"u"==t?e+=m():b():e+=t;return e}function d(t){for(var e=0;e<t.length;e++)f()!==t[e]&&b()}function f(){S();var e=t[l];return l++,s++,e}function p(){l--,s--}function m(){for(var t=4,e=0;t--;){e<<=4;var n=f().toLowerCase();n>="a"&&n<="f"?e+=n.charCodeAt()-i+10:n>="0"&&n<="9"?e+=+n:b()}return String.fromCharCode(e)}function v(){for(var e="";t[l]>="0"&&t[l]<="9";)e+=f();if(e.length)return e;S(),w()}function y(t,e){_(t,e,x())}function _(t,e,n){o[t]=o[t]||{},o[t][e]=n}function x(){return{line:a,column:s,pos:l}}function w(){throw new SyntaxError("Unexpected token "+t[l]+" in JSON at position "+l)}function b(){p(),w()}function S(){if(l>=t.length)throw new SyntaxError("Unexpected end of JSON input")}},e.stringify=function(t,e,n){if(o(t)){var i,r,a=0,s="object"==typeof n?n.space:n;switch(typeof s){case"number":var l=s>10?10:s<0?0:Math.floor(s);s=l&&w(l," "),i=l,r=l;break;case"string":s=s.slice(0,10),i=0,r=0;for(var u=0;u<s.length;u++){switch(s[u]){case" ":r++;break;case"\t":r+=4;break;case"\r":r=0;break;case"\n":r=0,a++;break;default:throw new Error("whitespace characters not allowed in JSON")}i++}break;default:s=void 0}var h="",c={},f=0,p=0,m=0,v=n&&n.es6&&"function"==typeof Map;return function t(e,n,i){switch(x(i,"value"),typeof e){case"number":case"bigint":case"boolean":y(""+e);break;case"string":y(d(e));break;case"object":null===e?y("null"):"function"==typeof e.toJSON?y(d(e.toJSON())):Array.isArray(e)?r():v?e.constructor.BYTES_PER_ELEMENT?r():e instanceof Map?l():e instanceof Set?l(!0):a():a()}function r(){if(e.length){y("[");for(var r=n+1,a=0;a<e.length;a++){a&&y(","),_(r);var s=o(e[a])?e[a]:null;t(s,r,i+"/"+a)}_(n),y("]")}else y("[]")}function a(){var r=Object.keys(e);if(r.length){y("{");for(var a=n+1,l=0;l<r.length;l++){var u=r[l],h=e[u];if(o(h)){l&&y(",");var c=i+"/"+g(u);_(a),x(c,"key"),y(d(u)),x(c,"keyEnd"),y(":"),s&&y(" "),t(h,a,c)}}_(n),y("}")}else y("{}")}function l(r){if(e.size){y("{");for(var a=n+1,l=!0,u=e.entries(),h=u.next();!h.done;){var c=h.value,f=c[0],p=!!r||c[1];if(o(p)){l||y(","),l=!1;var m=i+"/"+g(f);_(a),x(m,"key"),y(d(f)),x(m,"keyEnd"),y(":"),s&&y(" "),t(p,a,m)}h=u.next()}_(n),y("}")}else y("{}")}x(i,"valueEnd")}(t,0,""),{json:h,pointers:c}}function y(t){p+=t.length,m+=t.length,h+=t}function _(t){if(s){for(h+="\n"+w(t,s),f++,p=0;t--;)a?(f+=a,p=r):p+=r,m+=i;m+=1}}function x(t,e){c[t]=c[t]||{},c[t][e]={line:f,column:p,pos:m}}function w(t,e){return Array(t+1).join(e)}};var r=["number","bigint","boolean","string","object"];function o(t){return r.indexOf(typeof t)>=0}var a=/"|\\/g,s=/[\b]/g,l=/\f/g,u=/\n/g,h=/\r/g,c=/\t/g;function d(t){return'"'+(t=t.replace(a,"\\$&").replace(l,"\\f").replace(s,"\\b").replace(u,"\\n").replace(h,"\\r").replace(c,"\\t"))+'"'}var f=/~/g,p=/\//g;function g(t){return t.replace(f,"~0").replace(p,"~1")}},9592:t=>{var e=function(){var t,e=!0,n={},i=function(){"use strict";var t,e,n,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:n}},a=function(i){return i&&i!==e&&o("Expected '"+i+"' instead of '"+e+"'"),e=n.charAt(t),t+=1,e},s=function(){var t,n="";for("-"===e&&(n="-",a("-"));e>="0"&&e<="9";)n+=e,a();if("."===e)for(n+=".";a()&&e>="0"&&e<="9";)n+=e;if("e"===e||"E"===e)for(n+=e,a(),"-"!==e&&"+"!==e||(n+=e,a());e>="0"&&e<="9";)n+=e,a();if(t=+n,isFinite(t))return t;o("Bad number")},l=function(){var t,n,i,s="";if('"'===e)for(;a();){if('"'===e)return a(),s;if("\\"===e)if(a(),"u"===e){for(i=0,n=0;n<4&&(t=parseInt(a(),16),isFinite(t));n+=1)i=16*i+t;s+=String.fromCharCode(i)}else{if("string"!=typeof r[e])break;s+=r[e]}else s+=e}o("Bad string")},u=function(){for(;e&&e<=" ";)a()};return i=function(){switch(u(),e){case"{":return function(){var t,n={};if("{"===e){if(a("{"),u(),"}"===e)return a("}"),n;for(;e;){if(t=l(),u(),a(":"),Object.hasOwnProperty.call(n,t)&&o("Duplicate key '"+t+"'"),n[t]=i(),u(),"}"===e)return a("}"),n;a(","),u()}}o("Bad object")}();case"[":return function(){var t=[];if("["===e){if(a("["),u(),"]"===e)return a("]"),t;for(;e;){if(t.push(i()),u(),"]"===e)return a("]"),t;a(","),u()}}o("Bad array")}();case'"':return l();case"-":return s();default:return e>="0"&&e<="9"?s():function(){switch(e){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+e+"'")}()}},function(r,a){var s;return n=r,t=0,e=" ",s=i(),u(),e&&o("Syntax error"),"function"==typeof a?function t(e,n){var i,r,o=e[n];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(r=t(o,i))?o[i]=r:delete o[i]);return a.call(e,n,o)}({"":s},""):s}}(),r=((t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={};break;case 14:case 19:this.$=o[s-1];break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[];break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,a="",s=0,l=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;function c(){var t;return"number"!=typeof(t=e.lexer.lex()||1)&&(t=e.symbols_[t]||t),t}r.push(h),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,p,g,m,v,y,_,x,w={};;){if(p=n[n.length-1],this.defaultActions[p]?g=this.defaultActions[p]:(null==d&&(d=c()),g=o[p]&&o[p][d]),void 0===g||!g.length||!g[0]){if(!u){for(v in x=[],o[p])this.terminals_[v]&&v>2&&x.push("'"+this.terminals_[v]+"'");var b="";b=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+this.terminals_[d]+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(b,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:x})}if(3==u){if(1==d)throw new Error(b||"Parsing halted.");l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,d=c()}for(;!(2..toString()in o[p]);){if(0==p)throw new Error(b||"Parsing halted.");1,n.length=n.length-2,i.length=i.length-1,r.length=r.length-1,p=n[n.length-1]}f=d,d=2,g=o[p=n[n.length-1]]&&o[p][2],u=3}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+d);switch(g[0]){case 1:n.push(d),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),d=null,f?(d=f,f=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[g[1]][1],w.$=i[i.length-y],w._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},void 0!==(m=this.performAction.call(w,a,l,s,this.yy,g[1],i,r)))return m;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),i.push(w.$),r.push(w._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(n=this._input.match(this.rules[o[a]]))||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?((r=e[0].match(/\n.*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n,i){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},t),o=r.parse;return r.parse=function(t){var n=o.call(r,t),a=void 0===i?e("./doug-json-parse"):i;try{a(t)}catch(e){if(/Duplicate key|Bad string|Unexpected/.test(e.message)){var s=t.substring(0,e.at).split("\n"),l=s.length,u=s[l-1].length-1;throw this.parseError(e.message,{line:l,col:u,message:e.message.replace(/./,(function(t){return t.toLowerCase()}))}),SyntaxError(e.message+" on line "+l)}}return n},void 0!==n&&(n.parser=r,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if("undefined"!=typeof process)var i=e("fs").readFileSync(e("path").join(process.cwd(),t[1]),"utf8");else i=e("file").path(e("file").cwd()).join(t[1]).read({charset:"utf-8"});return n.parser.parse(i)},!1===e.main&&n.main("undefined"!=typeof process?process.argv.slice(1):e("system").args)),n}();t.exports&&(t.exports=e)},8399:function(t,e,n){t.exports=function(){"use strict";var t,e,i={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){return t||0===t},a=function(t){return"function"==typeof t},s=function(t){return Array.isArray(t)},l=function(t){return"string"==typeof t},u=function(t){return void 0===t},h=function(t){return void 0!==t},c=function(t){return 10*Math.ceil(t/10)},d=function(t){return Math.ceil(t)+.5},f=function(t){return t[1]-t[0]},p=function(t){return null==t||l(t)&&0===t.length||"object"===(void 0===t?"undefined":r(t))&&0===Object.keys(t).length},g=function(t){return!S.isEmpty(t)},m=function(t,e,n){return h(t[e])?t[e]:n},v=function(t,e){var n=!1;return Object.keys(t).forEach((function(i){t[i]===e&&(n=!0)})),n},y=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},_=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:e.width,height:e.height}};function x(t,e){var n=this;n.component=t,n.params=e||{},n.d3=t.d3,n.scale=n.d3.scale.linear(),n.range,n.orient="bottom",n.innerTickSize=6,n.outerTickSize=this.params.withOuterTick?6:0,n.tickPadding=3,n.tickValues=null,n.tickFormat,n.tickArguments,n.tickOffset=0,n.tickCulling=!0,n.tickCentered,n.tickTextCharSize,n.tickTextRotate=n.params.tickTextRotate,n.tickLength,n.axis=n.generateAxis()}(e=x.prototype).axisX=function(t,e,n){t.attr("transform",(function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"}))},e.axisY=function(t,e){t.attr("transform",(function(t){return"translate(0,"+Math.ceil(e(t))+")"}))},e.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},e.generateTicks=function(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return i.length>0&&i[0]>0&&i.unshift(i[0]-(i[1]-i[0])),i},e.copyScale=function(){var t,e=this,n=e.scale.copy();return e.params.isCategory&&(t=e.scale.domain(),n.domain([t[0],t[1]-1])),n},e.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},e.updateRange=function(){var t=this;return t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range()),t.range},e.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var n={h:11.5,w:5.5};return t.select("text").text((function(t){return e.textFormatted(t)})).each((function(t){var i=this.getBoundingClientRect(),r=e.textFormatted(t),o=i.height,a=r?i.width/r.length:void 0;o&&a&&(n.h=o,n.w=a)})).text(""),e.tickTextCharSize=n,n},e.transitionise=function(t){return this.params.withoutTransition?t:this.d3.transition(t)},e.isVertical=function(){return"left"===this.orient||"right"===this.orient},e.tspanData=function(t,e,n,i){var r=this,o=r.params.tickMultiline?r.splitTickText(t,n,i):[].concat(r.textFormatted(t));return r.params.tickMultiline&&r.params.tickMultilineMax>0&&(o=r.ellipsify(o,r.params.tickMultilineMax)),o.map((function(t){return{index:e,splitted:t,length:o.length}}))},e.splitTickText=function(t,e,n){var i,r,o,a=this,s=a.textFormatted(t),l=a.params.tickWidth;if("[object Array]"===Object.prototype.toString.call(s))return s;return(!l||l<=0)&&(l=a.isVertical()?95:a.params.isCategory?Math.ceil(n(e[1])-n(e[0]))-12:110),function t(e,n){r=void 0;for(var s=1;s<n.length;s++)if(" "===n.charAt(s)&&(r=s),i=n.substr(0,s+1),o=a.tickTextCharSize.w*i.length,l<o)return t(e.concat(n.substr(0,r||s)),n.slice(r?r+1:s));return e.concat(n)}([],s+"")},e.ellipsify=function(t,e){if(t.length<=e)return t;for(var n=t.slice(0,e),i=3,r=e-1;r>=0;r--){var o=n[r].length;if(n[r]=n[r].substr(0,o-i).padEnd(o,"."),(i-=o)<=0)break}return n},e.updateTickLength=function(){var t=this;t.tickLength=Math.max(t.innerTickSize,0)+t.tickPadding},e.lineY2=function(t){var e=this,n=e.scale(t)+(e.tickCentered?0:e.tickOffset);return e.range[0]<n&&n<e.range[1]?e.innerTickSize:0},e.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(t>0?1:-1):this.tickLength},e.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},e.textTextAnchor=function(){var t=this.tickTextRotate;return t?t>0?"start":"end":"middle"},e.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},e.tspanDy=function(t,e){var n=this,i=n.tickTextCharSize.h;return 0===e&&(i=n.isVertical()?-((t.length-1)*(n.tickTextCharSize.h/2)-3):".71em"),i},e.generateAxis=function(){var t=this,e=t.d3,n=t.params;function i(r){r.each((function(){var r,o,a,s=i.g=e.select(this),l=this.__chart__||t.scale,u=this.__chart__=t.copyScale(),h=t.tickValues?t.tickValues:t.generateTicks(u),c=s.selectAll(".tick").data(h,u),d=c.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),f=c.exit().remove(),p=t.transitionise(c).style("opacity",1);n.isCategory?(t.tickOffset=Math.ceil((u(1)-u(0))/2),o=t.tickCentered?0:t.tickOffset,a=t.tickCentered?t.tickOffset:0):t.tickOffset=o=0,d.append("line"),d.append("text"),t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(s.select(".tick"));var g=p.select("line"),m=p.select("text"),v=c.select("text").selectAll("tspan").data((function(e,n){return t.tspanData(e,n,h,u)}));v.enter().append("tspan"),v.exit().remove(),v.text((function(t){return t.splitted}));var y=s.selectAll(".domain").data([0]),_=(y.enter().append("path").attr("class","domain"),t.transitionise(y));switch(t.orient){case"bottom":r=t.axisX,g.attr("x1",o).attr("x2",o).attr("y2",(function(e,n){return t.lineY2(e,n)})),m.attr("x",0).attr("y",(function(e,n){return t.textY(e,n)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),v.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),_.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":r=t.axisX,g.attr("x1",o).attr("x2",o).attr("y2",(function(e,n){return-1*t.lineY2(e,n)})),m.attr("x",0).attr("y",(function(e,i){return-1*t.textY(e,i)-(n.isCategory?2:t.tickLength-2)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)})),v.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)})),_.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":r=t.axisY,g.attr("x2",-t.innerTickSize).attr("y1",a).attr("y2",a),m.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),v.attr("x",-t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),_.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":r=t.axisY,g.attr("x2",t.innerTickSize).attr("y1",a).attr("y2",a),m.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),v.attr("x",t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)})),_.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize)}if(u.rangeBand){var x=u,w=x.rangeBand()/2;l=u=function(t){return x(t)+w}}else l.rangeBand?l=u:f.call(r,u,t.tickOffset);d.call(r,l,t.tickOffset),p.call(r,u,t.tickOffset)}))}return i.scale=function(e){return arguments.length?(t.scale=e,i):t.scale},i.orient=function(e){return arguments.length?(t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",i):t.orient},i.tickFormat=function(e){return arguments.length?(t.tickFormat=e,i):t.tickFormat},i.tickCentered=function(e){return arguments.length?(t.tickCentered=e,i):t.tickCentered},i.tickOffset=function(){return t.tickOffset},i.tickInterval=function(){var e;return(e=n.isCategory?2*t.tickOffset:(i.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize)/i.g.selectAll("line").size())==1/0?0:e},i.ticks=function(){return arguments.length?(t.tickArguments=arguments,i):t.tickArguments},i.tickCulling=function(e){return arguments.length?(t.tickCulling=e,i):t.tickCulling},i.tickValues=function(e){if("function"==typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return i},i};var w=function(n){function i(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r={fn:t,internal:{fn:e}},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,"axis",r));return o.d3=n.d3,o.internal=x,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i}((function(t,e,n){this.owner=t,M.chart.internal[e]=n}));(t=w.prototype).init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",i.axis+" "+i.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",i.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",i.axis+" "+i.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",i.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",i.axis+" "+i.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",i.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},t.getXAxis=function(t,e,n,i,r,o,a){var s=this.owner,l=s.config,u={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:l.axis_x_tick_multiline,tickMultilineMax:l.axis_x_tick_multiline?Number(l.axis_x_tick_multilineMax):0,tickWidth:l.axis_x_tick_width,tickTextRotate:a?0:l.axis_x_tick_rotate,withoutTransition:o},h=new this.internal(this,u).axis.scale(t).orient(e);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map((function(t){return s.parseDate(t)}))),h.tickFormat(n).tickValues(i),s.isCategorized()&&(h.tickCentered(l.axis_x_tick_centered),p(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),h},t.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},t.getYAxis=function(t,e,n,i,r,o,a){var s=this.owner,l=s.config,u={withOuterTick:r,withoutTransition:o,tickTextRotate:a?0:l.axis_y_tick_rotate},h=new this.internal(this,u).axis.scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?h.ticks(s.d3.time[l.axis_y_tick_time_value],l.axis_y_tick_time_interval):h.tickValues(i),h},t.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},t.getXAxisTickFormat=function(){var t=this.owner,e=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return t<0?t.toFixed(0):t};return e.axis_x_tick_format&&(a(e.axis_x_tick_format)?n=e.axis_x_tick_format:t.isTimeSeries()&&(n=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),a(n)?function(e){return n.call(t,e)}:n},t.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},t.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},t.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},t.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},t.getLabelOptionByAxisId=function(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},t.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return l(e)?e:e?e.text:null},t.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);l(i)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):i&&(i.text=e)},t.getLabelPosition=function(t,e){var n=this.getLabelOptionByAxisId(t),i=n&&"object"===(void 0===n?"undefined":r(n))&&n.position?n.position:e;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},t.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},t.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},t.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},t.textForXAxisLabel=function(){return this.getLabelText("x")},t.textForYAxisLabel=function(){return this.getLabelText("y")},t.textForY2AxisLabel=function(){return this.getLabelText("y2")},t.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},t.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},t.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},t.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},t.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},t.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},t.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},t.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},t.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},t.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},t.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},t.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},t.getMaxTickWidth=function(t,e){var n,i,r,o,a=this.owner,s=a.config,l=0;return e&&a.currentMaxTickWidths[t]||(a.svg&&(n=a.filterTargetsToShow(a.data.targets),"y"===t?(i=a.y.copy().domain(a.getYDomain(n,"y")),r=this.getYAxis(i,a.yOrient,s.axis_y_tick_format,a.yAxisTickValues,!1,!0,!0)):"y2"===t?(i=a.y2.copy().domain(a.getYDomain(n,"y2")),r=this.getYAxis(i,a.y2Orient,s.axis_y2_tick_format,a.y2AxisTickValues,!1,!0,!0)):(i=a.x.copy().domain(a.getXDomain(n)),r=this.getXAxis(i,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),(o=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each((function(){a.d3.select(this).selectAll("text").each((function(){var t=this.getBoundingClientRect();l<t.width&&(l=t.width)})),o.remove()}))),a.currentMaxTickWidths[t]=l<=0?a.currentMaxTickWidths[t]:l),a.currentMaxTickWidths[t]},t.updateLabels=function(t){var e=this.owner,n=e.main.select("."+i.axisX+" ."+i.axisXLabel),r=e.main.select("."+i.axisY+" ."+i.axisYLabel),o=e.main.select("."+i.axisY2+" ."+i.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?o.transition():o).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},t.getPadding=function(t,e,n,i){var r="number"==typeof t?t:t[e];return o(r)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(r,i):n},t.convertPixelsToAxisPadding=function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},t.generateTickValues=function(t,e,n){var i,r,o,s,l,u,h,c=t;if(e)if(1===(i=a(e)?e():e))c=[t[0]];else if(2===i)c=[t[0],t[t.length-1]];else if(i>2){for(s=i-2,r=t[0],l=((o=t[t.length-1])-r)/(s+1),c=[r],u=0;u<s;u++)h=+r+l*(u+1),c.push(n?new Date(h):h);c.push(o)}return n||(c=c.sort((function(t,e){return t-e}))),c},t.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},t.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)};var b,S,M={version:"0.4.24"};function P(t){var e=this.internal=new T(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function t(e,n,i){Object.keys(e).forEach((function(r){n[r]=e[r].bind(i),Object.keys(e[r]).length>0&&t(e[r],n[r],i)}))}(b,this,this)}function T(t){var e=this;e.d3=window.d3?window.d3:n(5078),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}return M.generate=function(t){return new P(t)},M.chart={fn:P.prototype,internal:{fn:T.prototype}},b=M.chart.fn,(S=M.chart.internal.fn).beforeInit=function(){},S.afterInit=function(){},S.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},S.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},S.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},S.initWithData=function(t){var e,n,r=this,o=r.d3,a=r.config,s=!0;r.axis=new w(r),r.initPie&&r.initPie(),r.initBrush&&r.initBrush(),r.initZoom&&r.initZoom(),a.bindto?"function"==typeof a.bindto.node?r.selectChart=a.bindto:r.selectChart=o.select(a.bindto):r.selectChart=o.selectAll([]),r.selectChart.empty()&&(r.selectChart=o.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),s=!1),r.selectChart.html("").classed("c3",!0),r.data.xs={},r.data.targets=r.convertDataToTargets(t),a.data_filter&&(r.data.targets=r.data.targets.filter(a.data_filter)),a.data_hide&&r.addHiddenTargetIds(!0===a.data_hide?r.mapToIds(r.data.targets):a.data_hide),a.legend_hide&&r.addHiddenLegendIds(!0===a.legend_hide?r.mapToIds(r.data.targets):a.legend_hide),r.updateSizes(),r.updateScales(),r.x.domain(o.extent(r.getXDomain(r.data.targets))),r.y.domain(r.getYDomain(r.data.targets,"y")),r.y2.domain(r.getYDomain(r.data.targets,"y2")),r.subX.domain(r.x.domain()),r.subY.domain(r.y.domain()),r.subY2.domain(r.y2.domain()),r.orgXDomain=r.x.domain(),r.brush&&r.brush.scale(r.subX),a.zoom_enabled&&r.zoom.scale(r.x),r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return a.onmouseover.call(r)})).on("mouseleave",(function(){return a.onmouseout.call(r)})),r.config.svg_classname&&r.svg.attr("class",r.config.svg_classname),e=r.svg.append("defs"),r.clipChart=r.appendClip(e,r.clipId),r.clipXAxis=r.appendClip(e,r.clipIdForXAxis),r.clipYAxis=r.appendClip(e,r.clipIdForYAxis),r.clipGrid=r.appendClip(e,r.clipIdForGrid),r.clipSubchart=r.appendClip(e,r.clipIdForSubchart),r.updateSvgSize(),n=r.main=r.svg.append("g").attr("transform",r.getTranslate("main")),r.initSubchart&&r.initSubchart(),r.initTooltip&&r.initTooltip(),r.initLegend&&r.initLegend(),r.initTitle&&r.initTitle(),n.append("text").attr("class",i.text+" "+i.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),r.initRegion(),r.initGrid(),n.append("g").attr("clip-path",r.clipPath).attr("class",i.chart),a.grid_lines_front&&r.initGridLines(),r.initEventRect(),r.initChartElements(),n.insert("rect",a.zoom_privileged?null:"g."+i.regions).attr("class",i.zoomRect).attr("width",r.width).attr("height",r.height).style("opacity",0).on("dblclick.zoom",null),a.axis_x_extent&&r.brush.extent(r.getDefaultExtent()),r.axis.init(),r.updateTargets(r.data.targets),s&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),r.bindResize(),r.api.element=r.selectChart.node()},S.smoothLines=function(t,e){var n=this;"grid"===e&&t.each((function(){var t=n.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),r=t.attr("y1"),o=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(r),y2:Math.ceil(o)})}))},S.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:n,o=t.hasArcType(),a=e.axis_rotated||o?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!o?e.subchart_size_height+a:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(o?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:a+s+r+t.getCurrentPaddingBottom(),left:o?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:a+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&o&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},S.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},S.showTargets=function(){var t=this;t.svg.selectAll("."+i.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(t.config.transition_duration).style("opacity",1)},S.redraw=function(t,e){var n,r,o,a,s,l,u,h,c,d,f,p,g,v,y,_,x,w,b,S,M,P,T,C,A,L,k,E,O,N=this,I=N.main,R=N.d3,D=N.config,j=N.getShapeIndices(N.isAreaType),z=N.getShapeIndices(N.isBarType),V=N.getShapeIndices(N.isLineType),G=N.hasArcType(),$=N.filterTargetsToShow(N.data.targets),F=N.xv.bind(N);if(n=m(t=t||{},"withY",!0),r=m(t,"withSubchart",!0),o=m(t,"withTransition",!0),l=m(t,"withTransform",!1),u=m(t,"withUpdateXDomain",!1),h=m(t,"withUpdateOrgXDomain",!1),c=m(t,"withTrimXDomain",!0),g=m(t,"withUpdateXAxis",u),d=m(t,"withLegend",!1),f=m(t,"withEventRect",!0),p=m(t,"withDimension",!0),a=m(t,"withTransitionForExit",o),s=m(t,"withTransitionForAxis",o),b=o?D.transition_duration:0,S=a?b:0,M=s?b:0,e=e||N.axis.generateTransitions(M),d&&D.legend_show?N.updateLegend(N.mapToIds(N.data.targets),t,e):p&&N.updateDimension(!0),N.isCategorized()&&0===$.length&&N.x.domain([0,N.axes.x.selectAll(".tick").size()]),$.length?(N.updateXDomain($,u,h,c),D.axis_x_tick_values||(C=N.axis.updateXAxisTickValues($))):(N.xAxis.tickValues([]),N.subXAxis.tickValues([])),D.zoom_rescale&&!t.flow&&(k=N.x.orgDomain()),N.y.domain(N.getYDomain($,"y",k)),N.y2.domain(N.getYDomain($,"y2",k)),!D.axis_y_tick_values&&D.axis_y_tick_count&&N.yAxis.tickValues(N.axis.generateTickValues(N.y.domain(),D.axis_y_tick_count)),!D.axis_y2_tick_values&&D.axis_y2_tick_count&&N.y2Axis.tickValues(N.axis.generateTickValues(N.y2.domain(),D.axis_y2_tick_count)),N.axis.redraw(e,G),N.axis.updateLabels(o),(u||g)&&$.length)if(D.axis_x_tick_culling&&C){for(A=1;A<C.length;A++)if(C.length/A<D.axis_x_tick_culling_max){L=A;break}N.svg.selectAll("."+i.axisX+" .tick text").each((function(t){var e=C.indexOf(t);e>=0&&R.select(this).style("display",e%L?"none":"block")}))}else N.svg.selectAll("."+i.axisX+" .tick text").style("display","block");v=N.generateDrawArea?N.generateDrawArea(j,!1):void 0,y=N.generateDrawBar?N.generateDrawBar(z):void 0,_=N.generateDrawLine?N.generateDrawLine(V,!1):void 0,x=N.generateXYForText(j,z,V,!0),w=N.generateXYForText(j,z,V,!1),n&&(N.subY.domain(N.getYDomain($,"y")),N.subY2.domain(N.getYDomain($,"y2"))),N.updateXgridFocus(),I.select("text."+i.text+"."+i.empty).attr("x",N.width/2).attr("y",N.height/2).text(D.data_empty_label_text).transition().style("opacity",$.length?0:1),N.updateGrid(b),N.updateRegion(b),N.updateBar(S),N.updateLine(S),N.updateArea(S),N.updateCircle(),N.hasDataLabel()&&N.updateText(S),N.redrawTitle&&N.redrawTitle(),N.redrawArc&&N.redrawArc(b,S,l),N.redrawSubchart&&N.redrawSubchart(r,e,b,S,j,z,V),I.selectAll("."+i.selectedCircles).filter(N.isBarType.bind(N)).selectAll("circle").remove(),D.interaction_enabled&&!t.flow&&f&&(N.redrawEventRect(),N.updateZoom&&N.updateZoom()),N.updateCircleY(),E=(N.config.axis_rotated?N.circleY:N.circleX).bind(N),O=(N.config.axis_rotated?N.circleX:N.circleY).bind(N),t.flow&&(T=N.generateFlow({targets:$,flow:t.flow,duration:t.flow.duration,drawBar:y,drawLine:_,drawArea:v,cx:E,cy:O,xv:F,xForText:x,yForText:w})),(b||T)&&N.isTabVisible()?R.transition().duration(b).each((function(){var e=[];[N.redrawBar(y,!0),N.redrawLine(_,!0),N.redrawArea(v,!0),N.redrawCircle(E,O,!0),N.redrawText(x,w,t.flow,!0),N.redrawRegion(!0),N.redrawGrid(!0)].forEach((function(t){t.forEach((function(t){e.push(t)}))})),P=N.generateWait(),e.forEach((function(t){P.add(t)}))})).call(P,(function(){T&&T(),D.onrendered&&D.onrendered.call(N)})):(N.redrawBar(y),N.redrawLine(_),N.redrawArea(v),N.redrawCircle(E,O),N.redrawText(x,w,t.flow),N.redrawRegion(),N.redrawGrid(),D.onrendered&&D.onrendered.call(N)),N.mapToIds(N.data.targets).forEach((function(t){N.withoutFadeIn[t]=!0}))},S.updateAndRedraw=function(t){var e,n=this,i=n.config;(t=t||{}).withTransition=m(t,"withTransition",!0),t.withTransform=m(t,"withTransform",!1),t.withLegend=m(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=m(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&i.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},S.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},S.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},S.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},S.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||g(t.data_xs))},S.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},S.getTranslate=function(t){var e,n,i=this,r=i.config;return"main"===t?(e=d(i.margin.left),n=d(i.margin.top)):"context"===t?(e=d(i.margin2.left),n=d(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=r.axis_rotated?0:i.height):"y"===t?(e=0,n=r.axis_rotated?i.height:0):"y2"===t?(e=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===t?(e=0,n=r.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2-(i.hasType("gauge")?6:0)),"translate("+e+","+n+")"},S.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},S.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},S.opacityForCircle=function(t){var e=(a(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return o(t.value)?this.isScatterType(t)?.5:e:0},S.opacityForText=function(){return this.hasDataLabel()?1:0},S.xx=function(t){return t?this.x(t.x):null},S.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},S.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},S.subxx=function(t){return t?this.subX(t.x):null},S.transformMain=function(t,e){var n,r,o,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+i.axisX),t&&(n=n.transition())),e&&e.axisY?r=e.axisY:(r=a.main.select("."+i.axisY),t&&(r=r.transition())),e&&e.axisY2?o=e.axisY2:(o=a.main.select("."+i.axisY2),t&&(o=o.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),r.attr("transform",a.getTranslate("y")),o.attr("transform",a.getTranslate("y2")),a.main.select("."+i.chartArcs).attr("transform",a.getTranslate("arc"))},S.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},S.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+i.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},S.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},S.observeInserted=function(t){var e,n=this;"undefined"!=typeof MutationObserver?(e=new MutationObserver((function(i){i.forEach((function(i){"childList"===i.type&&i.previousSibling&&(e.disconnect(),n.intervalForObserveInserted=window.setInterval((function(){t.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))}),10))}))}))).observe(t.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},S.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add((function(){e.onresize.call(t)})),e.resize_auto&&t.resizeFunction.add((function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout((function(){delete t.resizeTimeout,t.api.flush()}),100)})),t.resizeFunction.add((function(){e.onresized.call(t)})),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(window.onresize):n=t.generateResize(),n.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&n()}}},S.generateResize=function(){var t=[];function e(){t.forEach((function(t){t()}))}return e.add=function(e){t.push(e)},e.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}},e},S.endall=function(t,e){var n=0;t.each((function(){++n})).each("end",(function(){--n||e.apply(this,arguments)}))},S.generateWait=function(){var t=[],e=function(e,n){var i=setInterval((function(){var e=0;t.forEach((function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}})),e===t.length&&(clearInterval(i),n&&n())}),10)};return e.add=function(e){t.push(e)},e},S.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeFormat(this.config.data_xFormat).parse(t):"object"===(void 0===t?"undefined":r(t))?e=new Date(+t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},S.isTabVisible=function(){var t;return void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),!document[t]},S.isValue=o,S.isFunction=a,S.isString=l,S.isUndefined=u,S.isDefined=h,S.ceil10=c,S.asHalfPixel=d,S.diffDomain=f,S.isEmpty=p,S.notEmpty=g,S.notEmpty=g,S.getOption=m,S.hasValue=v,S.sanitise=y,S.getPathBox=_,S.CLASS=i,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,o){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,i,r,o){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,i,r,o,a){return new window.SVGPathSegArcAbs(void 0,t,e,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,i,r,o,a){return new window.SVGPathSegArcRel(void 0,t,e,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(e.pathSegList.removeItem(n),t>e.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach((function(t){"d"==t.attributeName&&(e=!0)})),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach((function(t){t._owningPathSegList=null})),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),this._list[e]=t,t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),t._owningPathSegList=this,this._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach((function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()})),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var e=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(t){this.pathSegList.push(t)};var i=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,n=1,i=0,r=1,o=1,a=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var l=this._currentIndex-1,u=1;l>=s;)e+=u*(this._string.charAt(l--)-"0"),u*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=a&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var h=e+i;if(h*=r,t&&(h*=Math.pow(10,o*t)),a!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),h}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],n=this._pathSegTypeFromChar(t);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(e,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(e,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(e,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(e,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(e,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(e,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(e,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(e,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var r=new n,o=new i(t);if(!o.initialCommandIsMoveTo())return[];for(;o.hasMoreData();){var a=o.parseSegment();if(!a)return[];r.appendSegment(a)}return r.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),b.axis=function(){},b.axis.labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach((function(n){e.axis.setLabelText(n,t[n])})),e.axis.updateLabels())},b.axis.max=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"===(void 0===t?"undefined":r(t))?(o(t.x)&&(n.axis_x_max=t.x),o(t.y)&&(n.axis_y_max=t.y),o(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},b.axis.min=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"===(void 0===t?"undefined":r(t))?(o(t.x)&&(n.axis_x_min=t.x),o(t.y)&&(n.axis_y_min=t.y),o(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},b.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};h(t.max)&&this.axis.max(t.max),h(t.min)&&this.axis.min(t.min)},b.category=function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},b.categories=function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories},b.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},b.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},b.destroy=function(){var t=this.internal;if(window.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),window.detachEvent)window.detachEvent("onresize",t.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",t.resizeIfElementDisplayed);else{var e=window.onresize;e&&e.add&&e.remove&&e.remove(t.resizeFunction)}return t.resizeFunction.remove(),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach((function(e){t[e]=null})),null},b.color=function(t){return this.internal.color(t)},b.data=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter((function(e){return[].concat(t).indexOf(e.id)>=0}))},b.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},b.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map((function(t){return t.value})):null),n},b.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},b.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},b.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},b.flow=function(t){var e,n,i,r,a,s,l,u=this.internal,c=[],d=u.getMaxDataCount(),f=0,p=0;if(t.json)n=u.convertJsonToData(t.json,t.keys);else if(t.rows)n=u.convertRowsToData(t.rows);else{if(!t.columns)return;n=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(n,!0),u.data.targets.forEach((function(t){var n,i,r=!1;for(n=0;n<e.length;n++)if(t.id===e[n].id){for(r=!0,t.values[t.values.length-1]&&(p=t.values[t.values.length-1].index+1),f=e[n].values.length,i=0;i<f;i++)e[n].values[i].index=p+i,u.isTimeSeries()||(e[n].values[i].x=p+i);t.values=t.values.concat(e[n].values),e.splice(n,1);break}r||c.push(t.id)})),u.data.targets.forEach((function(t){var e,n;for(e=0;e<c.length;e++)if(t.id===c[e])for(p=t.values[t.values.length-1].index+1,n=0;n<f;n++)t.values.push({id:t.id,index:p+n,x:u.isTimeSeries()?u.getOtherTargetX(p+n):p+n,value:null})})),u.data.targets.length&&e.forEach((function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<p;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach((function(t){t.index+=p,u.isTimeSeries()||(t.x+=p)})),t.values=n.concat(t.values)})),u.data.targets=u.data.targets.concat(e),u.getMaxDataCount(),a=(r=u.data.targets[0]).values[0],h(t.to)?(f=0,l=u.isTimeSeries()?u.parseDate(t.to):t.to,r.values.forEach((function(t){t.x<l&&f++}))):h(t.length)&&(f=t.length),d?1===d&&u.isTimeSeries()&&(s=(r.values[r.values.length-1].x-a.x)/2,i=[new Date(+a.x-s),new Date(+a.x+s)],u.updateXDomain(null,!0,!0,!1,i)):(s=u.isTimeSeries()?r.values.length>1?r.values[r.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,i=[a.x-s,a.x],u.updateXDomain(null,!0,!0,!1,i)),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:f,duration:o(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:d},withLegend:!0,withTransition:d>1,withTrimXDomain:!1,withUpdateXAxis:!0})},S.generateFlow=function(t){var e=this,n=e.config,r=e.d3;return function(){var o,a,s,l,u=t.targets,h=t.flow,c=t.drawBar,d=t.drawLine,p=t.drawArea,g=t.cx,m=t.cy,v=t.xv,y=t.xForText,_=t.yForText,x=t.duration,w=h.index,b=h.length,S=e.getValueOnIndex(e.data.targets[0].values,w),M=e.getValueOnIndex(e.data.targets[0].values,w+b),P=e.x.domain(),T=h.duration||x,C=h.done||function(){},A=e.generateWait(),L=e.xgrid||r.selectAll([]),k=e.xgridLines||r.selectAll([]),E=e.mainRegion||r.selectAll([]),O=e.mainText||r.selectAll([]),N=e.mainBar||r.selectAll([]),I=e.mainLine||r.selectAll([]),R=e.mainArea||r.selectAll([]),D=e.mainCircle||r.selectAll([]);e.flowing=!0,e.data.targets.forEach((function(t){t.values.splice(0,b)})),s=e.updateXDomain(u,!0,!0),e.updateXGrid&&e.updateXGrid(!0),h.orgDataCount?o=1===h.orgDataCount||(S&&S.x)===(M&&M.x)||e.isTimeSeries()?e.x(P[0])-e.x(s[0]):e.x(S.x)-e.x(M.x):1!==e.data.targets[0].values.length?o=e.x(P[0])-e.x(s[0]):e.isTimeSeries()?(S=e.getValueOnIndex(e.data.targets[0].values,0),M=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),o=e.x(S.x)-e.x(M.x)):o=f(s)/2,l=f(P)/f(s),a="translate("+o+",0) scale("+l+",1)",e.hideXGridFocus(),r.transition().ease("linear").duration(T).each((function(){A.add(e.axes.x.transition().call(e.xAxis)),A.add(N.transition().attr("transform",a)),A.add(I.transition().attr("transform",a)),A.add(R.transition().attr("transform",a)),A.add(D.transition().attr("transform",a)),A.add(O.transition().attr("transform",a)),A.add(E.filter(e.isRegionOnX).transition().attr("transform",a)),A.add(L.transition().attr("transform",a)),A.add(k.transition().attr("transform",a))})).call(A,(function(){var t,r=[],o=[],a=[];if(b){for(t=0;t<b;t++)r.push("."+i.shape+"-"+(w+t)),o.push("."+i.text+"-"+(w+t)),a.push("."+i.eventRect+"-"+(w+t));e.svg.selectAll("."+i.shapes).selectAll(r).remove(),e.svg.selectAll("."+i.texts).selectAll(o).remove(),e.svg.selectAll("."+i.eventRects).selectAll(a).remove(),e.svg.select("."+i.xgrid).remove()}L.attr("transform",null).attr(e.xgridAttr),k.attr("transform",null),k.select("line").attr("x1",n.axis_rotated?0:v).attr("x2",n.axis_rotated?e.width:v),k.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",v),N.attr("transform",null).attr("d",c),I.attr("transform",null).attr("d",d),R.attr("transform",null).attr("d",p),D.attr("transform",null).attr("cx",g).attr("cy",m),O.attr("transform",null).attr("x",y).attr("y",_).style("fill-opacity",e.opacityForText.bind(e)),E.attr("transform",null),E.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),n.interaction_enabled&&e.redrawEventRect(),C(),e.flowing=!1}))}},b.focus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),e.classed(i.focused,!0).classed(i.defocused,!1),n.hasArcType()&&n.expandArc(t),n.toggleFocusLegend(t,!0),n.focusedTargetIds=t,n.defocusedTargetIds=n.defocusedTargetIds.filter((function(e){return t.indexOf(e)<0}))},b.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(i.focused,!1).classed(i.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter((function(e){return t.indexOf(e)<0})),e.defocusedTargetIds=t},b.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(i.focused,!1).classed(i.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter((function(){return e.d3.select(this).classed(i.legendItemFocused)})).classed(i.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},b.xgrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},b.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},b.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},b.ygrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},b.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},b.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},b.groups=function(t){var e=this.internal,n=e.config;return u(t)||(n.data_groups=t,e.redraw()),n.data_groups},b.legend=function(){},b.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},b.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},b.load=function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&b.data.names.bind(this)(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){n.data_classes[e]=t.classes[e]})),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){n.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){n.data_colors[e]=t.colors[e]})),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):"unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),(function(){e.loadFromArgs(t)})):e.loadFromArgs(t)},b.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),(function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()}))},b.regions=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),n.regions):n.regions},b.regions.add=function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},b.regions.remove=function(t){var e,n,r,o=this.internal,a=o.config;return t=t||{},e=o.getOption(t,"duration",a.transition_duration),n=o.getOption(t,"classes",[i.region]),r=o.main.select("."+i.regions).selectAll(n.map((function(t){return"."+t}))),(e?r.transition().duration(e):r).style("opacity",0).remove(),a.regions=a.regions.filter((function(t){var e=!1;return!t.class||(t.class.split(" ").forEach((function(t){n.indexOf(t)>=0&&(e=!0)})),!e)})),a.regions},b.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+i.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+i.shape).filter((function(){return n.select(this).classed(i.SELECTED)})).map((function(t){return t.map((function(t){var e=t.__data__;return e.data?e.data:e}))})))},b.select=function(t,e,n){var r=this.internal,o=r.d3,a=r.config;a.data_selection_enabled&&r.main.selectAll("."+i.shapes).selectAll("."+i.shape).each((function(s,l){var u=o.select(this),c=s.data?s.data.id:s.id,d=r.getToggle(this,s).bind(r),f=a.data_selection_grouped||!t||t.indexOf(c)>=0,p=!e||e.indexOf(l)>=0,g=u.classed(i.SELECTED);u.classed(i.line)||u.classed(i.area)||(f&&p?a.data_selection_isselectable(s)&&!g&&d(!0,u.classed(i.SELECTED,!0),s,l):h(n)&&n&&g&&d(!1,u.classed(i.SELECTED,!1),s,l))}))},b.unselect=function(t,e){var n=this.internal,r=n.d3,o=n.config;o.data_selection_enabled&&n.main.selectAll("."+i.shapes).selectAll("."+i.shape).each((function(a,s){var l=r.select(this),u=a.data?a.data.id:a.id,h=n.getToggle(this,a).bind(n),c=o.data_selection_grouped||!t||t.indexOf(u)>=0,d=!e||e.indexOf(s)>=0,f=l.classed(i.SELECTED);l.classed(i.line)||l.classed(i.area)||c&&d&&o.data_selection_isselectable(a)&&f&&h(!1,l.classed(i.SELECTED,!1),a,s)}))},b.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",1,"important").call(i.endall,(function(){n.style("opacity",null).style("opacity",1)})),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},b.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",0,"important").call(i.endall,(function(){n.style("opacity",null).style("opacity",0)})),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},b.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach((function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)}))},b.tooltip=function(){},b.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],e=null):e=o(t.data.index)?t.data.index:i.getIndexByX(t.data.x):void 0!==t.x?e=i.getIndexByX(t.x):void 0!==t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},b.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},b.transform=function(t,e){var n=this.internal,i=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;n.transformTo(e,t,i)},S.transformTo=function(t,e,n){var i=this,r=!i.hasArcType(),o=n||{withTransitionForAxis:r};o.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(o)},b.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},b.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},b.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map((function(t){return e.parseDate(t)}))),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},b.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},b.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},b.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=i.max([e.orgXDomain[1],t])},b.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=i.min([e.orgXDomain[0],t])},b.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};h(t.max)&&this.domain.max(t.max),h(t.min)&&this.domain.min(t.min)},S.initPie=function(){var t=this,e=t.d3;t.pie=e.layout.pie().value((function(t){return t.values.reduce((function(t,e){return t+e.value}),0)})),t.pie.sort(t.getOrderFunction()||null)},S.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,i=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=n||(i<=t.radius-t.innerRadius?t.radius-t.innerRadius:i<=t.radius?i:t.radius)},S.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},S.updateAngle=function(t){var e,n,i,r,o=this,a=o.config,s=!1,l=0;return a?(o.pie(o.filterTargetsToShow(o.data.targets)).forEach((function(e){s||e.data.id!==t.data.id||(s=!0,(t=e).index=l),l++})),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),o.isGaugeType(t.data)&&(e=a.gauge_min,n=a.gauge_max,i=Math.PI*(a.gauge_fullCircle?2:1)/(n-e),r=t.value<e?0:t.value<n?t.value-e:n-e,t.startAngle=a.gauge_startingAngle,t.endAngle=t.startAngle+i*r),s?t:null):null},S.getSvgArc=function(){var t=this,e=t.hasType("gauge"),n=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,i=t.d3.svg.arc().outerRadius((function(i){return e?t.radius-n*i.index:t.radius})).innerRadius((function(i){return e?t.radius-n*(i.index+1):t.innerRadius})),r=function(e,n){var r;return n?i(e):(r=t.updateAngle(e))?i(r):"M 0 0"};return r.centroid=i.centroid,r},S.getSvgArcExpanded=function(t){t=t||1;var e=this,n=e.hasType("gauge"),i=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,r=Math.min(e.radiusExpanded*t-e.radius,.8*i-100*(1-t)),o=e.d3.svg.arc().outerRadius((function(o){return n?e.radius-i*o.index+r:e.radiusExpanded*t})).innerRadius((function(t){return n?e.radius-i*(t.index+1):e.innerRadius}));return function(t){var n=e.updateAngle(t);return n?o(n):"M 0 0"}},S.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},S.transformForArcLabel=function(t){var e,n,i,r,o,s=this,l=s.config,u=s.updateAngle(t),h="",c=s.hasType("gauge");if(u&&!c)e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1],r=Math.sqrt(n*n+i*i),h="translate("+n*(o=s.hasType("donut")&&l.donut_label_ratio?a(l.donut_label_ratio)?l.donut_label_ratio(t,s.radius,r):l.donut_label_ratio:s.hasType("pie")&&l.pie_label_ratio?a(l.pie_label_ratio)?l.pie_label_ratio(t,s.radius,r):l.pie_label_ratio:s.radius&&r?(36/s.radius>.375?1.175-36/s.radius:.8)*s.radius/r:0)+","+i*o+")";else if(u&&c&&s.filterTargetsToShow(s.data.targets).length>1){var d=Math.sin(u.endAngle-Math.PI/2);h="translate("+(n=Math.cos(u.endAngle-Math.PI/2)*(s.radiusExpanded+25))+","+(i=d*(s.radiusExpanded+15-Math.abs(10*d))+3)+")"}return h},S.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},S.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},S.textForArcLabel=function(t){var e,n,i,r,o,a=this;return a.shouldShowArcLabel()?(n=(e=a.updateAngle(t))?e.value:null,i=a.getArcRatio(e),r=t.data.id,a.hasType("gauge")||a.meetsArcLabelThreshold(i)?(o=a.getArcLabelFormat())?o(n,i,r):a.defaultArcValueFormat(n,i):""):""},S.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},S.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval((function(){n.transiting||(window.clearInterval(e),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(t))}),10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+i.chartArc)).each((function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each((function(t){n.isDonutType(t.data)}))})))},S.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+i.chartArc)).selectAll("path").transition().duration((function(t){return e.expandDuration(t.data.id)})).attr("d",e.svgArc),e.svg.selectAll("."+i.arc))},S.expandDuration=function(t){var e=this,n=e.config;return e.isDonutType(t)?n.donut_expand_duration:e.isGaugeType(t)?n.gauge_expand_duration:e.isPieType(t)?n.pie_expand_duration:50},S.shouldExpand=function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},S.shouldShowArcLabel=function(){var t=this,e=t.config,n=!0;return t.hasType("donut")?n=e.donut_label_show:t.hasType("pie")&&(n=e.pie_label_show),n},S.meetsArcLabelThreshold=function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},S.getArcLabelFormat=function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),n},S.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},S.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},S.updateTargetsForArc=function(t){var e,n=this,r=n.main,o=n.classChartArc.bind(n),a=n.classArcs.bind(n),s=n.classFocus.bind(n);(e=r.select("."+i.chartArcs).selectAll("."+i.chartArc).data(n.pie(t)).attr("class",(function(t){return o(t)+s(t.data)})).enter().append("g").attr("class",o)).append("g").attr("class",a),e.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},S.initArc=function(){var t=this;t.arcs=t.main.select("."+i.chart).append("g").attr("class",i.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",i.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},S.redrawArc=function(t,e,n){var r,o,a,s=this,l=s.d3,u=s.config,h=s.main,c=s.hasType("gauge");if((r=h.selectAll("."+i.arcs).selectAll("."+i.arc).data(s.arcData.bind(s))).enter().append("path").attr("class",s.classArc.bind(s)).style("fill",(function(t){return s.color(t.data)})).style("cursor",(function(t){return u.interaction_enabled&&u.data_selection_isselectable(t)?"pointer":null})).each((function(t){s.isGaugeType(t.data)&&(t.startAngle=t.endAngle=u.gauge_startingAngle),this._current=t})),c&&((a=h.selectAll("."+i.arcs).selectAll("."+i.arcLabelLine).data(s.arcData.bind(s))).enter().append("rect").attr("class",(function(t){return i.arcLabelLine+" "+i.target+" "+i.target+"-"+t.data.id})),1===s.filterTargetsToShow(s.data.targets).length?a.style("display","none"):a.style("fill",(function(t){return u.color_pattern.length>0?s.levelColor(t.data.values[0].value):s.color(t.data)})).style("display",u.gauge_labelLine_show?"":"none").each((function(t){var e=0,n=0,i=0,r="";if(s.hiddenTargetIds.indexOf(t.data.id)<0){var o=s.updateAngle(t),a=s.gaugeArcWidth/s.filterTargetsToShow(s.data.targets).length*(o.index+1),u=o.endAngle-Math.PI/2,h=s.radius-a,c=u-(0===h?0:1/h);e=s.radiusExpanded-s.radius+a,n=Math.cos(c)*h,i=Math.sin(c)*h,r="rotate("+180*u/Math.PI+", "+n+", "+i+")"}l.select(this).attr({x:n,y:i,width:e,height:2,transform:r}).style("stroke-dasharray","0, "+(e+2)+", 0")}))),r.attr("transform",(function(t){return!s.isGaugeType(t.data)&&n?"scale(0)":""})).on("mouseover",u.interaction_enabled?function(t){var e,n;s.transiting||(e=s.updateAngle(t))&&(n=s.convertToArcData(e),s.expandArc(e.data.id),s.api.focus(e.data.id),s.toggleFocusLegend(e.data.id,!0),s.config.data_onmouseover(n,this))}:null).on("mousemove",u.interaction_enabled?function(t){var e,n=s.updateAngle(t);n&&(e=[s.convertToArcData(n)],s.showTooltip(e,this))}:null).on("mouseout",u.interaction_enabled?function(t){var e,n;s.transiting||(e=s.updateAngle(t))&&(n=s.convertToArcData(e),s.unexpandArc(e.data.id),s.api.revert(),s.revertLegend(),s.hideTooltip(),s.config.data_onmouseout(n,this))}:null).on("click",u.interaction_enabled?function(t,e){var n,i=s.updateAngle(t);i&&(n=s.convertToArcData(i),s.toggleShape&&s.toggleShape(this,n,e),s.config.data_onclick.call(s.api,n,this))}:null).each((function(){s.transiting=!0})).transition().duration(t).attrTween("d",(function(t){var e,n=s.updateAngle(t);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=l.interpolate(this._current,n),this._current=e(0),function(n){var i=e(n);return i.data=t.data,s.getArc(i,!0)}):function(){return"M 0 0"}})).attr("transform",n?"scale(1)":"").style("fill",(function(t){return s.levelColor?s.levelColor(t.data.values[0].value):s.color(t.data.id)})).call(s.endall,(function(){s.transiting=!1})),r.exit().transition().duration(e).style("opacity",0).remove(),h.selectAll("."+i.chartArc).select("text").style("opacity",0).attr("class",(function(t){return s.isGaugeType(t.data)?i.gaugeValue:""})).text(s.textForArcLabel.bind(s)).attr("transform",s.transformForArcLabel.bind(s)).style("font-size",(function(t){return s.isGaugeType(t.data)&&1===s.filterTargetsToShow(s.data.targets).length?Math.round(s.radius/5)+"px":""})).transition().duration(t).style("opacity",(function(t){return s.isTargetToShow(t.data.id)&&s.isArcType(t.data)?1:0})),h.select("."+i.chartArcsTitle).style("opacity",s.hasType("donut")||c?1:0),c){var d=0;(o=s.arcs.select("g."+i.chartArcsBackground).selectAll("path."+i.chartArcsBackground).data(s.data.targets)).enter().append("path"),o.attr("class",(function(t,e){return i.chartArcsBackground+" "+i.chartArcsBackground+"-"+e})).attr("d",(function(t){if(s.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:u.gauge_max}],startAngle:u.gauge_startingAngle,endAngle:-1*u.gauge_startingAngle*(u.gauge_fullCircle?Math.PI:1),index:d++};return s.getArc(e,!0,!0)})),o.exit().remove(),s.arcs.select("."+i.chartArcsGaugeUnit).attr("dy",".75em").text(u.gauge_label_show?u.gauge_units:""),s.arcs.select("."+i.chartArcsGaugeMin).attr("dx",-1*(s.innerRadius+(s.radius-s.innerRadius)/(u.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(u.gauge_label_show?s.textForGaugeMinMax(u.gauge_min,!1):""),s.arcs.select("."+i.chartArcsGaugeMax).attr("dx",s.innerRadius+(s.radius-s.innerRadius)/(u.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(u.gauge_label_show?s.textForGaugeMinMax(u.gauge_max,!0):"")}},S.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",i.chartArcsBackground),t.append("text").attr("class",i.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",i.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",i.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},S.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},S.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},S.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},S.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n},S.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},S.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},S.classText=function(t){return this.generateClass(i.text,t.index)},S.classTexts=function(t){return this.generateClass(i.texts,t.id)},S.classShape=function(t){return this.generateClass(i.shape,t.index)},S.classShapes=function(t){return this.generateClass(i.shapes,t.id)},S.classLine=function(t){return this.classShape(t)+this.generateClass(i.line,t.id)},S.classLines=function(t){return this.classShapes(t)+this.generateClass(i.lines,t.id)},S.classCircle=function(t){return this.classShape(t)+this.generateClass(i.circle,t.index)},S.classCircles=function(t){return this.classShapes(t)+this.generateClass(i.circles,t.id)},S.classBar=function(t){return this.classShape(t)+this.generateClass(i.bar,t.index)},S.classBars=function(t){return this.classShapes(t)+this.generateClass(i.bars,t.id)},S.classArc=function(t){return this.classShape(t.data)+this.generateClass(i.arc,t.data.id)},S.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(i.arcs,t.data.id)},S.classArea=function(t){return this.classShape(t)+this.generateClass(i.area,t.id)},S.classAreas=function(t){return this.classShapes(t)+this.generateClass(i.areas,t.id)},S.classRegion=function(t,e){return this.generateClass(i.region,e)+" "+("class"in t?t.class:"")},S.classEvent=function(t){return this.generateClass(i.eventRect,t.index)},S.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+i.target+"-"+e),this.generateClass(i.target,t)+n},S.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},S.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?i.focused:"")},S.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?i.defocused:"")},S.classChartText=function(t){return i.chartText+this.classTarget(t.id)},S.classChartLine=function(t){return i.chartLine+this.classTarget(t.id)},S.classChartBar=function(t){return i.chartBar+this.classTarget(t.id)},S.classChartArc=function(t){return i.chartArc+this.classTarget(t.data.id)},S.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},S.selectorTarget=function(t,e){return(e||"")+"."+i.target+this.getTargetSelectorSuffix(t)},S.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map((function(t){return n.selectorTarget(t,e)})):null},S.selectorLegend=function(t){return"."+i.legendItem+this.getTargetSelectorSuffix(t)},S.selectorLegends=function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null},S.getClipPath=function(t){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"},S.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},S.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},S.getAxisClipY=function(t){return t?-20:-this.margin.top},S.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},S.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},S.getYAxisClipX=function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},S.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},S.getAxisClipWidth=function(t){var e=this,n=Math.max(30,e.margin.left),i=Math.max(30,e.margin.right);return t?e.width+2+n+i:e.margin.left+20},S.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},S.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},S.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},S.getYAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},S.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},S.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,i=g(t.color_pattern)?t.color_pattern:e.scale.category10().range(),r=t.data_color,o=[];return function(t){var e,a=t.id||t.data&&t.data.id||t;return n[a]instanceof Function?e=n[a](t):n[a]?e=n[a]:(o.indexOf(a)<0&&o.push(a),e=i[o.indexOf(a)%i.length],n[a]=e),r instanceof Function?r(e,t):e}},S.generateLevelColor=function(){var t=this.config,e=t.color_pattern,n=t.color_threshold,i="value"===n.unit,r=n.values&&n.values.length?n.values:[],o=n.max||100;return g(t.color_threshold)?function(t){var n,a=e[e.length-1];for(n=0;n<r.length;n++)if((i?t:100*t/o)<r[n]){a=e[n];break}return a}:null},S.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach((function(e){t[e]=this.additionalConfig[e]}),this),t},S.additionalConfig={},S.loadConfig=function(t){var e,n,i,o=this.config;function a(){var t=n.shift();return t&&e&&"object"===(void 0===e?"undefined":r(e))&&t in e?(e=e[t],a()):t?void 0:e}Object.keys(o).forEach((function(r){e=t,n=r.split("_"),i=a(),h(i)&&(o[r]=i)}))},S.convertUrlToData=function(t,e,n,i,r){var o=this,a=e||"csv",s=o.d3.xhr(t);n&&Object.keys(n).forEach((function(t){s.header(t,n[t])})),s.get((function(t,e){var n,s=e.response||e.responseText;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");n="json"===a?o.convertJsonToData(JSON.parse(s),i):"tsv"===a?o.convertTsvToData(s):o.convertCsvToData(s),r.call(o,n)}))},S.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach((function(t){n[0][t]=null}))):n=e.parse(t),n},S.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},S.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},S.convertJsonToData=function(t,e){var n,i,r=this,o=[];return e?(e.x?(n=e.value.concat(e.x),r.config.data_x=e.x):n=e.value,o.push(n),t.forEach((function(t){var e=[];n.forEach((function(n){var i=r.findValueInJson(t,n);u(i)&&(i=null),e.push(i)})),o.push(e)})),i=r.convertRowsToData(o)):(Object.keys(t).forEach((function(e){o.push([e].concat(t[e]))})),i=r.convertColumnsToData(o)),i},S.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var r=n[i];if(!(r in t))return;t=t[r]}return t},S.convertRowsToData=function(t){for(var e=[],n=t[0],i=1;i<t.length;i++){for(var r={},o=0;o<t[i].length;o++){if(u(t[i][o]))throw new Error("Source data is missing a component at ("+i+","+o+")!");r[n[o]]=t[i][o]}e.push(r)}return e},S.convertColumnsToData=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n][0],r=1;r<t[n].length;r++){if(u(e[r-1])&&(e[r-1]={}),u(t[n][r]))throw new Error("Source data is missing a component at ("+n+","+r+")!");e[r-1][i]=t[n][r]}return e},S.convertDataToTargets=function(t,e){var n,i=this,r=i.config,a=i.d3.keys(t[0]).filter(i.isNotX,i),s=i.d3.keys(t[0]).filter(i.isX,i);return a.forEach((function(n){var a=i.getXKey(n);i.isCustomX()||i.isTimeSeries()?s.indexOf(a)>=0?i.data.xs[n]=(e&&i.data.xs[n]?i.data.xs[n]:[]).concat(t.map((function(t){return t[a]})).filter(o).map((function(t,e){return i.generateTargetX(t,n,e)}))):r.data_x?i.data.xs[n]=i.getOtherTargetXs():g(r.data_xs)&&(i.data.xs[n]=i.getXValuesOfXKey(a,i.data.targets)):i.data.xs[n]=t.map((function(t,e){return e}))})),a.forEach((function(t){if(!i.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')})),(n=a.map((function(e,n){var o=r.data_idConverter(e);return{id:o,id_org:e,values:t.map((function(t,a){var s,l=t[i.getXKey(e)],h=null===t[e]||isNaN(t[e])?null:+t[e];return i.isCustomX()&&i.isCategorized()&&!u(l)?(0===n&&0===a&&(r.axis_x_categories=[]),-1===(s=r.axis_x_categories.indexOf(l))&&(s=r.axis_x_categories.length,r.axis_x_categories.push(l))):s=i.generateTargetX(l,e,a),(u(t[e])||i.data.xs[e].length<=a)&&(s=void 0),{x:s,value:h,id:o}})).filter((function(t){return h(t.x)}))}}))).forEach((function(t){var e;r.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),e=0,t.values.forEach((function(t){t.index=e++})),i.data.xs[t.id].sort((function(t,e){return t-e}))})),i.hasNegativeValue=i.hasNegativeValueInTargets(n),i.hasPositiveValue=i.hasPositiveValueInTargets(n),r.data_type&&i.setTargetType(i.mapToIds(n).filter((function(t){return!(t in r.data_types)})),r.data_type),n.forEach((function(t){i.addCache(t.id_org,t)})),n},S.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||g(e.data_xs)&&v(e.data_xs,t)},S.isNotX=function(t){return!this.isX(t)},S.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:g(e.data_xs)?e.data_xs[t]:null},S.getXValuesOfXKey=function(t,e){var n,i=this;return(e&&g(e)?i.mapToIds(e):[]).forEach((function(e){i.getXKey(e)===t&&(n=i.data.xs[e])})),n},S.getIndexByX=function(t){var e=this.filterByX(this.data.targets,t);return e.length?e[0].index:null},S.getXValue=function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&o(n.data.xs[t][e])?n.data.xs[t][e]:e},S.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},S.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},S.addXs=function(t){var e=this;Object.keys(t).forEach((function(n){e.config.data_xs[n]=t[n]}))},S.hasMultipleX=function(t){return this.d3.set(Object.keys(t).map((function(e){return t[e]}))).size()>1},S.isMultipleX=function(){return g(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},S.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},S.getValueOnIndex=function(t,e){var n=t.filter((function(t){return t.index===e}));return n.length?n[0]:null},S.updateTargetX=function(t,e){var n=this;t.forEach((function(t){t.values.forEach((function(i,r){i.x=n.generateTargetX(e[r],t.id,r)})),n.data.xs[t.id]=e}))},S.updateTargetXs=function(t,e){var n=this;t.forEach((function(t){e[t.id]&&n.updateTargetX([t],e[t.id])}))},S.generateTargetX=function(t,e,n){var i=this;return i.isTimeSeries()?t?i.parseDate(t):i.parseDate(i.getXValue(e,n)):i.isCustomX()&&!i.isCategorized()?o(t)?+t:i.getXValue(e,n):n},S.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},S.updateXs=function(){var t=this;t.data.targets.length&&(t.xs=[],t.data.targets[0].values.forEach((function(e){t.xs[e.index]=e.x})))},S.getPrevX=function(t){var e=this.xs[t-1];return void 0!==e?e:null},S.getNextX=function(t){var e=this.xs[t+1];return void 0!==e?e:null},S.getMaxDataCount=function(){return this.d3.max(this.data.targets,(function(t){return t.values.length}))},S.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return n>1?t.forEach((function(t){t.values.length>i&&(e=t,i=t.values.length)})):e=n?t[0]:null,e},S.getEdgeX=function(t){return t.length?[this.d3.min(t,(function(t){return t.values[0].x})),this.d3.max(t,(function(t){return t.values[t.values.length-1].x}))]:[0,0]},S.mapToIds=function(t){return t.map((function(t){return t.id}))},S.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},S.hasTarget=function(t,e){var n,i=this.mapToIds(t);for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},S.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},S.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},S.filterTargetsToShow=function(t){var e=this;return t.filter((function(t){return e.isTargetToShow(t.id)}))},S.mapTargetsToUniqueXs=function(t){var e=this,n=e.d3.set(e.d3.merge(t.map((function(t){return t.values.map((function(t){return+t.x}))})))).values();return(n=e.isTimeSeries()?n.map((function(t){return new Date(+t)})):n.map((function(t){return+t}))).sort((function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}))},S.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},S.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},S.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},S.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},S.getValuesAsIdKeyed=function(t){var e={};return t.forEach((function(t){e[t.id]=[],t.values.forEach((function(n){e[t.id].push(n.value)}))})),e},S.checkValueInTargets=function(t,e){var n,i,r,o=Object.keys(t);for(n=0;n<o.length;n++)for(r=t[o[n]].values,i=0;i<r.length;i++)if(e(r[i].value))return!0;return!1},S.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},S.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},S.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},S.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},S.getOrderFunction=function(){var t=this,e=t.config,n=t.isOrderAsc(),i=t.isOrderDesc();if(n||i)return function(t,e){var n=function(t,e){return t+Math.abs(e.value)},r=t.values.reduce(n,0),o=e.values.reduce(n,0);return i?o-r:r-o};if(a(e.data_order))return e.data_order;if(s(e.data_order)){var r=e.data_order;return function(t,e){return r.indexOf(t.id)-r.indexOf(e.id)}}},S.orderTargets=function(t){var e=this.getOrderFunction();return e&&(t.sort(e),(this.isOrderAsc()||this.isOrderDesc())&&t.reverse()),t},S.filterByX=function(t,e){return this.d3.merge(t.map((function(t){return t.values}))).filter((function(t){return t.x-e==0}))},S.filterRemoveNull=function(t){return t.filter((function(t){return o(t.value)}))},S.filterByXDomain=function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},S.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==r(t.data_labels)||!g(t.data_labels))},S.getDataLabelLength=function(t,e,n){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return i.dataLabelFormat(t.id)(t)})).each((function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]})).remove(),r},S.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},S.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},S.findSameXOfValues=function(t,e){var n,i=t[e].x,r=[];for(n=e-1;n>=0&&i===t[n].x;n--)r.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)r.push(t[n]);return r},S.findClosestFromTargets=function(t,e){var n,i=this;return n=t.map((function(t){return i.findClosest(t.values,e)})),i.findClosest(n,e)},S.findClosest=function(t,e){var n,r=this,o=r.config.point_sensitivity;return t.filter((function(t){return t&&r.isBarType(t.id)})).forEach((function(t){var e=r.main.select("."+i.bars+r.getTargetSelectorSuffix(t.id)+" ."+i.bar+"-"+t.index).node();!n&&r.isWithinBar(e)&&(n=t)})),t.filter((function(t){return t&&!r.isBarType(t.id)})).forEach((function(t){var i=r.dist(t,e);i<o&&(o=i,n=t)})),n},S.dist=function(t,e){var n=this,i=n.config,r=i.axis_rotated?1:0,o=i.axis_rotated?0:1,a=n.circleY(t,t.index),s=n.x(t.x);return Math.sqrt(Math.pow(s-e[r],2)+Math.pow(a-e[o],2))},S.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},S.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach((function(t){n[t]=e[t]})),this.redraw({withLegend:!0})),n},S.load=function(t,e){var n=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach((function(t){var i=e.types&&e.types[t.id]?e.types[t.id]:e.type;n.setTargetType(t.id,i)})),n.data.targets.forEach((function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}})),n.data.targets=n.data.targets.concat(t)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},S.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,(function(n){e.load(e.convertDataToTargets(n),t)})):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},S.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter((function(t){return n.hasTarget(n.data.targets,t)})))&&0!==t.length?(n.svg.selectAll(t.map((function(t){return n.selectorTarget(t)}))).transition().style("opacity",0).remove().call(n.endall,e),t.forEach((function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll("."+i.legendItem+n.getTargetSelectorSuffix(t)).remove(),n.data.targets=n.data.targets.filter((function(e){return e.id!==t}))}))):e()},S.getYDomainMin=function(t){var e,n,i,r,o,a,s=this,l=s.config,u=s.mapToIds(t),h=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=s.hasNegativeValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter((function(t){return u.indexOf(t)>=0})),0!==r.length)for(i=r[0],a&&h[i]&&h[i].forEach((function(t,e){h[i][e]=t<0?t:0})),n=1;n<r.length;n++)o=r[n],h[o]&&h[o].forEach((function(t,e){s.axis.getId(o)!==s.axis.getId(i)||!h[i]||a&&+t>0||(h[i][e]+=+t)}));return s.d3.min(Object.keys(h).map((function(t){return s.d3.min(h[t])})))},S.getYDomainMax=function(t){var e,n,i,r,o,a,s=this,l=s.config,u=s.mapToIds(t),h=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=s.hasPositiveValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter((function(t){return u.indexOf(t)>=0})),0!==r.length)for(i=r[0],a&&h[i]&&h[i].forEach((function(t,e){h[i][e]=t>0?t:0})),n=1;n<r.length;n++)o=r[n],h[o]&&h[o].forEach((function(t,e){s.axis.getId(o)!==s.axis.getId(i)||!h[i]||a&&+t<0||(h[i][e]+=+t)}));return s.d3.max(Object.keys(h).map((function(t){return s.d3.max(h[t])})))},S.getYDomain=function(t,e,n){var i,r,a,s,l,u,h,c,d,p,m=this,v=m.config,y=t.filter((function(t){return m.axis.getId(t.id)===e})),_=n?m.filterByXDomain(y,n):y,x="y2"===e?v.axis_y2_min:v.axis_y_min,w="y2"===e?v.axis_y2_max:v.axis_y_max,b=m.getYDomainMin(_),S=m.getYDomainMax(_),M="y2"===e?v.axis_y2_center:v.axis_y_center,P=m.hasType("bar",_)&&v.bar_zerobased||m.hasType("area",_)&&v.area_zerobased,T="y2"===e?v.axis_y2_inverted:v.axis_y_inverted,C=m.hasDataLabel()&&v.axis_rotated,A=m.hasDataLabel()&&!v.axis_rotated;return b=o(x)?x:o(w)?b<w?b:w-10:b,S=o(w)?w:o(x)?x<S?S:x+10:S,0===_.length?"y2"===e?m.y2.domain():m.y.domain():(isNaN(b)&&(b=0),isNaN(S)&&(S=b),b===S&&(b<0?S=0:b=0),d=b>=0&&S>=0,p=b<=0&&S<=0,(o(x)&&d||o(w)&&p)&&(P=!1),P&&(d&&(b=0),p&&(S=0)),a=s=.1*(r=Math.abs(S-b)),void 0!==M&&(S=M+(l=Math.max(Math.abs(b),Math.abs(S))),b=M-l),C?(u=m.getDataLabelLength(b,S,"width"),h=f(m.y.range()),a+=r*((c=[u[0]/h,u[1]/h])[1]/(1-c[0]-c[1])),s+=r*(c[0]/(1-c[0]-c[1]))):A&&(u=m.getDataLabelLength(b,S,"height"),a+=m.axis.convertPixelsToAxisPadding(u[1],r),s+=m.axis.convertPixelsToAxisPadding(u[0],r)),"y"===e&&g(v.axis_y_padding)&&(a=m.axis.getPadding(v.axis_y_padding,"top",a,r),s=m.axis.getPadding(v.axis_y_padding,"bottom",s,r)),"y2"===e&&g(v.axis_y2_padding)&&(a=m.axis.getPadding(v.axis_y2_padding,"top",a,r),s=m.axis.getPadding(v.axis_y2_padding,"bottom",s,r)),P&&(d&&(s=b),p&&(a=-S)),i=[b-s,S+a],T?i.reverse():i)},S.getXDomainMin=function(t){var e=this,n=e.config;return h(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,(function(t){return e.d3.min(t.values,(function(t){return t.x}))}))},S.getXDomainMax=function(t){var e=this,n=e.config;return h(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,(function(t){return e.d3.max(t.values,(function(t){return t.x}))}))},S.getXDomainPadding=function(t){var e,n,i,a,s=this,l=s.config,u=t[1]-t[0];return n=s.isCategorized()?0:s.hasType("bar")?(e=s.getMaxDataCount())>1?u/(e-1)/2:.5:.01*u,"object"===r(l.axis_x_padding)&&g(l.axis_x_padding)?(i=o(l.axis_x_padding.left)?l.axis_x_padding.left:n,a=o(l.axis_x_padding.right)?l.axis_x_padding.right:n):i=a="number"==typeof l.axis_x_padding?l.axis_x_padding:n,{left:i,right:a}},S.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=n[0],r=n[1],o=e.getXDomainPadding(n),a=0,s=0;return i-r!=0||e.isCategorized()||(e.isTimeSeries()?(i=new Date(.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(a=e.isTimeSeries()?new Date(i.getTime()-o.left):i-o.left),(r||0===r)&&(s=e.isTimeSeries()?new Date(r.getTime()+o.right):r+o.right),[a,s]},S.updateXDomain=function(t,e,n,i,r){var o=this,a=o.config;return n&&(o.x.domain(r||o.d3.extent(o.getXDomain(t))),o.orgXDomain=o.x.domain(),a.zoom_enabled&&o.zoom.scale(o.x).updateScaleExtent(),o.subX.domain(o.x.domain()),o.brush&&o.brush.scale(o.subX)),e&&(o.x.domain(r||(!o.brush||o.brush.empty()?o.orgXDomain:o.brush.extent())),a.zoom_enabled&&o.zoom.scale(o.x).updateScaleExtent()),i&&o.x.domain(o.trimXDomain(o.x.orgDomain())),o.x.domain()},S.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},S.drag=function(t){var e,n,r,o,a,s,l,u,h=this,c=h.config,d=h.main,f=h.d3;h.hasArcType()||c.data_selection_enabled&&(c.zoom_enabled&&!h.zoom.altDomain||c.data_selection_multiple&&(e=h.dragStart[0],n=h.dragStart[1],r=t[0],o=t[1],a=Math.min(e,r),s=Math.max(e,r),l=c.data_selection_grouped?h.margin.top:Math.min(n,o),u=c.data_selection_grouped?h.height:Math.max(n,o),d.select("."+i.dragarea).attr("x",a).attr("y",l).attr("width",s-a).attr("height",u-l),d.selectAll("."+i.shapes).selectAll("."+i.shape).filter((function(t){return c.data_selection_isselectable(t)})).each((function(t,e){var n,r,o,c,d,p,g=f.select(this),m=g.classed(i.SELECTED),v=g.classed(i.INCLUDED),y=!1;if(g.classed(i.circle))n=1*g.attr("cx"),r=1*g.attr("cy"),d=h.togglePoint,y=a<n&&n<s&&l<r&&r<u;else{if(!g.classed(i.bar))return;n=(p=_(this)).x,r=p.y,o=p.width,c=p.height,d=h.togglePath,y=!(s<n||n+o<a||u<r||r+c<l)}y^v&&(g.classed(i.INCLUDED,!v),g.classed(i.SELECTED,!m),d.call(h,!m,g,t,e))}))))},S.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+i.chart).append("rect").attr("class",i.dragarea).style("opacity",.1),e.dragging=!0)},S.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+i.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+i.shape).classed(i.INCLUDED,!1),t.dragging=!1)},S.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,i=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,r,o){return("y2"===e.axis.getId(o)?i:n).call(e,t,r)}},S.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},S.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},S.defaultValueFormat=function(t){return o(t)?+t:""},S.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},S.dataLabelFormat=function(t){var e=this.config.data_labels,n=function(t){return o(t)?+t:""};return"function"==typeof e.format?e.format:"object"===r(e.format)?e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}:n},S.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",i.grid),e.grid_x_show&&t.grid.append("g").attr("class",i.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",i.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",i.xgridFocus).append("line").attr("class",i.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},S.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",i.grid+" "+i.gridLines),t.gridLines.append("g").attr("class",i.xgridLines),t.gridLines.append("g").attr("class",i.ygridLines),t.xgridLines=e.selectAll([])},S.updateXGrid=function(t){var e=this,n=e.config,r=e.d3,o=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+i.xgrids).selectAll("."+i.xgrid).data(o),e.xgrid.enter().append("line").attr("class",i.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",(function(){return+r.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1})),e.xgrid.exit().remove()},S.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+i.ygrids).selectAll("."+i.ygrid).data(n),t.ygrid.enter().append("line").attr("class",i.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},S.gridTextAnchor=function(t){return t.position?t.position:"end"},S.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},S.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},S.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},S.updateGrid=function(t){var e,n,r,o=this,a=o.main,s=o.config;o.grid.style("visibility",o.hasArcType()?"hidden":"visible"),a.select("line."+i.xgridFocus).style("visibility","hidden"),s.grid_x_show&&o.updateXGrid(),o.xgridLines=a.select("."+i.xgridLines).selectAll("."+i.xgridLine).data(s.grid_x_lines),(e=o.xgridLines.enter().append("g").attr("class",(function(t){return i.xgridLine+(t.class?" "+t.class:"")}))).append("line").style("opacity",0),e.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",s.axis_rotated?"":"rotate(-90)").attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),s.grid_y_show&&o.updateYGrid(),o.ygridLines=a.select("."+i.ygridLines).selectAll("."+i.ygridLine).data(s.grid_y_lines),(n=o.ygridLines.enter().append("g").attr("class",(function(t){return i.ygridLine+(t.class?" "+t.class:"")}))).append("line").style("opacity",0),n.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",s.axis_rotated?"rotate(-90)":"").attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),r=o.yv.bind(o),o.ygridLines.select("line").transition().duration(t).attr("x1",s.axis_rotated?r:0).attr("x2",s.axis_rotated?r:o.width).attr("y1",s.axis_rotated?0:r).attr("y2",s.axis_rotated?o.height:r).style("opacity",1),o.ygridLines.select("text").transition().duration(t).attr("x",s.axis_rotated?o.xGridTextX.bind(o):o.yGridTextX.bind(o)).attr("y",r).text((function(t){return t.text})).style("opacity",1),o.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},S.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),r=e.xgridLines.select("line"),o=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?o.transition():o).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",i).text((function(t){return t.text})).style("opacity",1)]},S.showXGridFocus=function(t){var e=this,n=e.config,r=t.filter((function(t){return t&&o(t.value)})),a=e.main.selectAll("line."+i.xgridFocus),s=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(a.style("visibility","visible").data([r[0]]).attr(n.axis_rotated?"y1":"x1",s).attr(n.axis_rotated?"y2":"x2",s),e.smoothLines(a,"grid")))},S.hideXGridFocus=function(){this.main.select("line."+i.xgridFocus).style("visibility","hidden")},S.updateXgridFocus=function(){var t=this,e=t.config;t.main.select("line."+i.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?t.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:t.height)},S.generateGridData=function(t,e){var n,r,o,a,s=[],l=this.main.select("."+i.axisX).selectAll(".tick").size();if("year"===t)for(r=(n=this.getXDomain())[0].getFullYear(),o=n[1].getFullYear(),a=r;a<=o;a++)s.push(new Date(a+"-01-01 00:00:00"));else(s=e.ticks(10)).length>l&&(s=s.filter((function(t){return(""+t).indexOf(".")<0})));return s},S.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach((function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)})),n}:function(){return!0}},S.removeGridLines=function(t,e){var n=this,r=n.config,o=n.getGridFilterToRemove(t),a=function(t){return!o(t)},s=e?i.xgridLines:i.ygridLines,l=e?i.xgridLine:i.ygridLine;n.main.select("."+s).selectAll("."+l).filter(o).transition().duration(r.transition_duration).style("opacity",0).remove(),e?r.grid_x_lines=r.grid_x_lines.filter(a):r.grid_y_lines=r.grid_y_lines.filter(a)},S.initEventRect=function(){this.main.select("."+i.chart).append("g").attr("class",i.eventRects).style("fill-opacity",0)},S.redrawEventRect=function(){var t,e,n=this,r=n.config,o=n.isMultipleX(),a=n.main.select("."+i.eventRects).style("cursor",r.zoom_enabled?r.axis_rotated?"ns-resize":"ew-resize":null).classed(i.eventRectsMultiple,o).classed(i.eventRectsSingle,!o);a.selectAll("."+i.eventRect).remove(),n.eventRect=a.selectAll("."+i.eventRect),o?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),a.datum(e?e.values:[]),n.eventRect=a.selectAll("."+i.eventRect),t=n.eventRect.data((function(t){return t})),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},S.updateEventRect=function(t){var e,n,i,r,o,a,s=this,l=s.config;t=t||s.eventRect.data((function(t){return t})),s.isMultipleX()?(e=0,n=0,i=s.width,r=s.height):(!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(o=s.getEventRectWidth(),a=function(t){return s.x(t.x)-o/2}):(s.updateXs(),o=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?l.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},a=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index),i=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(i)+s.x(e))/2)}),e=l.axis_rotated?0:a,n=l.axis_rotated?a:0,i=l.axis_rotated?s.width:o,r=l.axis_rotated?o:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",i).attr("height",r)},S.generateEventRectsForSingleX=function(t){var e=this,n=e.d3,r=e.config;t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",(function(t){var n=t.index;e.dragging||e.flowing||e.hasArcType()||(r.point_focus_expand_enabled&&e.expandCircles(n,null,!0),e.expandBars(n,null,!0),e.main.selectAll("."+i.shape+"-"+n).each((function(t){r.data_onmouseover.call(e.api,t)})))})).on("mouseout",(function(t){var n=t.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+i.shape+"-"+n).each((function(t){r.data_onmouseout.call(e.api,t)}))))})).on("mousemove",(function(t){var o,a=t.index,s=e.svg.select("."+i.eventRect+"-"+a);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(t)&&"step-after"===e.config.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,a))&&(a-=1),o=e.filterTargetsToShow(e.data.targets).map((function(t){return e.addName(e.getValueOnIndex(t.values,a))})),r.tooltip_grouped&&(e.showTooltip(o,this),e.showXGridFocus(o)),(!r.tooltip_grouped||r.data_selection_enabled&&!r.data_selection_grouped)&&e.main.selectAll("."+i.shape+"-"+a).each((function(){n.select(this).classed(i.EXPANDED,!0),r.data_selection_enabled&&s.style("cursor",r.data_selection_grouped?"pointer":null),r.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),r.data_selection_grouped||(e.unexpandCircles(a),e.unexpandBars(a)))})).filter((function(t){return e.isWithinShape(this,t)})).each((function(t){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(t))&&s.style("cursor","pointer"),r.tooltip_grouped||(e.showTooltip([t],this),e.showXGridFocus([t]),r.point_focus_expand_enabled&&e.expandCircles(a,t.id,!0),e.expandBars(a,t.id,!0))})))})).on("click",(function(t){var o=t.index;!e.hasArcType()&&e.toggleShape&&(e.cancelClick?e.cancelClick=!1:(e.isStepType(t)&&"step-after"===r.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,o))&&(o-=1),e.main.selectAll("."+i.shape+"-"+o).each((function(t){(r.data_selection_grouped||e.isWithinShape(this,t))&&(e.toggleShape(this,t,o),e.config.data_onclick.call(e.api,t,this))}))))})).call(r.data_selection_draggable&&e.drag?n.behavior.drag().origin(Object).on("drag",(function(){e.drag(n.mouse(this))})).on("dragstart",(function(){e.dragstart(n.mouse(this))})).on("dragend",(function(){e.dragend()})):function(){})},S.generateEventRectsForMultipleXs=function(t){var e=this,n=e.d3,r=e.config;function o(){e.svg.select("."+i.eventRect).style("cursor",null),e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars()}t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",i.eventRect).on("mouseout",(function(){e.config&&(e.hasArcType()||o())})).on("mousemove",(function(){var t,a,s,l=e.filterTargetsToShow(e.data.targets);e.dragging||e.hasArcType(l)||(t=n.mouse(this),a=e.findClosestFromTargets(l,t),!e.mouseover||a&&a.id===e.mouseover.id||(r.data_onmouseout.call(e.api,e.mouseover),e.mouseover=void 0),a?(s=(e.isScatterType(a)||!r.tooltip_grouped?[a]:e.filterByX(l,a.x)).map((function(t){return e.addName(t)})),e.showTooltip(s,this),r.point_focus_expand_enabled&&e.expandCircles(a.index,a.id,!0),e.expandBars(a.index,a.id,!0),e.showXGridFocus(s),(e.isBarType(a.id)||e.dist(a,t)<r.point_sensitivity)&&(e.svg.select("."+i.eventRect).style("cursor","pointer"),e.mouseover||(r.data_onmouseover.call(e.api,a),e.mouseover=a))):o())})).on("click",(function(){var t,o,a=e.filterTargetsToShow(e.data.targets);e.hasArcType(a)||(t=n.mouse(this),(o=e.findClosestFromTargets(a,t))&&(e.isBarType(o.id)||e.dist(o,t)<r.point_sensitivity)&&e.main.selectAll("."+i.shapes+e.getTargetSelectorSuffix(o.id)).selectAll("."+i.shape+"-"+o.index).each((function(){(r.data_selection_grouped||e.isWithinShape(this,o))&&(e.toggleShape(this,o,o.index),e.config.data_onclick.call(e.api,o,this))})))})).call(r.data_selection_draggable&&e.drag?n.behavior.drag().origin(Object).on("drag",(function(){e.drag(n.mouse(this))})).on("dragstart",(function(){e.dragstart(n.mouse(this))})).on("dragend",(function(){e.dragend()})):function(){})},S.dispatchEvent=function(t,e,n){var r="."+i.eventRect+(this.isMultipleX()?"":"-"+e),o=this.main.select(r).node(),a=o.getBoundingClientRect(),s=a.left+(n?n[0]:0),l=a.top+(n?n[1]:0),u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,window,0,s,l,s,l,!1,!1,!1,!1,0,null),o.dispatchEvent(u)},S.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},S.updateLegendWithDefaults=function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},S.updateSizeForLegend=function(t,e){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?r.left:0}},S.transformLegend=function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},S.updateLegendStep=function(t){this.legendStep=t},S.updateLegendItemWidth=function(t){this.legendItemWidth=t},S.updateLegendItemHeight=function(t){this.legendItemHeight=t},S.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},S.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},S.opacityForLegend=function(t){return t.classed(i.legendItemHidden)?null:1},S.opacityForUnfocusedLegend=function(t){return t.classed(i.legendItemHidden)?null:.3},S.toggleFocusLegend=function(t,e){var n=this;t=n.mapToTargetIds(t),n.legend.selectAll("."+i.legendItem).filter((function(e){return t.indexOf(e)>=0})).classed(i.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))}))},S.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+i.legendItem).classed(i.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(e.select(this))}))},S.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(e.d3.select(this))}))},S.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&p(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},S.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},S.updateLegend=function(t,e,n){var r,o,a,s,l,u,c,d,f,p,g,v,y,_,x,w,b=this,S=b.config,M=0,P=0,T=S.legend_item_tile_width+5,C=0,A={},L={},k={},E=[0],O={},N=0;function I(e,n,r){var o,a,s=0===r,l=r===t.length-1,u=function(t,e){return b.legendItemTextBox[e]||(b.legendItemTextBox[e]=b.getTextRect(t.textContent,i.legendItem,t)),b.legendItemTextBox[e]}(e,n),h=u.width+T+(!l||b.isLegendRight||b.isLegendInset?10:0)+S.legend_padding,c=u.height+4,d=b.isLegendRight||b.isLegendInset?c:h,f=b.isLegendRight||b.isLegendInset?b.getLegendHeight():b.getLegendWidth();function p(t,e){e||(o=(f-C-d)/2)<10&&(o=(f-d)/2,C=0,N++),O[t]=N,E[N]=b.isLegendInset?10:o,A[t]=C,C+=d}s&&(C=0,N=0,M=0,P=0),!S.legend_show||b.isLegendToShow(n)?(L[n]=h,k[n]=c,(!M||h>=M)&&(M=h),(!P||c>=P)&&(P=c),a=b.isLegendRight||b.isLegendInset?P:M,S.legend_equally?(Object.keys(L).forEach((function(t){L[t]=M})),Object.keys(k).forEach((function(t){k[t]=P})),(o=(f-a*t.length)/2)<10?(C=0,N=0,t.forEach((function(t){p(t)}))):p(n,!0)):p(n)):L[n]=k[n]=O[n]=A[n]=0}t=t.filter((function(t){return!h(S.data_names[t])||null!==S.data_names[t]})),g=m(e=e||{},"withTransition",!0),v=m(e,"withTransitionForTransform",!0),b.isLegendInset&&(N=S.legend_inset_step?S.legend_inset_step:t.length,b.updateLegendStep(N)),b.isLegendRight?(r=function(t){return M*O[t]},s=function(t){return E[O[t]]+A[t]}):b.isLegendInset?(r=function(t){return M*O[t]+10},s=function(t){return E[O[t]]+A[t]}):(r=function(t){return E[O[t]]+A[t]},s=function(t){return P*O[t]}),o=function(t,e){return r(t,e)+4+S.legend_item_tile_width},l=function(t,e){return s(t,e)+9},a=function(t,e){return r(t,e)},u=function(t,e){return s(t,e)-5},c=function(t,e){return r(t,e)-2},d=function(t,e){return r(t,e)-2+S.legend_item_tile_width},f=function(t,e){return s(t,e)+4},(p=b.legend.selectAll("."+i.legendItem).data(t).enter().append("g").attr("class",(function(t){return b.generateClass(i.legendItem,t)})).style("visibility",(function(t){return b.isLegendToShow(t)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(t){S.legend_item_onclick?S.legend_item_onclick.call(b,t):b.d3.event.altKey?(b.api.hide(),b.api.show(t)):(b.api.toggle(t),b.isTargetToShow(t)?b.api.focus(t):b.api.revert())})).on("mouseover",(function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(b,t):(b.d3.select(this).classed(i.legendItemFocused,!0),!b.transiting&&b.isTargetToShow(t)&&b.api.focus(t))})).on("mouseout",(function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(b,t):(b.d3.select(this).classed(i.legendItemFocused,!1),b.api.revert())}))).append("text").text((function(t){return h(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){I(this,t,e)})).style("pointer-events","none").attr("x",b.isLegendRight||b.isLegendInset?o:-200).attr("y",b.isLegendRight||b.isLegendInset?-200:l),p.append("rect").attr("class",i.legendItemEvent).style("fill-opacity",0).attr("x",b.isLegendRight||b.isLegendInset?a:-200).attr("y",b.isLegendRight||b.isLegendInset?-200:u),p.append("line").attr("class",i.legendItemTile).style("stroke",b.color).style("pointer-events","none").attr("x1",b.isLegendRight||b.isLegendInset?c:-200).attr("y1",b.isLegendRight||b.isLegendInset?-200:f).attr("x2",b.isLegendRight||b.isLegendInset?d:-200).attr("y2",b.isLegendRight||b.isLegendInset?-200:f).attr("stroke-width",S.legend_item_tile_height),w=b.legend.select("."+i.legendBackground+" rect"),b.isLegendInset&&M>0&&0===w.size()&&(w=b.legend.insert("g","."+i.legendItem).attr("class",i.legendBackground).append("rect")),y=b.legend.selectAll("text").data(t).text((function(t){return h(S.data_names[t])?S.data_names[t]:t})).each((function(t,e){I(this,t,e)})),(g?y.transition():y).attr("x",o).attr("y",l),_=b.legend.selectAll("rect."+i.legendItemEvent).data(t),(g?_.transition():_).attr("width",(function(t){return L[t]})).attr("height",(function(t){return k[t]})).attr("x",a).attr("y",u),x=b.legend.selectAll("line."+i.legendItemTile).data(t),(g?x.transition():x).style("stroke",b.levelColor?function(t){return b.levelColor(b.cache[t].values[0].value)}:b.color).attr("x1",c).attr("y1",f).attr("x2",d).attr("y2",f),w&&(g?w.transition():w).attr("height",b.getLegendHeight()-12).attr("width",M*(N+1)+10),b.legend.selectAll("."+i.legendItem).classed(i.legendItemHidden,(function(t){return!b.isTargetToShow(t)})),b.updateLegendItemWidth(M),b.updateLegendItemHeight(P),b.updateLegendStep(N),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(v,n),b.legendHasRendered=!0},S.initRegion=function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",i.regions)},S.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+i.regions).selectAll("."+i.region).data(n.regions),e.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),e.mainRegion.attr("class",e.classRegion.bind(e)),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},S.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each((function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)})),i=e.regionX.bind(e),r=e.regionY.bind(e),a=e.regionWidth.bind(e),s=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",r).attr("width",a).attr("height",s).style("fill-opacity",(function(t){return o(t.opacity)?t.opacity:.1}))]},S.regionX=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?i(t.start):0:n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},S.regionY=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?i(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},S.regionWidth=function(t){var e,n=this,i=n.config,r=n.regionX(t),o="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?o(t.end):n.width:i.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<r?0:e-r},S.regionHeight=function(t){var e,n=this,i=n.config,r=this.regionY(t),o="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated?n.height:"start"in t?o(t.start):n.height:i.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<r?0:e-r},S.isRegionOnX=function(t){return!t.axis||"x"===t.axis},S.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},S.getX=function(t,e,n,i){var r,o=this,a=o.getScale(t,e,o.isTimeSeries()),s=n?a.domain(n):a;for(r in o.isCategorized()?(i=i||function(){return 0},a=function(t,e){var n=s(t)+i(t);return e?n:Math.ceil(n)}):a=function(t,e){var n=s(t);return e?n:Math.ceil(n)},s)a[r]=s[r];return a.orgDomain=function(){return s.domain()},o.isCategorized()&&(a.domain=function(t){return arguments.length?(s.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},S.getY=function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},S.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},S.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},S.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),(function(){return t.xAxis.tickOffset()})),t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,(function(e){return e%1?0:t.subXAxis.tickOffset()})),t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),n||(t.brush&&t.brush.scale(t.subX),e.zoom_enabled&&t.zoom.scale(t.x)),t.updateArc&&t.updateArc()},S.selectPoint=function(t,e,n){var r=this,o=r.config,a=(o.axis_rotated?r.circleY:r.circleX).bind(r),s=(o.axis_rotated?r.circleX:r.circleY).bind(r),l=r.pointSelectR.bind(r);o.data_onselected.call(r.api,e,t.node()),r.main.select("."+i.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+i.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",(function(){return r.generateClass(i.selectedCircle,n)})).attr("cx",a).attr("cy",s).attr("stroke",(function(){return r.color(e)})).attr("r",(function(t){return 1.4*r.pointSelectR(t)})).transition().duration(100).attr("r",l)},S.unselectPoint=function(t,e,n){var r=this;r.config.data_onunselected.call(r.api,e,t.node()),r.main.select("."+i.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+i.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},S.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},S.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.d3.rgb(n.color(e)).brighter(.75)}))},S.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return n.color(e)}))},S.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},S.getToggle=function(t,e){var n,i=this;return"circle"===t.nodeName?n=i.isStepType(e)?function(){}:i.togglePoint:"path"===t.nodeName&&(n=i.togglePath),n},S.toggleShape=function(t,e,n){var r=this,o=r.d3,a=r.config,s=o.select(t),l=s.classed(i.SELECTED),u=r.getToggle(t,e).bind(r);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||r.main.selectAll("."+i.shapes+(a.data_selection_grouped?r.getTargetSelectorSuffix(e.id):"")).selectAll("."+i.shape).each((function(t,e){var n=o.select(this);n.classed(i.SELECTED)&&u(!1,n.classed(i.SELECTED,!1),t,e)})),s.classed(i.SELECTED,!l),u(!l,s,e,n))},S.initBar=function(){this.main.select("."+i.chart).append("g").attr("class",i.chartBars)},S.updateTargetsForBar=function(t){var e=this,n=e.config,r=e.classChartBar.bind(e),o=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+i.chartBars).selectAll("."+i.chartBar).data(t).attr("class",(function(t){return r(t)+a(t)})).enter().append("g").attr("class",r).style("pointer-events","none").append("g").attr("class",o).style("cursor",(function(t){return n.data_selection_isselectable(t)?"pointer":null}))},S.updateBar=function(t){var e=this,n=e.barData.bind(e),r=e.classBar.bind(e),o=e.initialOpacity.bind(e),a=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+i.bars).selectAll("."+i.bar).data(n),e.mainBar.enter().append("path").attr("class",r).style("stroke",a).style("fill",a),e.mainBar.style("opacity",o),e.mainBar.exit().transition().duration(t).remove()},S.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},S.getBarW=function(t,e){var n=this.config,i="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},S.getBars=function(t,e){var n=this;return(e?n.main.selectAll("."+i.bars+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+i.bar+(o(t)?"-"+t:""))},S.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(i.EXPANDED,!0)},S.unexpandBars=function(t){this.getBars(t).classed(i.EXPANDED,!1)},S.generateDrawBar=function(t,e){var n=this.config,i=this.generateGetBarPoints(t,e);return function(t,e){var r=i(t,e),o=n.axis_rotated?1:0,a=n.axis_rotated?0:1;return"M "+r[0][o]+","+r[0][a]+" L"+r[1][o]+","+r[1][a]+" L"+r[2][o]+","+r[2][a]+" L"+r[3][o]+","+r[3][a]+" z"}},S.generateGetBarPoints=function(t,e){var n=this,i=e?n.subXAxis:n.xAxis,r=t.__max__+1,o=n.getBarW(i,r),a=n.getShapeX(o,r,t,!!e),s=n.getShapeY(!!e),l=n.getShapeOffset(n.isBarType,t,!!e),u=o*(n.config.bar_space/2),h=e?n.getSubYScale:n.getYScale;return function(t,e){var i=h.call(n,t.id)(0),r=l(t,e)||i,c=a(t),d=s(t);return n.config.axis_rotated&&(0<t.value&&d<i||t.value<0&&i<d)&&(d=i),[[c+u,r],[c+u,d-(i-r)],[c+o-u,d-(i-r)],[c+o-u,r]]}},S.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),o=Math.min(i.x,r.x),a=Math.min(i.y,r.y),s=o+n.width+2,l=a+n.height+2,u=a-2;return o-2<e[0]&&e[0]<s&&u<e[1]&&e[1]<l},S.getShapeIndices=function(t){var e,n,i=this,r=i.config,o={},a=0;return i.filterTargetsToShow(i.data.targets.filter(t,i)).forEach((function(t){for(e=0;e<r.data_groups.length;e++)if(!(r.data_groups[e].indexOf(t.id)<0))for(n=0;n<r.data_groups[e].length;n++)if(r.data_groups[e][n]in o){o[t.id]=o[r.data_groups[e][n]];break}u(o[t.id])&&(o[t.id]=a++)})),o.__max__=a-1,o},S.getShapeX=function(t,e,n,i){var r=i?this.subX:this.x;return function(i){var o=i.id in n?n[i.id]:0;return i.x||0===i.x?r(i.x)-t*(e/2-o):0}},S.getShapeY=function(t){var e=this;return function(n){return(t?e.getSubYScale(n.id):e.getYScale(n.id))(n.value)}},S.getShapeOffset=function(t,e,n){var i=this,r=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t,i))),o=r.map((function(t){return t.id}));return function(t,a){var s=n?i.getSubYScale(t.id):i.getYScale(t.id),l=s(0),u=l;return r.forEach((function(n){var r=i.isStepType(t)?i.convertValuesToStep(n.values):n.values;n.id!==t.id&&e[n.id]===e[t.id]&&o.indexOf(n.id)<o.indexOf(t.id)&&(void 0!==r[a]&&+r[a].x==+t.x||(a=-1,r.forEach((function(e,n){e.x===t.x&&(a=n)}))),a in r&&r[a].value*t.value>=0&&(u+=s(r[a].value)-l))})),u}},S.isWithinShape=function(t,e){var n,r=this,o=r.d3.select(t);return r.isTargetToShow(e.id)?"circle"===t.nodeName?n=r.isStepType(e)?r.isWithinStep(t,r.getYScale(e.id)(e.value)):r.isWithinCircle(t,1.5*r.pointSelectR(e)):"path"===t.nodeName&&(n=!o.classed(i.bar)||r.isWithinBar(t)):n=!1,n},S.getInterpolate=function(t){var e=this,n=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"},S.initLine=function(){this.main.select("."+i.chart).append("g").attr("class",i.chartLines)},S.updateTargetsForLine=function(t){var e,n=this,r=n.config,o=n.classChartLine.bind(n),a=n.classLines.bind(n),s=n.classAreas.bind(n),l=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+i.chartLines).selectAll("."+i.chartLine).data(t).attr("class",(function(t){return o(t)+u(t)})).enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",s),e.append("g").attr("class",(function(t){return n.generateClass(i.selectedCircles,t.id)})),e.append("g").attr("class",l).style("cursor",(function(t){return r.data_selection_isselectable(t)?"pointer":null})),t.forEach((function(t){n.main.selectAll("."+i.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle).each((function(e){e.value=t.values[e.index].value}))}))},S.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+i.lines).selectAll("."+i.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",(function(t){return e.isStepType(t)?"crispEdges":""})).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},S.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},S.generateDrawLine=function(t,e){var n=this,i=n.config,r=n.d3.svg.line(),o=n.generateGetLinePoints(t,e),a=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?o(t,e)[0][1]:a.call(n,t.id)(t.value)};return r=i.axis_rotated?r.x(l).y(s):r.x(s).y(l),i.line_connectNull||(r=r.defined((function(t){return null!=t.value}))),function(t){var o,s=i.line_connectNull?n.filterRemoveNull(t.values):t.values,l=e?n.subX:n.x,u=a.call(n,t.id),h=0,c=0;return n.isLineType(t)?i.data_regions[t.id]?o=n.lineWithRegions(s,l,u,i.data_regions[t.id]):(n.isStepType(t)&&(s=n.convertValuesToStep(s)),o=r.interpolate(n.getInterpolate(t))(s)):(s[0]&&(h=l(s[0].x),c=u(s[0].value)),o=i.axis_rotated?"M "+c+" "+h:"M "+h+" "+c),o||"M 0 0"}},S.generateGetLinePoints=function(t,e){var n=this,i=n.config,r=t.__max__+1,o=n.getShapeX(0,r,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isLineType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),u=s(t,e)||r,h=o(t),c=a(t);return i.axis_rotated&&(0<t.value&&c<r||t.value<0&&r<c)&&(c=r),[[h,c-(r-u)],[h,c-(r-u)],[h,c-(r-u)],[h,c-(r-u)]]}},S.lineWithRegions=function(t,e,n,i){var r,o,a,s,l,c,d,f,p,g,m,v=this,y=v.config,_="M",x=v.isCategorized()?.5:0,w=[];function b(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}if(h(i))for(r=0;r<i.length;r++)w[r]={},u(i[r].start)?w[r].start=t[0].x:w[r].start=v.isTimeSeries()?v.parseDate(i[r].start):i[r].start,u(i[r].end)?w[r].end=t[t.length-1].x:w[r].end=v.isTimeSeries()?v.parseDate(i[r].end):i[r].end;function S(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(g=y.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)},m=y.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)},a=v.isTimeSeries()?function(t,i,r,o){var a=t.x.getTime(),s=i.x-t.x,u=new Date(a+s*r),h=new Date(a+s*(r+o));return S(y.axis_rotated?[[n(l(r)),e(u)],[n(l(r+o)),e(h)]]:[[e(u),n(l(r))],[e(h),n(l(r+o))]])}:function(t,i,r,o){return S(y.axis_rotated?[[n(l(r),!0),e(s(r))],[n(l(r+o),!0),e(s(r+o))]]:[[e(s(r),!0),n(l(r))],[e(s(r+o),!0),n(l(r+o))]])},r=0;r<t.length;r++){if(u(w)||!b(t[r].x,w))_+=" "+g(t[r])+" "+m(t[r]);else for(s=v.getScale(t[r-1].x+x,t[r].x+x,v.isTimeSeries()),l=v.getScale(t[r-1].value,t[r].value),c=e(t[r].x)-e(t[r-1].x),d=n(t[r].value)-n(t[r-1].value),p=2*(f=2/Math.sqrt(Math.pow(c,2)+Math.pow(d,2))),o=f;o<=1;o+=p)_+=a(t[r-1],t[r],o,f);t[r].x}return _},S.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+i.areas).selectAll("."+i.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0})),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},S.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},S.generateDrawArea=function(t,e){var n=this,i=n.config,r=n.d3.svg.area(),o=n.generateGetAreaPoints(t,e),a=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?o(t,e)[0][1]:a.call(n,t.id)(n.getAreaBaseValue(t.id))},u=function(t,e){return i.data_groups.length>0?o(t,e)[1][1]:a.call(n,t.id)(t.value)};return r=i.axis_rotated?r.x0(l).x1(u).y(s):r.x(s).y0(i.area_above?0:l).y1(u),i.line_connectNull||(r=r.defined((function(t){return null!==t.value}))),function(t){var e,o=i.line_connectNull?n.filterRemoveNull(t.values):t.values,a=0,s=0;return n.isAreaType(t)?(n.isStepType(t)&&(o=n.convertValuesToStep(o)),e=r.interpolate(n.getInterpolate(t))(o)):(o[0]&&(a=n.x(o[0].x),s=n.getYScale(t.id)(o[0].value)),e=i.axis_rotated?"M "+s+" "+a:"M "+a+" "+s),e||"M 0 0"}},S.getAreaBaseValue=function(){return 0},S.generateGetAreaPoints=function(t,e){var n=this,i=n.config,r=t.__max__+1,o=n.getShapeX(0,r,t,!!e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),u=s(t,e)||r,h=o(t),c=a(t);return i.axis_rotated&&(0<t.value&&c<r||t.value<0&&r<c)&&(c=r),[[h,u],[h,c-(r-u)],[h,c-(r-u)],[h,u]]}},S.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+i.circles).selectAll("."+i.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},S.redrawCircle=function(t,e,n){var r=this.main.selectAll("."+i.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?r.transition(Math.random().toString()):r).attr("cx",t).attr("cy",e)]},S.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},S.updateCircleY=function(){var t,e,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),e=n.generateGetLinePoints(t),n.circleY=function(t,n){return e(t,n)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}},S.getCircles=function(t,e){var n=this;return(e?n.main.selectAll("."+i.circles+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+i.circle+(o(t)?"-"+t:""))},S.expandCircles=function(t,e,n){var r=this,o=r.pointExpandedR.bind(r);n&&r.unexpandCircles(),r.getCircles(t,e).classed(i.EXPANDED,!0).attr("r",o)},S.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter((function(){return e.d3.select(this).classed(i.EXPANDED)})).classed(i.EXPANDED,!1).attr("r",n)},S.pointR=function(t){var e=this.config;return this.isStepType(t)?0:a(e.point_r)?e.point_r(t):e.point_r},S.pointExpandedR=function(t){var e=this,n=e.config;return n.point_focus_expand_enabled?a(n.point_focus_expand_r)?n.point_focus_expand_r(t):n.point_focus_expand_r?n.point_focus_expand_r:1.75*e.pointR(t):e.pointR(t)},S.pointSelectR=function(t){var e=this.config;return a(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},S.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),r=n.select(t),o=+r.attr("cx"),a=+r.attr("cy");return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(a-i[1],2))<e},S.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},S.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},S.getCurrentHeight=function(){var t=this,e=t.config,n=e.size_height?e.size_height:t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},S.getCurrentPaddingTop=function(){var t=this,e=t.config,n=o(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(n+=t.getTitlePadding()),n},S.getCurrentPaddingBottom=function(){var t=this.config;return o(t.padding_bottom)?t.padding_bottom:0},S.getCurrentPaddingLeft=function(t){var e=this,n=e.config;return o(n.padding_left)?n.padding_left:n.axis_rotated?!n.axis_x_show||n.axis_x_inner?1:Math.max(c(e.getAxisWidthByAxisId("x",t)),40):!n.axis_y_show||n.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:c(e.getAxisWidthByAxisId("y",t))},S.getCurrentPaddingRight=function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return o(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):c(t.getAxisWidthByAxisId("y2"))+n},S.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(i){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},S.getParentWidth=function(){return this.getParentRectValue("width")},S.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},S.getSvgLeft=function(t){var e=this,n=e.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,o=n.axis_rotated?i.axisX:i.axisY,a=e.main.select("."+o).node(),s=a&&r?a.getBoundingClientRect():{right:0},l=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),h=s.right-l.left-(u?0:e.getCurrentPaddingLeft(t));return h>0?h:0},S.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},S.getHorizontalAxisHeight=function(t){var e=this,n=e.config,i=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),"y"===t&&n.axis_rotated&&n.axis_y_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180)),i+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},S.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},S.initBrush=function(){var t=this,e=t.d3;t.brush=e.svg.brush().on("brush",(function(){t.redrawForBrush()})),t.brush.update=function(){return t.context&&t.context.select("."+i.brush).call(this),this},t.brush.scale=function(e){return t.config.axis_rotated?this.y(e):this.x(e)}},S.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),r=e.subchart_show?"visible":"hidden";n.style("visibility",r),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",i.chart),n.select("."+i.chart).append("g").attr("class",i.chartBars),n.select("."+i.chart).append("g").attr("class",i.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",i.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",i.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?r:"hidden")},S.updateTargetsForSubchart=function(t){var e,n=this,r=n.context,o=n.config,a=n.classChartBar.bind(n),s=n.classBars.bind(n),l=n.classChartLine.bind(n),u=n.classLines.bind(n),h=n.classAreas.bind(n);o.subchart_show&&(r.select("."+i.chartBars).selectAll("."+i.chartBar).data(t).attr("class",a).enter().append("g").style("opacity",0).attr("class",a).append("g").attr("class",s),(e=r.select("."+i.chartLines).selectAll("."+i.chartLine).data(t).attr("class",l).enter().append("g").style("opacity",0).attr("class",l)).append("g").attr("class",u),e.append("g").attr("class",h),r.selectAll("."+i.brush+" rect").attr(o.axis_rotated?"width":"height",o.axis_rotated?n.width2:n.height2))},S.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+i.bars).selectAll("."+i.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},S.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},S.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+i.lines).selectAll("."+i.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},S.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},S.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+i.areas).selectAll("."+i.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",(function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0})),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},S.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},S.redrawSubchart=function(t,e,n,i,r,o,a){var s,l,u,h=this,c=h.d3,d=h.config;h.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(c.event&&"zoom"===c.event.type&&h.brush.extent(h.x.orgDomain()).update(),t&&(h.brush.empty()||h.brush.extent(h.x.orgDomain()).update(),s=h.generateDrawArea(r,!0),l=h.generateDrawBar(o,!0),u=h.generateDrawLine(a,!0),h.updateBarForSubchart(n),h.updateLineForSubchart(n),h.updateAreaForSubchart(n),h.redrawBarForSubchart(l,n,n),h.redrawLineForSubchart(u,n,n),h.redrawAreaForSubchart(s,n,n)))},S.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},S.transformContext=function(t,e){var n,r=this;e&&e.axisSubX?n=e.axisSubX:(n=r.context.select("."+i.axisX),t&&(n=n.transition())),r.context.attr("transform",r.getTranslate("context")),n.attr("transform",r.getTranslate("subx"))},S.getDefaultExtent=function(){var t=this,e=t.config,n=a(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},S.initText=function(){var t=this;t.main.select("."+i.chart).append("g").attr("class",i.chartTexts),t.mainText=t.d3.selectAll([])},S.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),r=e.classTexts.bind(e),o=e.classFocus.bind(e);e.main.select("."+i.chartTexts).selectAll("."+i.chartText).data(t).attr("class",(function(t){return n(t)+o(t)})).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",r)},S.updateText=function(t){var e=this,n=e.config,r=e.barOrLineData.bind(e),o=e.classText.bind(e);e.mainText=e.main.selectAll("."+i.texts).selectAll("."+i.text).data(r),e.mainText.enter().append("text").attr("class",o).attr("text-anchor",(function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"})).style("stroke","none").style("fill",(function(t){return e.color(t)})).style("fill-opacity",0),e.mainText.text((function(t,n,i){return e.dataLabelFormat(t.id)(t.value,t.id,n,i)})),e.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},S.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},S.getTextRect=function(t,e,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),o=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(n).style("font");return o.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",a).text(t).each((function(){i=this.getBoundingClientRect()})),r.remove(),i},S.generateXYForText=function(t,e,n,i){var r=this,o=r.generateGetAreaPoints(t,!1),a=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(n,!1),l=i?r.getXForText:r.getYForText;return function(t,e){var n=r.isAreaType(t)?o:r.isBarType(t)?a:s;return l.call(r,n(t,e),t,this)}},S.getXForText=function(t,e,n){var i,r,o=this,a=n.getBoundingClientRect();return o.config.axis_rotated?(r=o.isBarType(e)?4:6,i=t[2][1]+r*(e.value<0?-1:1)):i=o.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>o.width?i=o.width-a.width:i<0&&(i=4)),i},S.getYForText=function(t,e,n){var i,r=this,o=n.getBoundingClientRect();return r.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*o.height)/2:(i=t[2][1],e.value<0||0===e.value&&!r.hasPositiveValue?(i+=o.height,r.isBarType(e)&&r.isSafari()?i-=3:!r.isBarType(e)&&r.isChrome()&&(i+=3)):i+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(i<o.height?i=o.height:i>this.height&&(i=this.height-4)),i},S.initTitle=function(){var t=this;t.title=t.svg.append("text").text(t.config.title_text).attr("class",t.CLASS.title)},S.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},S.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return n.indexOf("right")>=0?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:n.indexOf("center")>=0?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},S.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},S.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},S.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",i.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&l(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map((function(t){return e.addName(t.values[n.tooltip_init_x])})),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},S.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&&void 0===e.tooltip_order){var n=t.orderTargets(t.data.targets).map((function(t){return t.id}));return(t.isOrderAsc()||t.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}var i=e.tooltip_order;void 0===i&&(i=e.data_order);var r=function(t){return t?t.value:null};if(l(i)&&"asc"===i.toLowerCase())return function(t,e){return r(t)-r(e)};if(l(i)&&"desc"===i.toLowerCase())return function(t,e){return r(e)-r(t)};if(a(i)){var o=i;return void 0===e.tooltip_order&&(o=function(t,e){return i(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),o}return s(i)?function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}:void 0},S.getTooltipContent=function(t,e,n,i){var r,o,a,s,l,u,h=this,c=h.config,d=c.tooltip_format_title||e,f=c.tooltip_format_name||function(t){return t},p=c.tooltip_format_value||n,g=this.getTooltipSortFunction();for(g&&t.sort(g),o=0;o<t.length;o++)if(t[o]&&(t[o].value||0===t[o].value)&&(r||(a=y(d?d(t[o].x):t[o].x),r="<table class='"+h.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+a+"</th></tr>":"")),void 0!==(s=y(p(t[o].value,t[o].ratio,t[o].id,t[o].index,t))))){if(null===t[o].name)continue;l=y(f(t[o].name,t[o].ratio,t[o].id,t[o].index)),u=h.levelColor?h.levelColor(t[o].value):i(t[o].id),r+="<tr class='"+h.CLASS.tooltipName+"-"+h.getTargetSelectorSuffix(t[o].id)+"'>",r+="<td class='name'><span style='background-color:"+u+"'></span>"+l+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>"}return r+"</table>"},S.tooltipPosition=function(t,e,n,i){var r,o,a,s,l,u=this,h=u.config,c=u.d3,d=u.hasArcType(),f=c.mouse(i);return d?(o=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+f[0],s=(u.hasType("gauge")?u.height:u.height/2)+f[1]+20):(r=u.getSvgLeft(!0),h.axis_rotated?(a=(o=r+f[0]+100)+e,l=u.currentWidth-u.getCurrentPaddingRight(),s=u.x(t[0].x)+20):(a=(o=r+u.getCurrentPaddingLeft(!0)+u.x(t[0].x)+20)+e,l=r+u.currentWidth-u.getCurrentPaddingRight(),s=f[1]+15),a>l&&(o-=a-l+20),s+n>u.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:o}},S.showTooltip=function(t,e){var n,i,r,a=this,s=a.config,l=a.hasArcType(),u=t.filter((function(t){return t&&o(t.value)})),h=s.tooltip_position||S.tooltipPosition;0!==u.length&&s.tooltip_show&&(a.tooltip.html(s.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(l),a.color)).style("display","block"),n=a.tooltip.property("offsetWidth"),i=a.tooltip.property("offsetHeight"),r=h.call(this,u,n,i,e),a.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},S.hideTooltip=function(){this.tooltip.style("display","none")},S.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach((function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e})),t||(i.data_type=e)},S.hasType=function(t,e){var n=this,i=n.config.data_types,r=!1;return(e=e||n.data.targets)&&e.length?e.forEach((function(e){var n=i[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(r=!0)})):Object.keys(i).length?Object.keys(i).forEach((function(e){i[e]===t&&(r=!0)})):r=n.config.data_type===t,r},S.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},S.isLineType=function(t){var e=this.config,n=l(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0},S.isStepType=function(t){var e=l(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},S.isSplineType=function(t){var e=l(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},S.isAreaType=function(t){var e=l(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},S.isBarType=function(t){var e=l(t)?t:t.id;return"bar"===this.config.data_types[e]},S.isScatterType=function(t){var e=l(t)?t:t.id;return"scatter"===this.config.data_types[e]},S.isPieType=function(t){var e=l(t)?t:t.id;return"pie"===this.config.data_types[e]},S.isGaugeType=function(t){var e=l(t)?t:t.id;return"gauge"===this.config.data_types[e]},S.isDonutType=function(t){var e=l(t)?t:t.id;return"donut"===this.config.data_types[e]},S.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},S.lineData=function(t){return this.isLineType(t)?[t]:[]},S.arcData=function(t){return this.isArcType(t.data)?[t]:[]},S.barData=function(t){return this.isBarType(t)?t.values:[]},S.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},S.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},S.isInterpolationType=function(t){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)>=0},S.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},S.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},S.initZoom=function(){var t,e=this,n=e.d3,i=e.config;e.zoom=n.behavior.zoom().on("zoomstart",(function(){t=n.event.sourceEvent,e.zoom.altDomain=n.event.sourceEvent.altKey?e.x.orgDomain():null,i.zoom_onzoomstart.call(e.api,n.event.sourceEvent)})).on("zoom",(function(){e.redrawForZoom.call(e)})).on("zoomend",(function(){var r=n.event.sourceEvent;r&&t.clientX===r.clientX&&t.clientY===r.clientY||(e.redrawEventRect(),e.updateZoom(),i.zoom_onzoomend.call(e.api,e.x.orgDomain()))})),e.zoom.scale=function(t){return i.axis_rotated?this.y(t):this.x(t)},e.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=f(e.x.orgDomain())/f(e.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*t,n[1]*t]),this}},S.getZoomDomain=function(){var t=this,e=t.config,n=t.d3;return[n.min([t.orgXDomain[0],e.zoom_x_min]),n.max([t.orgXDomain[1],e.zoom_x_max])]},S.updateZoom=function(){var t=this,e=t.config.zoom_enabled?t.zoom:function(){};t.main.select("."+i.zoomRect).call(e).on("dblclick.zoom",null),t.main.selectAll("."+i.eventRect).call(e).on("dblclick.zoom",null)},S.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,r=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&i.altDomain)return r.domain(i.altDomain),void i.scale(r).updateScaleExtent();t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,r.orgDomain())}},M}()},4419:(t,e,n)=>{var i,r;!function(){var o=window.console||{error:function(){},warn:function(){}};i=[n(5243)],void 0===(r=function(t){!function(t){t.Control.Loading=t.Control.extend({options:{delayIndicator:null,position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(e){t.setOptions(this,e),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(e){if(this.options.spinjs&&"function"!=typeof Spinner)return o.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(e),this._addMapListeners(e),this.options.separate||this.zoomControl||(e.zoomControl?this.zoomControl=e.zoomControl:e.zoomsliderControl&&(this.zoomControl=e.zoomsliderControl));var n,i="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(n=this.zoomControl._container,i+=" leaflet-bar-part-bottom leaflet-bar-part last",t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):n=t.DomUtil.create("div","leaflet-control-zoom leaflet-control-layer-container leaflet-bar"),this._indicatorContainer=n,this._indicator=t.DomUtil.create("a",i,n),this.options.spinjs&&(this._spinner=new Spinner(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),n},onRemove:function(t){this._removeLayerListeners(t),this._removeMapListeners(t)},removeFrom:function(e){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(e),this):t.Control.prototype.removeFrom.call(this,e)},addLoader:function(t){if(this._dataLoaders[t]=!0,this.options.delayIndicator&&!this.delayIndicatorTimeout){var e=this;this.delayIndicatorTimeout=setTimeout((function(){e.updateIndicator(),e.delayIndicatorTimeout=null}),this.options.delayIndicator)}else this.updateIndicator()},removeLoader:function(t){delete this._dataLoaders[t],this.updateIndicator(),this.options.delayIndicator&&this.delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this.delayIndicatorTimeout),this.delayIndicatorTimeout=null)},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var t,e=0;for(t in this._dataLoaders)this._dataLoaders.hasOwnProperty(t)&&e++;return e},_showIndicator:function(){t.DomUtil.addClass(this._indicator,"is-loading"),t.DomUtil.addClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof t.Control.Zoomslider&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){t.DomUtil.removeClass(this._indicator,"is-loading"),t.DomUtil.removeClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof t.Control.Zoomslider&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var t=this.zoomControl._container,e=t.children.length-1;e>0;){var n=t.children[e];if(this._indicator!==n&&0!==n.offsetWidth&&0!==n.offsetHeight)break;e--}return t.children[e]},_handleLoading:function(t){this.addLoader(this.getEventId(t))},_handleBaseLayerChange:function(e){var n=this;e.layer&&e.layer.eachLayer&&"function"==typeof e.layer.eachLayer?e.layer.eachLayer((function(t){n._handleBaseLayerChange({layer:t})})):t.TileLayer.Canvas&&e.layer instanceof t.TileLayer.Canvas||n._handleLoading(e)},_handleLoad:function(t){this.removeLoader(this.getEventId(t))},getEventId:function(t){return t.id?t.id:t.layer?t.layer._leaflet_id:t.target._leaflet_id},_layerAdd:function(t){if(t.layer&&t.layer.on)try{t.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(e){o.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",t.layer),o.warn("L.Control.Loading: Full details",e)}},_layerRemove:function(t){if(t.layer&&t.layer.off)try{t.layer.off({loading:this._handleLoading,load:this._handleLoad},this)}catch(e){o.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",t.layer),o.warn("L.Control.Loading: Full details",e)}},_addLayerListeners:function(t){t.eachLayer((function(t){t.on&&t.on({loading:this._handleLoading,load:this._handleLoad},this)}),this),t.on("layeradd",this._layerAdd,this),t.on("layerremove",this._layerRemove,this)},_removeLayerListeners:function(t){t.eachLayer((function(t){t.off&&t.off({loading:this._handleLoading,load:this._handleLoad},this)}),this),t.off("layeradd",this._layerAdd,this),t.off("layerremove",this._layerRemove,this)},_addMapListeners:function(t){t.on({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(t){t.off({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),t.Map.addInitHook((function(){this.options.loadingControl&&(this.loadingControl=new t.Control.Loading,this.addControl(this.loadingControl))})),t.Control.loading=function(e){return new t.Control.Loading(e)}}(t)}.apply(e,i))||(t.exports=r)}()},1851:()=>{L.BingLayer=L.TileLayer.extend({options:{imagerySet:"Aerial",culture:"",style:"",retinaDpi:"d2",attribution:"Bing",minZoom:1,maxZoom:21},initialize:function(t,e){"object"==typeof t&&(e=t,t=!1),L.TileLayer.prototype.initialize.call(this,null,e),(e=this.options).key=e.key||e.bingMapsKey,e.imagerySet=e.imagerySet||e.type,t&&(e.key=t)},tile2quad:function(t,e,n){for(var i="",r=n;r>0;r--){var o=0,a=1<<r-1;0!=(t&a)&&(o+=1),0!=(e&a)&&(o+=2),i+=o}return i},getTileUrl:function(t){var e={subdomain:this._getSubdomain(t),quadkey:this.tile2quad(t.x,t.y,this._getZoomForUrl()),culture:this.options.culture};return L.Util.template(this._url,e)},callRestService:function(t,e,n){n=n||this;for(var i="_bing_metadata_"+L.Util.stamp(this);window[i];)i+="_";t+="&jsonp="+i;var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t),window[i]=function(t){if(delete window[i],r.remove(),t.errorDetails)throw new Error(t.errorDetails);e.call(n,t)},document.body.appendChild(r)},_makeApiUrl:function(t,e,n){var i={version:"v1",restApi:t,resourcePath:e};return n=L.extend({key:this.options.key},n),L.Util.template("https://dev.virtualearth.net/REST/{version}/{restApi}/{resourcePath}",i)+L.Util.getParamString(n)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this.options,e=this._makeApiUrl("Imagery/Metadata",t.imagerySet,{UriScheme:"https",include:"ImageryProviders",culture:t.culture,style:t.style});this.callRestService(e,(function(e){var n=e.resourceSets[0].resources[0];if(!n.imageUrl)throw new Error("imageUrl not found in response");n.imageUrlSubdomains&&(t.subdomains=n.imageUrlSubdomains),this._providers=n.imageryProviders?this._prepAttrBounds(n.imageryProviders):[],this._attributions=[],this._url=n.imageUrl,t.retinaDpi&&t.detectRetina&&t.zoomOffset&&(this._url+="&dpi="+t.retinaDpi),this.fire("load",{meta:e}),this._map&&this._update()}))}},_prepAttrBounds:function(t){return t.forEach((function(t){t.coverageAreas.forEach((function(t){t.bounds=L.latLngBounds([t.bbox[0],t.bbox[1]],[t.bbox[2],t.bbox[3]])}))})),t},_update:function(t){this._url&&(L.GridLayer.prototype._update.call(this,t),this._update_attribution())},_update_attribution:function(t){var e=this._map.attributionControl;if(e){var n=this._map.getBounds();n=L.latLngBounds(n.getSouthWest().wrap(),n.getNorthEast().wrap());var i=this._getZoomForUrl(),r=this._providers.map((function(e){return!t&&e.coverageAreas.some((function(t){return i<=t.zoomMax&&i>=t.zoomMin&&n.intersects(t.bounds)}))}));r.forEach((function(t,n){t!=this._attributions[n]&&(t?e.addAttribution(this._providers[n].attribution):e.removeAttribution(this._providers[n].attribution))}),this),this._attributions=r}else this._attributions={}},onAdd:function(t){this.loadMetadata(),L.GridLayer.prototype.onAdd.call(this,t)},onRemove:function(t){this._providers&&this._update_attribution(!0),L.GridLayer.prototype.onRemove.call(this,t)}}),L.bingLayer=function(t,e){return new L.BingLayer(t,e)}},5243:function(t,e){!function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function o(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function a(t,e,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)},o}function s(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var p=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(p,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var b=window.requestAnimationFrame||_("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,n){if(!n||b!==w)return b.call(window,i(t,e));t.call(e)}function P(t){t&&S.call(window,t)}var T={extend:e,create:n,bind:i,lastId:r,stamp:o,throttle:a,wrapNum:s,falseFn:l,formatNum:u,trim:h,splitWords:c,setOptions:d,getParamString:f,template:g,isArray:m,indexOf:v,emptyImageUrl:y,requestFn:b,cancelFn:S,requestAnimFrame:M,cancelAnimFrame:P};function C(){}C.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,o=n(r);for(var a in o.constructor=i,i.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(i[a]=this[a]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},C.include=function(t){return e(this.prototype,t),this},C.mergeOptions=function(t){return e(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a];l.fn.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var k=C.extend(A);function E(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var O=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function N(t,e,n){return t instanceof E?t:m(t)?new E(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new E(t.x,t.y):new E(t,e,n)}function I(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return!t||t instanceof I?t:new I(t,e)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(t,e){return t instanceof D?t:new D(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function V(t,e,n){return t instanceof z?t:m(t)&&"object"!=typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,n)}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new E(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new E(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=N(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=N(t)).x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},I.prototype={extend:function(t){return t=N(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new E(this.min.x,this.max.y)},getTopRight:function(){return new E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof E?N(t):R(t))instanceof I?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},overlaps:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},D.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof z)e=t,n=t;else{if(!(t instanceof D))return t?this.extend(V(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new D(new z(e.lat-i,e.lng-r),new z(n.lat+i,n.lng+r))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof z||"lat"in t?V(t):j(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof D?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},z.prototype={equals:function(t,e){return!!t&&(t=V(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return F.distance(this,V(t))},wrap:function(){return F.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};var G,$={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new I(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new z(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new D(new z(o.lat-i,o.lng-r),new z(a.lat-i,a.lng-r))}},F=e({},$,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),B=6378137,H={R:B,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new E(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(G=B*Math.PI,new I([-G,-G],[G,G]))};function U(t,e,n,i){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function W(t,e,n,i){return new U(t,e,n,i)}U.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new E((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var q=e({},F,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return W(t,.5,-t,.5)}()}),X=e({},q,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,i,r,o,a,s,l="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(a=t[n]).length;i<o;i++)l+=(i?"L":"M")+(s=a[i]).x+" "+s.y;l+=e?At?"z":"x":""}return l||"M0 0"}var K=document.documentElement.style,J="ActiveXObject"in window,Q=J&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=kt("webkit"),nt=kt("android"),it=kt("android 2")||kt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&kt("Google")&&rt<537&&!("AudioNode"in window),at=!!window.opera,st=!tt&&kt("chrome"),lt=kt("gecko")&&!et&&!at&&!J,ut=!st&&kt("safari"),ht=kt("phantom"),ct="OTransition"in K,dt=0===navigator.platform.indexOf("Win"),ft=J&&"transition"in K,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,gt="MozPerspective"in K,mt=!window.L_DISABLE_3D&&(ft||pt||gt)&&!ct&&!ht,vt="undefined"!=typeof orientation||kt("mobile"),yt=vt&&et,_t=vt&&pt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),bt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),St=vt&&at,Mt=vt&&lt,Pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Ct=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!Z("svg").createSVGRect),Lt=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Et={ie:J,ielt9:Q,edge:tt,webkit:et,android:nt,android23:it,androidStock:ot,opera:at,chrome:st,gecko:lt,safari:ut,phantom:ht,opera12:ct,win:dt,ie3d:ft,webkit3d:pt,gecko3d:gt,any3d:mt,mobile:vt,mobileWebkit:yt,mobileWebkit3d:_t,msPointer:xt,pointer:wt,touch:bt,mobileOpera:St,mobileGecko:Mt,retina:Pt,passiveEvents:Tt,canvas:Ct,svg:At,vml:Lt},Ot=xt?"MSPointerDown":"pointerdown",Nt=xt?"MSPointerMove":"pointermove",It=xt?"MSPointerUp":"pointerup",Rt=xt?"MSPointerCancel":"pointercancel",Dt={},jt=!1;function zt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Re(t),Ft(t,e)}));t["_leaflet_touchstart"+n]=r,t.addEventListener(Ot,r,!1),jt||(document.addEventListener(Ot,Vt,!0),document.addEventListener(Nt,Gt,!0),document.addEventListener(It,$t,!0),document.addEventListener(Rt,$t,!0),jt=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ft(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Nt,i,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var i=function(t){Ft(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(It,i,!1),t.addEventListener(Rt,i,!1)}(t,n,r),this}function Vt(t){Dt[t.pointerId]=t}function Gt(t){Dt[t.pointerId]&&(Dt[t.pointerId]=t)}function $t(t){delete Dt[t.pointerId]}function Ft(t,e){for(var n in t.touches=[],Dt)t.touches.push(Dt[n]);t.changedTouches=[t],e(t)}var Bt=xt?"MSPointerDown":wt?"pointerdown":"touchstart",Ht=xt?"MSPointerUp":wt?"pointerup":"touchend",Ut="_leaflet_";var Wt,qt,Xt,Zt,Yt,Kt=fe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jt=fe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===Jt||"OTransition"===Jt?Jt+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ne(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ie(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function se(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function le(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!se(t,e)){var o=ce(t);he(t,(o?o+" ":"")+e)}}function ue(t,e){void 0!==t.classList?t.classList.remove(e):he(t,h((" "+ce(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function fe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function pe(t,e,n){var i=e||new E(0,0);t.style[Kt]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ge(t,e){t._leaflet_pos=e,mt?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function me(t){return t._leaflet_pos||new E(0,0)}if("onselectstart"in document)Wt=function(){Pe(window,"selectstart",Re)},qt=function(){Ce(window,"selectstart",Re)};else{var ve=fe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wt=function(){if(ve){var t=document.documentElement.style;Xt=t[ve],t[ve]="none"}},qt=function(){ve&&(document.documentElement.style[ve]=Xt,Xt=void 0)}}function ye(){Pe(window,"dragstart",Re)}function _e(){Ce(window,"dragstart",Re)}function xe(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(we(),Zt=t,Yt=t.style.outline,t.style.outline="none",Pe(window,"keydown",we))}function we(){Zt&&(Zt.style.outline=Yt,Zt=void 0,Yt=void 0,Ce(window,"keydown",we))}function be(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Se(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Me={TRANSFORM:Kt,TRANSITION:Jt,TRANSITION_END:Qt,get:te,getStyle:ee,create:ne,remove:ie,empty:re,toFront:oe,toBack:ae,hasClass:se,addClass:le,removeClass:ue,setClass:he,getClass:ce,setOpacity:de,testProp:fe,setTransform:pe,setPosition:ge,getPosition:me,disableTextSelection:Wt,enableTextSelection:qt,disableImageDrag:ye,enableImageDrag:_e,preventOutline:xe,restoreOutline:we,getSizedParentNode:be,getScale:Se};function Pe(t,e,n,i){if("object"==typeof e)for(var r in e)ke(t,r,e[r],n);else for(var o=0,a=(e=c(e)).length;o<a;o++)ke(t,e[o],n,i);return this}var Te="_leaflet_events";function Ce(t,e,n,i){if("object"==typeof e)for(var r in e)Ee(t,r,e[r],n);else if(e)for(var o=0,a=(e=c(e)).length;o<a;o++)Ee(t,e[o],n,i);else{for(var s in t[Te])Ee(t,s,t[Te][s]);delete t[Te]}return this}function Ae(){if(wt)return!(tt||ut)}var Le={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ke(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):"");if(t[Te]&&t[Te][r])return this;var a=function(e){return n.call(i||t,e||window.event)},s=a;wt&&0===e.indexOf("touch")?zt(t,e,a,r):bt&&"dblclick"===e&&!Ae()?function(t,e,n){var i,r,o=!1;function a(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);r=t.touches?t.touches[0]:t,o=n>0&&n<=250,i=e}function s(t){if(o&&!r.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var n,a,s={};for(a in r)n=r[a],s[a]=n&&n.bind?n.bind(r):n;r=s}r.type="dblclick",r.button=0,e(r),i=null}}t[Ut+Bt+n]=a,t[Ut+Ht+n]=s,t[Ut+"dblclick"+n]=e,t.addEventListener(Bt,a,!!Tt&&{passive:!1}),t.addEventListener(Ht,s,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,a,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Le[e]||e,a,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,Be(t,e)&&s(e)},t.addEventListener(Le[e],a,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[Te]=t[Te]||{},t[Te][r]=a}function Ee(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):""),a=t[Te]&&t[Te][r];if(!a)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Ot,i,!1):"touchmove"===e?t.removeEventListener(Nt,i,!1):"touchend"===e&&(t.removeEventListener(It,i,!1),t.removeEventListener(Rt,i,!1))}(t,e,r):bt&&"dblclick"===e&&!Ae()?function(t,e){var n=t[Ut+Bt+e],i=t[Ut+Ht+e],r=t[Ut+"dblclick"+e];t.removeEventListener(Bt,n,!!Tt&&{passive:!1}),t.removeEventListener(Ht,i,!!Tt&&{passive:!1}),t.removeEventListener("dblclick",r,!1)}(t,r):"removeEventListener"in t?t.removeEventListener(Le[e]||e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[Te][r]=null}function Oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Fe(t),this}function Ne(t){return ke(t,"wheel",Oe),this}function Ie(t){return Pe(t,"mousedown touchstart dblclick",Oe),ke(t,"click",$e),this}function Re(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function De(t){return Re(t),Oe(t),this}function je(t,e){if(!e)return new E(t.clientX,t.clientY);var n=Se(e),i=n.boundingClientRect;return new E((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var ze=dt&&st?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Ve(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ze:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ge={};function $e(t){Ge[t.type]=!0}function Fe(t){var e=Ge[t.type];return Ge[t.type]=!1,e}function Be(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var He={on:Pe,off:Ce,stopPropagation:Oe,disableScrollPropagation:Ne,disableClickPropagation:Ie,preventDefault:Re,stop:De,getMousePosition:je,getWheelDelta:Ve,fakeStop:$e,skipped:Fe,isExternalTarget:Be,addListener:Pe,removeListener:Ce},Ue=k.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=me(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ge(this._el,n),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),We=k.extend({options:{crs:q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(V(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jt&&mt&&!St&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(V(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof E?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=N(e.paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=N(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ue,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){le(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!mt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=V(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),u=r.distanceTo(i)||1,h=1.42,c=2.0164;function d(t){var e=(l*l-s*s+(t?-1:1)*c*c*u*u)/(2*(t?l:s)*c*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var g=d(0);function m(t){return s*(p(g)*(f(e=g+h*t)/p(e))-f(g))/c;var e}var v=Date.now(),y=(d(1)-g)/h,_=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-v)/_,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*y;o<=1?(this._flyToFrame=M(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(m(l)/u)),a),this.getScaleZoom(s/function(t){return s*(p(g)/p(g+h*t))}(l),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=N((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),u=R([s.min.add(n),s.max.subtract(i)]);if(!u.contains(a)){this._enforcingBounds=!0;var h=o.subtract(a),c=N(a.x+h.x,a.y+h.y);(a.x<u.min.x||a.x>u.max.x)&&(c.x=o.x-h.x,h.x>0?c.x+=l.x-n.x:c.x-=l.x-i.x),(a.y<u.min.y||a.y>u.max.y)&&(c.y=o.y-h.y,h.y>0?c.y+=l.y-n.y:c.y-=l.y-i.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=n.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new z(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ne("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new D(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=N(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=R(this.project(s,i),this.project(a,i)).getSize(),h=mt?this.options.zoomSnap:1,c=l.x/u.x,d=l.y/u.y,f=e?Math.max(c,d):Math.min(c,d);return i=this.getScaleZoom(f,i),h&&(i=Math.round(i/(h/100))*(h/100),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new E(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(V(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(N(t),e)},layerPointToLatLng:function(t){var e=N(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(V(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(V(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(V(t),V(e))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(t)))},mouseEventToContainerPoint:function(t){return je(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=te(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Pe(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt,le(t,"leaflet-container"+(bt?" leaflet-touch":"")+(Pt?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ge(this._mapPane,new E(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ge(this._mapPane,new E(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ge(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ce:Pe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),mt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=M((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(r&&!Be(a,t))break;if(i.push(n),r)break}if(a===this._container)break;a=a.parentNode}return i.length||s||r||!Be(a,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Fe(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||xe(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&Re(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(n,a,!0),a.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return me(this._mapPane)||new E(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new I(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new I(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new E(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=mt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Kt,n=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(M((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M((function(){this._moveEnd(!0)}),this))}});var qe=C.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return le(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new qe(t)};We.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ne("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=ne("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ze=qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ne("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ie(e),Ne(e);var i=this._section=ne("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Pe(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ne("a",t+"-toggle",e);r.href="#",r.title="Layers",bt?(Pe(r,"click",De),Pe(r,"click",this.expand,this)):Pe(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ne("div",t+"-base",i),this._separator=ne("div",t+"-separator",i),this._overlaysList=ne("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(e),e.layerId=o(t.layer),Pe(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var a=document.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ye=qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ne("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ne("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ie(o),Pe(o,"click",De),Pe(o,"click",r,this),Pe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ue(this._zoomInButton,e),ue(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&le(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&le(this._zoomInButton,e)}});We.mergeOptions({zoomControl:!0}),We.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Ye,this.addControl(this.zoomControl))}));var Ke=qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ne("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ne("div",e,n)),t.imperial&&(this._iScale=ne("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Je=qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Ie(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});We.mergeOptions({attributionControl:!0}),We.addInitHook((function(){this.options.attributionControl&&(new Je).addTo(this)}));qe.Layers=Ze,qe.Zoom=Ye,qe.Scale=Ke,qe.Attribution=Je,Xe.layers=function(t,e,n){return new Ze(t,e,n)},Xe.zoom=function(t){return new Ye(t)},Xe.scale=function(t){return new Ke(t)},Xe.attribution=function(t){return new Je(t)};var Qe=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,e){return t.addHandler(e,this),this};var tn,en={Events:A},nn=bt?"touchstart mousedown":"mousedown",rn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},on={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},an=k.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Pe(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(an._dragging===this&&this.finishDrag(),Ce(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!se(this._element,"leaflet-zoom-anim")&&!(an._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(an._dragging=this,this._preventOutline&&xe(this._element),ye(),Wt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=be(this._element);this._startPoint=new E(e.clientX,e.clientY),this._parentScale=Se(n),Pe(document,on[t.type],this._onMove,this),Pe(document,rn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new E(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Re(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=me(this._element).subtract(n),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,P(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ge(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on)Ce(document,on[t],this._onMove,this),Ce(document,rn[t],this._onUp,this);_e(),qt(),this._moved&&this._moving&&(P(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,an._dragging=!1}});function sn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,un(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)fn(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function ln(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function un(t,e,n,i,r){var o,a,s,l=0;for(a=i+1;a<=r-1;a++)(s=pn(t[a],t[i],t[r],!0))>l&&(o=a,l=s);l>n&&(e[o]=1,un(t,e,n,i,o),un(t,e,n,o,r))}function hn(t,e,n,i,r){var o,a,s,l=i?tn:dn(t,n),u=dn(e,n);for(tn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=dn(a=cn(t,e,o=l||u,n,r),n),o===l?(t=a,l=s):(e=a,u=s)}}function cn(t,e,n,i,r){var o,a,s=e.x-t.x,l=e.y-t.y,u=i.min,h=i.max;return 8&n?(o=t.x+s*(h.y-t.y)/l,a=h.y):4&n?(o=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(o=h.x,a=t.y+l*(h.x-t.x)/s):1&n&&(o=u.x,a=t.y+l*(u.x-t.x)/s),new E(o,a,r)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function fn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function pn(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,l=n.y-a,u=s*s+l*l;return u>0&&((r=((t.x-o)*s+(t.y-a)*l)/u)>1?(o=n.x,a=n.y):r>0&&(o+=s*r,a+=l*r)),s=t.x-o,l=t.y-a,i?s*s+l*l:new E(o,a)}function gn(t){return!m(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function mn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var vn={simplify:sn,pointToSegmentDistance:ln,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:hn,_getEdgeIntersection:cn,_getBitCode:dn,_sqClosestPointOnSegment:pn,isFlat:gn,_flat:mn};function yn(t,e,n){var i,r,o,a,s,l,u,h,c,d=[1,4,2,8];for(r=0,u=t.length;r<u;r++)t[r]._code=dn(t[r],e);for(a=0;a<4;a++){for(h=d[a],i=[],r=0,o=(u=t.length)-1;r<u;o=r++)s=t[r],l=t[o],s._code&h?l._code&h||((c=cn(l,s,h,e,n))._code=dn(c,e),i.push(c)):(l._code&h&&((c=cn(l,s,h,e,n))._code=dn(c,e),i.push(c)),i.push(s));t=i}return t}var _n={clipPolygon:yn},xn={project:function(t){return new E(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new I([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new E(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new z(s*n,t.x*n/i)}},bn={LonLat:xn,Mercator:wn,SphericalMercator:H},Sn=e({},F,{code:"EPSG:3395",projection:wn,transformation:function(){var t=.5/(Math.PI*wn.R);return W(t,.5,-t,.5)}()}),Mn=e({},F,{code:"EPSG:4326",projection:xn,transformation:W(1/180,1,-1/180,.5)}),Pn=e({},$,{projection:xn,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});$.Earth=F,$.EPSG3395=Sn,$.EPSG3857=q,$.EPSG900913=X,$.EPSG4326=Mn,$.Simple=Pn;var Tn=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});We.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?m(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cn=Tn.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),An=Cn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Cn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Cn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new D;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Ln=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=N(i),o=N("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Pt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var kn=Ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return kn.imagePath||(kn.imagePath=this._detectIconPath()),(this.options.imagePath||kn.imagePath)+Ln.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ne("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),En=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new an(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=me(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=R(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var u=N((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),ge(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=me(e._icon),r=e._map.layerPointToLatLng(i);n&&ge(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),On=Tn.extend({options:{icon:new kn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=V(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),le(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(le(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),En)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new En(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Nn=Tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),In=Nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=V(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new I(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Rn=In.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),d(this,n),this._latlng=V(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===F.distance){var r=Math.PI/180,o=this._mRadius/F.R/r,a=n.project([e+o,t]),s=n.project([e-o,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,h=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(u*r))/(Math.cos(e*r)*Math.cos(u*r)))/r;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-n.project([u,t-h]).x,this._radiusY=l.y-a.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}});var Dn=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=pn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,h=l.length;u<h;u++){var c=o(t,e=l[u-1],n=l[u],!0);c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(r=s[t],o=s[t+1],(i+=n=r.distanceTo(o))>e)return a=(i-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=V(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new D,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),i=0,r=t.length;i<r;i++)n?(e[i]=V(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new E(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof z,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,a,s,l=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=hn(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=sn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&ln(t,s[r],s[i])<=l)return!0;return!1}});Dn._flat=mn;var jn=Dn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,l,u=this._rings[0],h=u.length;if(!h)return null;for(o=a=s=0,t=0,e=h-1;t<h;e=t++)n=u[t],i=u[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return l=0===o?u[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Dn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Dn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new E(e,e);if(t=new I(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=yn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||Dn.prototype._containsPoint.call(this,t,!0)}});var zn=An.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=m(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Vn(t,o);return a?(a.feature=Wn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Vn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,h=e&&e.coordsToLatLng||$n;if(!s&&!a)return null;switch(a.type){case"Point":return Gn(u,t,n=h(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=h(s[r]),l.push(Gn(u,t,n,e));return new An(l);case"LineString":case"MultiLineString":return i=Fn(s,"LineString"===a.type?0:1,h),new Dn(i,e);case"Polygon":case"MultiPolygon":return i=Fn(s,"Polygon"===a.type?1:2,h),new jn(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var c=Vn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new An(l);default:throw new Error("Invalid GeoJSON object.")}}function Gn(t,e,n,i){return t?t(e,n):new On(n,i&&i.markersInheritOptions&&i)}function $n(t){return new z(t[1],t[0],t[2])}function Fn(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?Fn(t[o],e-1,n):(n||$n)(t[o]),r.push(i);return r}function Bn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Hn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Hn(t[o],e-1,n,i):Bn(t[o],i));return!e&&n&&r.push(r[0]),r}function Un(t,n){return t.feature?e({},t.feature,{geometry:n}):Wn(n)}function Wn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var qn={toGeoJSON:function(t){return Un(this,{type:"Point",coordinates:Bn(this.getLatLng(),t)})}};function Xn(t,e){return new zn(t,e)}On.include(qn),Rn.include(qn),In.include(qn),Dn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Un(this,{type:(e?"Multi":"")+"LineString",coordinates:Hn(this._latlngs,e?1:0,!1,t)})}}),jn.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),i=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Un(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Cn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Un(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Wn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),n?Un(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Zn=Xn,Yn=Tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ne("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,n,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ge(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Kn=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ne("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=ne("source");s.src=this._url[a],e.appendChild(s)}}}});var Jn=Yn.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var Qn=Tn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(ie,void 0,this._container),200)):ie(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=V(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Tn||(n=e,e=t),e instanceof An)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?ge(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),ti=Qn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",Oe))},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",Oe))},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ne("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ne("div",t+"-content-wrapper",e);if(this._contentNode=ne("div",t+"-content",n),Ie(e),Ne(this._contentNode),Pe(e,"contextmenu",Oe),this._tipContainer=ne("div",t+"-tip-container",e),this._tip=ne("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ne("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Pe(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",le(t,o)):ue(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ge(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new E(this._containerLeft,-n-this._containerBottom);r._add(me(this._container));var o=t.layerPointToContainerPoint(r),a=N(this.options.autoPanPadding),s=N(this.options.autoPanPaddingTopLeft||a),l=N(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),h=0,c=0;o.x+i+l.x>u.x&&(h=o.x+i-u.x+l.x),o.x-h-s.x<0&&(h=o.x-s.x),o.y+n+l.y>u.y&&(c=o.y+n-u.y+l.y),o.y-c-s.y<0&&(c=o.y-s.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),De(t)},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(t,e,n){return t instanceof ti||(t=new ti(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Tn.include({bindPopup:function(t,e){return t instanceof ti?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ti(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(De(t),e instanceof Nn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ei=Qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return bt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ne("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(t),s=this.options.direction,l=r.offsetWidth,u=r.offsetHeight,h=N(this.options.offset),c=this._getAnchor();"top"===s?(e=l/2,n=u):"bottom"===s?(e=l/2,n=0):"center"===s?(e=l/2,n=u/2):"right"===s?(e=0,n=u/2):"left"===s?(e=l,n=u/2):a.x<o.x?(s="right",e=0,n=u/2):(s="left",e=l+2*(h.x+c.x),n=u/2),t=t.subtract(N(e,n,!0)).add(h).add(c),ue(r,"leaflet-tooltip-right"),ue(r,"leaflet-tooltip-left"),ue(r,"leaflet-tooltip-top"),ue(r,"leaflet-tooltip-bottom"),le(r,"leaflet-tooltip-"+s),ge(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});We.include({openTooltip:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Tn.include({bindTooltip:function(t,e){return t instanceof ei?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ei(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),bt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ni=Ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(re(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=N(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Ln.Default=kn;var ii=Tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof E?t:new E(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){de(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);de(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(P(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ie(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new E(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new E(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();mt?pe(t.el,r,i):ge(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new I(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new I(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var h=this._tiles[u].coords;h.z===this._tileZoom&&l.contains(new E(h.x,h.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var c=r.min.y;c<=r.max.y;c++)for(var d=r.min.x;d<=r.max.x;d++){var f=new E(d,c);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new D(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new E(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ie(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Q&&this.options.opacity<1&&de(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&M(i(this._tileReady,this,t,null,o)),ge(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),P(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(le(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new E(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var ri=ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Pt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Pe(n,"load",i(this._tileOnLoad,this,e,n)),Pe(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Pt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return g(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=y,ie(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",y),ii.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ii.prototype._tileReady.call(this,t,e,n)}});function oi(t,e){return new ri(t,e)}var ai=ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var o=(n=d(this,n)).detectRetina&&Pt?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=R(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(this._wmsVersion>=1.3&&this._crs===Mn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=ri.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ri.WMS=ai,oi.wms=function(t,e){return new ai(t,e)};var si=Tn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=me(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-n).add(i).add(r).subtract(a);mt?pe(this._container,s,n):ge(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Pe(t,"mousemove",this._onMouseMove,this),Pe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,ie(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Pt?2:1;ge(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Pt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],l[i?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&($e(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ue(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(le(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ui(t){return Ct?new li(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ci={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ie(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=hi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=m(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=hi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){ae(t._container)}},di=Lt?hi:Z,fi=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ge(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=di("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){ae(t._path)}});function pi(t){return At||Lt?new fi(t):null}Lt&&fi.include(ci),We.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ui(t)||pi(t)}});var gi=jn.extend({initialize:function(t,e){jn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=di,fi.pointsToPath=Y,zn.geometryToLayer=Vn,zn.coordsToLatLng=$n,zn.coordsToLatLngs=Fn,zn.latLngToCoords=Bn,zn.latLngsToCoords=Hn,zn.getFeature=Un,zn.asFeature=Wn,We.mergeOptions({boxZoom:!0});var mi=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Wt(),ye(),this._startPoint=this._map.mouseEventToContainerPoint(t),Pe(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),n=e.getSize();ge(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ie(this._box),ue(this._container,"leaflet-crosshair")),qt(),_e(),Ce(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});We.addInitHook("addHandler","boxZoom",mi),We.mergeOptions({doubleClickZoom:!0});var vi=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});We.addInitHook("addHandler","doubleClickZoom",vi),We.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yi=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new an(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),h=s.multiplyBy(u/l),c=u/(n.inertiaDeceleration*a),d=h.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),M((function(){e.panBy(d,{duration:c,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});We.addInitHook("addHandler","dragging",yi),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _i=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Pe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=N(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}De(t)}}});We.addInitHook("addHandler","keyboard",_i),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xi=Qe.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ve(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),De(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});We.addInitHook("addHandler","scrollWheelZoom",xi),We.mergeOptions({tap:!0,tapTolerance:15});var wi=Qe.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Re(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new E(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&le(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Pe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ue(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new E(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!bt||wt&&!ut||We.addInitHook("addHandler","tap",wi),We.mergeOptions({touchZoom:bt&&!it,bounceAtZoomLimits:!0});var bi=Qe.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend",this._onTouchEnd,this),Re(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(s,this,!0),Re(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});We.addInitHook("addHandler","touchZoom",bi),We.BoxZoom=mi,We.DoubleClickZoom=vi,We.Drag=yi,We.Keyboard=_i,We.ScrollWheelZoom=xi,We.Tap=wi,We.TouchZoom=bi,t.version="1.7.1",t.Control=qe,t.control=Xe,t.Browser=Et,t.Evented=k,t.Mixin=en,t.Util=T,t.Class=C,t.Handler=Qe,t.extend=e,t.bind=i,t.stamp=o,t.setOptions=d,t.DomEvent=He,t.DomUtil=Me,t.PosAnimation=Ue,t.Draggable=an,t.LineUtil=vn,t.PolyUtil=_n,t.Point=E,t.point=N,t.Bounds=I,t.bounds=R,t.Transformation=U,t.transformation=W,t.Projection=bn,t.LatLng=z,t.latLng=V,t.LatLngBounds=D,t.latLngBounds=j,t.CRS=$,t.GeoJSON=zn,t.geoJSON=Xn,t.geoJson=Zn,t.Layer=Tn,t.LayerGroup=Cn,t.layerGroup=function(t,e){return new Cn(t,e)},t.FeatureGroup=An,t.featureGroup=function(t,e){return new An(t,e)},t.ImageOverlay=Yn,t.imageOverlay=function(t,e,n){return new Yn(t,e,n)},t.VideoOverlay=Kn,t.videoOverlay=function(t,e,n){return new Kn(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=Qn,t.Popup=ti,t.popup=function(t,e){return new ti(t,e)},t.Tooltip=ei,t.tooltip=function(t,e){return new ei(t,e)},t.Icon=Ln,t.icon=function(t){return new Ln(t)},t.DivIcon=ni,t.divIcon=function(t){return new ni(t)},t.Marker=On,t.marker=function(t,e){return new On(t,e)},t.TileLayer=ri,t.tileLayer=oi,t.GridLayer=ii,t.gridLayer=function(t){return new ii(t)},t.SVG=fi,t.svg=pi,t.Renderer=si,t.Canvas=li,t.canvas=ui,t.Path=Nn,t.CircleMarker=In,t.circleMarker=function(t,e){return new In(t,e)},t.Circle=Rn,t.circle=function(t,e,n){return new Rn(t,e,n)},t.Polyline=Dn,t.polyline=function(t,e){return new Dn(t,e)},t.Polygon=jn,t.polygon=function(t,e){return new jn(t,e)},t.Rectangle=gi,t.rectangle=function(t,e){return new gi(t,e)},t.Map=We,t.map=function(t,e){return new We(t,e)};var Si=window.L;t.noConflict=function(){return window.L=Si,this},window.L=t}(e)},2861:(t,e,n)=>{var i=n(6907),r=n(8738),o="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var i=new Array(n.length);for(t=0;t<i.length;++t)i[t]=n[t][1];return i}function l(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var r="generic"===t;if(-1===e){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===e)return o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",new Function("TrivialArray",o)(u[t][0]);o=["'use strict'"];var a=i(e),l=a.map((function(t){return"i"+t})),h="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),c=a.map((function(t){return"b"+t})).join(","),d=a.map((function(t){return"c"+t})).join(",");o.push("function "+n+"(a,"+c+","+d+",d){this.data=a","this.shape=["+c+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),r?o.push("return this.data.set("+h+",v)}"):o.push("return this.data["+h+"]=v}"),o.push("proto.get=function "+n+"_get("+l.join(",")+"){"),r?o.push("return this.data.get("+h+")}"):o.push("return this.data["+h+"]}"),o.push("proto.index=function "+n+"_index(",l.join(),"){return "+h+"}"),o.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var f=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),p=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));o.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+p.join(","));for(var g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");for(o.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");o.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var m=new Array(e),v=new Array(e);for(g=0;g<e;++g)m[g]="a[i"+g+"]",v[g]="b[i"+g+"]";for(o.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+v.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset"),g=0;g<e;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(u[t],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,n,i){if(void 0===t)return(0,u.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===n){n=new Array(a);for(var s=a-1,h=1;s>=0;--s)n[s]=h,h*=e[s]}if(void 0===i)for(i=0,s=0;s<a;++s)n[s]<0&&(i-=(e[s]-1)*n[s]);for(var c=function(t){if(r(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),d=u[c];d.length<=a+1;)d.push(l(c,d.length-1));return(0,d[a+1])(t,e,n,i)}},5557:(t,e,n)=>{t.exports=function(t){for(var e=t.length,n=[],o=[],s=0;s<e;++s)for(var h=t[s],c=h.length,d=c-1,f=0;f<c;d=f++){var p=h[d],g=h[f];p[0]===g[0]?o.push([p,g]):n.push([p,g])}if(0===n.length)return 0===o.length?u:(m=l(o),function(t){return m(t[0],t[1])?0:1});var m,v=r(n),y=function(t,e){return function(n){var r=a.le(e,n[0]);if(r<0)return 1;var o=t[r];if(!o){if(!(r>0&&e[r]===n[0]))return 1;o=t[r-1]}for(var s=1;o;){var l=o.key,u=i(n,l[0],l[1]);if(l[0][0]<l[1][0])if(u<0)o=o.left;else{if(!(u>0))return 0;s=-1,o=o.right}else if(u>0)o=o.left;else{if(!(u<0))return 0;s=1,o=o.right}}return s}}(v.slabs,v.coordinates);return 0===o.length?y:function(t,e){return function(n){return t(n[0],n[1])?0:e(n)}}(l(o),y)};var i=n(146)[3],r=n(9411),o=n(821),a=n(3076);function s(){return!0}function l(t){for(var e={},n=0;n<t.length;++n){var i=t[n],r=i[0][0],a=i[0][1],l=i[1][1],u=[Math.min(a,l),Math.max(a,l)];r in e?e[r].push(u):e[r]=[u]}var h={},c=Object.keys(e);for(n=0;n<c.length;++n){var d=e[c[n]];h[c[n]]=o(d)}return function(t){return function(e,n){var i=t[e];return!!i&&!!i.queryPoint(n,s)}}(h)}function u(t){return 1}},6280:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>ze});var i=6378137,r=.0066943799901413165,o=484813681109536e-20,a=Math.PI/2,s=1e-10,l=.017453292519943295,u=57.29577951308232,h=Math.PI/4,c=2*Math.PI,d=3.14159265359,f={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const p={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var g=/[\s_\-\/\(\)]/g;function m(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(g,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(g,"")===r)return t[n]}function v(t){var e,n,i,r={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*l},lat_1:function(t){r.lat1=t*l},lat_2:function(t){r.lat2=t*l},lat_ts:function(t){r.lat_ts=t*l},lon_0:function(t){r.long0=t*l},lon_1:function(t){r.long1=t*l},lon_2:function(t){r.long2=t*l},alpha:function(t){r.alpha=parseFloat(t)*l},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*l},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=m(p,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*l},pm:function(t){var e=m(f,t);r.from_greenwich=(e||parseFloat(t))*l},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in o)n=o[e],e in a?"function"==typeof(i=a[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var y=/\s/,_=/[A-Za-z]/,x=/[A-Za-z84]/,w=/[,\]]/,b=/[\d\.E\-\+]/;function S(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function M(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return P(e,t),t}),i);e&&(t[e]=r)}function P(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void P(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&P(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&P(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void M(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return P(t,e[n]);return M(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function T(t){return.017453292519943295*t}function C(t){var e=new S(t).output(),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return P(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",T],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",T],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",T],["lat0","latitude_of_origin",T],["lat0","standard_parallel_1",T],["lat1","standard_parallel_1",T],["lat2","standard_parallel_2",T],["azimuth","Azimuth"],["alpha","azimuth",T],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=T(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function A(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?A[t]=v(arguments[1]):A[t]=C(arguments[1]):A[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?A.apply(e,t):A(t)}));if("string"==typeof t){if(t in A)return A[t]}else"EPSG"in t?A["EPSG:"+t.EPSG]=t:"ESRI"in t?A["ESRI:"+t.ESRI]=t:"IAU2000"in t?A["IAU2000:"+t.IAU2000]=t:console.log(t);return}}S.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;y.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},S.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(w.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},S.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},S.prototype.number=function(t){if(!b.test(t)){if(w.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},S.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},S.prototype.keyword=function(t){if(x.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!w.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},S.prototype.neutral=function(t){if(_.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(b.test(t))return this.word=t,void(this.state=3);if(!w.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},S.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(A);const L=A;var k=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],E=["3857","900913","3785","102113"];function O(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function N(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function I(t){return t<0?-1:1}function R(t){return Math.abs(t)<=d?t:t-I(t)*c}function D(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(a-e))/i}function j(t,e){for(var n,i,r=.5*t,o=a-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=i=a-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999}function z(t){return t}var V=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=N(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*u>90&&r*u<-90&&i*u>180&&i*u<-180)return null;if(Math.abs(Math.abs(r)-a)<=s)return null;if(this.sphere)e=this.x0+this.a*this.k0*R(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*r));else{var o=Math.sin(r),l=D(this.e,r,o);e=this.x0+this.a*this.k0*R(i-this.long0),n=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=a-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(n=j(this.e,o)))return null}return e=R(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:z,inverse:z,names:["longlat","identity"]}],G={},$=[];function F(t,e){var n=$.length;return t.names?($[n]=t,t.names.forEach((function(t){G[t.toLowerCase()]=n})),this):(console.log(e),!0)}const B={start:function(){V.forEach(F)},add:F,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==G[e]&&$[G[e]]?$[G[e]]:void 0}};var H={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},U=H.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};H.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var W={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var q={};function X(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:q[t]||null,isNull:!1}}function Z(t){return t/3600*Math.PI/180}function Y(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function K(t){return t.map((function(t){return[Z(t.longitudeShift),Z(t.latitudeShift)]}))}function J(t,e,n){return{name:Y(t,e+8,e+16).trim(),parent:Y(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Q(t,e,n,i){for(var r=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(r+16*a,i),longitudeShift:t.getFloat32(r+16*a+4,i),latitudeAccuracy:t.getFloat32(r+16*a+8,i),longitudeAccuracy:t.getFloat32(r+16*a+12,i)};o.push(s)}return o}function tt(t,e){if(!(this instanceof tt))return new tt(t);e=e||function(t){if(t)throw t};var n=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in L}(t))return L[t];if(function(t){return k.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=C(t);if(function(t){var e=m(t,"authority");if(e){var n=m(e,"epsg");return n&&E.indexOf(n)>-1}}(e))return L["EPSG:3857"];var n=function(t){var e=m(t,"extension");if(e)return m(e,"proj4")}(e);return n?v(n):e}return function(t){return"+"===t[0]}(t)?v(t):void 0}(t);if("object"==typeof n){var i=tt.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=m(W,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a,l,u,h,c,d,f=function(t,e,n,i,r){if(!t){var o=m(H,i);o||(o=U),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<s)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(a=f.a,l=f.b,f.rf,c=((u=a*a)-(h=l*l))/u,d=0,n.R_A?(u=(a*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*a,c=0):d=Math.sqrt(c),{es:c,e:d,ep2:(u-h)/h}),g=function(t){return void 0===t?null:t.split(",").map(X)}(n.nadgrids),y=n.datum||function(t,e,n,i,r,a,s){var l={};return l.datum_type=void 0===t||"none"===t?5:4,e&&(l.datum_params=e.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=1),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=2,l.datum_params[3]*=o,l.datum_params[4]*=o,l.datum_params[5]*=o,l.datum_params[6]=l.datum_params[6]/1e6+1))),s&&(l.datum_type=3,l.grids=s),l.a=n,l.b=i,l.es=r,l.ep2=a,l}(n.datumCode,n.datum_params,f.a,f.b,p.es,p.ep2,g);O(this,n),O(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),e(null,this)}else e(t)}else e(t)}tt.projections=B,tt.projections.start();const et=tt;function nt(t,e,n){var i,r,o,s,l=t.x,u=t.y,h=t.z?t.z:0;if(u<-a&&u>-1.001*a)u=-a;else if(u>a&&u<1.001*a)u=a;else{if(u<-a)return{x:-1/0,y:-1/0,z:t.z};if(u>a)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),r=Math.sin(u),s=Math.cos(u),o=r*r,{x:((i=n/Math.sqrt(1-e*o))+h)*s*Math.cos(l),y:(i+h)*s*Math.sin(l),z:(i*(1-e)+h)*r}}function it(t,e,n,i){var r,o,a,s,l,u,h,c,d,f,p,g,m,v,y,_=t.x,x=t.y,w=t.z?t.z:0;if(r=Math.sqrt(_*_+x*x),o=Math.sqrt(_*_+x*x+w*w),r/n<1e-12){if(v=0,o/n<1e-12)return y=-i,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(x,_);a=w/o,c=(s=r/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=a*l,m=0;do{m++,u=e*(h=n/Math.sqrt(1-e*d*d))/(h+(y=r*c+w*d-h*(1-e*d*d))),g=(p=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*c-(f=s*(1-u)*l)*d,c=f,d=p}while(g*g>1e-24&&m<30);return{x:v,y:Math.atan(p/Math.abs(f)),z:y}}function rt(t){return 1===t||2===t}function ot(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){r=i;break}if(s.mandatory,null!==s.grid){var l=s.grid.subgrids[0],h=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-h,d=l.ll[1]-h,f=l.ll[0]+(l.lim[0]-1)*l.del[0]+h,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+h;if(!(d>i.y||c>i.x||p<i.y||f<i.x||(r=at(i,e,l),isNaN(r.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*u+" "+i.y*u+" tried: '"+o+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function at(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=R(r.x-Math.PI)+Math.PI;var o=st(r,n);if(e){if(isNaN(o.x))return i;o.x=r.x-o.x,o.y=r.y-o.y;var a,s,l=9;do{if(s=st(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:r.x-(s.x+o.x),y:r.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=R(o.x+n.ll[0]),i.y=o.y+n.ll[1]}else isNaN(o.x)||(i.x=t.x+o.x,i.y=t.y+o.y);return i}function st(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),o=Math.floor(i.y),a=i.x-1*r,s=i.y-1*o,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return l;if(o<0||o>=e.lim[1])return l;n=o*e.lim[0]+r;var u=e.cvs[n][0],h=e.cvs[n][1];n++;var c=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var f=e.cvs[n][0],p=e.cvs[n][1];n--;var g=e.cvs[n][0],m=e.cvs[n][1],v=a*s,y=a*(1-s),_=(1-a)*(1-s),x=(1-a)*s;return l.x=_*u+y*c+x*g+v*f,l.y=_*h+y*d+x*m+v*p,l}function lt(t,e,n){var i,r,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=a,r=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(i=s,r=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(i=l,r="z"),t.axis[o]){case"e":case"n":u[r]=i;break;case"w":case"s":u[r]=-i;break;case"u":void 0!==n[r]&&(u.z=i);break;case"d":void 0!==n[r]&&(u.z=-i);break;default:return null}return u}function ut(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function ht(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ct(t,e,n,o){var a;if(Array.isArray(n)&&(n=ut(n)),function(t){ht(t.x),ht(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=ct(t,a=new et("WGS84"),n,o),t=a),o&&"enu"!==t.axis&&(n=lt(t,!1,n)),"longlat"===t.projName)n={x:n.x*l,y:n.y*l,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var o=t.a,a=t.es;if(3===t.datum_type){if(0!==ot(t,!1,n))return;o=i,a=r}var s=e.a,l=e.b,u=e.es;return 3===e.datum_type&&(s=i,l=6356752.314,u=r),a!==u||o!==s||rt(t.datum_type)||rt(e.datum_type)?(n=nt(n,a,o),rt(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+s*t.z)+i,y:u*(l*t.x+t.y-a*t.z)+r,z:u*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),rt(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],h=(t.x-i)/u,c=(t.y-r)/u,d=(t.z-o)/u;return{x:h+l*c-s*d,y:-l*h+c+a*d,z:s*h-a*c+d}}}(n,e.datum_type,e.datum_params)),n=it(n,u,s,l),3!==e.datum_type||0===ot(e,!0,n)?n:void 0):n}(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*u,y:n.y*u,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),o&&"enu"!==e.axis?lt(e,!0,n):n}var dt=et("WGS84");function ft(t,e,n,i){var r,o,a;return Array.isArray(n)?(r=ct(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(o=ct(t,e,n,i),2===(a=Object.keys(n)).length||a.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;o[i]=n[i]})),o)}function pt(t){return t instanceof et?t:t.oProj?t.oProj:et(t)}const gt=function(t,e,n){t=pt(t);var i,r=!1;return void 0===e?(e=t,t=dt,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=dt,r=!0),e=pt(e),n?ft(t,e,n):(i={forward:function(n,i){return ft(t,e,n,i)},inverse:function(n,i){return ft(e,t,n,i)}},r&&(i.oProj=e),i)};var mt="AJSAJS",vt="AFAFAF",yt=65,_t=73,xt=79;const wt={forward:bt,inverse:function(t){var e=Tt(At(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:St};function bt(t,e){return e=e||5,function(t,e){var n,i,r,o,a,s,l,u,h,c,d,f="00000"+t.easting,p="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(h=t.easting,c=t.northing,d=Ct(t.zoneNumber),n=Math.floor(h/1e5),i=Math.floor(c/1e5)%20,o=mt.charCodeAt(r=d-1),a=vt.charCodeAt(r),u=!1,(s=o+n-1)>90&&(s=s-90+yt-1,u=!0),(s===_t||o<_t&&s>_t||(s>_t||o<_t)&&u)&&s++,(s===xt||o<xt&&s>xt||(s>xt||o<xt)&&u)&&++s===_t&&s++,s>90&&(s=s-90+yt-1),(l=a+i)>86?(l=l-86+yt-1,u=!0):u=!1,(l===_t||a<_t&&l>_t||(l>_t||a<_t)&&u)&&l++,(l===xt||a<xt&&l>xt||(l>xt||a<xt)&&u)&&++l===_t&&l++,l>86&&(l=l-86+yt-1),String.fromCharCode(s)+String.fromCharCode(l))+f.substr(f.length-5,e)+p.substr(p.length-5,e)}(function(t){var e,n,i,r,o,a,s,l=t.lat,u=t.lon,h=6378137,c=.00669438,d=.9996,f=Mt(l),p=Mt(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60),l>=56&&l<64&&u>=3&&u<12&&(s=32),l>=72&&l<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37)),a=Mt(6*(s-1)-180+3),e=.006739496752268451,n=h/Math.sqrt(1-c*Math.sin(f)*Math.sin(f)),i=Math.tan(f)*Math.tan(f),r=e*Math.cos(f)*Math.cos(f);var g,m,v=d*n*((o=Math.cos(f)*(p-a))+(1-i+r)*o*o*o/6+(5-18*i+i*i+72*r-58*e)*o*o*o*o*o/120)+5e5,y=d*(h*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f))+n*Math.tan(f)*(o*o/2+(5-i+9*r+4*r*r)*o*o*o*o/24+(61-58*i+i*i+600*r-2.2240339282485886)*o*o*o*o*o*o/720));return l<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:s,zoneLetter:(g=l,m="Z",84>=g&&g>=72?m="X":72>g&&g>=64?m="W":64>g&&g>=56?m="V":56>g&&g>=48?m="U":48>g&&g>=40?m="T":40>g&&g>=32?m="S":32>g&&g>=24?m="R":24>g&&g>=16?m="Q":16>g&&g>=8?m="P":8>g&&g>=0?m="N":0>g&&g>=-8?m="M":-8>g&&g>=-16?m="L":-16>g&&g>=-24?m="K":-24>g&&g>=-32?m="J":-32>g&&g>=-40?m="H":-40>g&&g>=-48?m="G":-48>g&&g>=-56?m="F":-56>g&&g>=-64?m="E":-64>g&&g>=-72?m="D":-72>g&&g>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),e)}function St(t){var e=Tt(At(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Mt(t){return t*(Math.PI/180)}function Pt(t){return t/Math.PI*180}function Tt(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,a,s,l,u,h,c,d,f,p=.9996,g=6378137,m=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=n-5e5,_=e;i<"N"&&(_-=1e7),c=6*(r-1)-180+3,o=.006739496752268451,f=(d=_/p/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),a=g/Math.sqrt(1-m*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),l=o*Math.cos(f)*Math.cos(f),u=.99330562*g/Math.pow(1-m*Math.sin(f)*Math.sin(f),1.5),h=y/(a*p);var x=f-a*Math.tan(f)/u*(h*h/2-(5+3*s+10*l-4*l*l-9*o)*h*h*h*h/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*h*h*h*h*h*h/720);x=Pt(x);var w,b=(h-(1+2*s+l)*h*h*h/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*h*h*h*h*h/120)/Math.cos(f);if(b=c+Pt(b),t.accuracy){var S=Tt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:S.lat,right:S.lon,bottom:x,left:b}}else w={lat:x,lon:b};return w}function Ct(t){var e=t%6;return 0===e&&(e=6),e}function At(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var a=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;i=t.substring(o,o+=2);for(var l=Ct(a),u=function(t,e){for(var n=mt.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(++n===_t&&n++,n===xt&&n++,n>90){if(r)throw"Bad character: "+t;n=yt,r=!0}i+=1e5}return i}(i.charAt(0),l),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=vt.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(++n===_t&&n++,n===xt&&n++,n>86){if(r)throw"Bad character: "+t;n=yt,r=!0}i+=1e5}return i}(i.charAt(1),l);h<Lt(s);)h+=2e6;var c=n-o;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,g=c/2,m=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),f=t.substring(o,o+g),m=parseFloat(f)*d,p=t.substring(o+g),v=parseFloat(p)*d),{easting:m+u,northing:v+h,zoneLetter:s,zoneNumber:a,accuracy:d}}function Lt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function kt(t,e,n){if(!(this instanceof kt))return new kt(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}kt.fromMGRS=function(t){return new kt(St(t))},kt.prototype.toMGRS=function(t){return bt([this.x,this.y],t)};const Et=kt;var Ot=.046875,Nt=.01953125,It=.01068115234375;function Rt(t){var e=[];e[0]=1-t*(.25+t*(Ot+t*(Nt+t*It))),e[1]=t*(.75-t*(Ot+t*(Nt+t*It)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function Dt(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}function jt(t,e,n){for(var i=1/(1-e),r=t,o=20;o;--o){var a=Math.sin(r),l=1-e*a*a;if(r-=l=(Dt(r,a,Math.cos(r),n)-t)*(l*Math.sqrt(l))*i,Math.abs(l)<s)return r}return r}const zt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Rt(this.es),this.ml0=Dt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,o=t.y,a=R(r-this.long0),l=Math.sin(o),u=Math.cos(o);if(this.es){var h=u*a,c=Math.pow(h,2),d=this.ep2*Math.pow(u,2),f=Math.pow(d,2),p=Math.abs(u)>s?Math.tan(o):0,g=Math.pow(p,2),m=Math.pow(g,2);e=1-this.es*Math.pow(l,2),h/=Math.sqrt(e);var v=Dt(o,l,u,this.en);n=this.a*(this.k0*h*(1+c/6*(1-g+d+c/20*(5-18*g+m+14*d-58*g*d+c/42*(61+179*m-m*g-479*g)))))+this.x0,i=this.a*(this.k0*(v-this.ml0+l*a*h/2*(1+c/12*(5-g+9*d+4*f+c/30*(61+m-58*g+270*d-330*g*d+c/56*(1385+543*m-m*g-3111*g))))))+this.y0}else{var y=u*Math.sin(a);if(Math.abs(Math.abs(y)-1)<s)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,i=u*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(i))>=1){if(y-1>s)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,o=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(n=jt(e=this.ml0+l/this.k0,this.es,this.en),Math.abs(n)<a){var u=Math.sin(n),h=Math.cos(n),c=Math.abs(h)>s?Math.tan(n):0,d=this.ep2*Math.pow(h,2),f=Math.pow(d,2),p=Math.pow(c,2),g=Math.pow(p,2);e=1-this.es*Math.pow(u,2);var m=o*Math.sqrt(e)/this.k0,v=Math.pow(m,2);i=n-(e*=c)*v/(1-this.es)*.5*(1-v/12*(5+3*p-9*d*p+d-4*f-v/30*(61+90*p-252*d*p+45*g+46*d-v/56*(1385+3633*p+4095*g+1574*g*p)))),r=R(this.long0+m*(1-v/6*(1+2*p+d-v/20*(5+28*p+24*g+8*d*p+6*d-v/42*(61+662*p+1320*g+720*g*p))))/h)}else i=a*I(l),r=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),x=this.lat0+l/this.k0,w=Math.cos(x);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(_,2))),i=Math.asin(e),l<0&&(i=-i),r=0===_&&0===w?0:R(Math.atan2(_,w)+this.long0)}return t.x=r,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Vt(t){var e=Math.exp(t);return(e-1/e)/2}function Gt(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function $t(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return e+n*Math.sin(2*e)}function Ft(t,e,n){for(var i,r,o=Math.sin(e),a=Math.cos(e),s=Vt(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),u=2*a*l,h=-2*o*s,c=t.length-1,d=t[c],f=0,p=0,g=0;--c>=0;)i=p,r=f,d=u*(p=d)-i-h*(f=g)+t[c],g=h*p-r+u*f;return[(u=o*l)*d-(h=a*s)*g,u*g+h*d]}const Bt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(zt.init.apply(this),this.forward=zt.forward,this.inverse=zt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=$t(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=R(t.x-this.long0),n=t.y;n=$t(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(i,a*r),e=Math.atan2(o*r,Gt(i,r*a)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Gt(1,e)+1))),t<0?-e:e}(Math.tan(e));var s,l,u=Ft(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=Ft(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(Vt(i));var a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i);r=Math.atan2(a*u,Gt(l,u*s)),e=R((i=Math.atan2(l,u*s))+this.long0),n=$t(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Ht={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(R(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Bt.init.apply(this),this.forward=Bt.forward,this.inverse=Bt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Ut(t,e){return Math.pow((1-t)/(1+t),e)}const Wt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+h)/(Math.pow(Math.tan(.5*this.lat0+h),this.C)*Ut(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+h),this.C)*Ut(this.e*Math.sin(n),this.ratexp))-a,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+h)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*Ut(this.e*Math.sin(t.y),-.5*this.e))-a,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]},qt={init:function(){Wt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=R(t.x-this.long0),Wt.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),i=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,Wt.inverse.apply(this,[t]),t.x=R(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Xt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=s&&(this.k0=.5*(1+I(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=s&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=s&&(this.k0=.5*this.cons*N(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/D(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=N(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-a,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,o,l,u=t.x,h=t.y,c=Math.sin(h),d=Math.cos(h),f=R(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=s&&Math.abs(h+this.lat0)<=s?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*d*Math.cos(f)),t.x=this.a*e*d*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*d*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,c,this.e))-a,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=s?(o=D(this.e,h*this.con,this.con*c),l=2*this.a*this.k0*o/this.cons,t.x=this.x0+l*Math.sin(u-this.long0),t.y=this.y0-this.con*l*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<s?(e=2*this.a*this.k0/(1+r*Math.cos(f)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(f))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(f))+this.y0),t.x=e*r*Math.sin(f)+this.x0,t))},inverse:function(t){var e,n,i,r,o;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=s?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/l),e=Math.abs(this.coslat0)<s?this.lat0>0?R(this.long0+Math.atan2(t.x,-1*t.y)):R(this.long0+Math.atan2(t.x,t.y)):R(this.long0+Math.atan2(t.x*Math.sin(u),l*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=s){if(l<=s)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*j(this.e,i),e=this.con*R(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=s?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/l),e=R(this.long0+Math.atan2(t.x*Math.sin(r),l*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*j(this.e,Math.tan(.5*(a+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(a+t))*Math.pow((1-e)/(1+e),.5*n)}},Zt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,l=0,u=o,h=-1e3,c=0;Math.abs(u-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]};var Yt=1e-7;const Kt={init:function(){var t,e,n,i,r,o,u,d,f,p,g,m,v,y=0,_=0,x=0,w=0,b=0,S=0,M=0;this.no_off=(v="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(v)),this.no_rot="no_rot"in this;var P=!1;"alpha"in this&&(P=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),P&&(M=this.alpha),T&&(y=this.rectified_grid_angle*l),P||T)_=this.longc;else if(x=this.long1,b=this.lat1,w=this.long2,S=this.lat2,Math.abs(b-S)<=Yt||(t=Math.abs(b))<=Yt||Math.abs(t-a)<=Yt||Math.abs(Math.abs(this.lat0)-a)<=Yt||Math.abs(Math.abs(S)-a)<=Yt)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>s?(d=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*d*d,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/t,(r=(i=this.B*e/(n*Math.sqrt(t)))*i-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(D(this.e,this.lat0,d),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),P||T?(P?(g=Math.asin(Math.sin(M)/i),T||(y=M)):(g=y,M=Math.asin(i*Math.sin(g))),this.lam0=_-Math.asin(.5*(r-1/r)*Math.tan(g))/this.B):(o=Math.pow(D(this.e,b,Math.sin(b)),this.B),u=Math.pow(D(this.e,S,Math.sin(S)),this.B),r=this.E/o,f=(u-o)/(u+o),p=((p=this.E*this.E)-u*o)/(p+u*o),(t=x-w)<-Math.pi?w-=c:t>Math.pi&&(w+=c),this.lam0=R(.5*(x+w)-Math.atan(p*Math.tan(.5*this.B*(x-w))/f)/this.B),g=Math.atan(2*Math.sin(this.B*R(x-this.lam0))/(r-1/r)),y=M=Math.asin(i*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(h-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(h+r))},forward:function(t){var e,n,i,r,o,l,u,h,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-a)>s){if(e=.5*((o=this.E/Math.pow(D(this.e,t.y,Math.sin(t.y)),this.B))-(l=1/o)),n=.5*(o+l),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<s)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*t.x),u=Math.abs(l)<Yt?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,l)}else h=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(c.x=u,c.y=h):(u-=this.u_0,c.x=h*this.cosrot+u*this.sinrot,c.y=u*this.cosrot-h*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,i,r,o,l,u,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),o=.5*(i+1/i),u=((l=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(u)-1)<s)h.x=0,h.y=u<0?-a:a;else{if(h.y=this.E/Math.sqrt((1+u)/(1-u)),h.y=j(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Jt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<s)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=N(this.e,e,n),r=D(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),l=N(this.e,o,a),u=D(this.e,this.lat2,o),h=D(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>s?this.ns=Math.log(i/l)/Math.log(r/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=s&&(n=I(n)*(a-2e-10));var i,r,o=Math.abs(Math.abs(n)-a);if(o>s)i=D(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((o=n*this.ns)<=0)return null;r=0}var l=this.ns*R(e-this.long0);return t.x=this.k0*(r*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(l))+this.y0,t},inverse:function(t){var e,n,i,r,o,s=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+l*l),n=1):(e=-Math.sqrt(s*s+l*l),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*s,n*l)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=j(this.e,i)))return null}else r=-a;return o=R(u/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},Qt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,o,a,s,l=t.x,u=t.y,h=R(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1}while(0===s&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function te(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function ee(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ne(t){return.375*t*(1+.25*t*(1+.46875*t))}function ie(t){return.05859375*t*t*(1+.75*t)}function re(t){return t*t*t*(35/3072)}function oe(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function ae(t){return Math.abs(t)<a?t:t-I(t)*Math.PI}function se(t,e,n,i,r){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}const le={init:function(){this.sphere||(this.e0=ee(this.es),this.e1=ne(this.es),this.e2=ie(this.es),this.e3=re(this.es),this.ml0=this.a*te(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=R(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=oe(this.a,this.e,o),l=Math.tan(r)*Math.tan(r),u=i*Math.cos(r),h=u*u,c=this.es*a*a/(1-this.es);e=s*u*(1-h*l*(1/6-(8-l+8*c)*h/120)),n=this.a*te(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*o/a*h*(.5+(5-l+6*c)*h/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var l=se(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-a)<=s)return t.x=this.long0,t.y=a,r<0&&(t.y*=-1),t;var u=oe(this.a,this.e,Math.sin(l)),h=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(l),2),d=i*this.a/u,f=d*d;e=l-u*Math.tan(l)/h*d*d*(.5-(1+3*c)*d*d/24),n=d*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(l)}return t.x=R(n+this.long0),t.y=ae(e),t},names:["Cassini","Cassini_Soldner","cass"]};function ue(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}const he={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-a)<s?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<s?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ue(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ue(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,o,l,u,c,d,f,p=t.x,g=t.y;if(p=R(p-this.long0),this.sphere){if(o=Math.sin(g),f=Math.cos(g),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*i:1+this.sinph0*o+this.cosph0*f*i)<=s)return null;e=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<s)return null;n=h-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=i}}else{switch(u=0,c=0,d=0,i=Math.cos(p),r=Math.sin(p),o=Math.sin(g),l=ue(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=l/this.qp,c=Math.sqrt(1-u*u)),this.mode){case this.OBLIQ:d=1+this.sinb1*u+this.cosb1*c*i;break;case this.EQUIT:d=1+c*i;break;case this.N_POLE:d=a+g,l=this.qp-l;break;case this.S_POLE:d=g-a,l=this.qp+l}if(Math.abs(d)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),n=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*u-this.sinb1*c*i):(d=Math.sqrt(2/(1+c*i)))*u*this.ymf,e=this.xmf*d*c*r;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(d=Math.sqrt(l))*r,n=i*(this.mode===this.S_POLE?d:-d)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,o,l,u,h,c,d,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var g,m=0,v=0;if((n=.5*(g=Math.sqrt(f*f+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(v=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(g)<=s?0:Math.asin(p*v/g),f*=v,p=m*g;break;case this.OBLIQ:n=Math.abs(g)<=s?this.lat0:Math.asin(m*this.sinph0+p*v*this.cosph0/g),f*=v*this.cosph0,p=(m-Math.sin(n)*this.sinph0)*g;break;case this.N_POLE:p=-p,n=a-n;break;case this.S_POLE:n-=a}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(l=Math.sqrt(f*f+p*p))<s)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*l/this.rq),i=Math.cos(r),f*=r=Math.sin(r),this.mode===this.OBLIQ?(u=i*this.sinb1+p*r*this.cosb1/l,o=this.qp*u,p=l*this.cosb1*i-p*this.sinb1*r):(u=p*r/l,o=this.qp*u,p=l*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(o=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}e=Math.atan2(f,p),d=(h=Math.asin(u))+h,n=h+(c=this.apa)[0]*Math.sin(d)+c[1]*Math.sin(d+d)+c[2]*Math.sin(d+d+d)}return t.x=R(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function ce(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const de={init:function(){Math.abs(this.lat1+this.lat2)<s||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=N(this.e3,this.sin_po,this.cos_po),this.qs1=ue(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=N(this.e3,this.sin_po,this.cos_po),this.qs2=ue(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ue(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>s?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=ue(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*R(e-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),o=R(r/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,o,a=ce(.5*e);if(t<s)return a;for(var l=t*t,u=1;u<=25;u++)if(a+=o=.5*(r=1-(i=t*(n=Math.sin(a)))*i)*r/Math.cos(a)*(e/(1-l)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return a;return null}},fe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,o,a,l,u=t.x,h=t.y;return i=R(u-this.long0),e=Math.sin(h),n=Math.cos(h),r=Math.cos(i),(o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=s?(a=this.x0+1*this.a*n*Math.sin(i)/o,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t},inverse:function(t){var e,n,i,r,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),a=ce((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),o=R(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},pe={init:function(){this.sphere||(this.k0=N(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,o=R(i-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=ue(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=R(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*a:a;for(var i,r,o,s,l=Math.asin(.5*e),u=0;u<30;u++)if(r=Math.sin(l),o=Math.cos(l),s=t*r,l+=i=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return l;return NaN}(this.e,2*t.y*this.k0/this.a),e=R(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},ge={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=R(e-this.long0),r=ae(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=R(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ae(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},me={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ee(this.es),this.e1=ne(this.es),this.e2=ie(this.es),this.e3=re(this.es),this.ml0=this.a*te(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,o=t.y,a=R(r-this.long0);if(i=a*Math.sin(o),this.sphere)Math.abs(o)<=s?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(ae(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=s)e=this.a*a,n=-1*this.ml0;else{var l=oe(this.a,this.e,Math.sin(o))/Math.tan(o);e=l*Math.sin(i),n=this.a*te(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+l*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,o,a,l,u,h;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=s)e=R(i/this.a+this.long0),n=0;else{var c;for(a=this.lat0+r/this.a,l=i*i/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=h=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+l)*c)/((u-a)/c-1),Math.abs(h)<=s){n=u;break}e=R(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=s)n=0,e=R(this.long0+i/this.a);else{var d,f,p,g,m;for(a=(this.ml0+r)/this.a,l=i*i/this.a/this.a+a*a,u=a,o=20;o;--o)if(m=this.e*Math.sin(u),d=Math.sqrt(1-m*m)*Math.tan(u),f=this.a*te(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=h=(a*(d*(g=f/this.a)+1)-g-.5*d*(g*g+l))/(this.es*Math.sin(2*u)*(g*g+l-2*a*g)/(4*d)+(a-g)*(d*p-2/Math.sin(2*u))-p),Math.abs(h)<=s){n=u;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=R(this.long0+Math.asin(i*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},ve={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,a=i/o*1e-5,s=r,l=1,u=0;for(e=1;e<=10;e++)l*=a,u+=this.A[e]*l;var h,c=u,d=s,f=1,p=0,g=0,m=0;for(e=1;e<=6;e++)h=p*c+f*d,f=f*c-p*d,p=h,g=g+this.B_re[e]*f-this.B_im[e]*p,m=m+this.B_im[e]*f+this.B_re[e]*p;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,a=i-this.x0,s=(r-this.y0)/this.a,l=a/this.a,u=1,h=0,c=0,d=0;for(e=1;e<=6;e++)n=h*s+u*l,u=u*s-h*l,h=n,c=c+this.C_re[e]*u-this.C_im[e]*h,d=d+this.C_im[e]*u+this.C_re[e]*h;for(var f=0;f<this.iterations;f++){var p,g=c,m=d,v=s,y=l;for(e=2;e<=6;e++)p=m*c+g*d,g=g*c-m*d,m=p,v+=(e-1)*(this.B_re[e]*g-this.B_im[e]*m),y+=(e-1)*(this.B_im[e]*g+this.B_re[e]*m);g=1,m=0;var _=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)p=m*c+g*d,g=g*c-m*d,m=p,_+=e*(this.B_re[e]*g-this.B_im[e]*m),x+=e*(this.B_im[e]*g+this.B_re[e]*m);var w=_*_+x*x;c=(v*_+y*x)/w,d=(y*_-v*x)/w}var b=c,S=d,M=1,P=0;for(e=1;e<=9;e++)M*=b,P+=this.D[e]*M;var T=this.lat0+P*o*1e5,C=this.long0+S;return t.x=C,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]},ye={init:function(){},forward:function(t){var e=t.x,n=t.y,i=R(e-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=R(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},_e={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Rt(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=R(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=20;a;--a){var l=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<s)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var u=Math.sin(r),h=Math.cos(r);n=this.a*Dt(r,u,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=ce((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=ce(Math.sin(e)/this.n)),n=R(n+this.long0),e=ae(e)):(e=jt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<a?(i=Math.sin(e),n=R(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-s<a&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},xe={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=R(e-this.long0),r=n,o=Math.PI*Math.sin(n);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<s)break}r/=2,Math.PI/2-Math.abs(n)<s&&(i=0);var l=.900316316158*this.a*i*Math.cos(r)+this.x0,u=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=l,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=R(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]},we={init:function(){Math.abs(this.lat1+this.lat2)<s||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ee(this.es),this.e1=ne(this.es),this.e2=ie(this.es),this.e3=re(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=N(this.e,this.sinphi,this.cosphi),this.ml1=te(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<s?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=N(this.e,this.sinphi,this.cosphi),this.ml2=te(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=te(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=te(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*R(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=R(this.long0+o/this.ns),i=ae(this.g-n/this.a),t.x=r,t.y=i,t):(i=se(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=R(this.long0+o/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]},be={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,o=R(i-this.long0);Math.abs(r)<=s&&(e=this.x0+this.R*o,n=this.y0);var l=ce(2*Math.abs(r/Math.PI));(Math.abs(o)<=s||Math.abs(Math.abs(r)-a)<=s)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var u=.5*Math.abs(Math.PI/o-o/Math.PI),h=u*u,c=Math.sin(l),d=Math.cos(l),f=d/(c+d-1),p=f*f,g=f*(2/c-1),m=g*g,v=Math.PI*this.R*(u*(f-m)+Math.sqrt(h*(f-m)*(f-m)-(m+h)*(p-m)))/(m+h);o<0&&(v=-v),e=this.x0+v;var y=h+f;return v=Math.PI*this.R*(g*y-u*Math.sqrt((m+h)*(h+1)-y*y))/(m+h),n=r>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,o,a,l,u,h,c,d,f;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,o=(i=t.x/d)*i+(r=t.y/d)*r,d=3*(r*r/(u=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(l=a-2*r*r+i*i)*l*l/u/u/u-9*a*l/u/u)/27)/(h=(a-l*l/3/u)/u)/(c=2*Math.sqrt(-h/3)),Math.abs(d)>1&&(d=d>=0?1:-1),f=Math.acos(d)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-l/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-l/3/u)*Math.PI,e=Math.abs(i)<s?this.long0:R(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Se={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,l,u,h,c,d,f,p,g,m,v,y,_,x,w,b,S,M,P=t.x,T=t.y,C=Math.sin(t.y),A=Math.cos(t.y),L=R(P-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(a-T)*Math.sin(L),t.y=this.y0-this.a*(a-T)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(a+T)*Math.sin(L),t.y=this.y0+this.a*(a+T)*Math.cos(L),t):(x=this.sin_p12*C+this.cos_p12*A*Math.cos(L),_=(y=Math.acos(x))?y/Math.sin(y):1,t.x=this.x0+this.a*_*A*Math.sin(L),t.y=this.y0+this.a*_*(this.cos_p12*C-this.sin_p12*A*Math.cos(L)),t):(e=ee(this.es),n=ne(this.es),i=ie(this.es),r=re(this.es),Math.abs(this.sin_p12-1)<=s?(o=this.a*te(e,n,i,r,a),l=this.a*te(e,n,i,r,T),t.x=this.x0+(o-l)*Math.sin(L),t.y=this.y0-(o-l)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=s?(o=this.a*te(e,n,i,r,a),l=this.a*te(e,n,i,r,T),t.x=this.x0+(o+l)*Math.sin(L),t.y=this.y0+(o+l)*Math.cos(L),t):(u=C/A,h=oe(this.a,this.e,this.sin_p12),c=oe(this.a,this.e,C),d=Math.atan((1-this.es)*u+this.es*h*this.sin_p12/(c*A)),w=0===(f=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(L)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(f)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(L)*Math.cos(d)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=h*w*(1-(b=w*w)*(v=(g=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*g)*(1-v)/6+(S=b*w)/8*(m=p*g)*(1-2*v)+(M=S*w)/120*(v*(4-7*v)-3*p*p*(1-7*v))-M*w/48*m),t.x=this.x0+y*Math.sin(f),t.y=this.y0+y*Math.cos(f),t))},inverse:function(t){var e,n,i,r,o,l,u,h,c,d,f,p,g,m,v,y,_,x,w,b,S,M,P;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*a*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=s?l=this.lat0:(l=ce(r*this.sin_p12+t.y*i*this.cos_p12/e),u=Math.abs(this.lat0)-a,o=Math.abs(u)<=s?this.lat0>=0?R(this.long0+Math.atan2(t.x,-t.y)):R(this.long0-Math.atan2(-t.x,t.y)):R(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=o,t.y=l,t}return h=ee(this.es),c=ne(this.es),d=ie(this.es),f=re(this.es),Math.abs(this.sin_p12-1)<=s?(l=se(((p=this.a*te(h,c,d,f,a))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,c,d,f),o=R(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=l,t):Math.abs(this.sin_p12+1)<=s?(p=this.a*te(h,c,d,f,a),l=se(((e=Math.sqrt(t.x*t.x+t.y*t.y))-p)/this.a,h,c,d,f),o=R(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),v=Math.atan2(t.x,t.y),g=oe(this.a,this.e,this.sin_p12),y=Math.cos(v),x=-(_=this.e*this.cos_p12*y)*_/(1-this.es),w=3*this.es*(1-x)*this.sin_p12*this.cos_p12*y/(1-this.es),M=1-x*(S=(b=e/g)-x*(1+x)*Math.pow(b,3)/6-w*(1+3*x)*Math.pow(b,4)/24)*S/2-b*S*S*S/6,m=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*y),o=R(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(m))),P=Math.sin(m),l=Math.atan2((P-this.es*M*this.sin_p12)*Math.tan(m),P*(1-this.es)),t.x=o,t.y=l,t)},names:["Azimuthal_Equidistant","aeqd"]},Me={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,a,l,u=t.x,h=t.y;return i=R(u-this.long0),e=Math.sin(h),n=Math.cos(h),r=Math.cos(i),((o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=s)&&(a=1*this.a*n*Math.sin(i),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t},inverse:function(t){var e,n,i,r,o,l,u;return t.x-=this.x0,t.y-=this.y0,n=ce((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),l=this.long0,Math.abs(e)<=s?(u=this.lat0,t.x=l,t.y=u,t):(u=ce(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.abs(this.lat0)-a,Math.abs(o)<=s?(l=this.lat0>=0?R(this.long0+Math.atan2(t.x,-t.y)):R(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=u,t):(l=R(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=l,t.y=u,t))},names:["ortho"]};function Pe(t,e,n,i){var r;return t<s?(i.value=1,r=0):(r=Math.atan2(e,n),Math.abs(r)<=h?i.value=1:r>h&&r<=a+h?(i.value=2,r-=a):r>a+h||r<=-(a+h)?(i.value=3,r=r>=0?r-d:r+d):(i.value=4,r+=a)),r}function Te(t,e){var n=t+e;return n<-d?n+=c:n>+d&&(n-=c),n}const Ce={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=a-h/2?this.face=5:this.lat0<=-(a-h/2)?this.face=6:Math.abs(this.long0)<=h?this.face=1:Math.abs(this.long0)<=a+h?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,o,s,l={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,5===this.face)r=a-e,n>=h&&n<=a+h?(u.value=1,i=n-a):n>a+h||n<=-(a+h)?(u.value=2,i=n>0?n-d:n+d):n>-(a+h)&&n<=-h?(u.value=3,i=n+a):(u.value=4,i=n);else if(6===this.face)r=a+e,n>=h&&n<=a+h?(u.value=1,i=-n+a):n<h&&n>=-h?(u.value=2,i=-n):n<-h&&n>=-(a+h)?(u.value=3,i=-n-a):(u.value=4,i=n>0?-n+d:-n-d);else{var c,f,p,g,m,v;2===this.face?n=Te(n,+a):3===this.face?n=Te(n,+d):4===this.face&&(n=Te(n,-a)),g=Math.sin(e),m=Math.cos(e),v=Math.sin(n),c=m*Math.cos(n),f=m*v,p=g,1===this.face?i=Pe(r=Math.acos(c),p,f,u):2===this.face?i=Pe(r=Math.acos(f),p,-c,u):3===this.face?i=Pe(r=Math.acos(-c),p,-f,u):4===this.face?i=Pe(r=Math.acos(-f),p,c,u):(r=i=0,u.value=1)}return s=Math.atan(12/d*(i+Math.acos(Math.sin(i)*Math.cos(h))-a)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),2===u.value?s+=a:3===u.value?s+=d:4===u.value&&(s+=1.5*d),l.x=o*Math.cos(s),l.y=o*Math.sin(s),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function(t){var e,n,i,r,o,s,l,u,h,c,f,p,g={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=2,e-=a):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=3,e=e<0?e+d:e-d):(m.value=4,e+=a),h=d/12*Math.tan(e),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),s=Math.atan(o),(l=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?l=-1:l>1&&(l=1),5===this.face)u=Math.acos(l),g.phi=a-u,1===m.value?g.lam=s+a:2===m.value?g.lam=s<0?s+d:s-d:3===m.value?g.lam=s-a:g.lam=s;else if(6===this.face)u=Math.acos(l),g.phi=u-a,1===m.value?g.lam=-s+a:2===m.value?g.lam=-s:3===m.value?g.lam=-s-a:g.lam=s<0?-s-d:-s+d;else{var v,y,_;h=(v=l)*v,y=(h+=(_=h>=1?0:Math.sqrt(1-h)*Math.sin(s))*_)>=1?0:Math.sqrt(1-h),2===m.value?(h=y,y=-_,_=h):3===m.value?(y=-y,_=-_):4===m.value&&(h=y,y=_,_=-h),2===this.face?(h=v,v=-y,y=h):3===this.face?(v=-v,y=-y):4===this.face&&(h=v,v=y,y=-h),g.phi=Math.acos(-_)-a,g.lam=Math.atan2(y,v),2===this.face?g.lam=Te(g.lam,-a):3===this.face?g.lam=Te(g.lam,-d):4===this.face&&(g.lam=Te(g.lam,+a))}return 0!==this.es&&(c=g.phi<0?1:0,f=Math.tan(g.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(g.phi=-g.phi)),g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Ae=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Le=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ke=.8487,Ee=1.3523,Oe=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Ne={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=R(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(11.459155902616464*n);i<0?i=0:i>=18&&(i=17);var r={x:Oe(Ae[i],n=u*(n-.08726646259971647*i))*e,y:Oe(Le[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*ke+this.x0,r.y=r.y*this.a*Ee+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*ke),y:Math.abs(t.y-this.y0)/(this.a*Ee)};if(e.y>=1)e.x/=Ae[18][0],e.y=t.y<0?-a:a;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(Le[n][0]>e.y)--n;else{if(!(Le[n+1][0]<=e.y))break;++n}var i=Le[n],r=5*(e.y-i[0])/(Le[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var o=t(r);if(r-=o,Math.abs(o)<1e-10)break}return r}((function(t){return(Oe(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,0,100),e.x/=Oe(Ae[n],r),e.y=(5*n+r)*l,t.y<0&&(e.y=-e.y)}return e.x=R(e.x+this.long0),e},names:["Robinson","robin"]},Ie={init:function(){this.name="geocent"},forward:function(t){return nt(t,this.es,this.a)},inverse:function(t){return it(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Re={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const De={init:function(){if(Object.keys(Re).forEach(function(t){if(void 0===this[t])this[t]=Re[t].def;else{if(Re[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Re[t].num&&(this[t]=parseFloat(this[t]))}Re[t].degrees&&(this[t]=this[t]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-a)<s?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<s?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,i,r,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case 3:n=this.sinph0*o+this.cosph0*a*s;break;case 2:n=a*s;break;case 1:n=-o;break;case 0:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case 3:n*=this.cosph0*o-this.sinph0*a*s;break;case 2:n*=o;break;case 0:n*=-a*s;break;case 1:n*=a*s}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=Gt(t.x,t.y);if(Math.abs(o)<s)r.x=0,r.y=t.y;else{var a,l;switch(l=1-o*o*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-l*l),this.mode){case 3:r.y=Math.asin(a*this.sinph0+t.y*l*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(r.y))*o,t.x*=l*this.cosph0;break;case 2:r.y=Math.asin(t.y*l/o),t.y=a*o,t.x*=l;break;case 0:r.y=Math.asin(a),t.y=-t.y;break;case 1:r.y=-Math.asin(a)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var je;gt.defaultDatum="WGS84",gt.Proj=et,gt.WGS84=new gt.Proj("WGS84"),gt.Point=Et,gt.toPoint=ut,gt.defs=L,gt.nadgrid=function(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Y(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var i=[],r=0;r<e.nSubgrids;r++){var o=J(t,176,n),a=Q(t,176,o,n),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[Z(o.lowerLongitude),Z(o.lowerLatitude)],del:[Z(o.longitudeInterval),Z(o.latitudeInterval)],lim:[s,l],count:o.gridNodeCount,cvs:K(a)})}return i}(n,r,i),a={header:r,subgrids:o};return q[t]=a,a},gt.transform=ct,gt.mgrs=wt,gt.version="__VERSION__",(je=gt).Proj.projections.add(zt),je.Proj.projections.add(Bt),je.Proj.projections.add(Ht),je.Proj.projections.add(qt),je.Proj.projections.add(Xt),je.Proj.projections.add(Zt),je.Proj.projections.add(Kt),je.Proj.projections.add(Jt),je.Proj.projections.add(Qt),je.Proj.projections.add(le),je.Proj.projections.add(he),je.Proj.projections.add(de),je.Proj.projections.add(fe),je.Proj.projections.add(pe),je.Proj.projections.add(ge),je.Proj.projections.add(me),je.Proj.projections.add(ve),je.Proj.projections.add(ye),je.Proj.projections.add(_e),je.Proj.projections.add(xe),je.Proj.projections.add(we),je.Proj.projections.add(be),je.Proj.projections.add(Se),je.Proj.projections.add(Me),je.Proj.projections.add(Ce),je.Proj.projections.add(Ne),je.Proj.projections.add(Ie),je.Proj.projections.add(De);const ze=gt},146:(t,e,n)=>{"use strict";var i=n(8005),r=n(6740),o=n(5442),a=n(7972);function s(t,e,n,i){return function(n,r,o){var a=t(t(e(r[1],o[0]),e(-o[1],r[0])),t(e(n[1],r[0]),e(-r[1],n[0]))),s=t(e(n[1],o[0]),e(-o[1],n[0])),l=i(a,s);return l[l.length-1]}}function l(t,e,n,i){return function(r,o,a,s){var l=t(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),s[2])))),u=t(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),r[2]),t(n(t(e(r[1],a[0]),e(-a[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),a[2])))),h=i(l,u);return h[h.length-1]}}function u(t,e,n,i){return function(r,o,a,s,l){var u=t(t(t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-a[3]),n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),l[2]))),s[3]))),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-l[3]),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),r[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),-o[3])))),t(t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),s[3]),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),s[2]))),-l[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),r[3]))),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-o[3]),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),s[2]))),a[3]),n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),r[2]),t(n(t(e(r[1],a[0]),e(-a[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),a[2]))),-s[3]))))),h=t(t(t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),r[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),-a[3])),t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),s[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-l[3]))),t(t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),l[2]))),r[3]),n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),-o[3])),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),a[3]),n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),r[2]),t(n(t(e(r[1],a[0]),e(-a[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),a[2]))),-l[3])))),c=i(u,h);return c[c.length-1]}}function h(t){return(3===t?s:4===t?l:u)(r,i,o,a)}var c=h(3),d=h(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=r-o;if(r>0){if(o<=0)return a;i=r+o}else{if(!(r<0))return a;if(o>=0)return a;i=-(r+o)}var s=33306690738754716e-32*i;return a>=s||a<=-s?a:c(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],s=t[1]-i[1],l=e[1]-i[1],u=n[1]-i[1],h=t[2]-i[2],c=e[2]-i[2],f=n[2]-i[2],p=o*u,g=a*l,m=a*s,v=r*u,y=r*l,_=o*s,x=h*(p-g)+c*(m-v)+f*(y-_),w=7771561172376103e-31*((Math.abs(p)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(v))*Math.abs(c)+(Math.abs(y)+Math.abs(_))*Math.abs(f));return x>w||-x>w?x:d(t,e,n,i)}];function p(t){var e=f[t.length];return e||(e=f[t.length]=h(t.length)),e.apply(void 0,t)}function g(t,e,n,i,r,o,a){return function(e,n,s,l,u){switch(arguments.length){case 0:case 1:return 0;case 2:return i(e,n);case 3:return r(e,n,s);case 4:return o(e,n,s,l);case 5:return a(e,n,s,l,u)}for(var h=new Array(arguments.length),c=0;c<arguments.length;++c)h[c]=arguments[c];return t(h)}}!function(){for(;f.length<=5;)f.push(h(f.length));t.exports=g.apply(void 0,[p].concat(f));for(var e=0;e<=5;++e)t.exports[e]=f[e]}()},5442:(t,e,n)=>{"use strict";var i=n(8005),r=n(6359);t.exports=function(t,e){var n=t.length;if(1===n){var o=i(t[0],e);return o[0]?o:[o[1]]}var a=new Array(2*n),s=[.1,.1],l=[.1,.1],u=0;i(t[0],e,s),s[0]&&(a[u++]=s[0]);for(var h=1;h<n;++h){i(t[h],e,l);var c=s[1];r(c,l[0],s),s[0]&&(a[u++]=s[0]);var d=l[1],f=s[1],p=d+f,g=f-(p-d);s[1]=p,g&&(a[u++]=g)}return s[1]&&(a[u++]=s[1]),0===u&&(a[u++]=0),a.length=u,a}},7972:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,a=new Array(n+i),s=0,l=0,u=0,h=Math.abs,c=t[l],d=h(c),f=-e[u],p=h(f);d<p?(o=c,(l+=1)<n&&(d=h(c=t[l]))):(o=f,(u+=1)<i&&(p=h(f=-e[u]))),l<n&&d<p||u>=i?(r=c,(l+=1)<n&&(d=h(c=t[l]))):(r=f,(u+=1)<i&&(p=h(f=-e[u])));for(var g,m,v=r+o,y=v-r,_=o-y,x=_,w=v;l<n&&u<i;)d<p?(r=c,(l+=1)<n&&(d=h(c=t[l]))):(r=f,(u+=1)<i&&(p=h(f=-e[u]))),(_=(o=x)-(y=(v=r+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g;for(;l<n;)(_=(o=x)-(y=(v=(r=c)+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(l+=1)<n&&(c=t[l]);for(;u<i;)(_=(o=x)-(y=(v=(r=f)+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(u+=1)<i&&(f=-e[u]);return x&&(a[s++]=x),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}},6740:t=>{"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,a=new Array(n+i),s=0,l=0,u=0,h=Math.abs,c=t[l],d=h(c),f=e[u],p=h(f);d<p?(o=c,(l+=1)<n&&(d=h(c=t[l]))):(o=f,(u+=1)<i&&(p=h(f=e[u]))),l<n&&d<p||u>=i?(r=c,(l+=1)<n&&(d=h(c=t[l]))):(r=f,(u+=1)<i&&(p=h(f=e[u])));for(var g,m,v=r+o,y=v-r,_=o-y,x=_,w=v;l<n&&u<i;)d<p?(r=c,(l+=1)<n&&(d=h(c=t[l]))):(r=f,(u+=1)<i&&(p=h(f=e[u]))),(_=(o=x)-(y=(v=r+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g;for(;l<n;)(_=(o=x)-(y=(v=(r=c)+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(l+=1)<n&&(c=t[l]);for(;u<i;)(_=(o=x)-(y=(v=(r=f)+o)-r))&&(a[s++]=_),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(u+=1)<i&&(f=e[u]);return x&&(a[s++]=x),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}},6027:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,o,a,s;if(e[0][0]<e[1][0])n=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return r(e,t);n=e[1],o=e[0]}if(t[0][0]<t[1][0])a=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-r(t,e);a=t[1],s=t[0]}var l=i(n,o,s),u=i(n,o,a);if(l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;if(l=i(s,a,o),u=i(s,a,n),l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;return o[0]-s[0]};var i=n(146);function r(t,e){var n,r,o,a;if(e[0][0]<e[1][0])n=e[0],r=e[1];else{if(!(e[0][0]>e[1][0])){var s=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),u=Math.min(e[0][1],e[1][1]),h=Math.max(e[0][1],e[1][1]);return l<u?l-u:s>h?s-h:l-h}n=e[1],r=e[0]}t[0][1]<t[1][1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]);var c=i(r,n,o);return c||(c=i(r,n,a))||a-r}},9411:(t,e,n)=>{"use strict";t.exports=function(t){for(var e=t.length,n=2*e,i=new Array(n),o=0;o<e;++o){var l=t[o],u=l[0][0]<l[1][0];i[2*o]=new c(l[0][0],l,u,o),i[2*o+1]=new c(l[1][0],l,!u,o)}i.sort((function(t,e){var n=t.x-e.x;return n||(n=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])}));var d=r(a),f=[],p=[],g=[];for(o=0;o<n;){for(var m=i[o].x,v=[];o<n;){var y=i[o];if(y.x!==m)break;o+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(v.push(new h(y.segment[0][1],y.index,!0,!0)),v.push(new h(y.segment[1][1],y.index,!1,!1))):(v.push(new h(y.segment[1][1],y.index,!0,!1)),v.push(new h(y.segment[0][1],y.index,!1,!0)))):d=y.create?d.insert(y.segment,y.index):d.remove(y.segment)}f.push(d.root),p.push(m),g.push(v)}return new s(f,p,g)};var i=n(3076),r=n(4977),o=n(146),a=n(6027);function s(t,e,n){this.slabs=t,this.coordinates=e,this.horizontal=n}function l(t,e){return t.y-e}function u(t,e){for(var n=null;t;){var i,r,a=t.key;a[0][0]<a[1][0]?(i=a[0],r=a[1]):(i=a[1],r=a[0]);var s=o(i,r,e);if(s<0)t=t.left;else if(s>0)if(e[0]!==a[1][0])n=t,t=t.right;else{if(l=u(t.right,e))return l;t=t.left}else{if(e[0]!==a[1][0])return t;var l;if(l=u(t.right,e))return l;t=t.left}}return n}function h(t,e,n,i){this.y=t,this.index=e,this.start=n,this.closed=i}function c(t,e,n,i){this.x=t,this.segment=e,this.create=n,this.index=i}s.prototype.castUp=function(t){var e=i.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var n=u(this.slabs[e],t),r=-1;if(n&&(r=n.value),this.coordinates[e]===t[0]){var s=null;if(n&&(s=n.key),e>0){var h=u(this.slabs[e-1],t);h&&(s?a(h.key,s)>0&&(s=h.key,r=h.value):(r=h.value,s=h.key))}var c=this.horizontal[e];if(c.length>0){var d=i.ge(c,t[1],l);if(d<c.length){var f=c[d];if(t[1]===f.y){if(f.closed)return f.index;for(;d<c.length-1&&c[d+1].y===t[1];)if((f=c[d+=1]).closed)return f.index;if(f.y===t[1]&&!f.start){if((d+=1)>=c.length)return r;f=c[d]}}if(f.start)if(s){var p=o(s[0],s[1],[t[0],f.y]);s[0][0]>s[1][0]&&(p=-p),p>0&&(r=f.index)}else r=f.index;else f.y!==t[1]&&(r=f.index)}}}return r}},2922:(t,e)=>{e.name="cartesian",e.formatDistance=function(t){return t.toString()},e.ringArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return.5*o},e.absoluteArea=Math.abs,e.triangleArea=function(t){return Math.abs((t[0][0]-t[2][0])*(t[1][1]-t[0][1])-(t[0][0]-t[1][0])*(t[2][1]-t[0][1]))},e.distance=function(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}},283:(t,e)=>{var n=Math.PI,i=n/4,r=n/180;function o(t,e){var n,i=(e[0]-t[0])*r,o=Math.sin(i),a=Math.cos(i),s=Math.sin(t[1]*r),l=Math.cos(t[1]*r),u=Math.sin(e[1]*r),h=Math.cos(e[1]*r);return Math.atan2(Math.sqrt((n=h*o)*n+(n=l*u-s*h*a)*n),s*u+l*h*a)}function a(t){return(t=Math.sin(t/2))*t}e.name="spherical",e.formatDistance=function(t){var e=t*r*6371;return(e>1?e.toFixed(3)+"km":(1e3*e).toPrecision(3)+"m")+" ("+t.toPrecision(3)+"°)"},e.ringArea=function(t){if(!t.length)return 0;for(var e=0,o=t[0],a=o[0]*r,s=o[1]*r/2+i,l=a,u=Math.cos(s),h=Math.sin(s),c=1,d=t.length;c<d;++c){a=(o=t[c])[0]*r,s=o[1]*r/2+i;var f=a-l,p=Math.cos(s),g=Math.sin(s),m=h*g,v=u*p+m*Math.cos(f),y=m*Math.sin(f);e+=Math.atan2(y,v),l=a,u=p,h=g}return 2*(e>n?e-2*n:e<-n?e+2*n:e)},e.absoluteArea=function(t){return t<0?t+4*n:t},e.triangleArea=function(t){var e=o(t[0],t[1]),n=o(t[1],t[2]),i=o(t[2],t[0]),r=(e+n+i)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(r/2)*Math.tan((r-e)/2)*Math.tan((r-n)/2)*Math.tan((r-i)/2))))},e.distance=function(t,e,n,i){return t*=r,e*=r,n*=r,i*=r,2*Math.asin(Math.sqrt(a(i-e)+Math.cos(e)*Math.cos(i)*a(n-t)))}},8005:t=>{"use strict";t.exports=function(t,n,i){var r=t*n,o=e*t,a=o-(o-t),s=t-a,l=e*n,u=l-(l-n),h=n-u,c=s*h-(r-a*u-s*u-a*h);return i?(i[0]=c,i[1]=r,i):[c,r]};var e=+(Math.pow(2,27)+1)},6359:t=>{"use strict";t.exports=function(t,e,n){var i=t+e,r=i-t,o=e-r,a=t-(i-r);return n?(n[0]=a+o,n[1]=i,n):[a+o,i]}},540:function(t,e){!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var i=e.length-1,r=1;r<i;++r)e[r]=e[r].slice(1,-1);return e[i]=e[i].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function i(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function r(t){return t.toUpperCase()}function o(t){var i="[A-Za-z]",r="[0-9]",o=e(r,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=e("[\\:\\/\\?\\#\\[\\]\\@]",s),u=t?"[\\uE000-\\uF8FF]":"[]",h=e(i,r,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=n(i+e(i,r,"[\\+\\-\\.]")+"*"),d=n(n(a+"|"+e(h,s,"[\\:]"))+"*"),f=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|"+r),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+r)),p=n(f+"\\."+f+"\\."+f+"\\."+f),g=n(o+"{1,4}"),m=n(n(g+"\\:"+g)+"|"+p),v=n(n(g+"\\:")+"{6}"+m),y=n("\\:\\:"+n(g+"\\:")+"{5}"+m),_=n(n(g)+"?\\:\\:"+n(g+"\\:")+"{4}"+m),x=n(n(n(g+"\\:")+"{0,1}"+g)+"?\\:\\:"+n(g+"\\:")+"{3}"+m),w=n(n(n(g+"\\:")+"{0,2}"+g)+"?\\:\\:"+n(g+"\\:")+"{2}"+m),b=n(n(n(g+"\\:")+"{0,3}"+g)+"?\\:\\:"+g+"\\:"+m),S=n(n(n(g+"\\:")+"{0,4}"+g)+"?\\:\\:"+m),M=n(n(n(g+"\\:")+"{0,5}"+g)+"?\\:\\:"+g),P=n(n(n(g+"\\:")+"{0,6}"+g)+"?\\:\\:"),T=n([v,y,_,x,w,b,S,M,P].join("|")),C=n(n(h+"|"+a)+"+"),A=(n(T+"\\%25"+C),n(T+n("\\%25|\\%(?!"+o+"{2})")+C)),L=n("[vV]"+o+"+\\."+e(h,s,"[\\:]")+"+"),k=n("\\["+n(A+"|"+T+"|"+L)+"\\]"),E=n(n(a+"|"+e(h,s))+"*"),O=n(k+"|"+p+"(?!"+E+")|"+E),N=n("[0-9]*"),I=n(n(d+"@")+"?"+O+n("\\:"+N)+"?"),R=n(a+"|"+e(h,s,"[\\:\\@]")),D=n(R+"*"),j=n(R+"+"),z=n(n(a+"|"+e(h,s,"[\\@]"))+"+"),V=n(n("\\/"+D)+"*"),G=n("\\/"+n(j+V)+"?"),$=n(z+V),F=n(j+V),B="(?!"+R+")",H=(n(V+"|"+G+"|"+$+"|"+F+"|"+B),n(n(R+"|"+e("[\\/\\?]",u))+"*")),U=n(n(R+"|[\\/\\?]")+"*"),W=n(n("\\/\\/"+I+V)+"|"+G+"|"+F+"|"+B),q=n(c+"\\:"+W+n("\\?"+H)+"?"+n("\\#"+U)+"?"),X=n(n("\\/\\/"+I+V)+"|"+G+"|"+$+"|"+B),Z=n(X+n("\\?"+H)+"?"+n("\\#"+U)+"?");return n(q+"|"+Z),n(c+"\\:"+W+n("\\?"+H)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+O+")"+n("\\:("+N+")")+"?)")+"?("+V+"|"+G+"|"+F+"|"+B+")"),n("\\?("+H+")"),n("\\#("+U+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+O+")"+n("\\:("+N+")")+"?)")+"?("+V+"|"+G+"|"+$+"|"+B+")"),n("\\?("+H+")"),n("\\#("+U+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+O+")"+n("\\:("+N+")")+"?)")+"?("+V+"|"+G+"|"+F+"|"+B+")"),n("\\?("+H+")"),n("\\#("+U+")"),n("("+d+")@"),n("\\:("+N+")"),{NOT_SCHEME:new RegExp(e("[^]",i,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",h,s),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",h,s),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",h,s),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",h,s),"g"),NOT_QUERY:new RegExp(e("[^\\%]",h,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",h,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",h,s),"g"),UNRESERVED:new RegExp(h,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",h,l),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+T+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+C+")")+"?\\]?$")}}var a=o(!1),s=o(!0),l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,h=36,c=/^xn--/,d=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function v(t){throw new RangeError(p[t])}function y(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+function(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}((t=t.replace(f,".")).split("."),e).join(".")}function _(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e}var x=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},w=function(t,e,n){var i=0;for(t=n?g(t/700):t>>1,t+=g(t/e);t>455;i+=h)t=g(t/35);return g(i+36*t/(t+38))},b=function(t){var e,n=[],i=t.length,r=0,o=128,a=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)t.charCodeAt(l)>=128&&v("not-basic"),n.push(t.charCodeAt(l));for(var c=s>0?s+1:0;c<i;){for(var d=r,f=1,p=h;;p+=h){c>=i&&v("invalid-input");var m=(e=t.charCodeAt(c++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:h;(m>=h||m>g((u-r)/f))&&v("overflow"),r+=m*f;var y=p<=a?1:p>=a+26?26:p-a;if(m<y)break;var _=h-y;f>g(u/_)&&v("overflow"),f*=_}var x=n.length+1;a=w(r-d,x,0==d),g(r/x)>u-o&&v("overflow"),o+=g(r/x),r%=x,n.splice(r++,0,o)}return String.fromCodePoint.apply(String,n)},S=function(t){var e=[],n=(t=_(t)).length,i=128,r=0,o=72,a=!0,s=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;f<128&&e.push(m(f))}}catch(t){s=!0,l=t}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}var p=e.length,y=p;for(p&&e.push("-");y<n;){var b=u,S=!0,M=!1,P=void 0;try{for(var T,C=t[Symbol.iterator]();!(S=(T=C.next()).done);S=!0){var A=T.value;A>=i&&A<b&&(b=A)}}catch(t){M=!0,P=t}finally{try{!S&&C.return&&C.return()}finally{if(M)throw P}}var L=y+1;b-i>g((u-r)/L)&&v("overflow"),r+=(b-i)*L,i=b;var k=!0,E=!1,O=void 0;try{for(var N,I=t[Symbol.iterator]();!(k=(N=I.next()).done);k=!0){var R=N.value;if(R<i&&++r>u&&v("overflow"),R==i){for(var D=r,j=h;;j+=h){var z=j<=o?1:j>=o+26?26:j-o;if(D<z)break;var V=D-z,G=h-z;e.push(m(x(z+V%G,0))),D=g(V/G)}e.push(m(x(D,0))),o=w(r,L,y==p),r=0,++y}}}catch(t){E=!0,O=t}finally{try{!k&&I.return&&I.return()}finally{if(E)throw O}}++r,++i}return e.join("")},M=function(t){return y(t,(function(t){return d.test(t)?"xn--"+S(t):t}))},P=function(t){return y(t,(function(t){return c.test(t)?b(t.slice(4).toLowerCase()):t}))},T={};function C(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function A(t){for(var e="",n=0,i=t.length;n<i;){var r=parseInt(t.substr(n+1,2),16);if(r<128)e+=String.fromCharCode(r),n+=3;else if(r>=194&&r<224){if(i-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&r)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(r>=224){if(i-n>=9){var a=parseInt(t.substr(n+4,2),16),s=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function L(t,e){function n(t){var n=A(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,C).replace(e.PCT_ENCODED,r)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,C).replace(e.PCT_ENCODED,r)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,C).replace(e.PCT_ENCODED,r)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,C).replace(e.PCT_ENCODED,r)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,C).replace(e.PCT_ENCODED,r)),t}function k(t){return t.replace(/^0*(.*)/,"$1")||"0"}function E(t,e){var n=t.match(e.IPV4ADDRESS)||[],i=l(n,2)[1];return i?i.split(".").map(k).join("."):t}function O(t,e){var n=t.match(e.IPV6ADDRESS)||[],i=l(n,3),r=i[1],o=i[2];if(r){for(var a=r.toLowerCase().split("::").reverse(),s=l(a,2),u=s[0],h=s[1],c=h?h.split(":").map(k):[],d=u.split(":").map(k),f=e.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,g=d.length-p,m=Array(p),v=0;v<p;++v)m[v]=c[v]||d[g+v]||"";f&&(m[p-1]=E(m[p-1],e));var y=m.reduce((function(t,e,n){if(!e||"0"===e){var i=t[t.length-1];i&&i.index+i.length===n?i.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],_=void 0;if(y&&y.length>1){var x=m.slice(0,y.index),w=m.slice(y.index+y.length);_=x.join(":")+"::"+w.join(":")}else _=m.join(":");return o&&(_+="%"+o),_}return t}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==e.iri?s:a;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var r=t.match(N);if(r){I?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==t.indexOf("@")?r[3]:void 0,n.host=-1!==t.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==t.indexOf("?")?r[7]:void 0,n.fragment=-1!==t.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.host&&(n.host=O(E(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=T[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)L(n,i);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=M(n.host.replace(i.PCT_ENCODED,A).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}L(n,a)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function D(t,e){var n=!1!==e.iri?s:a,i=[];return void 0!==t.userinfo&&(i.push(t.userinfo),i.push("@")),void 0!==t.host&&i.push(O(E(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"!=typeof t.port&&"string"!=typeof t.port||(i.push(":"),i.push(String(t.port))),i.length?i.join(""):void 0}var j=/^\.\.?\//,z=/^\/\.(\/|$)/,V=/^\/\.\.(\/|$)/,G=/^\/?(?:.|\n)*?(?=\/|$)/;function $(t){for(var e=[];t.length;)if(t.match(j))t=t.replace(j,"");else if(t.match(z))t=t.replace(z,"/");else if(t.match(V))t=t.replace(V,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(G);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];t=t.slice(i.length),e.push(i)}return e.join("")}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?s:a,i=[],r=T[(e.scheme||t.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||r&&r.domainHost)try{t.host=e.iri?P(t.host):M(t.host.replace(n.PCT_ENCODED,A).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}L(t,n),"suffix"!==e.reference&&t.scheme&&(i.push(t.scheme),i.push(":"));var o=D(t,e);if(void 0!==o&&("suffix"!==e.reference&&i.push("//"),i.push(o),t.path&&"/"!==t.path.charAt(0)&&i.push("/")),void 0!==t.path){var l=t.path;e.absolutePath||r&&r.absolutePath||(l=$(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==t.query&&(i.push("?"),i.push(t.query)),void 0!==t.fragment&&(i.push("#"),i.push(t.fragment)),i.join("")}function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(t=R(F(t,n),n),e=R(F(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=$(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=$(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=$(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path:i.path="/"+e.path,i.path=$(i.path)),i.query=e.query):(i.path=t.path,void 0!==e.query?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function H(t,e){return t&&t.toString().replace(e&&e.iri?s.PCT_ENCODED:a.PCT_ENCODED,A)}var U={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){var n="https"===String(t.scheme).toLowerCase();return t.port!==(n?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},W={scheme:"https",domainHost:U.domainHost,parse:U.parse,serialize:U.serialize};function q(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var X={scheme:"ws",domainHost:!0,parse:function(t,e){var n=t;return n.secure=q(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(t,e){if(t.port!==(q(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var n=t.resourceName.split("?"),i=l(n,2),r=i[0],o=i[1];t.path=r&&"/"!==r?r:void 0,t.query=o,t.resourceName=void 0}return t.fragment=void 0,t}},Z={scheme:"wss",domainHost:X.domainHost,parse:X.parse,serialize:X.serialize},Y={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Q=n(n("%[EFef][0-9A-Fa-f]%"+J+J+"%"+J+J)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+J+J)+"|"+n("%"+J+J)),tt=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),et=new RegExp(K,"g"),nt=new RegExp(Q,"g"),it=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',tt),"g"),rt=new RegExp(e("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ot=rt;function at(t){var e=A(t);return e.match(et)?e:t}var st={scheme:"mailto",parse:function(t,e){var n=t,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var r=!1,o={},a=n.query.split("&"),s=0,l=a.length;s<l;++s){var u=a[s].split("=");switch(u[0]){case"to":for(var h=u[1].split(","),c=0,d=h.length;c<d;++c)i.push(h[c]);break;case"subject":n.subject=H(u[1],e);break;case"body":n.body=H(u[1],e);break;default:r=!0,o[H(u[0],e)]=H(u[1],e)}}r&&(n.headers=o)}n.query=void 0;for(var f=0,p=i.length;f<p;++f){var g=i[f].split("@");if(g[0]=H(g[0]),e.unicodeSupport)g[1]=H(g[1],e).toLowerCase();else try{g[1]=M(H(g[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}i[f]=g.join("@")}return n},serialize:function(t,e){var n,i=t,o=null!=(n=t.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,s=o.length;a<s;++a){var l=String(o[a]),u=l.lastIndexOf("@"),h=l.slice(0,u).replace(nt,at).replace(nt,r).replace(it,C),c=l.slice(u+1);try{c=e.iri?P(c):M(H(c,e).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}o[a]=h+"@"+c}i.path=o.join(",")}var d=t.headers=t.headers||{};t.subject&&(d.subject=t.subject),t.body&&(d.body=t.body);var f=[];for(var p in d)d[p]!==Y[p]&&f.push(p.replace(nt,at).replace(nt,r).replace(rt,C)+"="+d[p].replace(nt,at).replace(nt,r).replace(ot,C));return f.length&&(i.query=f.join("&")),i}},lt=/^([^\:]+)\:(.*)/,ut={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(lt),i=t;if(n){var r=e.scheme||i.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=r+":"+(e.nid||o),l=T[s];i.nid=o,i.nss=a,i.path=void 0,l&&(i=l.parse(i,e))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(t,e){var n=e.scheme||t.scheme||"urn",i=t.nid,r=n+":"+(e.nid||i),o=T[r];o&&(t=o.serialize(t,e));var a=t,s=t.nss;return a.path=(i||e.nid)+":"+s,a}},ht=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ct={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(ht)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};T[U.scheme]=U,T[W.scheme]=W,T[X.scheme]=X,T[Z.scheme]=Z,T[st.scheme]=st,T[ut.scheme]=ut,T[ct.scheme]=ct,t.SCHEMES=T,t.pctEncChar=C,t.pctDecChars=A,t.parse=R,t.removeDotSegments=$,t.serialize=F,t.resolveComponents=B,t.resolve=function(t,e,n){var i=function(t,e){var n=t;if(e)for(var i in e)n[i]=e[i];return n}({scheme:"null"},n);return F(B(R(t,i),R(e,i),i,!0),i)},t.normalize=function(t,e){return"string"==typeof t?t=F(R(t,e),e):"object"===i(t)&&(t=R(F(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=F(R(t,n),n):"object"===i(t)&&(t=F(t,n)),"string"==typeof e?e=F(R(e,n),n):"object"===i(e)&&(e=F(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?s.ESCAPE:a.ESCAPE,C)},t.unescapeComponent=H,Object.defineProperty(t,"__esModule",{value:!0})}(e)},4202:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=function(t){return a[t]},e.load=function(t){if(t in a)return Promise.resolve(a[t]);var e=function(t){if(0!==t.indexOf(o))throw new Error("Unsupported CRS URI: "+t);return t.substr(o.length)}(t);return fetch("https://epsg.io/"+e+".proj4").then((function(t){if(!t.ok)throw new Error("HTTP response code: "+t.status);return t.text()})).then((function(e){return u(t,e,{reverseAxes:t in s})}))},e.set=u,n(7147);var i,r=(i=n(6280))&&i.__esModule?i:{default:i},o="http://www.opengis.net/def/crs/EPSG/0/",a={},s=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[e]=true,t}({},o+4326),l=(0,r.default)("+proj=longlat +datum=WGS84 +no_defs");function u(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!t||!e)throw new Error("crsUri and proj cannot be empty");var i=void 0;if("string"==typeof e){if(!(i=(0,r.default)(e)))throw new Error("Unsupported proj4 string: "+e);r.default.defs(t,e),n.reverseAxes&&(i=h(i))}else i=e;return a[t]=i,i}function h(t){return{forward:function(e){return t.forward(e).reverse()},inverse:function(e){return t.inverse([e[1],e[0]])}}}u("http://www.opengis.net/def/crs/OGC/1.3/CRS84",l),u(o+4979,h(l))},3578:function(t){t.exports=function(){function t(){}return t.prototype.encodeReserved=function(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map((function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t})).join("")},t.prototype.encodeUnreserved=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))},t.prototype.encodeValue=function(t,e,n){return e="+"===t||"#"===t?this.encodeReserved(e):this.encodeUnreserved(e),n?this.encodeUnreserved(n)+"="+e:e},t.prototype.isDefined=function(t){return null!=t},t.prototype.isKeyOperator=function(t){return";"===t||"&"===t||"?"===t},t.prototype.getValues=function(t,e,n,i){var r=t[n],o=[];if(this.isDefined(r)&&""!==r)if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)r=r.toString(),i&&"*"!==i&&(r=r.substring(0,parseInt(i,10))),o.push(this.encodeValue(e,r,this.isKeyOperator(e)?n:null));else if("*"===i)Array.isArray(r)?r.filter(this.isDefined).forEach((function(t){o.push(this.encodeValue(e,t,this.isKeyOperator(e)?n:null))}),this):Object.keys(r).forEach((function(t){this.isDefined(r[t])&&o.push(this.encodeValue(e,r[t],t))}),this);else{var a=[];Array.isArray(r)?r.filter(this.isDefined).forEach((function(t){a.push(this.encodeValue(e,t))}),this):Object.keys(r).forEach((function(t){this.isDefined(r[t])&&(a.push(this.encodeUnreserved(t)),a.push(this.encodeValue(e,r[t].toString())))}),this),this.isKeyOperator(e)?o.push(this.encodeUnreserved(n)+"="+a.join(",")):0!==a.length&&o.push(a.join(","))}else";"===e?this.isDefined(r)&&o.push(this.encodeUnreserved(n)):""!==r||"&"!==e&&"?"!==e?""===r&&o.push(""):o.push(this.encodeUnreserved(n)+"=");return o},t.prototype.parse=function(t){var e=this,n=["+","#",".","/",";","?","&"];return{expand:function(i){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(t,r,o){if(r){var a=null,s=[];if(-1!==n.indexOf(r.charAt(0))&&(a=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach((function(t){var n=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);s.push.apply(s,e.getValues(i,a,n[1],n[2]||n[3]))})),a&&"+"!==a){var l=",";return"?"===a?l="&":"#"!==a&&(l=a),(0!==s.length?a:"")+s.join(l)}return s.join(",")}return e.encodeReserved(o)}))}}},new t}()},7147:function(){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};p.prototype.append=function(t,e){t=c(t),e=d(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},p.prototype.delete=function(t){delete this.map[c(t)]},p.prototype.get=function(t){var e=this.map[c(t)];return e?e[0]:null},p.prototype.getAll=function(t){return this.map[c(t)]||[]},p.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},p.prototype.set=function(t,e){this.map[c(t)]=[d(e)]},p.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach((function(n){this.map[n].forEach((function(i){t.call(e,i,n,this)}),this)}),this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),f(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),f(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},_.call(x.prototype),_.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];b.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=x,t.Response=b,t.fetch=function(t,e){return new Promise((function(n,r){var o=new x(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e,i={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new p,t.split("\r\n").forEach((function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}})),e)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new b(r,i))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},t.fetch.polyfill=!0}function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function v(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(i&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&i&&s(t))this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!l(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t,e,n,i=g(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,n=m(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(t,e){var n,i,r=(e=e||{}).body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(i=(n=e.method||this.method||"GET").toUpperCase(),u.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}})),e}function b(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},1801:t=>{"use strict";var e=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,n){var i,r,o;return n=n||{},i=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),r=""===i?1/0:void 0===n.maxLength?80:n.maxLength,o=n.replacer,function t(n,a,s){var l,u,h,c,d,f,p,g,m,v,y,_;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(y=JSON.stringify(n,o)))return y;if(p=r-a.length-s,y.length<=p&&(m=y.replace(e,(function(t,e){return e||t+" "}))).length<=p)return m;if(null!=o&&(n=JSON.parse(y),o=void 0),"object"==typeof n&&null!==n){if(g=a+i,h=[],u=0,Array.isArray(n))for(v="[",l="]",p=n.length;u<p;u++)h.push(t(n[u],g,u===p-1?0:1)||"null");else for(v="{",l="}",p=(f=Object.keys(n)).length;u<p;u++)c=f[u],d=JSON.stringify(c)+": ",void 0!==(_=t(n[c],g,d.length+(u===p-1?0:1)))&&h.push(d+_);if(h.length>0)return[v,i+h.join(",\n"+g),l].join("\n"+a)}return y}(t,"",0)}},4775:t=>{"use strict";t.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},98:t=>{"use strict";t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(5243),e=n.n(t);n(4419),e().Map.addInitHook((function(){var t,n=this,i=!1;function r(){null!=t&&(clearTimeout(t),t=null)}n.on&&(n.on("click",(function(o){r(),t=setTimeout((function(){i?i=!1:n.fire("singleclick",e().Util.extend(o,{type:"singleclick"}))}),300)})),n.on("dblclick",(function(){setTimeout(r,0)})),n.on("dragstart",(function(){i=!0})),n.on("dragend",(function(){i=!1})))})),n(1851);var i=n(2181);function r(t,e){return"string"==typeof e&&(e=r(e)),(e=e||document).querySelector(t)}function o(t){let e=document.createElement("div");return e.innerHTML=t,e.firstChild}function a(t,e){if(t&&document.body.appendChild(o(t)),e){let t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}}function s(t){let e=r("#"+t);return"content"in e&&(e=e.content),document.importNode(e,!0).children[0]}var l=n(5013);const u="template-coverage-parameter-discrete-legend",h=`<template id="${u}">\n  <div class="leaflet-coverage-control legend discrete-legend">\n    <div class="legend-title-container"><strong class="legend-title"></strong></div>\n    <div class="legend-palette discrete-legend-palette"></div>\n  </div>\n</template>`;class c extends e().Control{constructor(t,e={}){super({position:e.position||"bottomright"}),this._covLayer=t,this._templateId=e.templateId||u,this._language=e.language,e.templateId||null!==document.getElementById(u)||a(h),t.on&&(this._remove=()=>this.remove(),this._update=()=>this._doUpdate(!1),t.on("remove",this._remove))}update(){this._doUpdate(!0)}_doUpdate(t){let e=this._el;if(t){let t=this._covLayer.parameter;this._language=(0,l.getLanguageTag)(t.observedProperty.label,this._language);let n=(0,l.getLanguageString)(t.observedProperty.label,this._language);r(".legend-title",e).innerHTML=n}let n=this._covLayer.palette,i=this._covLayer.parameter,o="";for(let t=0;t<n.steps;t++){let e=(0,l.getLanguageString)(i.observedProperty.categories[t].label,this._language);o+=`\n        <i style="background:rgb(${n.red[t]}, ${n.green[t]}, ${n.blue[t]})"></i>\n        ${e}\n        <br>`}r(".legend-palette",e).innerHTML=o}onAdd(t){return this._map=t,this._covLayer.on&&this._covLayer.on("paletteChange",this._update),this._el=s(this._templateId),this.update(),this._el}onRemove(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update))}}const d="template-coverage-parameter-continuous-legend",f=`<template id="${d}">\n  <div class="leaflet-coverage-control legend continuous-legend">\n    <div style="margin-bottom:3px" class="legend-title-container">\n      <strong class="legend-title"></strong>\n    </div>\n    <div style="display: inline-block; height: 144px; float:left">\n      <span style="height: 136px; width: 18px; display: block; margin-top: 9px;" class="legend-palette"></span>\n    </div>\n    <div style="display: inline-block; float:left; height:153px">\n      <table style="height: 100%;">\n        <tr><td style="vertical-align:top"><span class="legend-max"></span> <span class="legend-uom"></span></td></tr>\n        <tr><td><span class="legend-current"></span></td></tr>\n        <tr><td style="vertical-align:bottom"><span class="legend-min"></span> <span class="legend-uom"></span></td></tr>\n      </table>\n    </div>\n  </div>\n</template>`;class p extends e().Control{constructor(t,e={}){super({position:e.position||"bottomright"}),this._covLayer=t,this._templateId=e.templateId||d,this._language=e.language,e.templateId||null!==document.getElementById(d)||a(f),t.on&&(this._remove=()=>this.remove(),this._update=()=>this._doUpdate(!1),t.on("remove",this._remove))}update(){this._doUpdate(!0)}_doUpdate(t){let e=this._el;if(t){let t=this._covLayer.parameter,i=(0,l.getLanguageTag)(t.observedProperty.label,this._language),o=(0,l.getLanguageString)(t.observedProperty.label,i),a=(0,l.stringifyUnit)(t.unit,i);r(".legend-title",e).innerHTML=o,(".legend-uom",n=e,"string"==typeof n&&(n=r(n)),[...(n=n||document).querySelectorAll(".legend-uom")]).forEach((t=>t.innerHTML=a))}var n;let i=this._covLayer.palette,[o,a]=this._covLayer.paletteExtent;r(".legend-min",e).innerHTML=o.toFixed(2),r(".legend-max",e).innerHTML=a.toFixed(2);let s="";for(let t=0;t<i.steps;t++)t>0&&(s+=","),s+="rgb("+i.red[t]+","+i.green[t]+","+i.blue[t]+")";r(".legend-palette",e).style.background="transparent linear-gradient(to top, "+s+") repeat scroll 0% 0%"}onAdd(t){return this._map=t,this._covLayer.on&&(this._covLayer.on("paletteChange",this._update),this._covLayer.on("paletteExtentChange",this._update)),this._el=s(this._templateId),this.update(),this._el}onRemove(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update),this._covLayer.off("paletteExtentChange",this._update))}}let g=e().Evented.prototype;function m(t){let e=class extends t{};for(let t in g)e.prototype[t]=g[t];return e}const v="template-coverage-timeaxis";class y extends(m(e().Control)){constructor(t,e={}){super({position:e.position||"topleft"}),this._templateId=e.templateId||v,this._title=e.title||"Time",this._covLayer=t,e.templateId||null!==document.getElementById(v)||a('<template id="template-coverage-timeaxis">\n<div class="leaflet-coverage-control form-inline" style="clear:none">\n  <strong class="title">Time</strong><br>\n  <div class="form-group">\n    <select name="date" class="date form-control"></select>\n  </div>\n  <div class="form-group">\n    <select name="time" class="time form-control"></select>\n  </div>\n</div>\n</template>'),t.on&&(this._remove=()=>this.remove(),t.on("remove",this._remove),this._axisListener=t=>{"time"===t.axis&&this.update()});let n=this._covLayer.timeSlices,i=new Map;for(let t of n){let e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())).getTime();i.has(e)||i.set(e,[]),i.get(e).push(t)}this._dateMap=i}onAdd(t){this._map=t,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);let n=s(this._templateId);this._el=n,e().DomEvent.disableClickPropagation(n),this._title&&(r(".title",n).innerHTML=this._title);for(let t of this._dateMap.keys()){let e=x(t);r(".date",n).appendChild(o(`<option value="${e}">${e}</option>`))}return r(".date",n).disabled=1===this._dateMap.size,r(".date",n).addEventListener("change",(t=>{let e=_(t.target.value),n=this._dateMap.get(e)[0];this._covLayer.time=n,this._initTimeSelect(e),this.fire("change",{time:n})})),r(".time",n).addEventListener("change",(t=>{let e=r(".date",n).value,i=t.target.value,o=new Date(e+"T"+i);this._covLayer.time=o,this.fire("change",{time:o})})),this.update(),n}onRemove(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}update(){let t=this._covLayer.time;if(!t)return;let e=this._el,n=_(t.toISOString()),i=x(n);r(".date",e).value=i,this._initTimeSelect(n);let o=t.toISOString().substr(11);r(".time",e).value=o}_initTimeSelect(t){let e=r(".time",this._el);e.innerHTML="";let n=this._dateMap.get(t);for(let t of n){let n=t.toISOString().substr(11);e.appendChild(o(`<option value="${n}">${n}</option>`))}e.disabled=1===n.length}}function _(t){let e=parseInt(t.substr(0,4)),n=parseInt(t.substr(5,2)),i=parseInt(t.substr(8,2));return Date.UTC(e,n-1,i)}function x(t){return new Date(t).toISOString().substr(0,10)}const w="template-coverage-dropdown";class b extends(m(e().Control)){constructor(t,e={}){super(e.position?{position:e.position}:{position:"topleft"}),this._templateId=e.templateId||w,this._title=e.title||"",this._choices=t,this._value=e.value||t[0].value,e.templateId||null!==document.getElementById(w)||a('<template id="template-coverage-dropdown">\n<div class="leaflet-coverage-control" style="clear:none">\n  <strong class="select-title"></strong><br>\n  <select class="form-control"></select>\n</div>\n</template>')}onAdd(t){let n=s(this._templateId);this._el=n,e().DomEvent.disableClickPropagation(n),r(".select-title",n).innerHTML=this._title;for(let{value:t,label:e}of this._choices)r("select",n).appendChild(o(`<option value="${t}">${e}</option>`));return r("select",n).disabled=this._choices.length<=1,this.value=this._value,r("select",n).addEventListener("change",(t=>{this._value=t.target.value,this.fire("change",{value:t.target.value})})),n}get value(){return this._value}set value(t){r("select",this._el).value=t}}class S extends e().Layer{constructor(t,e={}){super(),this._templateId=e.templateId,this._covLayer=t,this._title=e.title||"Vertical",this._position=e.position||"topleft",t.on&&(this._remove=()=>this.remove(),t.on("remove",this._remove),this._axisListener=t=>{"vertical"===t.axis&&this.update()})}onAdd(t){this._map=t,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);let e=this._covLayer.crsVerticalAxis||{},n=e.name?(0,l.getLanguageString)(e.name):this._title,i=(0,l.stringifyUnit)(e.unit);i&&(i=" "+i);let r=[],o=this._covLayer.verticalSlices;for(let t=0;t<o.length;t++)r.push({value:t.toString(),label:o[t]+i});this._dropdown=new b(r,{templateId:this._templateId,position:this._position,title:n,value:this._getVerticalIndex().toString()}).on("change",(t=>{let e=parseInt(t.value),n=this._covLayer.verticalSlices[e];this._covLayer.vertical=n,this.fire("change",{vertical:n})})).addTo(t)}onRemove(t){this._dropdown.remove(),this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}_getVerticalIndex(){return this._covLayer.verticalSlices.indexOf(this._covLayer.vertical)}update(){let t=this._getVerticalIndex();this._dropdown.value=t.toString()}}var M=n(2861),P=n.n(M);function T(t,e=256){if(1===e)return C([t[0]]);var n=document.createElement("canvas");n.width=e,n.height=1;for(var i=n.getContext("2d"),r=i.createLinearGradient(0,0,e-1,0),o=t.length,a=0;a<o;a++)r.addColorStop(a/(o-1),t[a]);i.fillStyle=r,i.fillRect(0,0,e,1);var s=new Uint8Array(e),l=new Uint8Array(e),u=new Uint8Array(e),h=i.getImageData(0,0,e,1).data;for(let t=0,e=0;t<h.length;t+=4,e++)s[e]=h[t],l[e]=h[t+1],u[e]=h[t+2];return{steps:s.length,red:s,green:l,blue:u}}function C(t){var e=document.createElement("canvas");e.width=1,e.height=1;for(var n=e.getContext("2d"),i=t.length,r=new Uint8Array(i),o=new Uint8Array(i),a=new Uint8Array(i),s=0;s<t.length;s++){n.fillStyle=t[s],n.fillRect(0,0,1,1);var l=n.getImageData(0,0,1,1).data;r[s]=l[0],o[s]=l[1],a[s]=l[2]}return{steps:r.length,red:r,green:o,blue:a}}function A(t){let e=C([t]);return{r:e.red[0],g:e.green[0],b:e.blue[0]}}function L(t,e=.1){if(t[0]===t[1]){let n=t[0]*e;return[t[0]-n,t[1]+n]}return t}function k(t){return class extends t{initializePalette(){let t=this.options,e=this.parameter;if(!e)return Promise.resolve();let n=e.observedProperty.categories;if(n&&this._initCategoryIdxMap(),this._palette||(t.palette?this._palette=t.palette:e.preferredPalette?this._palette=function(t){if(!t)return;let e,n=t.colors;return e="linear"===t.interpolation?T(n,t.steps):C(n),e}(e.preferredPalette):n?n.every((t=>t.preferredColor))?this._palette=C(n.map((t=>t.preferredColor))):this._palette=(t=>{if(t>12)throw new Error("not enough built-in categorical colors, must supply custom colors");return C(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"].slice(0,t))})(n.length):this._palette=T(["#deebf7","#3182bd"])),n&&n.length!==this._palette.steps)throw new Error("Categorical palettes must match the number of categories of the parameter");if(this._paletteExtent=this._paletteExtent||t.paletteExtent,t.hasOwnProperty("extendMax")?this._extendMax=t.extendMax:this._extendMax=!1,t.hasOwnProperty("extendMin")?this._extendMin=t.extendMin:this._extendMin=!1,this.parameter.categoryEncoding){let t=this._categoryIdxMap,e=t.length-1;this.getPaletteIndex=n=>{if(null===n||n<0||n>e)return;let i=t[n];return 255!==i?i:void 0}}return!this.canUsePalette||this.canUsePalette()?this.setPaletteExtent(this._paletteExtent,!0).then((()=>this._updatePaletteIndexFn())):Promise.resolve()}_updatePaletteIndexFn(){if(!this.parameter.categoryEncoding){let t=this.palette,e=this.paletteExtent;this.getPaletteIndex=n=>{if(null===n)return;if(n>e[1])return this._extendMax?t.steps-1:void 0;if(n<e[0])return this._extendMin?0:void 0;let i=function(t,e,n){return Math.trunc((e.steps-1+.9999)*(t-n[0])/(n[1]-n[0]))}(n,t,e);return i}}}get palette(){if(this.parameter&&(!this.canUsePalette||this.canUsePalette()))return this._palette}set palette(t){this._palette=t,this._updatePaletteIndexFn(),this.redraw(),this.fire("paletteChange")}set paletteExtent(t){this.setPaletteExtent(t)}get paletteExtent(){return this._paletteExtent}setPaletteExtent(t,e){if(this.parameter.observedProperty.categories)return Promise.resolve();let n=this.paletteExtent;return(Array.isArray(t)?Promise.resolve(t):this.computePaletteExtent(t)).then((t=>{Array.isArray(t)&&isNaN(t[0])||(t=>!Array.isArray(n)||n[0]!==t[0]||n[1]!==t[1])(t)&&(this._paletteExtent=t,this._updatePaletteIndexFn(),e||this.redraw(),this.fire("paletteExtentChange"))}))}_initCategoryIdxMap(){let t=this.parameter;if(!t.categoryEncoding)return;let e,n=-1/0,i=1/0,r=t.observedProperty.categories,o=t.categoryEncoding;for(let t of r)if(o.has(t.id))for(let e of o.get(t.id))n=Math.max(n,e),i=Math.min(i,e);if(!(r.length<256))throw new Error("Too many categories: "+r.length);if(n>1e4||i<0)throw new Error("category values too high (>10000) or low (<0)");e=new Uint8Array(n+1);for(let t=0;t<=n;t++)e[t]=255;for(let n=0;n<r.length;n++){let i=r[n];if(o.has(i.id))for(let r of t.categoryEncoding.get(i.id))e[r]=n}this._categoryIdxMap=e}}}function E(t){return class extends t{load(){this.fire("dataLoading");let t=this.coverage.loadDomain().then((t=>(this.domain=t,[this._projX,this._projY]=(0,l.getHorizontalCRSComponents)(t),(0,l.loadProjection)(t)))).then((t=>{this.projection=t}));return this._loadCoverageSubset?t=t.then((()=>this._loadCoverageSubset())):this.parameter&&(t=t.then((()=>this.coverage.loadRange(this.parameter.key))).then((t=>{this.range=t}))),t=t.then((()=>{this.fire("dataLoad")})).catch((t=>{console.error(t),this.fire("error",t),this.fire("dataLoad")})),t}}}Symbol.iterator;class O extends(k(E(e().GridLayer))){constructor(t,n={}){super(),n.valueToColor&&(this.valueToColor=n.valueToColor),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),n.parameter=t.parameters.keys().next().value,delete n.keys),n.paletteExtent||(n.paletteExtent="subset"),e().Util.setOptions(this,n),this._cov=t,this._param=t.parameters.get(n.keys?n.keys[0]:n.parameter),this._axesSubset={t:{coordPref:n.time?n.time.toISOString():void 0},z:{coordPref:n.vertical}},this.crsVerticalAxis=void 0}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{let t=(0,l.getReferenceObject)(this.domain,"z");if(t&&1===t.coordinates.length){let e=t.system;e.cs&&(e.cs.csAxes||e.cs.axes)&&(this.crsVerticalAxis=e.cs.csAxes?e.cs.csAxes[0]:e.cs.axes[0])}})).then((()=>{this._errored=!1,super.onAdd(t),this.fire("afterAdd")})).catch((e=>{this._errored=!0,console.log(e),super.onAdd(t)}))}onRemove(t){delete this._map,super.onRemove(t)}getBounds(){let t;if(!this._cov.bbox){t=this._getDomainBbox();let n=this.projection,i=n.unproject({x:t[0],y:t[1]}),r=n.unproject({x:t[0],y:t[3]}),o=n.unproject({x:t[2],y:t[1]}),a=n.unproject({x:t[2],y:t[3]});return e().latLngBounds([i,r,o,a])}t=this._cov.bbox;let n=e().latLng(t[1],t[0]),i=e().latLng(t[3],t[2]);return e().latLngBounds(n,i)}_loadCoverageSubset(){let t={};for(let e of Object.keys(this._axesSubset)){let n=this._axesSubset[e];this.domain.axes.has(e)&&(null==n.coordPref?t[e]={target:this.domain.axes.get(e).values[0]}:t[e]={target:n.coordPref})}return this.fire("dataLoading"),this._cov.subsetByValue(t).then((t=>(this._subsetCov=t,t.cacheRanges=!0,Promise.all([t.loadDomain(),t.loadRange(this._param.key)])))).then((([t,e])=>{this._subsetDomain=t,this._subsetRange=e,this.fire("dataLoad")})).catch((t=>{throw this.fire("dataLoad"),t}))}get coverage(){return this._cov}get parameter(){return this._param}set time(t){if(!this.domain.axes.has("t"))throw new Error("No time axis found");let e=this.time;this._axesSubset.t.coordPref=t.toISOString(),this._loadCoverageSubset().then((()=>{e!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))}))}get time(){if(this.domain.axes.has("t")){let t=this._subsetDomain.axes.get("t").values[0];return new Date(t)}}get timeSlices(){if(this.domain.axes.has("t"))return this.domain.axes.get("t").values.map((t=>new Date(t)))}set vertical(t){if(!this.domain.axes.has("z"))throw new Error("No vertical axis found");let e=this.vertical;this._axesSubset.z.coordPref=t,this._loadCoverageSubset().then((()=>{e!==this.vertical&&(this.redraw(),this.fire("axisChange",{axis:"vertical"}))}))}get vertical(){if(this.domain.axes.has("z"))return this._subsetDomain.axes.get("z").values[0]}get verticalSlices(){if(this.domain.axes.has("z")){let t=this.domain.axes.get("z").values;return ArrayBuffer.isView(t)&&(t=[...t]),t}}computePaletteExtent(t){if("subset"===t){let e=this._subsetRange.shape.get(this._projX),n=this._subsetRange.shape.get(this._projY);if(e*n<1e6)return t=L(t=(0,l.minMaxOfRange)(this._subsetRange)),Promise.resolve(t);{let i={start:0,stop:e,step:Math.max(Math.round(e/1e3),1)},r={start:0,stop:n,step:Math.max(Math.round(n/1e3),1)};return this._subsetCov.subsetByIndex({[this._projX]:i,[this._projY]:r}).then((e=>e.loadRange(this._param.key).then((e=>{let[n,i]=(0,l.minMaxOfRange)(e),r=.1*(i-n);return t=[n-r,i+r]}))))}}if("fov"===t)throw this._map.getBounds(),new Error("NOT IMPLEMENTED YET");throw new Error("Unknown extent specification: "+t)}getValueAt(t){let e=this.domain.axes.get(this._projX).values,n=this.domain.axes.get(this._projY).values,i=this._getDomainBbox(),{lat:r,lng:o}=t,{x:a,y:s}=this.projection.project({lat:r,lon:o});if(a<i[0]||a>i[2]||s<i[1]||s>i[3])return;let u=(0,l.indexOfNearest)(n,s),h=(0,l.indexOfNearest)(e,a);return this._subsetRange.get({[this._projY]:u,[this._projX]:h})}createTile(t){let n=e().DomUtil.create("canvas","leaflet-tile");var i=this.getTileSize();return n.width=i.x,n.height=i.y,this.drawTile(n,t),n}drawTile(t,e){if(this._errored)return;let n,i=t.getContext("2d"),r=this.getTileSize(),o=i.getImageData(0,0,r.x,r.y),a=P()(o.data,[r.y,r.x,4]);if(this.valueToColor){let t=this.valueToColor;n=(e,n,i)=>{let r=t(i);null!=r&&(a.set(e,n,0,r.r),a.set(e,n,1,r.g),a.set(e,n,2,r.b),a.set(e,n,3,r.hasOwnProperty("a")?r.a:255))}}else{let{red:t,green:e,blue:i}=this.palette,r=this.getPaletteIndex;n=(n,o,s)=>{let l=r(s);void 0!==l&&(a.set(n,o,0,t[l]),a.set(n,o,1,e[l]),a.set(n,o,2,i[l]),a.set(n,o,3,255))}}let s=this._subsetRange.get;this._isDomainUsingEllipsoidalCRS()?this._isRectilinearGeodeticMap()?this._drawGeodeticCRSWithRectilinearMapProjection(n,e,s):this._drawGeodeticCRSWithAnyMapProjection(n,e,s):this._isRectilinearGeodeticMap()?this._drawProjectedCRSWithRectilinearMapProjection(n,e,s):this._drawProjectedCRSWithAnyMapProjection(n,e,s),i.putImageData(o,0,0)}_getDomainBbox(){let t=(t,e)=>{let n,i,r=t.length-1;[n,i]=e?[e.get(0)[0],e.get(r)[1]]:[t[0],t[r]];let o=n>i;return o&&([n,i]=[i,n]),!e&&t.length>1&&(o?(n-=(t[r-1]-t[r])/2,i+=(t[0]-t[1])/2):(n-=(t[1]-t[0])/2,i+=(t[r]-t[r-1])/2)),[n,i]},e=this.domain.axes.get(this._projX),n=this.domain.axes.get(this._projY),[i,r]=t(e.values,e.bounds),[o,a]=t(n.values,n.bounds);return[i,o,r,a]}_drawGeodeticCRSWithAnyMapProjection(t,n,i){let r=this.getTileSize(),o=n.x*r.x,a=n.y*r.y,s=n.z,u=this._map,h=this.domain.axes.get("x").values,c=this.domain.axes.get("y").values,d=this._getDomainBbox();"y"===this._projX&&(d=[d[1],d[0],d[3],d[2]]);let f=[d[0],d[0]+360];for(let n=0;n<r.x;n++)for(let p=0;p<r.y;p++){let{lat:r,lng:g}=u.unproject(e().point(o+n,a+p),s);r<d[1]||r>d[3]||(g=N(g,f),g<d[0]||g>d[2]||t(p,n,i({y:(0,l.indexOfNearest)(c,r),x:(0,l.indexOfNearest)(h,g)})))}}_drawProjectedCRSWithAnyMapProjection(t,n,i){let r=this._map,o=this.domain.axes.get(this._projX).values,a=this.domain.axes.get(this._projY).values,s=this._getDomainBbox(),u=this.projection,h=this.getTileSize(),c=n.x*h.x,d=n.y*h.y,f=n.z;for(let n=0;n<h.x;n++)for(let p=0;p<h.y;p++){let{lat:h,lng:g}=r.unproject(e().point(c+n,d+p),f),{x:m,y:v}=u.project({lat:h,lon:g});m<s[0]||m>s[2]||v<s[1]||v>s[3]||t(p,n,i({y:(0,l.indexOfNearest)(a,v),x:(0,l.indexOfNearest)(o,m)}))}}_drawProjectedCRSWithRectilinearMapProjection(t,n,i){let r=this._map,o=this.domain.axes.get(this._projX).values,a=this.domain.axes.get(this._projY).values,s=this._getDomainBbox(),u=this.projection,h=this.getTileSize(),c=n.x*h.x,d=n.y*h.y,f=n.z,p=new Float64Array(h.x);for(let t=0;t<h.x;t++){let{lng:n}=r.unproject(e().point(c+t,d),f);p[t]=n}let g=new Float64Array(h.y);for(let t=0;t<h.y;t++){let{lat:n}=r.unproject(e().point(c,d+t),f);g[t]=n}for(let e=0;e<h.x;e++)for(let n=0;n<h.y;n++){let r=g[n],h=p[e],{x:c,y:d}=u.project({lat:r,lon:h});c<s[0]||c>s[2]||d<s[1]||d>s[3]||t(n,e,i({y:(0,l.indexOfNearest)(a,d),x:(0,l.indexOfNearest)(o,c)}))}}_drawGeodeticCRSWithRectilinearMapProjection(t,n,i){let r=this._map,o=this.domain.axes.get("x").values,a=this.domain.axes.get("y").values,s=this._getDomainBbox();"y"===this._projX&&(s=[s[1],s[0],s[3],s[2]]);let u=[s[0],s[0]+360],h=this.getTileSize(),c=n.x*h.x,d=n.y*h.y,f=n.z;var p=new Float64Array(h.y),g=new Uint32Array(h.y);for(let t=0;t<h.y;t++){var m=r.unproject(e().point(c,d+t),f).lat;p[t]=m,g[t]=(0,l.indexOfNearest)(a,m)}for(let n=0;n<h.x;n++){let a=r.unproject(e().point(c+n,d),f).lng;if(a=N(a,u),a<s[0]||a>s[2])continue;let m=(0,l.indexOfNearest)(o,a);for(let e=0;e<h.y;e++){let r=p[e];r<s[1]||r>s[3]||t(e,n,i({y:g[e],x:m}))}}}_isRectilinearGeodeticMap(){let t=this._map.options.crs;return-1!==[e().CRS.EPSG3857,e().CRS.EPSG4326,e().CRS.EPSG3395,e().CRS.Simple].indexOf(t)}_isDomainUsingEllipsoidalCRS(){return this.domain.referencing.some((t=>(0,l.isEllipsoidalCRS)(t.system)))}redraw(){this.getContainer()&&e().GridLayer.prototype.redraw.call(this)}}function N(t,n){return e().Util.wrapNum(t,n,!0)}function I(t){return class extends t{_addMarker(){let t=this.getValue();if(null===t&&!this.showNoData)return;let n=this._getColor(t),{r:i,g:r,b:o}="string"==typeof n?A(n):n,a=this.getLatLng();this._marker=e().circleMarker(a,{fillColor:"rgb("+i+","+r+","+o+")",fillOpacity:1,radius:5,stroke:!0,opacity:1,weight:1,color:"rgb("+Math.round(.7*i)+","+Math.round(.7*r)+","+Math.round(.7*o)+")"}).on("click",(t=>{t.coverage=this.coverage,this.fire("click",t)})).addTo(this._map),this._popup&&this._marker.bindPopup(...this._popup)}_removeMarker(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)}__updateMarker(){let t=this._getColor(val),{r:e,g:n,b:i}="string"==typeof t?A(t):t;this._marker.options.color="rgb("+e+","+n+","+i+")"}bindPopup(...t){this._popup=t,this._marker&&this._marker.bindPopup(...t)}openPopup(){return this._marker.openPopup(),this}closePopup(){return this._marker.closePopup(),this}redraw(){this._marker&&(this.__updateMarker(),this._marker.redraw())}}}const R="black";class D extends(k(I(E(e().Layer)))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),delete n.keys,n.parameter=t.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._defaultColor=n.defaultColor||R,this.showNoData=n.showNoData}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._addMarker(),this.fire("afterAdd")}))}onRemove(){this._removeMarker()}getBounds(){return e().latLngBounds([this.getLatLng()])}getLatLng(){let t=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],i=this.projection.unproject({x:t,y:n});return e().latLng(i)}get coverage(){return this._cov}get parameter(){return this._param}computePaletteExtent(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");let e=this.getValue();return t=L([e,e]),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}getValue(){if(this._param)return this.range.get({})}getValueAt(t,e){if(this.getLatLng().distanceTo(t)<=e)return this.getValue()}_getColor(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return{r:n[e],g:i[e],b:r[e]}}}}class j extends(k(E(e().FeatureGroup))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),delete n.keys,n.parameter=t.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._defaultColor=n.defaultColor||R}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._addTrajectoryLayers(),this.fire("afterAdd")}))}get coverage(){return this._cov}get parameter(){return this._param}computePaletteExtent(t){let e=this.range;if("full"!==t){if("fov"===t)throw this._map.getBounds(),new Error("NOT IMPLEMENTED YET");throw new Error("Unknown extent specification: "+t)}return t=L(t=(0,l.minMaxOfRange)(e)),Promise.resolve(t)}_addTrajectoryLayers(){let t=this.getLatLngs();for(let n=0;n<t.length;n++){let i=new(e().CircleMarker)(t[n],{color:this._getColor(this._getValue(n)),opacity:1,fillOpacity:1});this.addLayer(i)}let n=e().polyline(t,{color:"black",weight:3});this.addLayer(n)}getLatLngs(){let t=this.domain.axes.get("composite"),n=t.coordinates.indexOf(this._projX),i=t.coordinates.indexOf(this._projY),r=[];for(let o=0;o<t.values.length;o++){let a=t.values[o][n],s=t.values[o][i],l=this.projection.unproject({x:a,y:s}),u=e().latLng(l);r.push(u)}return r}getValueAt(t,e){let n,i=this.getLatLngs(),r=i.map((e=>e.distanceTo(t))),o=1/0;for(let t=0;t<i.length;t++){let i=r[t];i<=e&&i<o&&(o=i,n=t)}if(void 0!==n)return this._getValue(n)}_getValue(t){if(this._param)return this.range.get({composite:t})}_getColor(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return`rgb(${n[e]}, ${i[e]}, ${r[e]})`}}redraw(){this.clearLayers(),this._addTrajectoryLayers()}}class z extends(k(I(E(e().Layer)))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),delete n.keys,n.parameter=t.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._axesSubset={t:{coordPref:n.time}},this._defaultColor=n.defaultColor||R,this.showNoData=n.showNoData}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._addMarker(),this.fire("afterAdd")}))}_loadCoverageSubset(){let t=this._axesSubset.t;if(null==t.coordPref)t.idx=t.coord=void 0;else{let e=this.domain.axes.get("t").values.map((t=>t.getTime()));t.idx=(0,l.indexOfNearest)(e,t.coordPref.getTime()),t.coord=e[t.idx]}}onRemove(){this._removeMarker()}getBounds(){return e().latLngBounds([this.getLatLng()])}getLatLng(){let t=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],i=this.projection.unproject({x:t,y:n});return e().latLng(i)}get coverage(){return this._cov}get parameter(){return this._param}set time(t){let e=this.time;this._axesSubset.t.coordPref=t?t.toISOString():void 0,this._loadCoverageSubset(),e!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))}get time(){if(!this._axesSubset.t.coord)return;let t=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(t)}get timeSlices(){return this.domain.axes.get("t").values.map((t=>new Date(t)))}canUsePalette(){return void 0!==this.time}computePaletteExtent(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return t=L(t=(0,l.minMaxOfRange)(this.range)),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}getValue(){if(this._param&&void 0!==this._axesSubset.t.coord)return this.range.get({t:this._axesSubset.t.idx})}getValueAt(t,e){if(this.getLatLng().distanceTo(t)<=e)return this.getValue()}_getColor(){let t=this.getValue();if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return{r:n[e],g:i[e],b:r[e]}}}}function V(t,e,n){this.obj=t,this.left=null,this.right=null,this.parent=n,this.dimension=e}function G(t,e,n){var i,r=this;Array.isArray(t)?this.root=function t(e,i,r){var o,a,s=i%n.length;return 0===e.length?null:1===e.length?new V(e[0],s,r):(e.sort((function(t,e){return t[n[s]]-e[n[s]]})),(a=new V(e[o=Math.floor(e.length/2)],s,r)).left=t(e.slice(0,o),i+1,a),a.right=t(e.slice(o+1),i+1,a),a)}(t,0,null):(i=t,r.root=i,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(r.root)),this.toJSON=function(t){t||(t=this.root);var e=new V(t.obj,t.dimension,null);return t.left&&(e.left=r.toJSON(t.left)),t.right&&(e.right=r.toJSON(t.right)),e},this.insert=function(t){var e,i,r=function e(i,r){if(null===i)return r;var o=n[i.dimension];return t[o]<i.obj[o]?e(i.left,i):e(i.right,i)}(this.root,null);null!==r?(e=new V(t,(r.dimension+1)%n.length,r),i=n[r.dimension],t[i]<r.obj[i]?r.left=e:r.right=e):this.root=new V(t,0,null)},this.remove=function(t){var e;null!==(e=function e(i){if(null===i)return null;if(i.obj===t)return i;var r=n[i.dimension];return t[r]<i.obj[r]?e(i.left):e(i.right)}(r.root))&&function t(e){var i,o,a;function s(t,e){var i,r,o,a,l;return null===t?null:(i=n[e],t.dimension===e?null!==t.left?s(t.left,e):t:(r=t.obj[i],o=s(t.left,e),a=s(t.right,e),l=t,null!==o&&o.obj[i]<r&&(l=o),null!==a&&a.obj[i]<l.obj[i]&&(l=a),l))}if(null===e.left&&null===e.right)return null===e.parent?void(r.root=null):(a=n[e.parent.dimension],void(e.obj[a]<e.parent.obj[a]?e.parent.left=null:e.parent.right=null));null!==e.right?(o=(i=s(e.right,e.dimension)).obj,t(i),e.obj=o):(o=(i=s(e.left,e.dimension)).obj,t(i),e.right=e.left,e.left=null,e.obj=o)}(e)},this.nearest=function(t,i,o){var a,s,l;if(l=new $((function(t){return-t[1]})),o)for(a=0;a<i;a+=1)l.push([null,o]);for(r.root&&function r(o){var a,s,u,h,c=n[o.dimension],d=e(t,o.obj),f={};function p(t,e){l.push([t,e]),l.size()>i&&l.pop()}for(h=0;h<n.length;h+=1)h===o.dimension?f[n[h]]=t[n[h]]:f[n[h]]=o.obj[n[h]];s=e(f,o.obj),null!==o.right||null!==o.left?(r(a=null===o.right?o.left:null===o.left?o.right:t[c]<o.obj[c]?o.left:o.right),(l.size()<i||d<l.peek()[1])&&p(o,d),(l.size()<i||Math.abs(s)<l.peek()[1])&&null!==(u=a===o.left?o.right:o.left)&&r(u)):(l.size()<i||d<l.peek()[1])&&p(o,d)}(r.root),s=[],a=0;a<Math.min(i,l.content.length);a+=1)l.content[a][0]&&s.push([l.content[a][0].obj,l.content[a][1]]);return s},this.balanceFactor=function(){return function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}(r.root)/(Math.log(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(r.root))/Math.log(2))}}function $(t){this.content=[],this.scoreFunction=t}$.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]==t){var i=this.content.pop();return void(n!=e-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r=2*(t+1),o=r-1,a=null;if(o<e){var s=this.content[o],l=this.scoreFunction(s);l<i&&(a=o)}if(r<e){var u=this.content[r];this.scoreFunction(u)<(null==a?i:l)&&(a=r)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};class F extends(k(e().Layer)){constructor(t,n={}){super(),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._covcoll=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._defaultColor=n.defaultColor||R,this._pointClass=n.pointClass||D,this._layerGroup=e().layerGroup(),this._layers=[],this._kdtree=void 0,this.on("paletteChange",(()=>{for(let t of this._layers)t.palette=this.palette})),this.on("paletteExtentChange",(()=>{for(let t of this._layers)t.paletteExtent=this.paletteExtent}))}onAdd(t){this._map=t,this._layerLoadCount=0,this._layerErrors=[];let e={keys:this._param?[this._param.key]:void 0,defaultColor:this._defaultColor,palette:this.palette,paletteExtent:this.paletteExtent};if(this.options.pointOptionsFn){let t=this.options.pointOptionsFn();for(let n in t)e[n]=t[n]}for(let t of this._covcoll.coverages){let n=new this._pointClass(t,e);if(this._attachListeners(n,t),this._layerGroup.addLayer(n),this._layers.push(n),n.load(),this._popupFn){let t=this._popupFn(n.coverage);n.bindPopup(t)}}}onRemove(t){t.removeLayer(this._layerGroup),this._layerGroup=e().layerGroup(),this._layers=[]}bindPopupEach(t){this._popupFn=t}_attachListeners(t,e){t.once("dataLoad",(()=>{++this._layerLoadCount,this._fireIfOnAddDone()})).once("error",(t=>{this._layerErrors.push(t)})).on("click",(t=>{t.coverage=e,this.fire("click",t)}))}_fireIfOnAddDone(){this._layerLoadCount===this._layers.length&&(this._layerErrors.length>0?this.fire("error",{errors:this._layerErrors}):(this._initKdtree(),this.initializePalette().then((()=>{this._layerGroup.addTo(this._map),this.fire("afterAdd")}))))}_initKdtree(){let t=this._layers.map((t=>{let e=t.getLatLng();return e.layer=t,e}));this._kdtree=new G(t,((t,n)=>e().LatLng.prototype.distanceTo.call(t,n)),["lat","lng"])}getBounds(){return e().latLngBounds(this._layers.map((t=>t.getLatLng())))}getValueAt(t,e){let n=this._kdtree.nearest(t,1,e);if(n.length>0)return n[0][0].layer.getValue()}get parameter(){return this._param}computePaletteExtent(t){if(!this._param)throw new Error("palette extent cannot be set when no parameter has been chosen");let e;if("full"===t)e=this._layers;else{if("fov"!==t)throw new Error("Unsupported: "+t);{let t=this._map.getBounds();e=this._layers.filter((e=>t.contains(e.getLatLng())))}}let n=1/0,i=-1/0;for(let t of e){let e=t.getValue();null!=e&&(n=Math.min(n,e),i=Math.max(i,e))}return t=L([n,i]),Promise.resolve(t)}redraw(){for(let t of this._layers)t.redraw()}}class B extends(k(I(E(e().Layer)))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),delete n.keys,n.parameter=t.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._axesSubset={z:{coordPref:n.vertical}},this._defaultColor=n.defaultColor||R,this.showNoData=n.showNoData}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._addMarker(),this.fire("afterAdd")}))}_loadCoverageSubset(){let t=this._axesSubset.z;if(null==t.coordPref)t.idx=t.coord=void 0;else{let e=this.domain.axes.get("z").values;t.idx=(0,l.indexOfNearest)(e,t.coordPref),t.coord=e[t.idx]}}onRemove(){this._removeMarker()}getBounds(){return e().latLngBounds([this.getLatLng()])}getLatLng(){let t=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],i=this.projection.unproject({x:t,y:n});return e().latLng(i)}get coverage(){return this._cov}get parameter(){return this._param}get vertical(){return this._axesSubset.z.coord}set vertical(t){this._axesSubset.z.coordPref=t,this._loadCoverageSubset(),this.redraw(),this.fire("axisChange",{axis:"vertical"})}get verticalSlices(){let t=this.domain.axes.get("z").values;return ArrayBuffer.isView(t)&&(t=[...t]),t}canUsePalette(){return void 0!==this.vertical}computePaletteExtent(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return t=L(t=(0,l.minMaxOfRange)(this.range)),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}getValue(){if(this._param&&void 0!==this._axesSubset.z.coord)return this.range.get({z:this._axesSubset.z.idx})}getValueAt(t,e){if(this.getLatLng().distanceTo(t)<=e)return this.getValue()}_getColor(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return{r:n[e],g:i[e],b:r[e]}}}}class H extends(k(E(e().Layer))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),n.parameter=t.parameters.keys().next().value,delete n.keys),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._defaultColor=n.defaultColor||"black"}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._unproject(),this._addPolygons(),this._pointInPolygonPreprocess(),this.fire("afterAdd")}))}_unproject(){let t=this.projection.unproject,e=this.domain.axes.get("composite"),n=e.coordinates.indexOf(this._projX),i=e.coordinates.indexOf(this._projY);this._polygonsLonLat=e.values.map((e=>e.map((e=>e.map((e=>{let{lat:r,lon:o}=t({x:e[n],y:e[i]});return[o,r]}))))))}onRemove(t){this._removePolygons()}getBounds(){return this._geojson.getBounds()}getLatLng(){return this.getBounds().getCenter()}get coverage(){return this._cov}get parameter(){return this._param}computePaletteExtent(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return t=L(t=(0,l.minMaxOfRange)(this.range)),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}_pointInPolygonPreprocess(){let t=this._polygonsLonLat;t.forEach((t=>(0,l.ensureClockwisePolygon)(t,!1))),this._pointInPolygons=(0,l.getPointInPolygonsFn)(t)}_addPolygons(){let t=this._polygonsLonLat,n=[];for(let e=0;e<t.length;e++)n.push({type:"Feature",properties:{index:e,color:this._getColor(this._getValue(e))},geometry:{type:"Polygon",coordinates:t[e]}});this._geojson=e().geoJson(n,{style:t=>({color:t.properties.color,fillOpacity:1,stroke:!1}),onEachFeature:(t,e)=>{e.on("click",(e=>{e.index=t.properties.index,this.fire("click",e)}))}}),this._geojson.addTo(this._map)}_removePolygons(){this._map.removeLayer(this._geojson),delete this._geojson}_getValue(t){if(this._param)return this.range.get({composite:t})}getValueAt(t){let e=this._pointInPolygons([t.lng,t.lat]);if(e>=0)return this._getValue(e)}_getColor(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return`rgb(${n[e]}, ${i[e]}, ${r[e]})`}}_updatePolygons(){this._removePolygons(),this._addPolygons()}redraw(){this._updatePolygons(),this._geojson.redraw()}}class U extends(k(E(e().Layer))){constructor(t,n){super(),(0,l.isDomain)(t)&&(t=(0,l.fromDomain)(t),delete n.keys,n.parameter=t.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),e().Util.setOptions(this,n),this._cov=t;let i=n.keys?n.keys[0]:n.parameter;this._param=i?t.parameters.get(i):null,this._axesSubset={t:{coordPref:n.time}},this._defaultColor=n.defaultColor||R}onAdd(t){this._map=t,this.load().then((()=>this.initializePalette())).then((()=>{this._unproject(),this._addPolygon(),this._pointInPolygonPreprocess(),this.fire("afterAdd")}))}_unproject(){let t=this.projection.unproject,e=this.domain.axes.get("composite"),n=e.coordinates.indexOf(this._projX),i=e.coordinates.indexOf(this._projY);this._polygonLonLat=e.values[0].map((e=>e.map((e=>{let{lat:r,lon:o}=t({x:e[n],y:e[i]});return[o,r]}))))}_loadCoverageSubset(){let t=this._axesSubset.t;if(null==t.coordPref)t.idx=t.coord=void 0;else{let e=this.domain.axes.get("t").values.map((t=>t.getTime()));t.idx=(0,l.indexOfNearest)(e,t.coordPref.getTime()),t.coord=e[t.idx]}}onRemove(){this._removePolygon()}getBounds(){return this._geojson.getBounds()}getLatLng(){return this.getBounds().getCenter()}bindPopup(...t){return this._popup=t,this._geojson&&this._geojson.bindPopup(...t),this}openPopup(){return this._geojson.openPopup(),this}closePopup(){return this._geojson.closePopup(),this}get coverage(){return this._cov}get parameter(){return this._param}set time(t){let e=this.time;this._axesSubset.t.coordPref=t?t.toISOString():void 0,this._loadCoverageSubset(),e!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))}get time(){if(!this._axesSubset.t.coord)return;let t=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(t)}get timeSlices(){return this.domain.axes.get("t").values.map((t=>new Date(t)))}canUsePalette(){return void 0!==this.time}computePaletteExtent(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return t=L(t=(0,l.minMaxOfRange)(this.range)),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}_pointInPolygonPreprocess(){let t=this._polygonLonLat;(0,l.ensureClockwisePolygon)(t,!1);let e=(0,l.getPointInPolygonsFn)([t]);this._pointInPolygon=t=>-1!==e(t)}_addPolygon(){let t=this._polygonLonLat,n={type:"Feature",properties:{color:this._getColor(this.getValue())},geometry:{type:"Polygon",coordinates:t}};this._geojson=e().geoJson(n,{style:t=>({color:t.properties.color,fillOpacity:1,stroke:!1}),onEachFeature:(t,e)=>{e.on("click",(t=>this.fire("click",t)))}}),this._popup&&this._geojson.bindPopup(...this._popup),this._geojson.addTo(this._map)}_removePolygon(){this._map.removeLayer(this._geojson),delete this._geojson}getValue(){if(this._param&&void 0!==this._axesSubset.t.coord)return this.range.get({t:this._axesSubset.t.idx})}getValueAt(t){if(!t)throw new Error("latlng parameter missing");if(this._pointInPolygon([t.lng,t.lat]))return this.getValue()}_getColor(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;{let e=this.getPaletteIndex(t),{red:n,green:i,blue:r}=this.palette;return`rgb(${n[e]}, ${i[e]}, ${r[e]})`}}_updatePolygon(){this._removePolygon(),this._addPolygon()}redraw(){this._updatePolygon(),this._geojson.redraw()}}const W="https://covjson.org/def/domainTypes#",q=W+"Point",X=W+"PointSeries",Z=W+"VerticalProfile",Y=W+"PolygonSeries",K={"https://covjson.org/def/domainTypes#Grid":O,[q]:D,[X]:z,[Z]:B,"https://covjson.org/def/domainTypes#Trajectory":j,"https://covjson.org/def/domainTypes#MultiPolygon":H,[Y]:U},J={[q]:F,[Z]:class extends F{constructor(t,e){e.pointClass=B,super(t,e),e.pointOptionsFn=()=>({vertical:this._vertical}),this._vertical=e.vertical}set vertical(t){this._vertical=t;for(let e of this._layers)e.vertical=t}canUsePalette(){return void 0!==this._vertical}}};function Q(t){return t.type!==l.COVERAGE&&t.type!==l.DOMAIN||!(t.domainType in K)?t.type===l.COVERAGECOLLECTION&&t.domainType in J?J[t.domainType]:void 0:K[t.domainType]}function tt(t,e){if(t.id&&e.id&&t.id===e.id)return!0;if(!t.observedProperty.id||!e.observedProperty.id)return!1;if(t.observedProperty.id!==e.observedProperty.id)return!1;if(t.unit&&e.unit){if(t.unit.id&&e.unit.id&&t.unit.id!==e.unit.id)return!1;if(t.unit.symbol&&e.unit.symbol&&t.unit.symbol!==e.unit.symbol)return!1}else if(t.unit||e.unit)return!1;if(t.categories&&e.categories){if(t.categories.length!==e.categories.length)return!1;let n=t=>!t.id;if(t.categories.some(n)||e.categories.some(n))return!1;for(let n of t.categories)if(!e.categories.some((t=>n.id===t.id)))return!1}else if(t.categories||e.categories)return!1;return!0}class et extends(m(e().Class)){constructor(t){super(),this._syncProps=t.syncProperties||{},this._match=t.match||tt,this._paramLayers=new Map,this._layerListeners=new Map,this._propSyncing=new Set}addLayer(t){if(!t.parameter)return void console.log("layer has no parameter, skipping parameter sync");let e,n=Array.from(this._paramLayers.keys()).find((e=>this._match(e,t.parameter)));n?(e=n,this._paramLayers.get(e).add(t),this._syncProperties(e)):(e=t.parameter,this._paramLayers.set(e,new Set([t]))),this._registerLayerListeners(t,e),n||this.fire("parameterAdd",{syncLayer:new nt(e,this)})}pause(){this.paused=!0}resume(t){if(this.paused=!1,t)for(let t of this._paramLayers.keys())this._syncProperties(t)}_removeLayer(t,e){for(let[e,n]of this._layerListeners.get(t))t.off(e,n);this._layerListeners.delete(t),this._paramLayers.get(e).delete(t),0===this._paramLayers.get(e).size&&(this._paramLayers.delete(e),this.fire("_parameterRemove",{param:e}))}_registerLayerListeners(t,e){let n=new Map([["remove",()=>this._removeLayer(t,e)]]);for(let t of Object.keys(this._syncProps)){let i=t+"Change";n.set(i,(()=>this._syncProperty(e,t)))}for(let[e,i]of n)t.on(e,i);this._layerListeners.set(t,n)}_syncProperties(t){for(let e of Object.keys(this._syncProps))this._syncProperty(t,e)}_syncProperty(t,e){if(this.paused||this._propSyncing.has(e))return;let n=this._syncProps[e],i=[...this._paramLayers.get(t)].map((t=>t[e])).reduce(n);this._propSyncing.add(e);for(let n of this._paramLayers.get(t))n[e]=i;this._propSyncing.delete(e),this.fire("_syncPropChange",{param:t,prop:e})}}class nt extends(m(e().Class)){constructor(t,e){super(),this._param=t,e.on("_parameterRemove",(e=>{e.param===t&&this.fire("remove")})),e.on("_syncPropChange",(e=>{e.param===t&&this.fire(e.prop+"Change")}));let n=()=>e._paramLayers.get(t);for(let t of Object.keys(e._syncProps))Object.defineProperty(this,t,{get:()=>n().values().next().value[t],set:i=>{e._propSyncing.add(t);for(let e of n())e[t]=i;e._propSyncing.delete(t),this.fire(t+"Change")},enumerable:!0})}get parameter(){return this._param}}var it=n(8399),rt=n.n(it);class ot extends e().Popup{constructor(t,e={}){e.maxWidth=e.maxWidth||350,super(e),this._covs=Array.isArray(t)?t:[t],this._language=e.language,this._precision=e.precision||4,this._labels=e.labels?e.labels:new Array(this._covs.length),e.parameters&&(e.parameters=e.keys);let n=[];if(e.keys)n=Array.isArray(e.keys[0])?e.keys:e.keys.map((t=>[t]));else for(let t=0;t<this._covs.length;t++)for(let e of this._covs[t].parameters.keys()){let i=new Array(this._covs.length);i[t]=e,n.push(i)}if(n=n.filter((t=>!t.every((t=>!t)))),n.some((t=>t.length!==this._covs.length)))throw new Error("Length of each parameter group must match number of coverages");this._paramKeyGroups=n,this._paramKeys=new Map;for(let t=0;t<this._covs.length;t++){let e=this._paramKeyGroups.map((e=>e[t])).filter((t=>t));this._paramKeys.set(this._covs[t],e)}}onAdd(t){super.onAdd(t),t.fire("dataloading");let e=Promise.all(this._covs.map((t=>t.loadDomain()))),n=Promise.all(this._covs.map((t=>t.loadRanges(this._paramKeys.get(t)))));Promise.all([e,n]).then((([e,n])=>{this._domains=e,this._ranges=n,this._addPlotToPopup(),this.fire("dataLoad"),this.fire("afterAdd"),t.fire("dataload")})).catch((e=>{console.error(e),this.fire("error",e),t.fire("dataload")}))}_addPlotToPopup(){let t=this._paramKeyGroups[0],e=this._getPlotElement(t),n=document.createElement("div");if(this._paramKeyGroups.length>1){let t=document.createElement("select");for(let[e,n]of this._paramKeyGroups.map(((t,e)=>[t,e]))){let i=this._getRefParam(e),r=document.createElement("option");r.value=n,r.text=(0,l.getLanguageString)(i.observedProperty.label,this._language),t.appendChild(r)}t.addEventListener("change",(()=>{n.removeChild(e);let i=this._paramKeyGroups[parseInt(t.value)];e=this._getPlotElement(i),n.appendChild(e)})),n.appendChild(t)}n.appendChild(e),this.setContent(n)}_getRefParam(t){let e=at(this._covs,t),[n,i]=e.filter((([,t])=>t))[0];return n.parameters.get(i)}_getPlotElement(t){let e=this._domains[0],n=at(this._covs,t),i=this._getRefParam(t),r="Vertical",o="",a=(0,l.getReferenceObject)(e,"z");if(a&&1===a.coordinates.length){let t=a.system;if(t.cs&&(t.cs.axes||t.cs.csAxes)){let e=t.cs.axes?t.cs.axes[0]:t.cs.csAxes[0];o=(0,l.stringifyUnit)(e.unit,this._language),e.name&&(r=(0,l.getLanguageString)(e.name,this._language))}}let s=r;o&&(s+=" ("+o+")");let u=(0,l.stringifyUnit)(i.unit,this._language),h=(0,l.getLanguageString)(i.observedProperty.label,this._language),c={},d=[],f={};for(let t=0;t<this._covs.length;t++){let e=n[t][1];if(!e)continue;let r="x"+t,o=i.key+t;f[o]=this._labels[t]?this._labels[t]:h,c[o]=r;let a=this._domains[t].axes.get("z").values,s=this._ranges[t].get(e),l=[r],u=[o];for(let t=0;t<a.length;t++){let e=s.get({z:t});if(null===e)continue;let n=a[t];l.push(n),u.push(e)}d.push(l),d.push(u)}let p=document.createElement("div");return p.style.width="350px",p.style.height="300px",rt().generate({bindto:p,data:{xs:c,columns:d,names:f},axis:{rotated:!0,x:{tick:{count:10,format:t=>t.toPrecision(this._precision)},label:{text:s,position:"outer-center"}},y:{tick:{count:7,format:t=>t.toPrecision(this._precision)},label:{text:h+(u?" ("+u+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{title:t=>r+": "+t.toPrecision(this._precision)+" "+o,value:(t,e,n)=>t.toPrecision(this._precision)+" "+u}},zoom:{enabled:!0,rescale:!0},size:{height:300,width:350}}),p}}function at(t,e){return t.map(((n,i)=>[t[i],e[i]]))}class st extends e().Popup{constructor(t,e={}){e.maxWidth=e.maxWidth||350,super(e),this._covs=Array.isArray(t)?t:[t],this._language=e.language,this._precision=e.precision||4,this._labels=e.labels?e.labels:new Array(this._covs.length),e.parameters&&(e.parameters=e.keys);let n=[];if(e.keys)n=Array.isArray(e.keys[0])?e.keys:e.keys.map((t=>[t]));else for(let t=0;t<this._covs.length;t++)for(let e of this._covs[t].parameters.keys()){let i=new Array(this._covs.length);i[t]=e,n.push(i)}if(n=n.filter((t=>!t.every((t=>!t)))),n.some((t=>t.length!==this._covs.length)))throw new Error("Length of each parameter group must match number of coverages");this._paramKeyGroups=n,this._paramKeys=new Map;for(let t=0;t<this._covs.length;t++){let e=this._paramKeyGroups.map((e=>e[t])).filter((t=>t));this._paramKeys.set(this._covs[t],e)}}onAdd(t){super.onAdd(t),t.fire("dataloading");let e=Promise.all(this._covs.map((t=>t.loadDomain()))),n=Promise.all(this._covs.map((t=>t.loadRanges(this._paramKeys.get(t)))));Promise.all([e,n]).then((([e,n])=>{this._domains=e,this._ranges=n,this._addPlotToPopup(),this.fire("dataLoad"),this.fire("afterAdd"),t.fire("dataload")})).catch((e=>{console.error(e),this.fire("error",e),t.fire("dataload")}))}_addPlotToPopup(){let t=this._paramKeyGroups[0],e=this._getPlotElement(t),n=document.createElement("div");if(this._paramKeyGroups.length>1){let t=document.createElement("select");for(let[e,n]of this._paramKeyGroups.map(((t,e)=>[t,e]))){let i=this._getRefParam(e),r=document.createElement("option");r.value=n,r.text=(0,l.getLanguageString)(i.observedProperty.label,this._language),t.appendChild(r)}t.addEventListener("change",(()=>{n.removeChild(e);let i=this._paramKeyGroups[parseInt(t.value)];e=this._getPlotElement(i),n.appendChild(e)})),n.appendChild(t)}n.appendChild(e),this.setContent(n)}_getRefParam(t){let e=lt(this._covs,t),[n,i]=e.filter((([,t])=>t))[0];return n.parameters.get(i)}_getPlotElement(t){this._domains[0];let e=lt(this._covs,t),n=this._getRefParam(t),i=(0,l.stringifyUnit)(n.unit,this._language),r=(0,l.getLanguageString)(n.observedProperty.label,this._language),o={},a=[],s={};for(let t=0;t<this._covs.length;t++){let i=e[t][1];if(!i)continue;let l="x"+t,u=n.key+t;s[u]=this._labels[t]?this._labels[t]:r,o[u]=l;let h=this._domains[t].axes.get("t").values,c=this._ranges[t].get(i),d=[l],f=[u];for(let t=0;t<h.length;t++){let e=c.get({t});if(null===e)continue;let n=new Date(h[t]);d.push(n),f.push(e)}a.push(d),a.push(f)}let u=document.createElement("div");return u.style.width=this.options.maxWidth+"px",u.style.height="300px",rt().generate({bindto:u,data:{xs:o,columns:a,names:s},axis:{x:{type:"timeseries",tick:{format:this.options.timeFormat},label:{text:"Time",position:"outer-center"}},y:{tick:{count:7,format:t=>t.toPrecision(this._precision)},label:{text:r+(i?" ("+i+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{value:(t,e,n)=>t.toPrecision(this._precision)+" "+i}},zoom:{enabled:!0,rescale:!0},size:{height:300,width:this.options.maxWidth}}),u}}function lt(t,e){return t.map(((n,i)=>[t[i],e[i]]))}class ut extends e().Popup{constructor(t,e){super(t,e);let n=this.options.layers||[];this._maxDistanceForPointsInPx=this.options.maxDistanceForPointsInPx||20,this.coverageLayers=new Set(n.filter((t=>t.getValueAt)))}addCoverageLayer(t){return t.getValueAt?(this.coverageLayers.add(t),this.updateData(),this):this}removeCoverageLayer(t){return this.coverageLayers.delete(t),this.updateData(),this}onAdd(t){this._map=t,super.onAdd(t),this.updateData()}onRemove(t){super.onRemove(t),this._map=null}setLatLng(t){return super.setLatLng(t),this.updateData(),this}hasData(){return this._hasData}updateData(){if(!this._map)return;let t="",e=this.getLatLng();for(let n of this.coverageLayers){let i=ht(this._map)*this._maxDistanceForPointsInPx,r=n.getValueAt(e,i);if(null==r)continue;let o=n.parameter,a=o.observedProperty.categories?"":(0,l.stringifyUnit)(o.unit);if(o.categoryEncoding){let t=(0,l.getCategory)(o,r);r=(0,l.getLanguageString)(t.label)}t+="<div><strong>"+(0,l.getLanguageString)(o.observedProperty.label)+"</strong>: "+r+" "+a+"</div>"}return t||(this._hasData=!1,t="No data."),this._hasData=!0,this.setContent(t),this}}function ht(t){let e=t.getBounds(),n=e.getCenter().lat;return 6378137*Math.PI*Math.cos(n*Math.PI/180)*(e.getNorthEast().lng-e.getSouthWest().lng)/180/t.getSize().x}class ct extends(function(t){return class extends t{constructor(t={},e){t.className=t.className||"leaflet-popup-draggable",super(t,e)}onAdd(t){super.onAdd(t),this._draggable=new(e().Draggable)(this._container,this._wrapper),this._draggable.enable(),this._draggable.on("drag",(n=>{let i=e().DomUtil.getPosition(this._wrapper.parentNode),r=t.layerPointToLatLng(i);this.setLatLng(r),this.fire("drag",n)})),this._draggable.on("dragstart predrag dragend",(t=>this.fire(t.type,t)))}onRemove(t){this._draggable.disable(),super.onRemove(t)}}}(ut)){}class dt extends e().Class{constructor(t){super(),this.container=t.container;let e=[{title:"Examples",children:t.examples.map((({title:t,url:e})=>({title:t,action:()=>{this.fire("requestload",{url:e})}})))}];this._createMenu(e)}_createMenu(t){let e=document.createElement("div");e.className="inline",this.container.appendChild(e);let n=0;for(let{title:i,action:r,children:o}of t){let t=document.createElement("div");t.className="item",t.setAttribute("tabindex",n),e.appendChild(t);let a=document.createElement("a");if(t.appendChild(a),a.className="parent",a.innerHTML=" "+i,r&&a.addEventListener("click",r),o){let e=document.createElement("div");t.appendChild(e),e.className="children";for(let t of o){let n=document.createElement("a");e.appendChild(n),n.innerHTML=t.title,n.addEventListener("click",t.action)}}++n}}}dt.include(e().Mixin.Events);var ft=n(1801),pt=n.n(ft),gt=n(4631),mt=n.n(gt),vt=(n(6876),n(3256),n(5615),n(4328),n(9592)),yt=n.n(vt),_t=n(1581),xt=n.n(_t),wt=n(4216);let bt='\n  <button class="collapse-button" title="Collapse"><span class="fa fa-caret-up"></span></button>\n  <div class="buttons">\n    <button title="JSON Source" id="json-pane-button" class="active"><span class="fa fa-code"></span><span> JSON</span></button> \n    <button title="Help" id="help-pane-button"><span class="fa fa-question"></span><span> Help</span></button>\n  </div>',St="Help text...";class Mt extends e().Class{constructor(t){super(),this.container=t.container,this._globalErrors=[],this._createMenu(),this._createJSONEditor(),this._createHelpPane(),t.schemaUrl&&this.loadJsonSchema(t.schemaUrl),t.url&&this.loadFromUrl(t.url)}_createMenu(){let t=document.createElement("div");t.className="top",this.container.appendChild(t),t.innerHTML=bt;let e=document.getElementById("json-pane-button");e.addEventListener("click",(()=>{this.helpPane.style.display="none",this.cmPane.style.display="block",e.className="active",n.className="",this.cm.refresh()}));let n=document.getElementById("help-pane-button");n.addEventListener("click",(()=>{this.helpPane.style.display="block",this.cmPane.style.display="none",e.className="",n.className="active"}));let i=t.querySelector(".collapse-button");i.addEventListener("click",(()=>{const t="fullscreen"===document.body.className;document.body.className=t?"":"fullscreen";const e=i.querySelector("span");t?e.classList.replace("fa-caret-down","fa-caret-up"):e.classList.replace("fa-caret-up","fa-caret-down"),this.fire("resize"),this.cm.refresh()}))}_createHelpPane(){let t=document.createElement("div");t.className="pane",t.style.display="none",this.container.appendChild(t),this.helpPane=t,t.innerHTML=St}_createJSONEditor(){let t=document.createElement("div");t.className="pane",this.container.appendChild(t),this.cmPane=t;let e=mt()(t,{lineNumbers:!0,matchBrackets:!0,scrollPastEnd:!0,theme:"eclipse",mode:"application/json",gutters:["CodeMirror-lint-markers"],lint:this._getAnnotations.bind(this)});this.cm=e,e.on("change",(()=>{let t=e.getValue();0==this._getAnnotations(t).length&&this.fire("change",{text:t})})),e.on("beforeChange",((t,e)=>{if("paste"!==e.origin)return;if(0!==e.from.line||0!==e.from.ch)return;if(e.to.line!==t.lastLine())return;let n=e.text.join("\n");n=Pt(n),e.text=n.split("\n")}))}_getAnnotations(t){let e=[];const n=yt().parser,i=n.parseError;n.parseError=(t,n)=>{var i=n.loc;e.push({from:mt().Pos(i.first_line-1,i.first_column),to:mt().Pos(i.last_line-1,i.last_column),message:t})};try{n.parse(t)}catch(t){}if(n.parseError=i,e.length)return e;if(this.ajvValidate){const n=JSON.parse(t);if(!this.ajvValidate(n)){const n=wt.parse(t);for(const t of this.ajvValidate.errors){const i=n.pointers[t.instancePath];let r=i.value.line,o=i.valueEnd.line,a=i.value.column,s=i.valueEnd.column;const l=this.ajv.errorsText([t],{dataVar:""});e.push({message:l,from:mt().Pos(r,a),to:mt().Pos(o,s)})}}}if(this._globalErrors.length){let t=this._globalErrors[0];this.clearError(),e.push({message:t,from:mt().Pos(0,0),to:mt().Pos(0,0)})}return e=function(t){const e=[];for(const n of t){const t=n.message;/must match ".+" schema/.test(t)||/must match exactly one schema in/.test(t)||e.push(n)}for(let t=0;t<e.length;t++){const n=e[t];for(let i=0;i<e.length;i++){if(t==i)continue;const r=e[i];if(n.from.line<r.from.line&&n.to.line>r.to.line){e.splice(t,1),t--;break}}}return 0==e.length?t:e}(e),e}set json(t){this.cm.setValue(t)}async loadFromUrl(t){let e;try{const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);e=await n.text()}catch(e){return void window.alert("Download error: "+e.message+"\n\n"+t)}e=Pt(e),this.json=e}setError(t){this._globalErrors=[t]}clearError(){this._globalErrors=[]}async loadJsonSchema(t){try{const e=await fetch(t);if(!e.ok){const t=`${e.status} ${e.statusText}`;throw new Error(t)}const n=await e.json();this.setJsonSchema(n)}catch(e){const n=`Error loading JSON schema: ${e.message}\nURL: ${t}`;console.error(e),window.alert(n)}}setJsonSchema(t){this.ajv=new(xt())({allErrors:!0}),this.ajvValidate=this.ajv.compile(t)}}function Pt(t){let e;if(t.length>102400)return t;if((t.match(/\n/g)||"").length>2)return t;try{e=JSON.parse(t)}catch(e){return t}return function(t){return pt()(t,{indent:2,maxLength:60})}(e)}Mt.include(e().Mixin.Events);const Tt=t=>`coverages/${t}.covjson`,Ct=[{title:"Grid",url:Tt("grid")},{title:"Grid (Categorical)",url:Tt("grid-categorical")},{title:"Grid (Tiled)",url:Tt("grid-tiled")},{title:"Trajectory",url:Tt("trajectory")},{title:"Profile",url:Tt("profile")},{title:"PointSeries",url:Tt("pointseries")},{title:"Point",url:Tt("point")},{title:"Point Collection",url:Tt("point-collection")},{title:"Profile Collection",url:Tt("profile-collection")},{title:"MultiPolygon",url:Tt("multipolygon")},{title:"PolygonSeries",url:Tt("polygonseries")},{title:"Grid (Domain)",url:Tt("grid-domain")},{title:"Grid BNG (Domain)",url:Tt("grid-domain-bng")}],At=document.querySelector(".playground");At.innerHTML='\n  <div class="map"></div>\n  <div class="right"></div>\n  <div class="file-bar"></div>\n  ';let Lt=At.querySelector(".map"),kt=e().map(Lt,{loadingControl:!0,center:[10,0],zoom:2});e().control.scale().addTo(kt);const Et={Map:e().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}).addTo(kt),Satellite:e().bingLayer("AjAVy4nLckUAUX7gML0AAT4ym6XLYoGCn_6H9mi5UY9fuZyWx3N3wIDcIx5VESHP",{imagerySet:"Aerial"})};let Ot,Nt=e().control.layers(Et,{},{collapsed:!1}).addTo(kt),It=new et({syncProperties:{palette:(t,e)=>t,paletteExtent:(t,e)=>t&&e?[Math.min(t[0],e[0]),Math.max(t[1],e[1])]:null}}).on("parameterAdd",(t=>{let e=t.syncLayer;e.palette&&function(t,e={}){return e.position=e.position||"bottomright",t.parameter.observedProperty.categories?new c(t,e):new p(t,e)}(e,{position:"bottomright"}).addTo(kt)})),Rt=new Set,Dt=new Set;function jt(t){let n=t.map((t=>t.getBounds())),i=e().latLngBounds(n),r={padding:e().point(10,10)};i.getWest()===i.getEast()&&i.getSouth()===i.getNorth()&&(r.maxZoom=5),kt.fitBounds(i,r)}function zt(t){return t.domainType===Z}function Vt(t){return t.domainType===X||t.domainType===Y}function Gt(t,e){let n=function(t,e){let n=Q(t);if(!n){let e=t.type===l.COVERAGECOLLECTION?"collection ":"";throw new Error(`No ${e}layer class found for domainType=${t.domainType}`)}return new n(t,e)}(t,e).on("afterAdd",(e=>{let n=e.target;console.log("layer added:",n),It.addLayer(n),t.coverages||(n.time&&new y(n).addTo(kt),n.vertical&&new S(n).addTo(kt))})).on("dataLoad",(()=>kt.fire("dataload"))).on("dataLoading",(()=>kt.fire("dataloading"))).on("error",(t=>kt.fire("error",{error:t.error})));return n.on("axisChange",(()=>{n.paletteExtent="subset"})),t.coverages?zt(t)?n.bindPopupEach((t=>new ot(t))):Vt(t)&&n.bindPopupEach((t=>new st(t))):zt(t)?n.bindPopup(new ot(t)):Vt(t)&&n.bindPopup(new st(t)),n}function $t(){let t=window.location.hash.substring(1);if(t.startsWith("http"))return{url:t};let e=new URLSearchParams(t);return{url:e.get("url"),schema:e.get("schema")}}const Ft=$t(),Bt=Ft.schema||"https://covjson.org/schema/dev/coveragejson.json",Ht=Ft.url||Ct[0].url;Ot=new Mt({container:At.querySelector(".right"),schemaUrl:Bt,url:Ht}).on("change",(t=>{let n;try{n=JSON.parse(t.text)}catch(t){return}!function(t,n={}){Ot.clearError(),function(){for(let t of Rt)if(Nt.removeLayer(t),kt.hasLayer(t))try{kt.removeLayer(t)}catch(t){}Rt=new Set}(),kt.fire("dataloading"),i.ij(t).then((t=>{let i;l.isDomain(t)&&(t=l.fromDomain(t)),kt.fire("dataload"),console.log("Coverage loaded: ",t);let r=Q(t);if(t.coverages&&!r){if(!t.parameters)throw new Error('Playground: only coverage collections with a "parameters" property are supported');for(let n of t.parameters.keys()){let r=t.coverages.filter((t=>t.parameters.has(n))).map((t=>Gt(t,{keys:[n]})));r.forEach((t=>kt.fire("covlayercreate",{layer:t})));let o=e().layerGroup(r);if(Rt.add(o),Nt.addOverlay(o,n),!i){i=o;let t=0;for(let e of r)e.on("afterAdd",(()=>{Dt.add(e),++t,t===r.length&&(jt(r),kt.fire("covlayeradd",{layer:e}))}))}}}else{if(!r)throw new Error("Playground: unsupported or missing domain type");for(let e of t.parameters.keys()){let n=Gt(t,{keys:[e]});kt.fire("covlayercreate",{layer:n}),Rt.add(n),Nt.addOverlay(n,e),i||(i=n,n.on("afterAdd",(()=>{jt([n]),t.coverages||(zt(t)||Vt(t))&&n.openPopup()}))),n.on("afterAdd",(()=>{Dt.add(n),kt.fire("covlayeradd",{layer:n})})).on("remove",(()=>{Dt.delete(n),kt.fire("covlayerremove",{layer:n})}))}}n.display&&i&&kt.addLayer(i)})).catch((t=>{kt.fire("dataload"),console.log(t),Ot.setError(t.message)}))}(n,{display:!0})})).on("resize",(()=>{kt.invalidateSize()}));let Ut={};window.addEventListener("hashchange",(async function(){const t=$t();t.schema&&Ut.schema!=t.schema&&await Ot.loadJsonSchema(t.schema),t.url&&Ut.url!=t.url&&await Ot.loadFromUrl(t.url),Ut=t}),!1),new dt({container:At.querySelector(".file-bar"),examples:Ct}).on("requestload",(({url:t})=>{kt.hasLayer(Wt)&&kt.closePopup(Wt),Ot.loadFromUrl(t)})),window.api={map:kt,layers:Dt};let Wt=new ct({className:"leaflet-popup-draggable",layers:[...Dt]});kt.on("singleclick",(t=>{Wt.setLatLng(t.latlng).openOn(kt)})),kt.on("covlayercreate",(t=>{t.layer.getPopup()||t.layer.bindPopup(Wt)})),kt.on("covlayeradd",(t=>{Wt.addCoverageLayer(t.layer)})),kt.on("covlayerremove",(t=>{Wt.removeCoverageLayer(t.layer)})),kt.on("error",(t=>{t.error?.message&&Ot.setError(t.error.message)}))})()})();